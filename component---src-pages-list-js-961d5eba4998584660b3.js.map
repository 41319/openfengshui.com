{"version":3,"file":"component---src-pages-list-js-961d5eba4998584660b3.js","mappings":"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","sources":["webpack://gatsby-starter-default/./src/pages/list.js"],"sourcesContent":["import * as React from \"react\"\nimport { Link } from \"gatsby\"\nimport { StaticImage } from \"gatsby-plugin-image\"\nimport Card from \"../components/Card\"\nimport Layout from \"../components/layout\"\nimport Dropdown from \"../components/Dropdown\"\nimport Seo from \"../components/seo\"\nimport { Form, Button } from '@themesberg/react-bootstrap';\nimport Grid from '../components/Grid'\nimport { navigate } from \"gatsby\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faBell, faHome, faEnvelopeOpen, faSearch, faSignOutAlt, faUserShield, faAngleDown, faEye, faClosedCaptioning } from \"@fortawesome/free-solid-svg-icons\";\nimport Parse from '../vendor/Parse'\nimport { useLocation } from '@reach/router';\nimport NumberTable from '../components/NumberTable'\nimport { Modal } from '@themesberg/react-bootstrap';\nimport useAuth from \"../hooks/userAuth\";\nimport DatePicker from \"../components/DatePicker\"\nconst { useState } = React;\n\nconst Profile1 = \"images/2021-01-30.jpg\";\nconst IndexPage = () => {\n\n    const location = useLocation();\n    const qs = new URLSearchParams(location.search)\n    const { isLogin } = useAuth()\n    const [items, setItems] = useState([])\n    const [query, setQuery] = useState(qs.get('search') || \"\")\n    const [checklist, setChecklist] = useState([])\n    const [suggestion, setSuggestion] = useState([])\n    const [displayInfo, setDisplayInfo] = useState(null)\n    const [isLoading, setIsLoading] = useState(false)\n    const [payload, setPayload] = useState({})\n    const [isSuggestionLoading, setSuggestionLoading] = useState(false)\n    const [types, setTypes] = useState([])\n    const [selectedType, setSelectedType] = useState(null)\n    const [attributePayload, setAttributePayload] = useState({})\n    const [typeName, setTypeName] = useState(\"\")\n    const [attributeName, setAttributeName] = useState(\"\")\n    const [numOfAttribute, setNumOfAttribute] = useState(5)\n    const [attributeValue, setAttributeValue] = useState([\n        { label: 'string', value: 'string' },\n        { label: 'array', value: 'array' },\n\n    ])\n\n    const [attributeArray, setAttributeArray] = useState([])\n    const [selectedAttribute, setSelectedAttribute] = useState(attributeValue[0])\n    React.useEffect(() => {\n        if (types.length) {\n            setSelectedType(types[0])\n        }\n    }, [types])\n    const handleCreateType = async (e) => {\n        console.log(payload)\n        Parse.Cloud.run('createType', payload)\n    }\n\n    const getAllTypes = async (e) => {\n        const res = await Parse.Cloud.run('getItemsMeta', {\n\n        })\n        setItems(res)\n    }\n\n    const searchNumbers = async (query) => {\n        setIsLoading(true)\n        const res = await getItems()\n\n        setIsLoading(false)\n    }\n\n    const getItems = async () => {\n        return await Parse.Cloud.run('getItemsMeta')\n    }\n\n    const notWhatsppFlow = ['admin', 'user'].includes(isLogin?.role)\n    const getMySuggestion = async () => {\n        setSuggestionLoading(true)\n        const res = await Parse.Cloud.run('getMySuggestedNumber')\n        setChecklist(res.checklist)\n        setSuggestion(res.suggestion)\n        setSuggestionLoading(false)\n    }\n\n    React.useEffect(() => {\n\n        getAllTypes()\n\n    }, [])\n\n\n\n    const handleItem = async (item) => {\n\n        if (notWhatsppFlow) {\n            const res = await Parse.Cloud.run('querySpecificNumber', {\n                _id: item._id\n            })\n\n            setDisplayInfo(<>\n                {res.num} is detected at  {res.sourceId} on {res.date}\n                <br />\n                <a style={{ color: '#25D366', textDecoration: 'none' }} href={`https://api.whatsapp.com/send?phone=6587413159&text=Find Mobile Number`}>whatsapp</a> us if you need help getting the number\n            </>)\n        } else {\n            const url = `https://api.whatsapp.com/send?phone=6587413159&text=` + encodeURIComponent(`Enquiry on ${item.num} with id ${item._id}`)\n            navigate(url)\n        }\n\n    }\n\n    const handleAddAttribute = async () => {\n        const res = await Parse.Cloud.run('addAttribute', {\n            typeName: selectedType?.name,\n            attributeObject: {\n                [attributeName]: selectedAttribute?.value\n            }\n        })\n    }\n\n    const handleClose = () => {\n        setDisplayInfo(null)\n    }\n\n    const cols = [\n        { label: 'id', key: 'objectId' },\n        { label: 'Type', key: 'type' },\n        { label: 'Name', key: 'name' },\n        {\n            label: 'Action', onRender: (item) => {\n                return <><Button onClick={() => handleItem(item)}>\n                    <FontAwesomeIcon icon={faEye} />\n                </Button>\n                    <Button onClick={() => navigate(`/manage?id=${item.objectId}`)}>\n                        <FontAwesomeIcon icon={faSearch} />\n                    </Button>\n                    <Button onClick={() => handleItem(item)}>\n                        <FontAwesomeIcon icon={faEnvelopeOpen} />\n                    </Button>\n                </>\n            }\n        }]\n\n    return <Layout afterSearch={<></>} >\n        <h3 className=\"text-center\">List</h3>\n        {\n            <>\n                {\n                    items?.length\n                }\n                <NumberTable cols={cols} isLoading={isLoading} items={items} onItem={item => handleItem && handleItem(item)} />\n                <Modal as={Modal.Dialog} centered show={displayInfo} onHide={handleClose}>\n                    <Modal.Header>\n                        <Modal.Title className=\"h6\">Information</Modal.Title>\n                        <Button variant=\"close\" aria-label=\"Close\" onClick={handleClose} />\n                    </Modal.Header>\n                    <Modal.Body>\n                        {displayInfo}\n                    </Modal.Body>\n                    <Modal.Footer>\n                        <Button variant=\"secondary\" onClick={handleClose}>\n                            I Got It\n                        </Button>\n                        <Button variant=\"link\" className=\"text-gray ms-auto\" onClick={handleClose}>\n                            Close\n                        </Button>\n                    </Modal.Footer>\n                </Modal>\n            </>\n        }\n    </Layout >\n}\n\n/**\n * Head export to define metadata for the page\n *\n * See: https://www.gatsbyjs.com/docs/reference/built-in-components/gatsby-head/\n */\nexport const Head = () => <Seo title=\"Home\" />\n\nexport default IndexPage\n"],"names":["useState","React","Head","Seo","title","IndexPage","location","useLocation","qs","URLSearchParams","search","isLogin","useAuth","items","setItems","query","setQuery","get","checklist","setChecklist","suggestion","setSuggestion","displayInfo","setDisplayInfo","isLoading","setIsLoading","payload","setPayload","isSuggestionLoading","setSuggestionLoading","types","setTypes","selectedType","setSelectedType","attributePayload","setAttributePayload","typeName","setTypeName","attributeName","setAttributeName","numOfAttribute","setNumOfAttribute","attributeValue","setAttributeValue","label","value","attributeArray","setAttributeArray","selectedAttribute","setSelectedAttribute","length","notWhatsppFlow","includes","role","async","res","Parse","Cloud","run","getAllTypes","handleItem","_id","item","num","sourceId","date","style","color","textDecoration","href","url","encodeURIComponent","navigate","handleClose","cols","key","onRender","Button","onClick","FontAwesomeIcon","icon","faEye","objectId","faSearch","faEnvelopeOpen","Layout","afterSearch","className","NumberTable","onItem","Modal","as","Dialog","centered","show","onHide","Header","Title","variant","Body","Footer"],"sourceRoot":""}