{"version":3,"sources":["webpack:///./node_modules/grommet/es6/components/Heading/StyledHeading.js","webpack:///./node_modules/grommet/es6/components/Heading/Heading.js","webpack:///./src/pages/videos/index.js"],"names":["colorStyle","props","colorProp","theme","heading","color","StyledHeading","h1","withConfig","displayName","componentId","font","level","family","size","headingTheme","levelStyle","data","styles","height","fillProp","maxWidth","medium","weight","responsive","responsiveBreakpoint","breakpoint","global","breakpoints","responsiveData","push","console","warn","textAlign","truncate","extend","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","defaultProps","setPrototypeOf","Heading","_ref","ref","fill","rest","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","createElement","as","HeadingWrapper","ImageContainer","styled","div","Component","renderImage","location","item","index","src","image","imageProps","onClick","navigate","videoId","fit","direction","gap","justify","href","channelId","title","d","Date","now","useState","datasource","setDatasource","setChannels","recentVideoDS","setRecentVideoDS","useEffect","allVideos","allAggVideo","edges","recentVideos","map","node","log","id","thumbnails","high","url","publishTime","filter","n","toISOString","newDS","allChannel","channel","find","featuredVideo","max","dataList","render","margin","query"],"mappings":"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","file":"component---src-pages-videos-index-js-7eb222a4fa2feb31b7f3.js","sourcesContent":["import styled, { css } from 'styled-components';\nimport { breakpointStyle, genericStyles, normalizeColor, textAlignStyle } from '../../utils';\nimport { defaultProps } from '../../default-props';\n\nvar sizeStyle = function sizeStyle(props) {\n  // size is a combination of the level and size properties\n  var size = props.size || 'medium';\n  var headingTheme = props.theme.heading;\n  var levelStyle = headingTheme.level[props.level];\n\n  if (levelStyle) {\n    var data = levelStyle[size];\n    var styles = [css([\"font-size:\", \";line-height:\", \";max-width:\", \";font-weight:\", \";\"], data ? data.size : size, data ? data.height : 'normal', props.fillProp && 'none' || data && data.maxWidth || levelStyle.medium.maxWidth, levelStyle.font.weight || headingTheme.weight)];\n\n    if (props.responsive && headingTheme.responsiveBreakpoint) {\n      var breakpoint = props.theme.global.breakpoints[headingTheme.responsiveBreakpoint];\n\n      if (breakpoint) {\n        var responsiveData = headingTheme.level[props.level + 1] ? headingTheme.level[props.level + 1][size] : headingTheme.level[props.level][size];\n\n        if (responsiveData) {\n          styles.push(breakpointStyle(breakpoint, \"\\n            font-size: \" + responsiveData.size + \";\\n            line-height: \" + responsiveData.height + \";\\n            max-width: \" + (props.fillProp && 'none' || responsiveData.maxWidth) + \";\\n          \"));\n        }\n      }\n    }\n\n    return styles;\n  }\n\n  console.warn(\"Heading level \" + props.level + \" is not defined in your theme.\");\n  return '';\n};\n\nvar fontFamily = function fontFamily(props) {\n  var _ref = props.theme.heading.level[props.level] || {},\n      font = _ref.font;\n\n  if (font && font.family) {\n    return css([\"font-family:\", \";\"], font.family);\n  }\n\n  return props.theme.heading.font ? css([\"font-family:\", \";\"], props.theme.heading.font.family) : '';\n};\n\nvar truncateStyle = \"\\n  white-space: nowrap;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n\";\nvar colorStyle = css([\"color:\", \";\"], function (props) {\n  return normalizeColor(props.colorProp || props.theme.heading.color, props.theme);\n});\nvar StyledHeading = styled.h1.withConfig({\n  displayName: \"StyledHeading\",\n  componentId: \"sc-1rdh4aw-0\"\n})([\"\", \" \", \" \", \" \", \" \", \" \", \" \", \"\"], genericStyles, function (props) {\n  return fontFamily(props);\n}, function (props) {\n  return sizeStyle(props);\n}, function (props) {\n  return props.textAlign && textAlignStyle;\n}, function (props) {\n  return props.truncate && truncateStyle;\n}, function (props) {\n  return (props.colorProp || props.theme.heading.color) && colorStyle;\n}, function (props) {\n  return props.theme.heading && props.theme.heading.extend;\n});\nStyledHeading.defaultProps = {};\nObject.setPrototypeOf(StyledHeading.defaultProps, defaultProps);\nexport { StyledHeading };","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { forwardRef } from 'react';\nimport { StyledHeading } from './StyledHeading';\nvar Heading = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var color = _ref.color,\n      fill = _ref.fill,\n      level = _ref.level,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"color\", \"fill\", \"level\"]);\n\n  return (\n    /*#__PURE__*/\n    // munged to avoid styled-components putting it in the DOM\n    // enforce level to be a number\n    React.createElement(StyledHeading, _extends({\n      as: \"h\" + level,\n      colorProp: color,\n      fillProp: fill,\n      level: +level\n    }, rest, {\n      ref: ref\n    }))\n  );\n});\nHeading.displayName = 'Heading';\nHeading.defaultProps = {\n  level: 1,\n  responsive: true\n};\nvar HeadingDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line global-require\n  HeadingDoc = require('./doc').doc(Heading);\n}\n\nvar HeadingWrapper = HeadingDoc || Heading;\nexport { HeadingWrapper as Heading };","import React, { useEffect, useState } from \"react\"\nimport { Box, Heading } from \"grommet\"\nimport { graphql } from \"gatsby\"\nimport styled from \"styled-components\"\nimport { navigate } from \"gatsby\"\nimport Layout from \"../../containers/layout\"\nimport Image from \"../../components/Image\"\nimport { format, parseISO } from 'date-fns'\nimport CardList from \"../../components/CardListing/NewCardList\"\nimport querystring from \"query-string\"\nimport Ad from \"../../containers/Ad\"\n\nconst ImageContainer = styled.div`\n  cursor: pointer;\n`\n\nfunction shuffle(array) {\n  var currentIndex = array.length,\n    randomIndex\n\n  // While there remain elements to shuffle...\n  while (0 !== currentIndex) {\n    // Pick a remaining element...\n    randomIndex = Math.floor(Math.random() * currentIndex)\n    currentIndex--\n\n    // And swap it with the current element.\n    ;[array[currentIndex], array[randomIndex]] = [\n      array[randomIndex],\n      array[currentIndex],\n    ]\n  }\n\n  return array\n}\n\nconst Component = ({ data, location }) => {\n  const renderImage = (item, index) => {\n    return (\n\n      <ImageContainer\n      ><Box> \n        <Image\n          src={item.image}\n          imageProps={{\n            onClick: () => {\n              navigate(`/videos/view?id=${item.videoId}`)\n            },\n            fit: \"cover\",\n            fill: \"true\",\n          }}\n        />\n        <Box direction=\"row\" gap=\"small\" justify=\"center\">\n        <a href={`/videos/channel?id=${item.channelId}`}>More From Channel</a>\n        </Box>\n\n        {item.title} <br />\n        \n        </Box>\n      </ImageContainer>\n    )\n  }\n  const d = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000) \n\n\n  const [datasource, setDatasource] = useState([])\n  const [channels, setChannels] = useState([])\n  const [recentVideoDS, setRecentVideoDS] = useState([])\n  useEffect(() => {\n    let result = []\n\n    const allVideos = data.allAggVideo.edges;\n\n    const recentVideos = allVideos.map(({ node }) => {\n      console.log(node)\n      return {\n        id: node.key,\n        image: node?.thumbnails?.high?.url,\n        title: node.title,\n        publishTime: node.publishTime,\n        channelId: node.channelId,\n        videoId: node.key\n      }\n    })\n    .filter(n => n.publishTime > d.toISOString())\n\n    const newDS = data.allChannel.edges.map((channel) => {\n      return data.allAggVideo.edges\n      .find(({ node }) => node.channelId === channel.node.channelId)\n    })\n    .filter(i => i)\n    .map(({ node }) => ({\n      ...node\n    }))\n    .map(channel => {\n      const featuredVideo = allVideos.find(({ node }) => channel.channelId === node.channelId )\n      return {\n        ...channel,\n        videoId: featuredVideo.node.key,\n        image: featuredVideo.node?.thumbnails?.high?.url\n      }\n    })\n\n    setChannels(data.allChannel)\n    setDatasource(newDS)\n    setRecentVideoDS(recentVideos)\n  }, [data.allAggVideo.edges])\n  return (\n    <>\n      {\n        <Layout max=\"100%\">\n\n          <Box>\n            {\n              recentVideoDS.length > 0 && <h3>Recent Video</h3>\n            }\n            <CardList dataList={recentVideoDS} render={renderImage} />\n            <Ad />\n            <Heading level={3}  margin=\"none\">Feng Shui Channel (Source From Youtube)\n            </Heading>\n            <p> To Add/Remove Listing, Please go <a href=\"/videos/request\">here</a></p>\n            <CardList dataList={datasource} render={renderImage} />\n            \n          </Box>\n\n          \n        </Layout>\n      }\n    </>\n  )\n}\n\nexport default Component\n\nexport const query = graphql`\nquery MyQuery333 {\n  allAggVideo(sort: {fields: publishedAt, order: DESC}) {\n    edges {\n      node {\n        key\n        channelId\n        title\n        thumbnails {\n          high {\n            url\n          }\n        }\n        publishedAt\n        publishTime\n      }\n    }\n  }\n\n  allChannel {\n    edges {\n      node {\n        id\n        title\n        channelId\n      }\n    }\n  }\n}\n`\n"],"sourceRoot":""}