{"version":3,"file":"5c8e84aa-2a8d1a2447c1eebb4bf6.js","mappings":"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","sources":["webpack://gatsby-starter-default/./node_modules/react-moveable/dist/moveable.esm.js"],"sourcesContent":["/*\nCopyright (c) 2019 Daybrush\nname: react-moveable\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/moveable/blob/master/packages/react-moveable\nversion: 0.54.1\n*/\nimport getAgent from '@egjs/agent';\nimport { prefixNames, ref, refs, prefixCSS, withMethods } from 'framework-utils';\nimport { findIndex, find, dot, isArray, splitSpace, splitUnit, isString, getDocumentElement, getDocumentBody, getWindow, throttle, getKeys, getRad, TINY_NUM as TINY_NUM$1, average, getDist as getDist$1, throttleArray, calculateBoundSize, convertUnitSize, isNumber, hasClass, isObject, decamelize, isNode, isFunction, isWindow, counter, isUndefined, between, addClass, requestAnimationFrame, removeClass, splitBracket, splitComma, cancelAnimationFrame, pushSet } from '@daybrush/utils';\nimport { minus, invert, convertPositionMatrix, plus, calculate, fromTranslation, multiply, convertDimension, createScaleMatrix, convertCSStoMatrix, createIdentityMatrix, createOriginMatrix, createRotateMatrix, rotate, getOrigin, multiplies, convertMatrixtoCSS, ignoreDimension, createWarpMatrix } from '@scena/matrix';\nimport { parse, parseMat, toMat, calculateMatrixDist } from 'css-to-mat';\nimport ChildrenDiffer, { diff } from '@egjs/children-differ';\nimport DragScroll from '@scena/dragscroll';\nimport { getMinMaxs, fitPoints, getOverlapSize, getAreaSize, isInside, getIntersectionPointsByConstants } from 'overlap-area';\nimport * as React from 'react';\nimport { createElement } from 'react';\nimport Gesto from 'gesto';\nimport { styled } from 'react-css-styled';\nimport EventEmitter from '@scena/event-emitter';\nimport { diff as diff$1 } from '@egjs/list-differ';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nfunction __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\n\nfunction makeAble(name, able) {\r\n    return __assign({ events: [], props: [], name: name }, able);\r\n}\n\nvar DIRECTIONS4 = [\"n\", \"w\", \"s\", \"e\"];\r\nvar DIRECTIONS = [\"n\", \"w\", \"s\", \"e\", \"nw\", \"ne\", \"sw\", \"se\"];\r\nfunction getSVGCursor(scale, degree) {\r\n    return \"data:image/svg+xml;utf8,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"\".concat(32 * scale, \"px\\\" height=\\\"\").concat(32 * scale, \"px\\\" viewBox=\\\"0 0 32 32\\\" ><path d=\\\"M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z\\\" stroke-linejoin=\\\"round\\\" stroke-width=\\\"1.2\\\" fill=\\\"black\\\" stroke=\\\"white\\\" style=\\\"transform:rotate(\").concat(degree, \"deg);transform-origin: 16px 16px\\\"></path></svg>\");\r\n}\r\nfunction getCursorCSS(degree) {\r\n    var x1 = getSVGCursor(1, degree);\r\n    // const x2 = getSVGCursor(2, degree);\r\n    var degree45 = (Math.round(degree / 45) * 45) % 180;\r\n    var defaultCursor = \"ns-resize\";\r\n    if (degree45 === 135) {\r\n        defaultCursor = \"nwse-resize\";\r\n    }\r\n    else if (degree45 === 45) {\r\n        defaultCursor = \"nesw-resize\";\r\n    }\r\n    else if (degree45 === 90) {\r\n        defaultCursor = \"ew-resize\";\r\n    }\r\n    // tslint:disable-next-line: max-line-length\r\n    return \"cursor:\".concat(defaultCursor, \";cursor: url('\").concat(x1, \"') 16 16, \").concat(defaultCursor, \";\");\r\n}\r\nvar agent = getAgent();\r\nvar IS_WEBKIT = agent.browser.webkit;\r\nvar IS_WEBKIT605 = IS_WEBKIT && (function () {\r\n    var navi = typeof window === \"undefined\" ? { userAgent: \"\" } : window.navigator;\r\n    var res = /applewebkit\\/([^\\s]+)/g.exec(navi.userAgent.toLowerCase());\r\n    return res ? parseFloat(res[1]) < 605 : false;\r\n})();\r\nvar browserName = agent.browser.name;\r\nvar browserVersion = parseInt(agent.browser.version, 10);\r\nvar IS_CHROME = browserName === \"chrome\";\r\nvar IS_CHROMIUM = agent.browser.chromium;\r\nvar chromiumVersion = parseInt(agent.browser.chromiumVersion, 10) || 0;\r\nvar IS_CHROMIUM109 = (IS_CHROME && browserVersion >= 109)\r\n    || (IS_CHROMIUM && chromiumVersion >= 109);\r\nvar IS_FIREFOX = browserName === \"firefox\";\r\nvar IS_SAFARI_ABOVE15 = parseInt(agent.browser.webkitVersion, 10) >= 612\r\n    || browserVersion >= 15;\r\nvar PREFIX = \"moveable-\";\r\nvar directionCSS = DIRECTIONS.map(function (dir) {\r\n    var top = \"\";\r\n    var left = \"\";\r\n    var originX = \"center\";\r\n    var originY = \"center\";\r\n    var offset = \"calc(var(--moveable-control-padding, 20) * -1px)\";\r\n    if (dir.indexOf(\"n\") > -1) {\r\n        top = \"top: \".concat(offset, \";\");\r\n        originY = \"bottom\";\r\n    }\r\n    if (dir.indexOf(\"s\") > -1) {\r\n        top = \"top: 0px;\";\r\n        originY = \"top\";\r\n    }\r\n    if (dir.indexOf(\"w\") > -1) {\r\n        left = \"left: \".concat(offset, \";\");\r\n        originX = \"right\";\r\n    }\r\n    if (dir.indexOf(\"e\") > -1) {\r\n        left = \"left: 0px;\";\r\n        originX = \"left\";\r\n    }\r\n    return \".around-control[data-direction*=\\\"\".concat(dir, \"\\\"] {\\n        \").concat(left).concat(top, \"\\n        transform-origin: \").concat(originX, \" \").concat(originY, \";\\n    }\");\r\n}).join(\"\\n\");\r\nvar MOVEABLE_CSS = \"\\n{\\nposition: absolute;\\nwidth: 1px;\\nheight: 1px;\\nleft: 0;\\ntop: 0;\\nz-index: 3000;\\n--moveable-color: #4af;\\n--zoom: 1;\\n--zoompx: 1px;\\n--moveable-line-padding: 0;\\n--moveable-control-padding: 0;\\nwill-change: transform;\\noutline: 1px solid transparent;\\n}\\n.control-box {\\nz-index: 0;\\n}\\n.line, .control {\\nposition: absolute;\\nleft: 0;\\ntop: 0;\\nwill-change: transform;\\n}\\n.control {\\nwidth: 14px;\\nheight: 14px;\\nborder-radius: 50%;\\nborder: 2px solid #fff;\\nbox-sizing: border-box;\\nbackground: #4af;\\nbackground: var(--moveable-color);\\nmargin-top: -7px;\\nmargin-left: -7px;\\nborder: 2px solid #fff;\\nz-index: 10;\\n}\\n.around-control {\\nposition: absolute;\\nwill-change: transform;\\nwidth: calc(var(--moveable-control-padding, 20) * 1px);\\nheight: calc(var(--moveable-control-padding, 20) * 1px);\\nleft: calc(var(--moveable-control-padding, 20) * -0.5px);\\ntop: calc(var(--moveable-control-padding, 20) * -0.5px);\\nbox-sizing: border-box;\\nbackground: transparent;\\nz-index: 8;\\ncursor: alias;\\ntransform-origin: center center;\\n}\\n\".concat(directionCSS, \"\\n.padding {\\nposition: absolute;\\ntop: 0px;\\nleft: 0px;\\nwidth: 100px;\\nheight: 100px;\\ntransform-origin: 0 0;\\n}\\n.line {\\nwidth: 1px;\\nheight: 1px;\\nbackground: #4af;\\nbackground: var(--moveable-color);\\ntransform-origin: 0px 50%;\\n}\\n.line.edge {\\nz-index: 1;\\nbackground: transparent;\\n}\\n.line.dashed {\\nbox-sizing: border-box;\\nbackground: transparent;\\n}\\n.line.dashed.horizontal {\\nborder-top: 1px dashed #4af;\\nborder-top-color: #4af;\\nborder-top-color: var(--moveable-color);\\n}\\n.line.dashed.vertical {\\nborder-left: 1px dashed #4af;\\nborder-left-color: #4af;\\nborder-left-color: var(--moveable-color);\\n}\\n.line.vertical {\\ntransform: translateX(-50%);\\n}\\n.line.horizontal {\\ntransform: translateY(-50%);\\n}\\n.line.vertical.bold {\\nwidth: 2px;\\n}\\n.line.horizontal.bold {\\nheight: 2px;\\n}\\n\\n.control.origin {\\nborder-color: #f55;\\nbackground: #fff;\\nwidth: 12px;\\nheight: 12px;\\nmargin-top: -6px;\\nmargin-left: -6px;\\npointer-events: none;\\n}\\n\").concat([0, 15, 30, 45, 60, 75, 90, 105, 120, 135, 150, 165].map(function (degree) { return \"\\n.direction[data-rotation=\\\"\".concat(degree, \"\\\"], :global .view-control-rotation\").concat(degree, \" {\\n\").concat(getCursorCSS(degree), \"\\n}\\n\"); }).join(\"\\n\"), \"\\n\\n.line.direction:before {\\ncontent: \\\"\\\";\\nposition: absolute;\\nwidth: 100%;\\nheight: calc(var(--moveable-line-padding, 0) * 1px);\\nbottom: 0;\\nleft: 0;\\n}\\n.group {\\nz-index: -1;\\n}\\n.area {\\nposition: absolute;\\n}\\n.area-pieces {\\nposition: absolute;\\ntop: 0;\\nleft: 0;\\ndisplay: none;\\n}\\n.area.avoid, .area.pass {\\npointer-events: none;\\n}\\n.area.avoid+.area-pieces {\\ndisplay: block;\\n}\\n.area-piece {\\nposition: absolute;\\n}\\n\\n\").concat(IS_WEBKIT605 ? \":global svg *:before {\\ncontent:\\\"\\\";\\ntransform-origin: inherit;\\n}\" : \"\", \"\\n\");\r\nvar NEARBY_POS = [\r\n    [0, 1, 2],\r\n    [1, 0, 3],\r\n    [2, 0, 3],\r\n    [3, 1, 2],\r\n];\r\nvar FLOAT_POINT_NUM = 0.0001;\r\nvar TINY_NUM = 0.0000001;\r\nvar MIN_SCALE = 0.000000001;\r\nvar MAX_NUM = Math.pow(10, 10);\r\nvar MIN_NUM = -MAX_NUM;\r\nvar DIRECTION_REGION_TO_DIRECTION = {\r\n    n: [0, -1],\r\n    e: [1, 0],\r\n    s: [0, 1],\r\n    w: [-1, 0],\r\n    nw: [-1, -1],\r\n    ne: [1, -1],\r\n    sw: [-1, 1],\r\n    se: [1, 1],\r\n};\r\nvar DIRECTION_INDEXES = {\r\n    n: [0, 1],\r\n    e: [1, 3],\r\n    s: [3, 2],\r\n    w: [2, 0],\r\n    nw: [0],\r\n    ne: [1],\r\n    sw: [2],\r\n    se: [3],\r\n};\r\nvar DIRECTION_ROTATIONS = {\r\n    n: 0,\r\n    s: 180,\r\n    w: 270,\r\n    e: 90,\r\n    nw: 315,\r\n    ne: 45,\r\n    sw: 225,\r\n    se: 135,\r\n};\r\nvar MOVEABLE_METHODS = [\r\n    \"isMoveableElement\",\r\n    \"updateRect\",\r\n    \"updateTarget\",\r\n    \"destroy\",\r\n    \"dragStart\",\r\n    \"isInside\",\r\n    \"hitTest\",\r\n    \"setState\",\r\n    \"getRect\",\r\n    \"request\",\r\n    \"isDragging\",\r\n    \"getManager\",\r\n    \"forceUpdate\",\r\n    \"waitToChangeTarget\",\r\n    \"updateSelectors\",\r\n    \"getTargets\",\r\n    \"stopDrag\",\r\n    \"getControlBoxElement\",\r\n    \"getMoveables\",\r\n    \"getDragElement\",\r\n];\n\nfunction setCustomDrag(e, state, delta, isPinch, isConvert, ableName) {\r\n    var _a, _b;\r\n    if (ableName === void 0) { ableName = \"draggable\"; }\r\n    var result = (_b = (_a = state.gestos[ableName]) === null || _a === void 0 ? void 0 : _a.move(delta, e.inputEvent)) !== null && _b !== void 0 ? _b : {};\r\n    var datas = result.originalDatas || result.datas;\r\n    var ableDatas = datas[ableName] || (datas[ableName] = {});\r\n    return __assign(__assign({}, (isConvert ? convertDragDist(state, result) : result)), { isPinch: !!isPinch, parentEvent: true, datas: ableDatas, originalDatas: e.originalDatas });\r\n}\r\nvar CustomGesto = /*#__PURE__*/ (function () {\r\n    function CustomGesto(ableName) {\r\n        var _a;\r\n        if (ableName === void 0) { ableName = \"draggable\"; }\r\n        this.ableName = ableName;\r\n        this.prevX = 0;\r\n        this.prevY = 0;\r\n        this.startX = 0;\r\n        this.startY = 0;\r\n        this.isDrag = false;\r\n        this.isFlag = false;\r\n        this.datas = {\r\n            draggable: {},\r\n        };\r\n        this.datas = (_a = {},\r\n            _a[ableName] = {},\r\n            _a);\r\n    }\r\n    CustomGesto.prototype.dragStart = function (client, e) {\r\n        this.isDrag = false;\r\n        this.isFlag = false;\r\n        var originalDatas = e.originalDatas;\r\n        this.datas = originalDatas;\r\n        if (!originalDatas[this.ableName]) {\r\n            originalDatas[this.ableName] = {};\r\n        }\r\n        return __assign(__assign({}, this.move(client, e.inputEvent)), { type: \"dragstart\" });\r\n    };\r\n    CustomGesto.prototype.drag = function (client, inputEvent) {\r\n        return this.move([\r\n            client[0] - this.prevX,\r\n            client[1] - this.prevY,\r\n        ], inputEvent);\r\n    };\r\n    CustomGesto.prototype.move = function (delta, inputEvent) {\r\n        var clientX;\r\n        var clientY;\r\n        var isFirstDrag = false;\r\n        if (!this.isFlag) {\r\n            this.prevX = delta[0];\r\n            this.prevY = delta[1];\r\n            this.startX = delta[0];\r\n            this.startY = delta[1];\r\n            clientX = delta[0];\r\n            clientY = delta[1];\r\n            this.isFlag = true;\r\n        }\r\n        else {\r\n            var isPrevDrag = this.isDrag;\r\n            clientX = this.prevX + delta[0];\r\n            clientY = this.prevY + delta[1];\r\n            if (delta[0] || delta[1]) {\r\n                this.isDrag = true;\r\n            }\r\n            if (!isPrevDrag && this.isDrag) {\r\n                isFirstDrag = true;\r\n            }\r\n        }\r\n        this.prevX = clientX;\r\n        this.prevY = clientY;\r\n        return {\r\n            type: \"drag\",\r\n            clientX: clientX,\r\n            clientY: clientY,\r\n            inputEvent: inputEvent,\r\n            isFirstDrag: isFirstDrag,\r\n            isDrag: this.isDrag,\r\n            distX: clientX - this.startX,\r\n            distY: clientY - this.startY,\r\n            deltaX: delta[0],\r\n            deltaY: delta[1],\r\n            datas: this.datas[this.ableName],\r\n            originalDatas: this.datas,\r\n            parentEvent: true,\r\n            parentGesto: this,\r\n        };\r\n    };\r\n    return CustomGesto;\r\n}());\n\nfunction calculateElementPosition(matrix, origin, width, height) {\r\n    var is3d = matrix.length === 16;\r\n    var n = is3d ? 4 : 3;\r\n    var poses = calculatePoses(matrix, width, height, n);\r\n    var _a = __read(poses, 4), _b = __read(_a[0], 2), x1 = _b[0], y1 = _b[1], _c = __read(_a[1], 2), x2 = _c[0], y2 = _c[1], _d = __read(_a[2], 2), x3 = _d[0], y3 = _d[1], _e = __read(_a[3], 2), x4 = _e[0], y4 = _e[1];\r\n    var _f = __read(calculatePosition(matrix, origin, n), 2), originX = _f[0], originY = _f[1];\r\n    var left = Math.min(x1, x2, x3, x4);\r\n    var top = Math.min(y1, y2, y3, y4);\r\n    var right = Math.max(x1, x2, x3, x4);\r\n    var bottom = Math.max(y1, y2, y3, y4);\r\n    x1 = (x1 - left) || 0;\r\n    x2 = (x2 - left) || 0;\r\n    x3 = (x3 - left) || 0;\r\n    x4 = (x4 - left) || 0;\r\n    y1 = (y1 - top) || 0;\r\n    y2 = (y2 - top) || 0;\r\n    y3 = (y3 - top) || 0;\r\n    y4 = (y4 - top) || 0;\r\n    originX = (originX - left) || 0;\r\n    originY = (originY - top) || 0;\r\n    var sx = matrix[0];\r\n    var sy = matrix[n + 1];\r\n    var direction = sign(sx * sy);\r\n    return {\r\n        left: left,\r\n        top: top,\r\n        right: right,\r\n        bottom: bottom,\r\n        origin: [originX, originY],\r\n        pos1: [x1, y1],\r\n        pos2: [x2, y2],\r\n        pos3: [x3, y3],\r\n        pos4: [x4, y4],\r\n        direction: direction,\r\n    };\r\n}\n\nfunction calculatePointerDist(moveable, e) {\r\n    var clientX = e.clientX, clientY = e.clientY, datas = e.datas;\r\n    var _a = moveable.state, moveableClientRect = _a.moveableClientRect, rootMatrix = _a.rootMatrix, is3d = _a.is3d, pos1 = _a.pos1;\r\n    var left = moveableClientRect.left, top = moveableClientRect.top;\r\n    var n = is3d ? 4 : 3;\r\n    var _b = __read(minus(calculateInversePosition(rootMatrix, [clientX - left, clientY - top], n), pos1), 2), posX = _b[0], posY = _b[1];\r\n    var _c = __read(getDragDist({ datas: datas, distX: posX, distY: posY }), 2), distX = _c[0], distY = _c[1];\r\n    return [distX, distY];\r\n}\r\nfunction setDragStart(moveable, _a) {\r\n    var datas = _a.datas;\r\n    var _b = moveable.state, allMatrix = _b.allMatrix, beforeMatrix = _b.beforeMatrix, is3d = _b.is3d, left = _b.left, top = _b.top, origin = _b.origin, offsetMatrix = _b.offsetMatrix, targetMatrix = _b.targetMatrix, transformOrigin = _b.transformOrigin;\r\n    var n = is3d ? 4 : 3;\r\n    datas.is3d = is3d;\r\n    datas.matrix = allMatrix;\r\n    datas.targetMatrix = targetMatrix;\r\n    datas.beforeMatrix = beforeMatrix;\r\n    datas.offsetMatrix = offsetMatrix;\r\n    datas.transformOrigin = transformOrigin;\r\n    datas.inverseMatrix = invert(allMatrix, n);\r\n    datas.inverseBeforeMatrix = invert(beforeMatrix, n);\r\n    datas.absoluteOrigin = convertPositionMatrix(plus([left, top], origin), n);\r\n    datas.startDragBeforeDist = calculate(datas.inverseBeforeMatrix, datas.absoluteOrigin, n);\r\n    datas.startDragDist = calculate(datas.inverseMatrix, datas.absoluteOrigin, n);\r\n}\r\nfunction getTransformDirection(e) {\r\n    return calculateElementPosition(e.datas.beforeTransform, [50, 50], 100, 100).direction;\r\n}\r\nfunction resolveTransformEvent(moveable, event, functionName) {\r\n    var datas = event.datas, originalDatas = event.originalDatas.beforeRenderable;\r\n    var index = datas.transformIndex;\r\n    var nextTransforms = originalDatas.nextTransforms;\r\n    var length = nextTransforms.length;\r\n    var nextTransformAppendedIndexes = originalDatas.nextTransformAppendedIndexes;\r\n    var nextIndex = -1;\r\n    if (index === -1) {\r\n        // translate => rotate => scale\r\n        if (functionName === \"translate\") {\r\n            nextIndex = 0;\r\n        }\r\n        else if (functionName === \"rotate\") {\r\n            nextIndex = findIndex(nextTransforms, function (text) { return text.match(/scale\\(/g); });\r\n        }\r\n        if (nextIndex === -1) {\r\n            nextIndex = nextTransforms.length;\r\n        }\r\n        datas.transformIndex = nextIndex;\r\n    }\r\n    else if (find(nextTransformAppendedIndexes, function (info) { return info.index === index && info.functionName === functionName; })) {\r\n        nextIndex = index;\r\n    }\r\n    else {\r\n        nextIndex = index + nextTransformAppendedIndexes.filter(function (info) { return info.index < index; }).length;\r\n    }\r\n    var result = convertTransformInfo(nextTransforms, moveable.state, nextIndex);\r\n    var targetFunction = result.targetFunction;\r\n    var matFunctionName = functionName === \"rotate\" ? \"rotateZ\" : functionName;\r\n    datas.beforeFunctionTexts = result.beforeFunctionTexts;\r\n    datas.afterFunctionTexts = result.afterFunctionTexts;\r\n    datas.beforeTransform = result.beforeFunctionMatrix;\r\n    datas.beforeTransform2 = result.beforeFunctionMatrix2;\r\n    datas.targetTansform = result.targetFunctionMatrix;\r\n    datas.afterTransform = result.afterFunctionMatrix;\r\n    datas.afterTransform2 = result.afterFunctionMatrix2;\r\n    datas.targetAllTransform = result.allFunctionMatrix;\r\n    if (targetFunction.functionName === matFunctionName) {\r\n        datas.afterFunctionTexts.splice(0, 1);\r\n        datas.isAppendTransform = false;\r\n    }\r\n    else if (length > nextIndex) {\r\n        datas.isAppendTransform = true;\r\n        originalDatas.nextTransformAppendedIndexes = __spreadArray(__spreadArray([], __read(nextTransformAppendedIndexes), false), [{\r\n                functionName: functionName,\r\n                index: nextIndex,\r\n                isAppend: true,\r\n            }], false);\r\n    }\r\n}\r\nfunction convertTransformFormat(datas, value, dist) {\r\n    return \"\".concat(datas.beforeFunctionTexts.join(\" \"), \" \").concat(datas.isAppendTransform ? dist : value, \" \").concat(datas.afterFunctionTexts.join(\" \"));\r\n}\r\nfunction getTransformDist(_a) {\r\n    var datas = _a.datas, distX = _a.distX, distY = _a.distY;\r\n    var _b = __read(getBeforeDragDist({ datas: datas, distX: distX, distY: distY }), 2), bx = _b[0], by = _b[1];\r\n    // B * [tx, ty] * A = [bx, by] * targetMatrix;\r\n    // [tx, ty] = B-1 * [bx, by] * targetMatrix * A-1 * [0, 0];\r\n    var res = getTransfromMatrix(datas, fromTranslation([bx, by], 4));\r\n    return calculate(res, convertPositionMatrix([0, 0, 0], 4), 4);\r\n}\r\nfunction getTransfromMatrix(datas, targetMatrix, isAfter) {\r\n    var beforeTransform = datas.beforeTransform, afterTransform = datas.afterTransform, beforeTransform2 = datas.beforeTransform2, afterTransform2 = datas.afterTransform2, targetAllTransform = datas.targetAllTransform;\r\n    // B * afterTargetMatrix * A = (targetMatrix * targetAllTransform)\r\n    // afterTargetMatrix = B-1 * targetMatrix * targetAllTransform * A-1\r\n    // nextTargetMatrix = (targetMatrix * targetAllTransform)\r\n    var nextTargetMatrix = isAfter\r\n        ? multiply(targetAllTransform, targetMatrix, 4)\r\n        : multiply(targetMatrix, targetAllTransform, 4);\r\n    // res1 = B-1 * nextTargetMatrix\r\n    var res1 = multiply(invert(isAfter ? beforeTransform2 : beforeTransform, 4), nextTargetMatrix, 4);\r\n    // res3 = res2 * A-1\r\n    var afterTargetMatrix = multiply(res1, invert(isAfter ? afterTransform2 : afterTransform, 4), 4);\r\n    return afterTargetMatrix;\r\n}\r\nfunction getBeforeDragDist(_a) {\r\n    var datas = _a.datas, distX = _a.distX, distY = _a.distY;\r\n    // TT = BT\r\n    var inverseBeforeMatrix = datas.inverseBeforeMatrix, is3d = datas.is3d, startDragBeforeDist = datas.startDragBeforeDist, absoluteOrigin = datas.absoluteOrigin;\r\n    var n = is3d ? 4 : 3;\r\n    // ABS_ORIGIN * [distX, distY] = BM * (ORIGIN + [tx, ty])\r\n    // BM -1 * ABS_ORIGIN * [distX, distY] - ORIGIN = [tx, ty]\r\n    return minus(calculate(inverseBeforeMatrix, plus(absoluteOrigin, [distX, distY]), n), startDragBeforeDist);\r\n}\r\nfunction getDragDist(_a, isBefore) {\r\n    var datas = _a.datas, distX = _a.distX, distY = _a.distY;\r\n    var inverseBeforeMatrix = datas.inverseBeforeMatrix, inverseMatrix = datas.inverseMatrix, is3d = datas.is3d, startDragBeforeDist = datas.startDragBeforeDist, startDragDist = datas.startDragDist, absoluteOrigin = datas.absoluteOrigin;\r\n    var n = is3d ? 4 : 3;\r\n    return minus(calculate(isBefore ? inverseBeforeMatrix : inverseMatrix, plus(absoluteOrigin, [distX, distY]), n), isBefore ? startDragBeforeDist : startDragDist);\r\n}\r\nfunction getInverseDragDist(_a, isBefore) {\r\n    var datas = _a.datas, distX = _a.distX, distY = _a.distY;\r\n    var beforeMatrix = datas.beforeMatrix, matrix = datas.matrix, is3d = datas.is3d, startDragBeforeDist = datas.startDragBeforeDist, startDragDist = datas.startDragDist, absoluteOrigin = datas.absoluteOrigin;\r\n    var n = is3d ? 4 : 3;\r\n    return minus(calculate(isBefore ? beforeMatrix : matrix, plus(isBefore ? startDragBeforeDist : startDragDist, [distX, distY]), n), absoluteOrigin);\r\n}\r\nfunction calculateTransformOrigin(transformOrigin, width, height, prevWidth, prevHeight, prevOrigin) {\r\n    if (prevWidth === void 0) { prevWidth = width; }\r\n    if (prevHeight === void 0) { prevHeight = height; }\r\n    if (prevOrigin === void 0) { prevOrigin = [0, 0]; }\r\n    if (!transformOrigin) {\r\n        return prevOrigin;\r\n    }\r\n    return transformOrigin.map(function (pos, i) {\r\n        var _a = splitUnit(pos), value = _a.value, unit = _a.unit;\r\n        var prevSize = (i ? prevHeight : prevWidth);\r\n        var size = (i ? height : width);\r\n        if (pos === \"%\" || isNaN(value)) {\r\n            // no value but %\r\n            var measureRatio = prevSize ? prevOrigin[i] / prevSize : 0;\r\n            return size * measureRatio;\r\n        }\r\n        else if (unit !== \"%\") {\r\n            return value;\r\n        }\r\n        return size * value / 100;\r\n    });\r\n}\r\nfunction getPosIndexesByDirection(direction) {\r\n    var indexes = [];\r\n    if (direction[1] >= 0) {\r\n        if (direction[0] >= 0) {\r\n            indexes.push(3);\r\n        }\r\n        if (direction[0] <= 0) {\r\n            indexes.push(2);\r\n        }\r\n    }\r\n    if (direction[1] <= 0) {\r\n        if (direction[0] >= 0) {\r\n            indexes.push(1);\r\n        }\r\n        if (direction[0] <= 0) {\r\n            indexes.push(0);\r\n        }\r\n    }\r\n    return indexes;\r\n}\r\nfunction getPosesByDirection(poses, direction) {\r\n    /*\r\n    [-1, -1](pos1)       [0, -1](pos1,pos2)       [1, -1](pos2)\r\n    [-1, 0](pos1, pos3)                           [1, 0](pos2, pos4)\r\n    [-1, 1](pos3)        [0, 1](pos3, pos4)       [1, 1](pos4)\r\n    */\r\n    return getPosIndexesByDirection(direction).map(function (index) { return poses[index]; });\r\n}\r\nfunction getPosByDirection(poses, direction) {\r\n    var xRatio = (direction[0] + 1) / 2;\r\n    var yRatio = (direction[1] + 1) / 2;\r\n    var top = [\r\n        dot(poses[0][0], poses[1][0], xRatio, 1 - xRatio),\r\n        dot(poses[0][1], poses[1][1], xRatio, 1 - xRatio),\r\n    ];\r\n    var bottom = [\r\n        dot(poses[2][0], poses[3][0], xRatio, 1 - xRatio),\r\n        dot(poses[2][1], poses[3][1], xRatio, 1 - xRatio),\r\n    ];\r\n    return [\r\n        dot(top[0], bottom[0], yRatio, 1 - yRatio),\r\n        dot(top[1], bottom[1], yRatio, 1 - yRatio),\r\n    ];\r\n}\r\nfunction getDist(startPos, matrix, width, height, n, fixedDirection) {\r\n    var poses = calculatePoses(matrix, width, height, n);\r\n    var fixedPos = getPosByDirection(poses, fixedDirection);\r\n    var distX = startPos[0] - fixedPos[0];\r\n    var distY = startPos[1] - fixedPos[1];\r\n    return [distX, distY];\r\n}\r\nfunction getNextMatrix(offsetMatrix, targetMatrix, origin, n) {\r\n    return multiply(offsetMatrix, getAbsoluteMatrix(targetMatrix, n, origin), n);\r\n}\r\nfunction getNextTransformMatrix(state, datas, transform, isAllTransform) {\r\n    var transformOrigin = state.transformOrigin, offsetMatrix = state.offsetMatrix, is3d = state.is3d;\r\n    var n = is3d ? 4 : 3;\r\n    var targetTransform;\r\n    if (isString(transform)) {\r\n        var beforeTransform = datas.beforeTransform, afterTransform = datas.afterTransform;\r\n        if (isAllTransform) {\r\n            targetTransform = convertDimension(parseMat(transform), 4, n);\r\n        }\r\n        else {\r\n            targetTransform = convertDimension(multiply(multiply(beforeTransform, parseMat([transform]), 4), afterTransform, 4), 4, n);\r\n        }\r\n    }\r\n    else {\r\n        targetTransform = transform;\r\n    }\r\n    return getNextMatrix(offsetMatrix, targetTransform, transformOrigin, n);\r\n}\r\nfunction scaleMatrix(state, scale) {\r\n    var transformOrigin = state.transformOrigin, offsetMatrix = state.offsetMatrix, is3d = state.is3d, targetMatrix = state.targetMatrix, targetAllTransform = state.targetAllTransform;\r\n    var n = is3d ? 4 : 3;\r\n    return getNextMatrix(offsetMatrix, multiply(targetAllTransform || targetMatrix, createScaleMatrix(scale, n), n), transformOrigin, n);\r\n}\r\nfunction fillTransformStartEvent(moveable, e) {\r\n    var originalDatas = getBeforeRenderableDatas(e);\r\n    return {\r\n        setTransform: function (transform, index) {\r\n            if (index === void 0) { index = -1; }\r\n            originalDatas.startTransforms = isArray(transform) ? transform : splitSpace(transform);\r\n            setTransformIndex(moveable, e, index);\r\n        },\r\n        setTransformIndex: function (index) {\r\n            setTransformIndex(moveable, e, index);\r\n        },\r\n    };\r\n}\r\nfunction setDefaultTransformIndex(moveable, e, property) {\r\n    var originalDatas = getBeforeRenderableDatas(e);\r\n    var startTransforms = originalDatas.startTransforms;\r\n    setTransformIndex(moveable, e, findIndex(startTransforms, function (func) { return func.indexOf(\"\".concat(property, \"(\")) === 0; }));\r\n}\r\nfunction setTransformIndex(moveable, e, index) {\r\n    var originalDatas = getBeforeRenderableDatas(e);\r\n    var datas = e.datas;\r\n    datas.transformIndex = index;\r\n    if (index === -1) {\r\n        return;\r\n    }\r\n    var transform = originalDatas.startTransforms[index];\r\n    if (!transform) {\r\n        return;\r\n    }\r\n    var state = moveable.state;\r\n    var info = parse([transform], {\r\n        \"x%\": function (v) { return v / 100 * state.offsetWidth; },\r\n        \"y%\": function (v) { return v / 100 * state.offsetHeight; },\r\n    });\r\n    datas.startValue = info[0].functionValue;\r\n}\r\nfunction fillOriginalTransform(e, transform) {\r\n    var originalDatas = getBeforeRenderableDatas(e);\r\n    originalDatas.nextTransforms = splitSpace(transform);\r\n    // originalDatas.nextTargetMatrix = parseMat(transform);\r\n}\r\nfunction getBeforeRenderableDatas(e) {\r\n    return e.originalDatas.beforeRenderable;\r\n}\r\nfunction getNextTransforms(e) {\r\n    var originalDatas = e.originalDatas.beforeRenderable;\r\n    return originalDatas.nextTransforms;\r\n}\r\nfunction getNextTransformText(e) {\r\n    return (getNextTransforms(e) || []).join(\" \");\r\n}\r\nfunction getNextStyle(e) {\r\n    return getBeforeRenderableDatas(e).nextStyle;\r\n}\r\nfunction fillTransformEvent(moveable, nextTransform, delta, isPinch, e) {\r\n    fillOriginalTransform(e, nextTransform);\r\n    var drag = Draggable.drag(moveable, setCustomDrag(e, moveable.state, delta, isPinch, false));\r\n    var afterTransform = drag ? drag.transform : nextTransform;\r\n    return __assign(__assign({ transform: nextTransform, drag: drag }, fillCSSObject({\r\n        transform: afterTransform,\r\n    }, e)), { afterTransform: afterTransform });\r\n}\r\nfunction getTranslateFixedPosition(moveable, transform, fixedDirection, fixedOffset, datas, isAllTransform) {\r\n    var nextMatrix = getNextTransformMatrix(moveable.state, datas, transform, isAllTransform);\r\n    var nextFixedPosition = getDirectionOffset(moveable, fixedDirection, fixedOffset, nextMatrix);\r\n    return nextFixedPosition;\r\n}\r\nfunction getTranslateDist(moveable, transform, fixedDirection, fixedPosition, fixedOffset, datas, isAllTransform) {\r\n    var nextFixedPosition = getTranslateFixedPosition(moveable, transform, fixedDirection, fixedOffset, datas, isAllTransform);\r\n    var state = moveable.state;\r\n    var left = state.left, top = state.top;\r\n    var groupable = moveable.props.groupable;\r\n    var groupLeft = groupable ? left : 0;\r\n    var groupTop = groupable ? top : 0;\r\n    var dist = minus(fixedPosition, nextFixedPosition);\r\n    return minus(dist, [groupLeft, groupTop]);\r\n}\r\nfunction getScaleDist(moveable, transform, fixedDirection, fixedPosition, fixedOffset, datas, isAllTransform) {\r\n    var dist = getTranslateDist(moveable, transform, fixedDirection, fixedPosition, fixedOffset, datas, isAllTransform);\r\n    return dist;\r\n}\r\nfunction getDirectionByPos(pos, width, height) {\r\n    return [\r\n        width ? -1 + pos[0] / (width / 2) : 0,\r\n        height ? -1 + pos[1] / (height / 2) : 0,\r\n    ];\r\n}\r\nfunction getDirectionOffset(moveable, fixedDirection, fixedOffset, nextMatrix) {\r\n    if (nextMatrix === void 0) { nextMatrix = moveable.state.allMatrix; }\r\n    var _a = moveable.state, width = _a.width, height = _a.height, is3d = _a.is3d;\r\n    var n = is3d ? 4 : 3;\r\n    var fixedOffsetPosition = [\r\n        width / 2 * (1 + fixedDirection[0]) + fixedOffset[0],\r\n        height / 2 * (1 + fixedDirection[1]) + fixedOffset[1],\r\n    ];\r\n    return calculatePosition(nextMatrix, fixedOffsetPosition, n);\r\n}\r\nfunction getRotateDist(moveable, rotateDist, datas) {\r\n    var fixedDirection = datas.fixedDirection;\r\n    var fixedPosition = datas.fixedPosition;\r\n    var fixedOffset = datas.fixedOffset;\r\n    return getTranslateDist(moveable, \"rotate(\".concat(rotateDist, \"deg)\"), fixedDirection, fixedPosition, fixedOffset, datas);\r\n}\r\nfunction getResizeDist(moveable, width, height, fixedPosition, transformOrigin, datas) {\r\n    var groupable = moveable.props.groupable;\r\n    var state = moveable.state;\r\n    var prevOrigin = state.transformOrigin, offsetMatrix = state.offsetMatrix, is3d = state.is3d, prevWidth = state.width, prevHeight = state.height, left = state.left, top = state.top;\r\n    var fixedDirection = datas.fixedDirection;\r\n    var targetMatrix = datas.nextTargetMatrix || state.targetMatrix;\r\n    var n = is3d ? 4 : 3;\r\n    var nextOrigin = calculateTransformOrigin(transformOrigin, width, height, prevWidth, prevHeight, prevOrigin);\r\n    var groupLeft = groupable ? left : 0;\r\n    var groupTop = groupable ? top : 0;\r\n    var nextMatrix = getNextMatrix(offsetMatrix, targetMatrix, nextOrigin, n);\r\n    var dist = getDist(fixedPosition, nextMatrix, width, height, n, fixedDirection);\r\n    return minus(dist, [groupLeft, groupTop]);\r\n}\r\nfunction getAbsolutePosition(moveable, direction) {\r\n    return getPosByDirection(getAbsolutePosesByState(moveable.state), direction);\r\n}\n\nfunction getGestoData(moveable, ableName) {\r\n    var targetGesto = moveable.targetGesto;\r\n    var controlGesto = moveable.controlGesto;\r\n    var data;\r\n    if (targetGesto === null || targetGesto === void 0 ? void 0 : targetGesto.isFlag()) {\r\n        data = targetGesto.getEventData()[ableName];\r\n    }\r\n    if (!data && (controlGesto === null || controlGesto === void 0 ? void 0 : controlGesto.isFlag())) {\r\n        data = controlGesto.getEventData()[ableName];\r\n    }\r\n    return data || {};\r\n}\n\nfunction getShadowRoot(parentElement) {\r\n    if (parentElement && parentElement.getRootNode) {\r\n        var rootNode = parentElement.getRootNode();\r\n        if (rootNode.nodeType === 11) {\r\n            return rootNode;\r\n        }\r\n    }\r\n    return;\r\n}\r\nfunction getIndividualTransforms(getStyle) {\r\n    var scale = getStyle(\"scale\");\r\n    var rotate = getStyle(\"rotate\");\r\n    var translate = getStyle(\"translate\");\r\n    var individualTransforms = [];\r\n    if (translate && translate !== \"0px\" && translate !== \"none\") {\r\n        individualTransforms.push(\"translate(\".concat(translate.split(/\\s+/).join(\",\"), \")\"));\r\n    }\r\n    if (rotate && rotate !== \"1\" && rotate !== \"none\") {\r\n        individualTransforms.push(\"rotate(\".concat(rotate, \")\"));\r\n    }\r\n    if (scale && scale !== \"1\" && scale !== \"none\") {\r\n        individualTransforms.push(\"scale(\".concat(scale.split(/\\s+/).join(\",\"), \")\"));\r\n    }\r\n    return individualTransforms;\r\n}\r\nfunction getMatrixStackInfo(target, container, checkContainer) {\r\n    var el = target;\r\n    var matrixes = [];\r\n    var documentElement = getDocumentElement(target) || getDocumentBody(target);\r\n    var requestEnd = !checkContainer && target === container || target === documentElement;\r\n    var isEnd = requestEnd;\r\n    var is3d = false;\r\n    var n = 3;\r\n    var transformOrigin;\r\n    var targetTransformOrigin;\r\n    var targetMatrix;\r\n    var hasFixed = false;\r\n    var offsetContainer = getOffsetInfo(container, container, true).offsetParent;\r\n    var zoom = 1;\r\n    while (el && !isEnd) {\r\n        isEnd = requestEnd;\r\n        var getStyle = getCachedStyle(el);\r\n        var position = getStyle(\"position\");\r\n        var transform = getElementTransform(el);\r\n        var isFixed = position === \"fixed\";\r\n        var individualTransforms = getIndividualTransforms(getStyle);\r\n        var matrix = convertCSStoMatrix(getTransformMatrix(transform));\r\n        var offsetParent = void 0;\r\n        var isOffsetEnd = false;\r\n        var isStatic = false;\r\n        var parentClientLeft = 0;\r\n        var parentClientTop = 0;\r\n        var fixedClientLeft = 0;\r\n        var fixedClientTop = 0;\r\n        var fixedInfo = {\r\n            hasTransform: false,\r\n            fixedContainer: null,\r\n        };\r\n        if (isFixed) {\r\n            hasFixed = true;\r\n            fixedInfo = getPositionFixedInfo(el);\r\n            offsetContainer = fixedInfo.fixedContainer;\r\n        }\r\n        // convert 3 to 4\r\n        var length_1 = matrix.length;\r\n        if (!is3d && (length_1 === 16 || individualTransforms.length)) {\r\n            is3d = true;\r\n            n = 4;\r\n            convert3DMatrixes(matrixes);\r\n            if (targetMatrix) {\r\n                targetMatrix = convertDimension(targetMatrix, 3, 4);\r\n            }\r\n        }\r\n        if (is3d && length_1 === 9) {\r\n            matrix = convertDimension(matrix, 3, 4);\r\n        }\r\n        var _a = getOffsetPosInfo(el, target), tagName = _a.tagName, hasOffset = _a.hasOffset, isSVG = _a.isSVG, origin_1 = _a.origin, targetOrigin = _a.targetOrigin, offsetPos = _a.offset;\r\n        var _b = __read(offsetPos, 2), offsetLeft = _b[0], offsetTop = _b[1];\r\n        if (tagName === \"svg\" && targetMatrix) {\r\n            // scale matrix for svg's SVGElements.\r\n            matrixes.push({\r\n                type: \"target\",\r\n                target: el,\r\n                matrix: getSVGMatrix(el, n),\r\n            });\r\n            matrixes.push({\r\n                type: \"offset\",\r\n                target: el,\r\n                matrix: createIdentityMatrix(n),\r\n            });\r\n        }\r\n        var targetZoom = parseFloat(getStyle(\"zoom\")) || 1;\r\n        if (isFixed) {\r\n            offsetParent = fixedInfo.fixedContainer;\r\n            isOffsetEnd = true;\r\n        }\r\n        else {\r\n            var offsetInfo = getOffsetInfo(el, container, false, true, getStyle);\r\n            var offsetZoom = offsetInfo.offsetZoom;\r\n            offsetParent = offsetInfo.offsetParent;\r\n            isOffsetEnd = offsetInfo.isEnd;\r\n            isStatic = offsetInfo.isStatic;\r\n            zoom *= offsetZoom;\r\n            if ((offsetInfo.isCustomElement || offsetZoom !== 1) && isStatic) {\r\n                offsetLeft -= offsetParent.offsetLeft;\r\n                offsetTop -= offsetParent.offsetTop;\r\n            }\r\n            else if (IS_FIREFOX || IS_CHROMIUM109) {\r\n                var parentSlotElement = offsetInfo.parentSlotElement;\r\n                if (parentSlotElement) {\r\n                    var customOffsetParent = offsetParent;\r\n                    var customOffsetLeft = 0;\r\n                    var customOffsetTop = 0;\r\n                    while (customOffsetParent) {\r\n                        if (!getShadowRoot(customOffsetParent)) {\r\n                            break;\r\n                        }\r\n                        customOffsetLeft += customOffsetParent.offsetLeft;\r\n                        customOffsetTop += customOffsetParent.offsetTop;\r\n                        customOffsetParent = customOffsetParent.offsetParent;\r\n                    }\r\n                    offsetLeft -= customOffsetLeft;\r\n                    offsetTop -= customOffsetTop;\r\n                }\r\n            }\r\n        }\r\n        if (IS_WEBKIT && !IS_SAFARI_ABOVE15\r\n            && hasOffset && !isSVG && isStatic\r\n            && (position === \"relative\" || position === \"static\")) {\r\n            offsetLeft -= offsetParent.offsetLeft;\r\n            offsetTop -= offsetParent.offsetTop;\r\n            requestEnd = requestEnd || isOffsetEnd;\r\n        }\r\n        if (isFixed) {\r\n            if (hasOffset && fixedInfo.hasTransform) {\r\n                // border\r\n                fixedClientLeft = offsetParent.clientLeft;\r\n                fixedClientTop = offsetParent.clientTop;\r\n            }\r\n        }\r\n        else {\r\n            if (hasOffset && offsetContainer !== offsetParent) {\r\n                // border\r\n                parentClientLeft = offsetParent.clientLeft;\r\n                parentClientTop = offsetParent.clientTop;\r\n            }\r\n            if (hasOffset && offsetParent === documentElement) {\r\n                var margin = getBodyOffset(el, false);\r\n                offsetLeft += margin[0];\r\n                offsetTop += margin[1];\r\n            }\r\n        }\r\n        matrixes.push({\r\n            type: \"target\",\r\n            target: el,\r\n            matrix: getAbsoluteMatrix(matrix, n, origin_1),\r\n        });\r\n        if (individualTransforms.length) {\r\n            matrixes.push({\r\n                type: \"offset\",\r\n                target: el,\r\n                matrix: createIdentityMatrix(n),\r\n            });\r\n            matrixes.push({\r\n                type: \"target\",\r\n                target: el,\r\n                matrix: getAbsoluteMatrix(parseMat(individualTransforms), n, origin_1),\r\n            });\r\n        }\r\n        if (hasOffset) {\r\n            var isElementTarget = el === target;\r\n            var scrollLeft = isElementTarget ? 0 : el.scrollLeft;\r\n            var scrollTop = isElementTarget ? 0 : el.scrollTop;\r\n            matrixes.push({\r\n                type: \"offset\",\r\n                target: el,\r\n                matrix: createOriginMatrix([\r\n                    offsetLeft - scrollLeft + parentClientLeft - fixedClientLeft,\r\n                    offsetTop - scrollTop + parentClientTop - fixedClientTop,\r\n                ], n),\r\n            });\r\n        }\r\n        else {\r\n            // svg\r\n            matrixes.push({\r\n                type: \"offset\",\r\n                target: el,\r\n                origin: origin_1,\r\n            });\r\n        }\r\n        // transform   zoom  (0, 0)   matrix .\r\n        if (targetZoom !== 1) {\r\n            matrixes.push({\r\n                type: \"zoom\",\r\n                target: el,\r\n                matrix: getAbsoluteMatrix(createScaleMatrix([targetZoom, targetZoom], n), n, [0, 0]),\r\n            });\r\n        }\r\n        if (!targetMatrix) {\r\n            targetMatrix = matrix;\r\n        }\r\n        if (!transformOrigin) {\r\n            transformOrigin = origin_1;\r\n        }\r\n        if (!targetTransformOrigin) {\r\n            targetTransformOrigin = targetOrigin;\r\n        }\r\n        if (isEnd || isFixed) {\r\n            break;\r\n        }\r\n        else {\r\n            el = offsetParent;\r\n            requestEnd = isOffsetEnd;\r\n        }\r\n        if (!checkContainer || el === documentElement) {\r\n            isEnd = requestEnd;\r\n        }\r\n    }\r\n    if (!targetMatrix) {\r\n        targetMatrix = createIdentityMatrix(n);\r\n    }\r\n    if (!transformOrigin) {\r\n        transformOrigin = [0, 0];\r\n    }\r\n    if (!targetTransformOrigin) {\r\n        targetTransformOrigin = [0, 0];\r\n    }\r\n    return {\r\n        zoom: zoom,\r\n        offsetContainer: offsetContainer,\r\n        matrixes: matrixes,\r\n        targetMatrix: targetMatrix,\r\n        transformOrigin: transformOrigin,\r\n        targetOrigin: targetTransformOrigin,\r\n        is3d: is3d,\r\n        hasFixed: hasFixed,\r\n    };\r\n}\n\nvar cacheStyleMap = null;\r\nvar clientRectStyleMap = null;\r\nvar matrixContainerInfos = null;\r\nfunction setStoreCache(useCache) {\r\n    if (useCache) {\r\n        if (window.Map) {\r\n            cacheStyleMap = new Map();\r\n            clientRectStyleMap = new Map();\r\n        }\r\n        matrixContainerInfos = [];\r\n    }\r\n    else {\r\n        cacheStyleMap = null;\r\n        matrixContainerInfos = null;\r\n        clientRectStyleMap = null;\r\n    }\r\n}\r\nfunction getCachedClientRect(el) {\r\n    var clientRect = clientRectStyleMap === null || clientRectStyleMap === void 0 ? void 0 : clientRectStyleMap.get(el);\r\n    if (clientRect) {\r\n        return clientRect;\r\n    }\r\n    var nextClientRect = getClientRect(el, true);\r\n    if (clientRectStyleMap) {\r\n        clientRectStyleMap.set(el, nextClientRect);\r\n    }\r\n    return nextClientRect;\r\n}\r\nfunction getCachedMatrixContainerInfo(target, container) {\r\n    if (matrixContainerInfos) {\r\n        var result_1 = find(matrixContainerInfos, function (info) { return info[0][0] == target && info[0][1] == container; });\r\n        if (result_1) {\r\n            return result_1[1];\r\n        }\r\n    }\r\n    var result = getMatrixStackInfo(target, container, true);\r\n    if (matrixContainerInfos) {\r\n        matrixContainerInfos.push([[target, container], result]);\r\n    }\r\n    return result;\r\n}\r\nfunction getCachedStyle(element) {\r\n    var cache = cacheStyleMap === null || cacheStyleMap === void 0 ? void 0 : cacheStyleMap.get(element);\r\n    if (!cache) {\r\n        var nextStyle_1 = getWindow(element).getComputedStyle(element);\r\n        if (!cacheStyleMap) {\r\n            return function (property) {\r\n                return nextStyle_1[property];\r\n            };\r\n        }\r\n        cache = {\r\n            style: nextStyle_1,\r\n            cached: {},\r\n        };\r\n        cacheStyleMap.set(element, cache);\r\n    }\r\n    var cached = cache.cached;\r\n    var style = cache.style;\r\n    return function (property) {\r\n        if (!(property in cached)) {\r\n            cached[property] = style[property];\r\n        }\r\n        return cached[property];\r\n    };\r\n}\n\nfunction fillChildEvents(moveable, name, e) {\r\n    var datas = e.originalDatas;\r\n    datas.groupable = datas.groupable || {};\r\n    var groupableDatas = datas.groupable;\r\n    groupableDatas.childDatas = groupableDatas.childDatas || [];\r\n    var childDatas = groupableDatas.childDatas;\r\n    return moveable.moveables.map(function (_, i) {\r\n        childDatas[i] = childDatas[i] || {};\r\n        childDatas[i][name] = childDatas[i][name] || {};\r\n        return __assign(__assign({}, e), { isRequestChild: true, datas: childDatas[i][name], originalDatas: childDatas[i] });\r\n    });\r\n}\r\nfunction triggerChildGesto(moveable, able, type, delta, e, isConvert, ableName) {\r\n    var isStart = !!type.match(/Start$/g);\r\n    var isEnd = !!type.match(/End$/g);\r\n    var isPinch = e.isPinch;\r\n    var datas = e.datas;\r\n    var events = fillChildEvents(moveable, able.name, e);\r\n    var moveables = moveable.moveables;\r\n    var childs = events.map(function (ev, i) {\r\n        var childMoveable = moveables[i];\r\n        var state = childMoveable.state;\r\n        var gestos = state.gestos;\r\n        var childEvent = ev;\r\n        if (isStart) {\r\n            childEvent = new CustomGesto(ableName).dragStart(delta, ev);\r\n        }\r\n        else {\r\n            if (!gestos[ableName]) {\r\n                gestos[ableName] = datas.childGestos[i];\r\n            }\r\n            if (!gestos[ableName]) {\r\n                return;\r\n            }\r\n            childEvent = setCustomDrag(ev, state, delta, isPinch, isConvert, ableName);\r\n        }\r\n        var result = able[type](childMoveable, __assign(__assign({}, childEvent), { parentFlag: true }));\r\n        if (isEnd) {\r\n            gestos[ableName] = null;\r\n        }\r\n        return result;\r\n    });\r\n    if (isStart) {\r\n        datas.childGestos = moveables.map(function (child) { return child.state.gestos[ableName]; });\r\n    }\r\n    return childs;\r\n}\r\nfunction triggerChildAbles(moveable, able, type, e, eachEvent, callback) {\r\n    if (eachEvent === void 0) { eachEvent = function (_, ev) { return ev; }; }\r\n    var isEnd = !!type.match(/End$/g);\r\n    var events = fillChildEvents(moveable, able.name, e);\r\n    var moveables = moveable.moveables;\r\n    var childs = events.map(function (ev, i) {\r\n        var childMoveable = moveables[i];\r\n        var childEvent = ev;\r\n        childEvent = eachEvent(childMoveable, ev);\r\n        var result = able[type](childMoveable, __assign(__assign({}, childEvent), { parentFlag: true }));\r\n        result && callback && callback(childMoveable, ev, result, i);\r\n        if (isEnd) {\r\n            childMoveable.state.gestos = {};\r\n        }\r\n        return result;\r\n    });\r\n    return childs;\r\n}\r\nfunction startChildDist(moveable, child, parentDatas, childEvent) {\r\n    var fixedDirection = parentDatas.fixedDirection;\r\n    var fixedPosition = parentDatas.fixedPosition;\r\n    var startPositions = childEvent.datas.startPositions || getAbsolutePosesByState(child.state);\r\n    var pos = getPosByDirection(startPositions, fixedDirection);\r\n    var _a = __read(calculate(createRotateMatrix(-moveable.rotation / 180 * Math.PI, 3), [pos[0] - fixedPosition[0], pos[1] - fixedPosition[1], 1], 3), 2), originalX = _a[0], originalY = _a[1];\r\n    childEvent.datas.originalX = originalX;\r\n    childEvent.datas.originalY = originalY;\r\n    return childEvent;\r\n}\n\nfunction renderDirectionControlsByInfos(moveable, ableName, renderDirections, React) {\r\n    var _a = moveable.getState(), renderPoses = _a.renderPoses, rotationRad = _a.rotation, direction = _a.direction;\r\n    var zoom = getProps(moveable.props, ableName).zoom;\r\n    var degRotation = absDegree(rotationRad / Math.PI * 180);\r\n    var directionMap = {};\r\n    var renderState = moveable.renderState;\r\n    if (!renderState.renderDirectionMap) {\r\n        renderState.renderDirectionMap = {};\r\n    }\r\n    var renderDirectionMap = renderState.renderDirectionMap;\r\n    renderDirections.forEach(function (_a) {\r\n        var dir = _a.dir;\r\n        directionMap[dir] = true;\r\n    });\r\n    var directionSign = sign(direction);\r\n    return renderDirections.map(function (_a) {\r\n        var data = _a.data, classNames = _a.classNames, dir = _a.dir;\r\n        var indexes = DIRECTION_INDEXES[dir];\r\n        if (!indexes || !directionMap[dir]) {\r\n            return null;\r\n        }\r\n        renderDirectionMap[dir] = true;\r\n        var directionRotation = (throttle(degRotation, 15) + directionSign * DIRECTION_ROTATIONS[dir] + 720) % 180;\r\n        var dataAttrs = {};\r\n        getKeys(data).forEach(function (name) {\r\n            dataAttrs[\"data-\".concat(name)] = data[name];\r\n        });\r\n        return (React.createElement(\"div\", __assign({ className: prefix.apply(void 0, __spreadArray([\"control\", \"direction\", dir, ableName], __read(classNames), false)), \"data-rotation\": directionRotation, \"data-direction\": dir }, dataAttrs, { key: \"direction-\".concat(dir), style: getControlTransform.apply(void 0, __spreadArray([rotationRad, zoom], __read(indexes.map(function (index) { return renderPoses[index]; })), false)) })));\r\n    });\r\n}\r\nfunction renderDirectionControls(moveable, defaultDirections, ableName, React) {\r\n    var _a = getProps(moveable.props, ableName), _b = _a.renderDirections, directions = _b === void 0 ? defaultDirections : _b, displayAroundControls = _a.displayAroundControls;\r\n    if (!directions) {\r\n        return [];\r\n    }\r\n    var renderDirections = directions === true ? DIRECTIONS : directions;\r\n    return __spreadArray(__spreadArray([], __read((displayAroundControls ? renderAroundControls(moveable, React, ableName, renderDirections) : [])), false), __read(renderDirectionControlsByInfos(moveable, ableName, renderDirections.map(function (dir) {\r\n        return {\r\n            data: {},\r\n            classNames: [],\r\n            dir: dir,\r\n        };\r\n    }), React)), false);\r\n}\r\nfunction renderLine(React, direction, pos1, pos2, zoom, key) {\r\n    var classNames = [];\r\n    for (var _i = 6; _i < arguments.length; _i++) {\r\n        classNames[_i - 6] = arguments[_i];\r\n    }\r\n    var rad = getRad(pos1, pos2);\r\n    var rotation = direction ? (throttle(rad / Math.PI * 180, 15)) % 180 : -1;\r\n    return React.createElement(\"div\", { key: \"line-\".concat(key), className: prefix.apply(void 0, __spreadArray([\"line\", \"direction\", direction ? \"edge\" : \"\", direction], __read(classNames), false)), \"data-rotation\": rotation, \"data-line-key\": key, \"data-direction\": direction, style: getLineStyle(pos1, pos2, zoom, rad) });\r\n}\r\nfunction renderEdgeLines(React, ableName, edge, poses, zoom) {\r\n    var directions = edge === true ? DIRECTIONS4 : edge;\r\n    return directions.map(function (direction, i) {\r\n        var _a = __read(DIRECTION_INDEXES[direction], 2), index1 = _a[0], index2 = _a[1];\r\n        if (index2 == null) {\r\n            return;\r\n        }\r\n        return renderLine(React, direction, poses[index1], poses[index2], zoom, \"\".concat(ableName, \"Edge\").concat(i), ableName);\r\n    }).filter(Boolean);\r\n}\r\nfunction getRenderDirections(ableName) {\r\n    return function (moveable, React) {\r\n        var edge = getProps(moveable.props, ableName).edge;\r\n        if (edge && (edge === true || edge.length)) {\r\n            return __spreadArray(__spreadArray([], __read(renderEdgeLines(React, ableName, edge, moveable.getState().renderPoses, moveable.props.zoom)), false), __read(renderDiagonalDirections(moveable, ableName, React)), false);\r\n        }\r\n        return renderAllDirections(moveable, ableName, React);\r\n    };\r\n}\r\nfunction renderAllDirections(moveable, ableName, React) {\r\n    return renderDirectionControls(moveable, DIRECTIONS, ableName, React);\r\n}\r\nfunction renderDiagonalDirections(moveable, ableName, React) {\r\n    return renderDirectionControls(moveable, [\"nw\", \"ne\", \"sw\", \"se\"], ableName, React);\r\n}\r\nfunction renderAroundControls(moveable, React, ableName, renderDirections) {\r\n    var renderState = moveable.renderState;\r\n    if (!renderState.renderDirectionMap) {\r\n        renderState.renderDirectionMap = {};\r\n    }\r\n    var _a = moveable.getState(), renderPoses = _a.renderPoses, rotationRad = _a.rotation, direction = _a.direction;\r\n    var renderDirectionMap = renderState.renderDirectionMap;\r\n    var zoom = moveable.props.zoom;\r\n    var directionSign = sign(direction);\r\n    var degRotation = rotationRad / Math.PI * 180;\r\n    return (renderDirections || getKeys(renderDirectionMap)).map(function (dir) {\r\n        var indexes = DIRECTION_INDEXES[dir];\r\n        if (!indexes) {\r\n            return null;\r\n        }\r\n        var directionRotation = (throttle(degRotation, 15) + directionSign * DIRECTION_ROTATIONS[dir] + 720) % 180;\r\n        var classNames = [\"around-control\"];\r\n        if (ableName) {\r\n            classNames.push(\"direction\", ableName);\r\n        }\r\n        return (React.createElement(\"div\", { className: prefix.apply(void 0, __spreadArray([], __read(classNames), false)), \"data-rotation\": directionRotation, \"data-direction\": dir, key: \"direction-around-\".concat(dir), style: getControlTransform.apply(void 0, __spreadArray([rotationRad, zoom], __read(indexes.map(function (index) { return renderPoses[index]; })), false)) }));\r\n    });\r\n}\n\nfunction checkBoundPoses(bounds, verticalPoses, horizontalPoses) {\r\n    var _a = bounds || {}, _b = _a.position, position = _b === void 0 ? \"client\" : _b, _c = _a.left, left = _c === void 0 ? -Infinity : _c, _d = _a.top, top = _d === void 0 ? -Infinity : _d, _e = _a.right, right = _e === void 0 ? Infinity : _e, _f = _a.bottom, bottom = _f === void 0 ? Infinity : _f;\r\n    var nextBounds = {\r\n        position: position,\r\n        left: left,\r\n        top: top,\r\n        right: right,\r\n        bottom: bottom,\r\n    };\r\n    return {\r\n        vertical: checkBounds(nextBounds, verticalPoses, true),\r\n        horizontal: checkBounds(nextBounds, horizontalPoses, false),\r\n    };\r\n}\r\nfunction getBounds(moveable, externalBounds) {\r\n    var _a = moveable.state, _b = _a.containerClientRect, containerHeight = _b.clientHeight, containerWidth = _b.clientWidth, clientLeft = _b.clientLeft, clientTop = _b.clientTop, _c = _a.snapOffset, snapOffsetLeft = _c.left, snapOffsetTop = _c.top, snapOffsetRight = _c.right, snapOffsetBottom = _c.bottom;\r\n    var bounds = externalBounds || moveable.props.bounds || {};\r\n    var position = bounds.position || \"client\";\r\n    var isCSS = position === \"css\";\r\n    var _d = bounds.left, left = _d === void 0 ? -Infinity : _d, _e = bounds.top, top = _e === void 0 ? -Infinity : _e;\r\n    var _f = bounds.right, right = _f === void 0 ? isCSS ? -Infinity : Infinity : _f, _g = bounds.bottom, bottom = _g === void 0 ? isCSS ? -Infinity : Infinity : _g;\r\n    if (isCSS) {\r\n        right = containerWidth + snapOffsetRight - snapOffsetLeft - right;\r\n        bottom = containerHeight + snapOffsetBottom - snapOffsetTop - bottom;\r\n    }\r\n    return {\r\n        left: left + snapOffsetLeft - clientLeft,\r\n        right: right + snapOffsetLeft - clientLeft,\r\n        top: top + snapOffsetTop - clientTop,\r\n        bottom: bottom + snapOffsetTop - clientTop,\r\n    };\r\n}\r\nfunction checkBoundKeepRatio(moveable, startPos, endPos) {\r\n    var _a = getBounds(moveable), left = _a.left, top = _a.top, right = _a.right, bottom = _a.bottom;\r\n    var _b = __read(endPos, 2), endX = _b[0], endY = _b[1];\r\n    var _c = __read(minus(endPos, startPos), 2), dx = _c[0], dy = _c[1];\r\n    if (abs(dx) < TINY_NUM) {\r\n        dx = 0;\r\n    }\r\n    if (abs(dy) < TINY_NUM) {\r\n        dy = 0;\r\n    }\r\n    var isBottom = dy > 0;\r\n    var isRight = dx > 0;\r\n    var verticalInfo = {\r\n        isBound: false,\r\n        offset: 0,\r\n        pos: 0,\r\n    };\r\n    var horizontalInfo = {\r\n        isBound: false,\r\n        offset: 0,\r\n        pos: 0,\r\n    };\r\n    if (dx === 0 && dy === 0) {\r\n        return {\r\n            vertical: verticalInfo,\r\n            horizontal: horizontalInfo,\r\n        };\r\n    }\r\n    else if (dx === 0) {\r\n        if (isBottom) {\r\n            if (bottom < endY) {\r\n                horizontalInfo.pos = bottom;\r\n                horizontalInfo.offset = endY - bottom;\r\n            }\r\n        }\r\n        else {\r\n            if (top > endY) {\r\n                horizontalInfo.pos = top;\r\n                horizontalInfo.offset = endY - top;\r\n            }\r\n        }\r\n    }\r\n    else if (dy === 0) {\r\n        if (isRight) {\r\n            if (right < endX) {\r\n                verticalInfo.pos = right;\r\n                verticalInfo.offset = endX - right;\r\n            }\r\n        }\r\n        else {\r\n            if (left > endX) {\r\n                verticalInfo.pos = left;\r\n                verticalInfo.offset = endX - left;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        // y - y1 = a * (x - x1)\r\n        var a = dy / dx;\r\n        var b = endPos[1] - a * endX;\r\n        var y = 0;\r\n        var x = 0;\r\n        var isBound = false;\r\n        if (isRight && right <= endX) {\r\n            y = a * right + b;\r\n            x = right;\r\n            isBound = true;\r\n        }\r\n        else if (!isRight && endX <= left) {\r\n            y = a * left + b;\r\n            x = left;\r\n            isBound = true;\r\n        }\r\n        if (isBound) {\r\n            if (y < top || y > bottom) {\r\n                isBound = false;\r\n            }\r\n        }\r\n        if (!isBound) {\r\n            if (isBottom && bottom <= endY) {\r\n                y = bottom;\r\n                x = (y - b) / a;\r\n                isBound = true;\r\n            }\r\n            else if (!isBottom && endY <= top) {\r\n                y = top;\r\n                x = (y - b) / a;\r\n                isBound = true;\r\n            }\r\n        }\r\n        if (isBound) {\r\n            verticalInfo.isBound = true;\r\n            verticalInfo.pos = x;\r\n            verticalInfo.offset = endX - x;\r\n            horizontalInfo.isBound = true;\r\n            horizontalInfo.pos = y;\r\n            horizontalInfo.offset = endY - y;\r\n        }\r\n    }\r\n    return {\r\n        vertical: verticalInfo,\r\n        horizontal: horizontalInfo,\r\n    };\r\n}\r\nfunction checkBounds(bounds, poses, isVertical) {\r\n    // 0   [100 - 200]  300\r\n    var startBoundPos = bounds[isVertical ? \"left\" : \"top\"];\r\n    var endBoundPos = bounds[isVertical ? \"right\" : \"bottom\"];\r\n    // 450\r\n    var minPos = Math.min.apply(Math, __spreadArray([], __read(poses), false));\r\n    var maxPos = Math.max.apply(Math, __spreadArray([], __read(poses), false));\r\n    var boundInfos = [];\r\n    if (startBoundPos + 1 > minPos) {\r\n        boundInfos.push({\r\n            direction: \"start\",\r\n            isBound: true,\r\n            offset: minPos - startBoundPos,\r\n            pos: startBoundPos,\r\n        });\r\n    }\r\n    if (endBoundPos - 1 < maxPos) {\r\n        boundInfos.push({\r\n            direction: \"end\",\r\n            isBound: true,\r\n            offset: maxPos - endBoundPos,\r\n            pos: endBoundPos,\r\n        });\r\n    }\r\n    if (!boundInfos.length) {\r\n        boundInfos.push({\r\n            isBound: false,\r\n            offset: 0,\r\n            pos: 0,\r\n        });\r\n    }\r\n    return boundInfos.sort(function (a, b) { return abs(b.offset) - abs(a.offset); });\r\n}\r\nfunction isBoundRotate$1(relativePoses, boundRect, rad) {\r\n    var nextPoses = rad ? relativePoses.map(function (pos) { return rotate(pos, rad); }) : relativePoses;\r\n    return nextPoses.some(function (pos) {\r\n        return (pos[0] < boundRect.left && abs(pos[0] - boundRect.left) > 0.1)\r\n            || (pos[0] > boundRect.right && abs(pos[0] - boundRect.right) > 0.1)\r\n            || (pos[1] < boundRect.top && abs(pos[1] - boundRect.top) > 0.1)\r\n            || (pos[1] > boundRect.bottom && abs(pos[1] - boundRect.bottom) > 0.1);\r\n    });\r\n}\r\nfunction boundRotate(vec, boundPos, index) {\r\n    var r = getDistSize(vec);\r\n    var nextPos = Math.sqrt(r * r - boundPos * boundPos) || 0;\r\n    return [nextPos, -nextPos].sort(function (a, b) {\r\n        return abs(a - vec[index ? 0 : 1]) - abs(b - vec[index ? 0 : 1]);\r\n    }).map(function (pos) {\r\n        return getRad([0, 0], index ? [pos, boundPos] : [boundPos, pos]);\r\n    });\r\n}\r\nfunction checkRotateBounds(moveable, prevPoses, nextPoses, origin, rotation) {\r\n    if (!moveable.props.bounds) {\r\n        return [];\r\n    }\r\n    var rad = rotation * Math.PI / 180;\r\n    var _a = getBounds(moveable), left = _a.left, top = _a.top, right = _a.right, bottom = _a.bottom;\r\n    var relativeLeft = left - origin[0];\r\n    var relativeRight = right - origin[0];\r\n    var relativeTop = top - origin[1];\r\n    var relativeBottom = bottom - origin[1];\r\n    var boundRect = {\r\n        left: relativeLeft,\r\n        top: relativeTop,\r\n        right: relativeRight,\r\n        bottom: relativeBottom,\r\n    };\r\n    if (!isBoundRotate$1(nextPoses, boundRect, 0)) {\r\n        return [];\r\n    }\r\n    var result = [];\r\n    [\r\n        [relativeLeft, 0],\r\n        [relativeRight, 0],\r\n        [relativeTop, 1],\r\n        [relativeBottom, 1],\r\n    ].forEach(function (_a) {\r\n        var _b = __read(_a, 2), boundPos = _b[0], index = _b[1];\r\n        nextPoses.forEach(function (nextPos) {\r\n            var relativeRad1 = getRad([0, 0], nextPos);\r\n            result.push.apply(result, __spreadArray([], __read(boundRotate(nextPos, boundPos, index)\r\n                .map(function (relativeRad2) { return rad + relativeRad2 - relativeRad1; })\r\n                .filter(function (nextRad) { return !isBoundRotate$1(prevPoses, boundRect, nextRad); })\r\n                .map(function (nextRad) { return throttle(nextRad * 180 / Math.PI, TINY_NUM); })), false));\r\n        });\r\n    });\r\n    return result;\r\n}\n\nvar VERTICAL_NAMES = [\"left\", \"right\", \"center\"];\r\nvar HORIZONTAL_NAMES = [\"top\", \"bottom\", \"middle\"];\r\nvar SNAP_SKIP_NAMES_MAP = {\r\n    \"left\": \"start\",\r\n    \"right\": \"end\",\r\n    \"center\": \"center\",\r\n    \"top\": \"start\",\r\n    \"bottom\": \"end\",\r\n    \"middle\": \"center\",\r\n};\r\nvar VERTICAL_NAMES_MAP = {\r\n    start: \"left\",\r\n    end: \"right\",\r\n    center: \"center\",\r\n};\r\nvar HORIZONTAL_NAMES_MAP = {\r\n    start: \"top\",\r\n    end: \"bottom\",\r\n    center: \"middle\",\r\n};\r\nfunction getInitialBounds() {\r\n    return {\r\n        left: false,\r\n        top: false,\r\n        right: false,\r\n        bottom: false,\r\n    };\r\n}\r\nfunction hasGuidelines(moveable, ableName) {\r\n    var _a = moveable.props, snappable = _a.snappable, bounds = _a.bounds, innerBounds = _a.innerBounds, verticalGuidelines = _a.verticalGuidelines, horizontalGuidelines = _a.horizontalGuidelines, snapGridWidth = _a.snapGridWidth, snapGridHeight = _a.snapGridHeight, _b = moveable.state, guidelines = _b.guidelines, enableSnap = _b.enableSnap;\r\n    if (!snappable ||\r\n        !enableSnap ||\r\n        (ableName && snappable !== true && snappable.indexOf(ableName) < 0)) {\r\n        return false;\r\n    }\r\n    if (snapGridWidth ||\r\n        snapGridHeight ||\r\n        bounds ||\r\n        innerBounds ||\r\n        (guidelines && guidelines.length) ||\r\n        (verticalGuidelines && verticalGuidelines.length) ||\r\n        (horizontalGuidelines && horizontalGuidelines.length)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction getSnapDirections(snapDirections) {\r\n    if (snapDirections === false) {\r\n        return {};\r\n    }\r\n    else if (snapDirections === true || !snapDirections) {\r\n        return { left: true, right: true, top: true, bottom: true };\r\n    }\r\n    return snapDirections;\r\n}\r\nfunction mapSnapDirectionPoses(snapDirections, snapPoses) {\r\n    var nextSnapDirections = getSnapDirections(snapDirections);\r\n    var nextSnapPoses = {};\r\n    for (var name_1 in nextSnapDirections) {\r\n        if (name_1 in snapPoses && nextSnapDirections[name_1]) {\r\n            nextSnapPoses[name_1] = snapPoses[name_1];\r\n        }\r\n    }\r\n    return nextSnapPoses;\r\n}\r\nfunction splitSnapDirectionPoses(snapDirections, snapPoses) {\r\n    var nextSnapPoses = mapSnapDirectionPoses(snapDirections, snapPoses);\r\n    var horizontalNames = HORIZONTAL_NAMES.filter(function (name) { return name in nextSnapPoses; });\r\n    var verticalNames = VERTICAL_NAMES.filter(function (name) { return name in nextSnapPoses; });\r\n    return {\r\n        horizontalNames: horizontalNames,\r\n        verticalNames: verticalNames,\r\n        horizontal: horizontalNames.map(function (name) { return nextSnapPoses[name]; }),\r\n        vertical: verticalNames.map(function (name) { return nextSnapPoses[name]; }),\r\n    };\r\n}\r\nfunction calculateContainerPos(rootMatrix, containerRect, n) {\r\n    var clientPos = calculatePosition(rootMatrix, [containerRect.clientLeft, containerRect.clientTop], n);\r\n    return [\r\n        containerRect.left + clientPos[0],\r\n        containerRect.top + clientPos[1],\r\n    ];\r\n}\r\nfunction solveLineConstants(_a) {\r\n    var _b = __read(_a, 2), point1 = _b[0], point2 = _b[1];\r\n    var dx = point2[0] - point1[0];\r\n    var dy = point2[1] - point1[1];\r\n    if (Math.abs(dx) < TINY_NUM$1) {\r\n        dx = 0;\r\n    }\r\n    if (Math.abs(dy) < TINY_NUM$1) {\r\n        dy = 0;\r\n    }\r\n    // b > 0\r\n    // ax + by + c = 0\r\n    var a = 0;\r\n    var b = 0;\r\n    var c = 0;\r\n    if (!dx) {\r\n        // -x + 1 = 0\r\n        a = -1;\r\n        c = point1[0];\r\n    }\r\n    else if (!dy) {\r\n        // y - 1 = 0\r\n        b = 1;\r\n        c = -point1[1];\r\n    }\r\n    else {\r\n        // y = -a(x - x1) + y1\r\n        // ax + y + a * x1 - y1 = 0\r\n        a = -dy / dx;\r\n        b = 1;\r\n        c = a * point1[0] - point1[1];\r\n    }\r\n    return [a, b, c].map(function (v) { return throttle(v, TINY_NUM$1); });\r\n}\n\nfunction checkMoveableSnapPoses(moveable, posesX, posesY, dirXs, dirYs, customSnapThreshold) {\r\n    if (dirXs === void 0) { dirXs = []; }\r\n    if (dirYs === void 0) { dirYs = []; }\r\n    var props = moveable.props;\r\n    var snapThreshold = selectValue(customSnapThreshold, props.snapThreshold, 5);\r\n    return checkSnapPoses(moveable.state.guidelines, posesX, posesY, dirXs, dirYs, snapThreshold);\r\n}\r\nfunction checkSnapPoses(guidelines, posesX, posesY, dirXs, dirYs, snapThreshold) {\r\n    return {\r\n        vertical: checkSnap(guidelines, \"vertical\", posesX, snapThreshold, dirXs),\r\n        horizontal: checkSnap(guidelines, \"horizontal\", posesY, snapThreshold, dirYs),\r\n    };\r\n}\r\nfunction checkSnapKeepRatio(moveable, startPos, endPos) {\r\n    var _a = __read(endPos, 2), endX = _a[0], endY = _a[1];\r\n    var _b = __read(startPos, 2), startX = _b[0], startY = _b[1];\r\n    var _c = __read(minus(endPos, startPos), 2), dx = _c[0], dy = _c[1];\r\n    var isBottom = dy > 0;\r\n    var isRight = dx > 0;\r\n    dx = getTinyDist(dx);\r\n    dy = getTinyDist(dy);\r\n    var verticalInfo = {\r\n        isSnap: false,\r\n        offset: 0,\r\n        pos: 0,\r\n    };\r\n    var horizontalInfo = {\r\n        isSnap: false,\r\n        offset: 0,\r\n        pos: 0,\r\n    };\r\n    if (dx === 0 && dy === 0) {\r\n        return {\r\n            vertical: verticalInfo,\r\n            horizontal: horizontalInfo,\r\n        };\r\n    }\r\n    var _d = checkMoveableSnapPoses(moveable, dx ? [endX] : [], dy ? [endY] : []), verticalSnapInfo = _d.vertical, horizontalSnapInfo = _d.horizontal;\r\n    verticalSnapInfo.posInfos.filter(function (_a) {\r\n        var pos = _a.pos;\r\n        return isRight ? pos >= startX : pos <= startX;\r\n    });\r\n    horizontalSnapInfo.posInfos.filter(function (_a) {\r\n        var pos = _a.pos;\r\n        return isBottom ? pos >= startY : pos <= startY;\r\n    });\r\n    verticalSnapInfo.isSnap = verticalSnapInfo.posInfos.length > 0;\r\n    horizontalSnapInfo.isSnap = horizontalSnapInfo.posInfos.length > 0;\r\n    var _e = getNearestSnapGuidelineInfo(verticalSnapInfo), isVerticalSnap = _e.isSnap, verticalGuideline = _e.guideline;\r\n    var _f = getNearestSnapGuidelineInfo(horizontalSnapInfo), isHorizontalSnap = _f.isSnap, horizontalGuideline = _f.guideline;\r\n    var horizontalPos = isHorizontalSnap ? horizontalGuideline.pos[1] : 0;\r\n    var verticalPos = isVerticalSnap ? verticalGuideline.pos[0] : 0;\r\n    if (dx === 0) {\r\n        if (isHorizontalSnap) {\r\n            horizontalInfo.isSnap = true;\r\n            horizontalInfo.pos = horizontalGuideline.pos[1];\r\n            horizontalInfo.offset = endY - horizontalInfo.pos;\r\n        }\r\n    }\r\n    else if (dy === 0) {\r\n        if (isVerticalSnap) {\r\n            verticalInfo.isSnap = true;\r\n            verticalInfo.pos = verticalPos;\r\n            verticalInfo.offset = endX - verticalPos;\r\n        }\r\n    }\r\n    else {\r\n        // y - y1 = a * (x - x1)\r\n        var a = dy / dx;\r\n        var b = endPos[1] - a * endX;\r\n        var y = 0;\r\n        var x = 0;\r\n        var isSnap = false;\r\n        if (isVerticalSnap) {\r\n            x = verticalPos;\r\n            y = a * x + b;\r\n            isSnap = true;\r\n        }\r\n        else if (isHorizontalSnap) {\r\n            y = horizontalPos;\r\n            x = (y - b) / a;\r\n            isSnap = true;\r\n        }\r\n        if (isSnap) {\r\n            verticalInfo.isSnap = true;\r\n            verticalInfo.pos = x;\r\n            verticalInfo.offset = endX - x;\r\n            horizontalInfo.isSnap = true;\r\n            horizontalInfo.pos = y;\r\n            horizontalInfo.offset = endY - y;\r\n        }\r\n    }\r\n    return {\r\n        vertical: verticalInfo,\r\n        horizontal: horizontalInfo,\r\n    };\r\n}\r\nfunction getStringDirection(dir) {\r\n    var stringDirection = \"\";\r\n    if (dir === -1 || dir === \"top\" || dir === \"left\") {\r\n        stringDirection = \"start\";\r\n    }\r\n    else if (dir === 0 || dir === \"center\" || dir === \"middle\") {\r\n        stringDirection = \"center\";\r\n    }\r\n    else if (dir === 1 || dir === \"right\" || dir === \"bottom\") {\r\n        stringDirection = \"end\";\r\n    }\r\n    return stringDirection;\r\n}\r\nfunction checkSnaps(moveable, rect, customSnapThreshold) {\r\n    var poses = splitSnapDirectionPoses(moveable.props.snapDirections, rect);\r\n    var result = checkMoveableSnapPoses(moveable, poses.vertical, poses.horizontal, poses.verticalNames.map(function (name) { return getStringDirection(name); }), poses.horizontalNames.map(function (name) { return getStringDirection(name); }), customSnapThreshold);\r\n    var horizontalDirection = getStringDirection(poses.horizontalNames[result.horizontal.index]);\r\n    var verticalDirection = getStringDirection(poses.verticalNames[result.vertical.index]);\r\n    return {\r\n        vertical: __assign(__assign({}, result.vertical), { direction: verticalDirection }),\r\n        horizontal: __assign(__assign({}, result.horizontal), { direction: horizontalDirection }),\r\n    };\r\n}\r\nfunction getNearestSnapGuidelineInfo(snapInfo) {\r\n    var isSnap = snapInfo.isSnap;\r\n    if (!isSnap) {\r\n        return {\r\n            isSnap: false,\r\n            offset: 0,\r\n            dist: -1,\r\n            pos: 0,\r\n            guideline: null,\r\n        };\r\n    }\r\n    var posInfo = snapInfo.posInfos[0];\r\n    var guidelineInfo = posInfo.guidelineInfos[0];\r\n    var offset = guidelineInfo.offset;\r\n    var dist = guidelineInfo.dist;\r\n    var guideline = guidelineInfo.guideline;\r\n    return {\r\n        isSnap: isSnap,\r\n        offset: offset,\r\n        dist: dist,\r\n        pos: posInfo.pos,\r\n        guideline: guideline,\r\n    };\r\n}\r\nfunction checkSnap(guidelines, targetType, targetPoses, snapThreshold, dirs) {\r\n    var _a, _b;\r\n    if (dirs === void 0) { dirs = []; }\r\n    if (!guidelines || !guidelines.length) {\r\n        return {\r\n            isSnap: false,\r\n            index: -1,\r\n            direction: \"\",\r\n            posInfos: [],\r\n        };\r\n    }\r\n    var isVertical = targetType === \"vertical\";\r\n    var posType = isVertical ? 0 : 1;\r\n    var snapPosInfos = targetPoses.map(function (targetPos, index) {\r\n        var direction = dirs[index] || \"\";\r\n        var guidelineInfos = guidelines.map(function (guideline) {\r\n            var pos = guideline.pos;\r\n            var offset = targetPos - pos[posType];\r\n            return {\r\n                offset: offset,\r\n                dist: abs(offset),\r\n                guideline: guideline,\r\n                direction: direction,\r\n            };\r\n        }).filter(function (_a) {\r\n            var guideline = _a.guideline, dist = _a.dist;\r\n            var type = guideline.type;\r\n            if (type !== targetType\r\n                || dist > snapThreshold) {\r\n                return false;\r\n            }\r\n            return true;\r\n        }).sort(function (a, b) { return a.dist - b.dist; });\r\n        return {\r\n            pos: targetPos,\r\n            index: index,\r\n            guidelineInfos: guidelineInfos,\r\n            direction: direction,\r\n        };\r\n    }).filter(function (snapPosInfo) {\r\n        return snapPosInfo.guidelineInfos.length > 0;\r\n    }).sort(function (a, b) {\r\n        return a.guidelineInfos[0].dist - b.guidelineInfos[0].dist;\r\n    });\r\n    var isSnap = snapPosInfos.length > 0;\r\n    return {\r\n        isSnap: isSnap,\r\n        index: isSnap ? snapPosInfos[0].index : -1,\r\n        direction: (_b = (_a = snapPosInfos[0]) === null || _a === void 0 ? void 0 : _a.direction) !== null && _b !== void 0 ? _b : \"\",\r\n        posInfos: snapPosInfos,\r\n    };\r\n}\r\nfunction getSnapInfosByDirection(moveable, \r\n// pos1 pos2 pos3 pos4\r\nposes, snapDirection, snapThreshold) {\r\n    if (snapThreshold === void 0) { snapThreshold = 1; }\r\n    var dirs = [];\r\n    if (snapDirection[0] && snapDirection[1]) {\r\n        dirs = [\r\n            snapDirection,\r\n            [-snapDirection[0], snapDirection[1]],\r\n            [snapDirection[0], -snapDirection[1]],\r\n        ];\r\n    }\r\n    else if (!snapDirection[0] && !snapDirection[1]) {\r\n        [\r\n            [-1, -1],\r\n            [1, -1],\r\n            [1, 1],\r\n            [-1, 1],\r\n        ].forEach(function (dir, i, arr) {\r\n            var nextDir = (arr[i + 1] || arr[0]);\r\n            dirs.push(dir);\r\n            dirs.push([\r\n                (dir[0] + nextDir[0]) / 2,\r\n                (dir[1] + nextDir[1]) / 2,\r\n            ]);\r\n        });\r\n    }\r\n    else {\r\n        if (moveable.props.keepRatio) {\r\n            dirs.push([-1, -1], [-1, 1], [1, -1], [1, 1], snapDirection);\r\n        }\r\n        else {\r\n            dirs.push.apply(dirs, __spreadArray([], __read(getPosesByDirection([\r\n                [-1, -1],\r\n                [1, -1],\r\n                [-1, -1],\r\n                [1, 1],\r\n            ], snapDirection)), false));\r\n            if (dirs.length > 1) {\r\n                dirs.push([\r\n                    (dirs[0][0] + dirs[1][0]) / 2,\r\n                    (dirs[0][1] + dirs[1][1]) / 2,\r\n                ]);\r\n            }\r\n        }\r\n    }\r\n    var nextPoses = dirs.map(function (dir) { return getPosByDirection(poses, dir); });\r\n    var xs = nextPoses.map(function (pos) { return pos[0]; });\r\n    var ys = nextPoses.map(function (pos) { return pos[1]; });\r\n    var result = checkMoveableSnapPoses(moveable, xs, ys, dirs.map(function (dir) { return getStringDirection(dir[0]); }), dirs.map(function (dir) { return getStringDirection(dir[1]); }), snapThreshold);\r\n    var verticalDirection = getStringDirection(dirs.map(function (dir) { return dir[0]; })[result.vertical.index]);\r\n    var horizontalDirection = getStringDirection(dirs.map(function (dir) { return dir[1]; })[result.horizontal.index]);\r\n    return {\r\n        vertical: __assign(__assign({}, result.vertical), { direction: verticalDirection }),\r\n        horizontal: __assign(__assign({}, result.horizontal), { direction: horizontalDirection }),\r\n    };\r\n}\r\nfunction checkSnapBoundPriority(a, b) {\r\n    var aDist = abs(a.offset);\r\n    var bDist = abs(b.offset);\r\n    if (a.isBound && b.isBound) {\r\n        return bDist - aDist;\r\n    }\r\n    else if (a.isBound) {\r\n        return -1;\r\n    }\r\n    else if (b.isBound) {\r\n        return 1;\r\n    }\r\n    else if (a.isSnap && b.isSnap) {\r\n        return bDist - aDist;\r\n    }\r\n    else if (a.isSnap) {\r\n        return -1;\r\n    }\r\n    else if (b.isSnap) {\r\n        return 1;\r\n    }\r\n    else if (aDist < TINY_NUM) {\r\n        return 1;\r\n    }\r\n    else if (bDist < TINY_NUM) {\r\n        return -1;\r\n    }\r\n    return aDist - bDist;\r\n}\r\nfunction getNearOffsetInfo(offsets, index) {\r\n    return offsets.slice().sort(function (a, b) {\r\n        var aSign = a.sign[index];\r\n        var bSign = b.sign[index];\r\n        var aOffset = a.offset[index];\r\n        var bOffset = b.offset[index];\r\n        // -1 The positions of a and b do not change.\r\n        // 1 The positions of a and b are reversed.\r\n        if (!aSign) {\r\n            return 1;\r\n        }\r\n        else if (!bSign) {\r\n            return -1;\r\n        }\r\n        return checkSnapBoundPriority({ isBound: a.isBound, isSnap: a.isSnap, offset: aOffset }, { isBound: b.isBound, isSnap: b.isSnap, offset: bOffset });\r\n    })[0];\r\n}\r\nfunction getCheckSnapDirections(direction, fixedDirection, keepRatio) {\r\n    var directions = [];\r\n    // const fixedDirection = [-direction[0], -direction[1]];\r\n    if (keepRatio) {\r\n        if (abs(fixedDirection[0]) !== 1 || abs(fixedDirection[1]) !== 1) {\r\n            directions.push([fixedDirection, [-1, -1]], [fixedDirection, [-1, 1]], [fixedDirection, [1, -1]], [fixedDirection, [1, 1]]);\r\n        }\r\n        else {\r\n            directions.push([fixedDirection, [direction[0], -direction[1]]], [fixedDirection, [-direction[0], direction[1]]]);\r\n        }\r\n        directions.push([fixedDirection, direction]);\r\n    }\r\n    else {\r\n        if ((direction[0] && direction[1]) || (!direction[0] && !direction[1])) {\r\n            var endDirection_1 = direction[0] ? direction : [1, 1];\r\n            [1, -1].forEach(function (signX) {\r\n                [1, -1].forEach(function (signY) {\r\n                    var nextDirection = [signX * endDirection_1[0], signY * endDirection_1[1]];\r\n                    if (fixedDirection[0] === nextDirection[0]\r\n                        && fixedDirection[1] === nextDirection[1]) {\r\n                        return;\r\n                    }\r\n                    directions.push([fixedDirection, nextDirection]);\r\n                });\r\n            });\r\n        }\r\n        else if (direction[0]) {\r\n            var signs = abs(fixedDirection[0]) === 1 ? [1] : [1, -1];\r\n            signs.forEach(function (sign) {\r\n                directions.push([\r\n                    [fixedDirection[0], -1],\r\n                    [sign * direction[0], -1],\r\n                ], [\r\n                    [fixedDirection[0], 0],\r\n                    [sign * direction[0], 0],\r\n                ], [\r\n                    [fixedDirection[0], 1],\r\n                    [sign * direction[0], 1],\r\n                ]);\r\n            });\r\n        }\r\n        else if (direction[1]) {\r\n            var signs = abs(fixedDirection[1]) === 1 ? [1] : [1, -1];\r\n            signs.forEach(function (sign) {\r\n                directions.push([\r\n                    [-1, fixedDirection[1]],\r\n                    [-1, sign * direction[1]],\r\n                ], [\r\n                    [0, fixedDirection[1]],\r\n                    [0, sign * direction[1]],\r\n                ], [\r\n                    [1, fixedDirection[1]],\r\n                    [1, sign * direction[1]],\r\n                ]);\r\n            });\r\n        }\r\n    }\r\n    return directions;\r\n}\n\nfunction isStartLine(dot, line) {\r\n    // l    o     => true\r\n    // o    l    => false\r\n    var cx = average([line[0][0], line[1][0]]);\r\n    var cy = average([line[0][1], line[1][1]]);\r\n    return {\r\n        vertical: cx <= dot[0],\r\n        horizontal: cy <= dot[1],\r\n    };\r\n}\r\nfunction hitTestLine(dot, _a) {\r\n    var _b = __read(_a, 2), pos1 = _b[0], pos2 = _b[1];\r\n    var dx = pos2[0] - pos1[0];\r\n    var dy = pos2[1] - pos1[1];\r\n    if (abs(dx) < TINY_NUM) {\r\n        dx = 0;\r\n    }\r\n    if (abs(dy) < TINY_NUM) {\r\n        dy = 0;\r\n    }\r\n    var test1;\r\n    var test2;\r\n    if (!dx) {\r\n        test1 = pos1[0];\r\n        test2 = dot[0];\r\n    }\r\n    else if (!dy) {\r\n        test1 = pos1[1];\r\n        test2 = dot[1];\r\n    }\r\n    else {\r\n        var a = dy / dx;\r\n        // y = a * (x - pos1) + pos1\r\n        test1 = a * (dot[0] - pos1[0]) + pos1[1];\r\n        test2 = dot[1];\r\n    }\r\n    return test1 - test2;\r\n}\r\nfunction isSameStartLine(dots, line, centerSign, error) {\r\n    if (error === void 0) { error = TINY_NUM; }\r\n    return dots.every(function (dot) {\r\n        var value = hitTestLine(dot, line);\r\n        var sign = value <= 0;\r\n        return sign === centerSign || abs(value) <= error;\r\n    });\r\n}\r\nfunction checkInnerBoundDot(pos, start, end, isStart, threshold) {\r\n    if (threshold === void 0) { threshold = 0; }\r\n    if ((isStart && start - threshold <= pos)\r\n        || (!isStart && pos <= end + threshold)) {\r\n        // false 402 565 602 => 37 ([0, 37])\r\n        // true 400 524.9712603540036 600 => 124 ([124, 0])\r\n        // true 400 410 600 => 10 ([10, 0])\r\n        return {\r\n            isBound: true,\r\n            offset: isStart ? start - pos : end - pos,\r\n        };\r\n    }\r\n    return {\r\n        isBound: false,\r\n        offset: 0,\r\n    };\r\n}\r\nfunction checkInnerBound(moveable, _a) {\r\n    var line = _a.line, centerSign = _a.centerSign, verticalSign = _a.verticalSign, horizontalSign = _a.horizontalSign, lineConstants = _a.lineConstants;\r\n    var bounds = moveable.props.innerBounds;\r\n    if (!bounds) {\r\n        return {\r\n            isAllBound: false,\r\n            isBound: false,\r\n            isVerticalBound: false,\r\n            isHorizontalBound: false,\r\n            offset: [0, 0],\r\n        };\r\n    }\r\n    var left = bounds.left, top = bounds.top, width = bounds.width, height = bounds.height;\r\n    var leftLine = [[left, top], [left, top + height]];\r\n    var topLine = [[left, top], [left + width, top]];\r\n    var rightLine = [[left + width, top], [left + width, top + height]];\r\n    var bottomLine = [[left, top + height], [left + width, top + height]];\r\n    if (isSameStartLine([\r\n        [left, top],\r\n        [left + width, top],\r\n        [left, top + height],\r\n        [left + width, top + height],\r\n    ], line, centerSign)) {\r\n        return {\r\n            isAllBound: false,\r\n            isBound: false,\r\n            isVerticalBound: false,\r\n            isHorizontalBound: false,\r\n            offset: [0, 0],\r\n        };\r\n    }\r\n    // test vertical\r\n    var topBoundInfo = checkLineBoundCollision(line, lineConstants, topLine, verticalSign);\r\n    var bottomBoundInfo = checkLineBoundCollision(line, lineConstants, bottomLine, verticalSign);\r\n    // test horizontal\r\n    var leftBoundInfo = checkLineBoundCollision(line, lineConstants, leftLine, horizontalSign);\r\n    var rightBoundInfo = checkLineBoundCollision(line, lineConstants, rightLine, horizontalSign);\r\n    var isAllVerticalBound = topBoundInfo.isBound && bottomBoundInfo.isBound;\r\n    var isVerticalBound = topBoundInfo.isBound || bottomBoundInfo.isBound;\r\n    var isAllHorizontalBound = leftBoundInfo.isBound && rightBoundInfo.isBound;\r\n    var isHorizontalBound = leftBoundInfo.isBound || rightBoundInfo.isBound;\r\n    var verticalOffset = maxOffset(topBoundInfo.offset, bottomBoundInfo.offset);\r\n    var horizontalOffset = maxOffset(leftBoundInfo.offset, rightBoundInfo.offset);\r\n    var offset = [0, 0];\r\n    var isBound = false;\r\n    var isAllBound = false;\r\n    if (abs(horizontalOffset) < abs(verticalOffset)) {\r\n        offset = [verticalOffset, 0];\r\n        isBound = isVerticalBound;\r\n        isAllBound = isAllVerticalBound;\r\n    }\r\n    else {\r\n        offset = [0, horizontalOffset];\r\n        isBound = isHorizontalBound;\r\n        isAllBound = isAllHorizontalBound;\r\n    }\r\n    return {\r\n        isAllBound: isAllBound,\r\n        isVerticalBound: isVerticalBound,\r\n        isHorizontalBound: isHorizontalBound,\r\n        isBound: isBound,\r\n        offset: offset,\r\n    };\r\n}\r\nfunction checkLineBoundCollision(line, _a, boundLine, isStart, threshold, isRender) {\r\n    var _b = __read(_a, 2), a = _b[0], b = _b[1];\r\n    var dot1 = line[0];\r\n    // const dot2 = line[1];\r\n    var boundDot1 = boundLine[0];\r\n    var boundDot2 = boundLine[1];\r\n    // const dy1 = getTinyDist(dot2[1] - dot1[1]);\r\n    // const dx1 = getTinyDist(dot2[0] - dot1[0]);\r\n    var dy2 = getTinyDist(boundDot2[1] - boundDot1[1]);\r\n    var dx2 = getTinyDist(boundDot2[0] - boundDot1[0]);\r\n    var hasDx = b;\r\n    var hasDy = a;\r\n    var slope = -a / b;\r\n    // lineConstants\r\n    // ax + by + c = 0\r\n    // dx2 or dy2 is zero\r\n    if (!dx2) {\r\n        // vertical\r\n        // by + c = 0\r\n        if (isRender && !hasDy) {\r\n            // 90deg\r\n            return {\r\n                isBound: false,\r\n                offset: 0,\r\n            };\r\n        }\r\n        else if (hasDx) {\r\n            // ax + by + c = 0\r\n            // const y = dy1 ? dy1 / dx1 * (boundDot1[0] - dot1[0]) + dot1[1] : dot1[1];\r\n            var y = slope * (boundDot1[0] - dot1[0]) + dot1[1];\r\n            // boundDot1[1] <= y  <= boundDot2[1]\r\n            return checkInnerBoundDot(y, boundDot1[1], boundDot2[1], isStart, threshold);\r\n        }\r\n        else {\r\n            // ax + c = 0\r\n            var offset = boundDot1[0] - dot1[0];\r\n            var isBound = abs(offset) <= (threshold || 0);\r\n            return {\r\n                isBound: isBound,\r\n                offset: isBound ? offset : 0,\r\n            };\r\n        }\r\n    }\r\n    else if (!dy2) {\r\n        // horizontal\r\n        if (isRender && !hasDx) {\r\n            // 90deg\r\n            return {\r\n                isBound: false,\r\n                offset: 0,\r\n            };\r\n        }\r\n        else if (hasDy) {\r\n            // y = a * (x - x1) + y1\r\n            // x = (y - y1) / a + x1\r\n            // const a = dy1 / dx1;\r\n            // const x = dx1 ? (boundDot1[1] - dot1[1]) / a + dot1[0] : dot1[0];\r\n            var x = (boundDot1[1] - dot1[1]) / slope + dot1[0];\r\n            // boundDot1[0] <= x && x <= boundDot2[0]\r\n            return checkInnerBoundDot(x, boundDot1[0], boundDot2[0], isStart, threshold);\r\n        }\r\n        else {\r\n            var offset = boundDot1[1] - dot1[1];\r\n            var isBound = abs(offset) <= (threshold || 0);\r\n            return {\r\n                isBound: isBound,\r\n                offset: isBound ? offset : 0,\r\n            };\r\n        }\r\n    }\r\n    return {\r\n        isBound: false,\r\n        offset: 0,\r\n    };\r\n}\r\nfunction getInnerBoundInfo(moveable, lineInfos, datas) {\r\n    return lineInfos.map(function (info) {\r\n        var _a = checkInnerBound(moveable, info), isBound = _a.isBound, offset = _a.offset, isVerticalBound = _a.isVerticalBound, isHorizontalBound = _a.isHorizontalBound;\r\n        var multiple = info.multiple;\r\n        var sizeOffset = getDragDist({\r\n            datas: datas,\r\n            distX: offset[0],\r\n            distY: offset[1],\r\n        }).map(function (size, i) { return size * (multiple[i] ? 2 / multiple[i] : 0); });\r\n        return {\r\n            sign: multiple,\r\n            isBound: isBound,\r\n            isVerticalBound: isVerticalBound,\r\n            isHorizontalBound: isHorizontalBound,\r\n            isSnap: false,\r\n            offset: sizeOffset,\r\n        };\r\n    });\r\n}\r\nfunction getInnerBoundDragInfo(moveable, poses, datas) {\r\n    var _a;\r\n    var lines = getCheckInnerBoundLineInfos(moveable, poses, [0, 0], false).map(function (info) {\r\n        return __assign(__assign({}, info), { multiple: info.multiple.map(function (dir) { return abs(dir) * 2; }) });\r\n    });\r\n    var innerBoundInfo = getInnerBoundInfo(moveable, lines, datas);\r\n    var widthOffsetInfo = getNearOffsetInfo(innerBoundInfo, 0);\r\n    var heightOffsetInfo = getNearOffsetInfo(innerBoundInfo, 1);\r\n    var verticalOffset = 0;\r\n    var horizontalOffset = 0;\r\n    var isVerticalBound = widthOffsetInfo.isVerticalBound || heightOffsetInfo.isVerticalBound;\r\n    var isHorizontalBound = widthOffsetInfo.isHorizontalBound || heightOffsetInfo.isHorizontalBound;\r\n    if (isVerticalBound || isHorizontalBound) {\r\n        _a = __read(getInverseDragDist({\r\n            datas: datas,\r\n            distX: -widthOffsetInfo.offset[0],\r\n            distY: -heightOffsetInfo.offset[1],\r\n        }), 2), verticalOffset = _a[0], horizontalOffset = _a[1];\r\n    }\r\n    return {\r\n        vertical: {\r\n            isBound: isVerticalBound,\r\n            offset: verticalOffset,\r\n        },\r\n        horizontal: {\r\n            isBound: isHorizontalBound,\r\n            offset: horizontalOffset,\r\n        },\r\n    };\r\n}\r\nfunction getCheckSnapLineDirections(direction, keepRatio) {\r\n    var lineDirections = [];\r\n    var x = direction[0];\r\n    var y = direction[1];\r\n    if (x && y) {\r\n        lineDirections.push([[0, y * 2], direction, [-x, y]], [[x * 2, 0], direction, [x, -y]]);\r\n    }\r\n    else if (x) {\r\n        // vertcal\r\n        lineDirections.push([[x * 2, 0], [x, 1], [x, -1]]);\r\n        if (keepRatio) {\r\n            lineDirections.push([[0, -1], [x, -1], [-x, -1]], [[0, 1], [x, 1], [-x, 1]]);\r\n        }\r\n    }\r\n    else if (y) {\r\n        // horizontal\r\n        lineDirections.push([[0, y * 2], [1, y], [-1, y]]);\r\n        if (keepRatio) {\r\n            lineDirections.push([[-1, 0], [-1, y], [-1, -y]], [[1, 0], [1, y], [1, -y]]);\r\n        }\r\n    }\r\n    else {\r\n        // [0, 0] to all direction\r\n        lineDirections.push([[-1, 0], [-1, -1], [-1, 1]], [[1, 0], [1, -1], [1, 1]], [[0, -1], [-1, -1], [1, -1]], [[0, 1], [-1, 1], [1, 1]]);\r\n    }\r\n    return lineDirections;\r\n}\r\nfunction getCheckInnerBoundLineInfos(moveable, poses, direction, keepRatio) {\r\n    var _a = moveable.state, allMatrix = _a.allMatrix, is3d = _a.is3d;\r\n    var virtualPoses = calculatePoses(allMatrix, 100, 100, is3d ? 4 : 3);\r\n    var center = getPosByDirection(virtualPoses, [0, 0]);\r\n    return getCheckSnapLineDirections(direction, keepRatio).map(function (_a) {\r\n        var _b = __read(_a, 3), multiple = _b[0], dir1 = _b[1], dir2 = _b[2];\r\n        var virtualLine = [\r\n            getPosByDirection(virtualPoses, dir1),\r\n            getPosByDirection(virtualPoses, dir2),\r\n        ];\r\n        var lineConstants = solveLineConstants(virtualLine);\r\n        var _c = isStartLine(center, virtualLine), verticalSign = _c.vertical, horizontalSign = _c.horizontal;\r\n        var centerSign = hitTestLine(center, virtualLine) <= 0;\r\n        return {\r\n            multiple: multiple,\r\n            centerSign: centerSign,\r\n            verticalSign: verticalSign,\r\n            horizontalSign: horizontalSign,\r\n            lineConstants: lineConstants,\r\n            line: [\r\n                getPosByDirection(poses, dir1),\r\n                getPosByDirection(poses, dir2),\r\n            ],\r\n        };\r\n    });\r\n}\r\nfunction isBoundRotate(relativePoses, boundDots, center, rad) {\r\n    var nextPoses = rad ? relativePoses.map(function (pos) { return rotate(pos, rad); }) : relativePoses;\r\n    return [\r\n        [nextPoses[0], nextPoses[1]],\r\n        [nextPoses[1], nextPoses[3]],\r\n        [nextPoses[3], nextPoses[2]],\r\n        [nextPoses[2], nextPoses[0]],\r\n    ].some(function (line) {\r\n        var centerSign = hitTestLine(center, line) <= 0;\r\n        return !isSameStartLine(boundDots, line, centerSign);\r\n    });\r\n}\r\nfunction getDistPointLine(_a) {\r\n    // x = 0, y = 0\r\n    // d = (ax + by + c) / root(a2 + b2)\r\n    var _b = __read(_a, 2), pos1 = _b[0], pos2 = _b[1];\r\n    var dx = pos2[0] - pos1[0];\r\n    var dy = pos2[1] - pos1[1];\r\n    if (!dx) {\r\n        return abs(pos1[0]);\r\n    }\r\n    if (!dy) {\r\n        return abs(pos1[1]);\r\n    }\r\n    // y - y1 = a(x - x1)\r\n    // 0 = ax -y + -a * x1 + y1\r\n    var a = dy / dx;\r\n    return abs((-a * pos1[0] + pos1[1]) / Math.sqrt(Math.pow(a, 2) + 1));\r\n}\r\nfunction solveReverseLine(_a) {\r\n    var _b = __read(_a, 2), pos1 = _b[0], pos2 = _b[1];\r\n    var dx = pos2[0] - pos1[0];\r\n    var dy = pos2[1] - pos1[1];\r\n    if (!dx) {\r\n        return [pos1[0], 0];\r\n    }\r\n    if (!dy) {\r\n        return [0, pos1[1]];\r\n    }\r\n    var a = dy / dx;\r\n    // y - y1 = a (x  - x1)\r\n    // y = ax - a * x1 + y1\r\n    var b = -a * pos1[0] + pos1[1];\r\n    // y = ax + b = -1/a x\r\n    // x = -b / (a + 1 / a)\r\n    // y = b / (1 + 1 / a^2)\r\n    return [\r\n        -b / (a + 1 / a),\r\n        b / ((a * a) + 1),\r\n    ];\r\n}\r\nfunction checkRotateInnerBounds(moveable, prevPoses, nextPoses, origin, rotation) {\r\n    var bounds = moveable.props.innerBounds;\r\n    var rad = rotation * Math.PI / 180;\r\n    if (!bounds) {\r\n        return [];\r\n    }\r\n    var left = bounds.left, top = bounds.top, width = bounds.width, height = bounds.height;\r\n    var relativeLeft = left - origin[0];\r\n    var relativeRight = left + width - origin[0];\r\n    var relativeTop = top - origin[1];\r\n    var relativeBottom = top + height - origin[1];\r\n    var dots = [\r\n        [relativeLeft, relativeTop],\r\n        [relativeRight, relativeTop],\r\n        [relativeLeft, relativeBottom],\r\n        [relativeRight, relativeBottom],\r\n    ];\r\n    var center = getPosByDirection(nextPoses, [0, 0]);\r\n    if (!isBoundRotate(nextPoses, dots, center, 0)) {\r\n        return [];\r\n    }\r\n    var result = [];\r\n    var dotInfos = dots.map(function (dot) { return [\r\n        getDistSize(dot),\r\n        getRad([0, 0], dot),\r\n    ]; });\r\n    [\r\n        [nextPoses[0], nextPoses[1]],\r\n        [nextPoses[1], nextPoses[3]],\r\n        [nextPoses[3], nextPoses[2]],\r\n        [nextPoses[2], nextPoses[0]],\r\n    ].forEach(function (line) {\r\n        var lineRad = getRad([0, 0], solveReverseLine(line));\r\n        var lineDist = getDistPointLine(line);\r\n        result.push.apply(result, __spreadArray([], __read(dotInfos\r\n            .filter(function (_a) {\r\n            var _b = __read(_a, 1), dotDist = _b[0];\r\n            return dotDist && lineDist <= dotDist;\r\n        })\r\n            .map(function (_a) {\r\n            var _b = __read(_a, 2), dotDist = _b[0], dotRad = _b[1];\r\n            var distRad = Math.acos(dotDist ? lineDist / dotDist : 0);\r\n            var nextRad1 = dotRad + distRad;\r\n            var nextRad2 = dotRad - distRad;\r\n            return [\r\n                rad + nextRad1 - lineRad,\r\n                rad + nextRad2 - lineRad,\r\n            ];\r\n        })\r\n            .reduce(function (prev, cur) {\r\n            prev.push.apply(prev, __spreadArray([], __read(cur), false));\r\n            return prev;\r\n        }, [])\r\n            .filter(function (nextRad) { return !isBoundRotate(prevPoses, dots, center, nextRad); })\r\n            .map(function (nextRad) { return throttle(nextRad * 180 / Math.PI, TINY_NUM); })), false));\r\n    });\r\n    return result;\r\n}\r\nfunction checkInnerBoundPoses(moveable) {\r\n    var innerBounds = moveable.props.innerBounds;\r\n    var boundMap = getInitialBounds();\r\n    if (!innerBounds) {\r\n        return {\r\n            boundMap: boundMap,\r\n            vertical: [],\r\n            horizontal: [],\r\n        };\r\n    }\r\n    var _a = moveable.getRect(), pos1 = _a.pos1, pos2 = _a.pos2, pos3 = _a.pos3, pos4 = _a.pos4;\r\n    var poses = [pos1, pos2, pos3, pos4];\r\n    var center = getPosByDirection(poses, [0, 0]);\r\n    var left = innerBounds.left, top = innerBounds.top, width = innerBounds.width, height = innerBounds.height;\r\n    var leftLine = [[left, top], [left, top + height]];\r\n    var topLine = [[left, top], [left + width, top]];\r\n    var rightLine = [[left + width, top], [left + width, top + height]];\r\n    var bottomLine = [[left, top + height], [left + width, top + height]];\r\n    var lineInfos = getCheckInnerBoundLineInfos(moveable, poses, [0, 0], false);\r\n    var horizontalPoses = [];\r\n    var verticalPoses = [];\r\n    lineInfos.forEach(function (lineInfo) {\r\n        var line = lineInfo.line, lineConstants = lineInfo.lineConstants;\r\n        var _a = isStartLine(center, line), isHorizontalStart = _a.horizontal, isVerticalStart = _a.vertical;\r\n        // test vertical\r\n        var topBoundInfo = checkLineBoundCollision(line, lineConstants, topLine, isVerticalStart, 1, true);\r\n        var bottomBoundInfo = checkLineBoundCollision(line, lineConstants, bottomLine, isVerticalStart, 1, true);\r\n        // test horizontal\r\n        var leftBoundInfo = checkLineBoundCollision(line, lineConstants, leftLine, isHorizontalStart, 1, true);\r\n        var rightBoundInfo = checkLineBoundCollision(line, lineConstants, rightLine, isHorizontalStart, 1, true);\r\n        if (topBoundInfo.isBound && !boundMap.top) {\r\n            horizontalPoses.push(top);\r\n            boundMap.top = true;\r\n        }\r\n        if (bottomBoundInfo.isBound && !boundMap.bottom) {\r\n            horizontalPoses.push(top + height);\r\n            boundMap.bottom = true;\r\n        }\r\n        if (leftBoundInfo.isBound && !boundMap.left) {\r\n            verticalPoses.push(left);\r\n            boundMap.left = true;\r\n        }\r\n        if (rightBoundInfo.isBound && !boundMap.right) {\r\n            verticalPoses.push(left + width);\r\n            boundMap.right = true;\r\n        }\r\n    });\r\n    return {\r\n        boundMap: boundMap,\r\n        horizontal: horizontalPoses,\r\n        vertical: verticalPoses,\r\n    };\r\n}\n\nfunction solveEquation(pos1, pos2, snapOffset, isVertical) {\r\n    var dx = pos2[0] - pos1[0];\r\n    var dy = pos2[1] - pos1[1];\r\n    if (abs(dx) < TINY_NUM$1) {\r\n        dx = 0;\r\n    }\r\n    if (abs(dy) < TINY_NUM$1) {\r\n        dy = 0;\r\n    }\r\n    if (!dx) {\r\n        // y = 0 * x + b\r\n        // only horizontal\r\n        if (!isVertical) {\r\n            return [0, snapOffset];\r\n        }\r\n        return [0, 0];\r\n    }\r\n    if (!dy) {\r\n        // only vertical\r\n        if (isVertical) {\r\n            return [snapOffset, 0];\r\n        }\r\n        return [0, 0];\r\n    }\r\n    // y = ax + b\r\n    var a = dy / dx;\r\n    var b = pos1[1] - a * pos1[0];\r\n    if (isVertical) {\r\n        // y = a * x + b\r\n        var y = a * (pos2[0] + snapOffset) + b;\r\n        return [snapOffset, y - pos2[1]];\r\n    }\r\n    else {\r\n        // x = (y - b) / a\r\n        var x = (pos2[1] + snapOffset - b) / a;\r\n        return [x - pos2[0], snapOffset];\r\n    }\r\n}\r\nfunction solveNextOffset(pos1, pos2, offset, isVertical, datas) {\r\n    var sizeOffset = solveEquation(pos1, pos2, offset, isVertical);\r\n    if (!sizeOffset) {\r\n        return {\r\n            isOutside: false,\r\n            offset: [0, 0],\r\n        };\r\n    }\r\n    var size = getDist$1(pos1, pos2);\r\n    var dist1 = getDist$1(sizeOffset, pos1);\r\n    var dist2 = getDist$1(sizeOffset, pos2);\r\n    var isOutside = dist1 > size || dist2 > size;\r\n    var _a = __read(getDragDist({\r\n        datas: datas,\r\n        distX: sizeOffset[0],\r\n        distY: sizeOffset[1],\r\n    }), 2), widthOffset = _a[0], heightOffset = _a[1];\r\n    return {\r\n        offset: [widthOffset, heightOffset],\r\n        isOutside: isOutside,\r\n    };\r\n}\r\nfunction getSnapBound(boundInfo, snapInfo) {\r\n    if (boundInfo.isBound) {\r\n        return boundInfo.offset;\r\n    }\r\n    else if (snapInfo.isSnap) {\r\n        return getNearestSnapGuidelineInfo(snapInfo).offset;\r\n    }\r\n    return 0;\r\n}\r\nfunction checkThrottleDragRotate(throttleDragRotate, _a, _b, _c, _d) {\r\n    var _e = __read(_a, 2), distX = _e[0], distY = _e[1];\r\n    var _f = __read(_b, 2), isVerticalBound = _f[0], isHorizontalBound = _f[1];\r\n    var _g = __read(_c, 2), isVerticalSnap = _g[0], isHorizontalSnap = _g[1];\r\n    var _h = __read(_d, 2), verticalOffset = _h[0], horizontalOffset = _h[1];\r\n    var offsetX = -verticalOffset;\r\n    var offsetY = -horizontalOffset;\r\n    if (throttleDragRotate && distX && distY) {\r\n        offsetX = 0;\r\n        offsetY = 0;\r\n        var adjustPoses = [];\r\n        if (isVerticalBound && isHorizontalBound) {\r\n            adjustPoses.push([0, horizontalOffset], [verticalOffset, 0]);\r\n        }\r\n        else if (isVerticalBound) {\r\n            adjustPoses.push([verticalOffset, 0]);\r\n        }\r\n        else if (isHorizontalBound) {\r\n            adjustPoses.push([0, horizontalOffset]);\r\n        }\r\n        else if (isVerticalSnap && isHorizontalSnap) {\r\n            adjustPoses.push([0, horizontalOffset], [verticalOffset, 0]);\r\n        }\r\n        else if (isVerticalSnap) {\r\n            adjustPoses.push([verticalOffset, 0]);\r\n        }\r\n        else if (isHorizontalSnap) {\r\n            adjustPoses.push([0, horizontalOffset]);\r\n        }\r\n        if (adjustPoses.length) {\r\n            adjustPoses.sort(function (a, b) {\r\n                return (getDistSize(minus([distX, distY], a)) -\r\n                    getDistSize(minus([distX, distY], b)));\r\n            });\r\n            var adjustPos = adjustPoses[0];\r\n            if (adjustPos[0] && abs(distX) > TINY_NUM$1) {\r\n                offsetX = -adjustPos[0];\r\n                offsetY =\r\n                    (distY * abs(distX + offsetX)) / abs(distX) -\r\n                        distY;\r\n            }\r\n            else if (adjustPos[1] && abs(distY) > TINY_NUM$1) {\r\n                var prevDistY = distY;\r\n                offsetY = -adjustPos[1];\r\n                offsetX =\r\n                    (distX * abs(distY + offsetY)) / abs(prevDistY) -\r\n                        distX;\r\n            }\r\n            if (throttleDragRotate && isHorizontalBound && isVerticalBound) {\r\n                if (abs(offsetX) > TINY_NUM$1 &&\r\n                    abs(offsetX) < abs(verticalOffset)) {\r\n                    var scale = abs(verticalOffset) / abs(offsetX);\r\n                    offsetX *= scale;\r\n                    offsetY *= scale;\r\n                }\r\n                else if (abs(offsetY) > TINY_NUM$1 &&\r\n                    abs(offsetY) < abs(horizontalOffset)) {\r\n                    var scale = abs(horizontalOffset) / abs(offsetY);\r\n                    offsetX *= scale;\r\n                    offsetY *= scale;\r\n                }\r\n                else {\r\n                    offsetX = maxOffset(-verticalOffset, offsetX);\r\n                    offsetY = maxOffset(-horizontalOffset, offsetY);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        offsetX = distX || isVerticalBound ? -verticalOffset : 0;\r\n        offsetY = distY || isHorizontalBound ? -horizontalOffset : 0;\r\n    }\r\n    return [offsetX, offsetY];\r\n}\r\nfunction checkSnapBoundsDrag(moveable, distX, distY, throttleDragRotate, ignoreSnap, datas) {\r\n    if (!hasGuidelines(moveable, \"draggable\")) {\r\n        return [\r\n            {\r\n                isSnap: false,\r\n                isBound: false,\r\n                offset: 0,\r\n            },\r\n            {\r\n                isSnap: false,\r\n                isBound: false,\r\n                offset: 0,\r\n            },\r\n        ];\r\n    }\r\n    var poses = getAbsolutePoses(datas.absolutePoses, [distX, distY]);\r\n    var _a = getRect(poses), left = _a.left, right = _a.right, top = _a.top, bottom = _a.bottom;\r\n    var boundPoses = {\r\n        horizontal: poses.map(function (pos) { return pos[1]; }),\r\n        vertical: poses.map(function (pos) { return pos[0]; }),\r\n    };\r\n    var snapDirections = getSnapDirections(moveable.props.snapDirections);\r\n    var snapPoses = splitSnapDirectionPoses(snapDirections, {\r\n        left: left,\r\n        right: right,\r\n        top: top,\r\n        bottom: bottom,\r\n        center: (left + right) / 2,\r\n        middle: (top + bottom) / 2,\r\n    });\r\n    var _b = checkMoveableSnapBounds(moveable, ignoreSnap, snapPoses, boundPoses), verticalSnapBoundInfo = _b.vertical, horizontalSnapBoundInfo = _b.horizontal;\r\n    var _c = getInnerBoundDragInfo(moveable, poses, datas), verticalInnerBoundInfo = _c.vertical, horizontalInnerBoundInfo = _c.horizontal;\r\n    var isVerticalSnap = verticalSnapBoundInfo.isSnap;\r\n    var isHorizontalSnap = horizontalSnapBoundInfo.isSnap;\r\n    var isVerticalBound = verticalSnapBoundInfo.isBound || verticalInnerBoundInfo.isBound;\r\n    var isHorizontalBound = horizontalSnapBoundInfo.isBound || horizontalInnerBoundInfo.isBound;\r\n    var verticalOffset = maxOffset(verticalSnapBoundInfo.offset, verticalInnerBoundInfo.offset);\r\n    var horizontalOffset = maxOffset(horizontalSnapBoundInfo.offset, horizontalInnerBoundInfo.offset);\r\n    var _d = __read(checkThrottleDragRotate(throttleDragRotate, [distX, distY], [isVerticalBound, isHorizontalBound], [isVerticalSnap, isHorizontalSnap], [verticalOffset, horizontalOffset]), 2), offsetX = _d[0], offsetY = _d[1];\r\n    return [\r\n        {\r\n            isBound: isVerticalBound,\r\n            isSnap: isVerticalSnap,\r\n            offset: offsetX,\r\n        },\r\n        {\r\n            isBound: isHorizontalBound,\r\n            isSnap: isHorizontalSnap,\r\n            offset: offsetY,\r\n        },\r\n    ];\r\n}\r\nfunction checkMoveableSnapBounds(moveable, ignoreSnap, poses, boundPoses) {\r\n    if (boundPoses === void 0) { boundPoses = poses; }\r\n    var _a = checkBoundPoses(getBounds(moveable), boundPoses.vertical, boundPoses.horizontal), horizontalBoundInfos = _a.horizontal, verticalBoundInfos = _a.vertical;\r\n    var _b = ignoreSnap ? {\r\n        horizontal: { isSnap: false, index: -1 },\r\n        vertical: { isSnap: false, index: -1 },\r\n    } : checkMoveableSnapPoses(moveable, poses.vertical, poses.horizontal), horizontalSnapInfo = _b.horizontal, verticalSnapInfo = _b.vertical;\r\n    var horizontalOffset = getSnapBound(horizontalBoundInfos[0], horizontalSnapInfo);\r\n    var verticalOffset = getSnapBound(verticalBoundInfos[0], verticalSnapInfo);\r\n    var horizontalDist = abs(horizontalOffset);\r\n    var verticalDist = abs(verticalOffset);\r\n    return {\r\n        horizontal: {\r\n            isBound: horizontalBoundInfos[0].isBound,\r\n            isSnap: horizontalSnapInfo.isSnap,\r\n            snapIndex: horizontalSnapInfo.index,\r\n            offset: horizontalOffset,\r\n            dist: horizontalDist,\r\n            bounds: horizontalBoundInfos,\r\n            snap: horizontalSnapInfo,\r\n        },\r\n        vertical: {\r\n            isBound: verticalBoundInfos[0].isBound,\r\n            isSnap: verticalSnapInfo.isSnap,\r\n            snapIndex: verticalSnapInfo.index,\r\n            offset: verticalOffset,\r\n            dist: verticalDist,\r\n            bounds: verticalBoundInfos,\r\n            snap: verticalSnapInfo,\r\n        },\r\n    };\r\n}\r\nfunction checkSnapBounds(guideines, bounds, posesX, posesY, snapThreshold) {\r\n    var _a = checkBoundPoses(bounds, posesX, posesY), horizontalBoundInfos = _a.horizontal, verticalBoundInfos = _a.vertical;\r\n    // options.isRequest ? {\r\n    //     horizontal: { isSnap: false, index: -1 } as SnapInfo,\r\n    //     vertical: { isSnap: false, index: -1 } as SnapInfo,\r\n    // } :\r\n    var _b = checkSnapPoses(guideines, posesX, posesY, [], [], snapThreshold), horizontalSnapInfo = _b.horizontal, verticalSnapInfo = _b.vertical;\r\n    var horizontalOffset = getSnapBound(horizontalBoundInfos[0], horizontalSnapInfo);\r\n    var verticalOffset = getSnapBound(verticalBoundInfos[0], verticalSnapInfo);\r\n    var horizontalDist = abs(horizontalOffset);\r\n    var verticalDist = abs(verticalOffset);\r\n    return {\r\n        horizontal: {\r\n            isBound: horizontalBoundInfos[0].isBound,\r\n            isSnap: horizontalSnapInfo.isSnap,\r\n            snapIndex: horizontalSnapInfo.index,\r\n            offset: horizontalOffset,\r\n            dist: horizontalDist,\r\n            bounds: horizontalBoundInfos,\r\n            snap: horizontalSnapInfo,\r\n        },\r\n        vertical: {\r\n            isBound: verticalBoundInfos[0].isBound,\r\n            isSnap: verticalSnapInfo.isSnap,\r\n            snapIndex: verticalSnapInfo.index,\r\n            offset: verticalOffset,\r\n            dist: verticalDist,\r\n            bounds: verticalBoundInfos,\r\n            snap: verticalSnapInfo,\r\n        },\r\n    };\r\n}\r\nfunction checkSnapRightLine(startPos, endPos, snapBoundInfo, keepRatio) {\r\n    var rad = (getRad(startPos, endPos) / Math.PI) * 180;\r\n    var _a = snapBoundInfo.vertical, isVerticalBound = _a.isBound, isVerticalSnap = _a.isSnap, verticalDist = _a.dist, _b = snapBoundInfo.horizontal, isHorizontalBound = _b.isBound, isHorizontalSnap = _b.isSnap, horizontalDist = _b.dist;\r\n    var rad180 = rad % 180;\r\n    var isHorizontalLine = rad180 < 3 || rad180 > 177;\r\n    var isVerticalLine = rad180 > 87 && rad180 < 93;\r\n    if (horizontalDist < verticalDist) {\r\n        if (isVerticalBound ||\r\n            (isVerticalSnap &&\r\n                !isVerticalLine &&\r\n                (!keepRatio || !isHorizontalLine))) {\r\n            return \"vertical\";\r\n        }\r\n    }\r\n    if (isHorizontalBound ||\r\n        (isHorizontalSnap &&\r\n            !isHorizontalLine &&\r\n            (!keepRatio || !isVerticalLine))) {\r\n        return \"horizontal\";\r\n    }\r\n    return \"\";\r\n}\r\nfunction getSnapBoundInfo(moveable, poses, directions, keepRatio, isRequest, datas) {\r\n    return directions.map(function (_a) {\r\n        var _b = __read(_a, 2), startDirection = _b[0], endDirection = _b[1];\r\n        var otherStartPos = getPosByDirection(poses, startDirection);\r\n        var otherEndPos = getPosByDirection(poses, endDirection);\r\n        var snapBoundInfo = keepRatio\r\n            ? checkSnapBoundsKeepRatio(moveable, otherStartPos, otherEndPos, isRequest)\r\n            : checkMoveableSnapBounds(moveable, isRequest, {\r\n                vertical: [otherEndPos[0]],\r\n                horizontal: [otherEndPos[1]],\r\n            });\r\n        var _c = snapBoundInfo.horizontal, \r\n        // dist: otherHorizontalDist,\r\n        otherHorizontalOffset = _c.offset, isOtherHorizontalBound = _c.isBound, isOtherHorizontalSnap = _c.isSnap, _d = snapBoundInfo.vertical, \r\n        // dist: otherVerticalDist,\r\n        otherVerticalOffset = _d.offset, isOtherVerticalBound = _d.isBound, isOtherVerticalSnap = _d.isSnap;\r\n        var multiple = minus(endDirection, startDirection);\r\n        if (!otherVerticalOffset && !otherHorizontalOffset) {\r\n            return {\r\n                isBound: isOtherVerticalBound || isOtherHorizontalBound,\r\n                isSnap: isOtherVerticalSnap || isOtherHorizontalSnap,\r\n                sign: multiple,\r\n                offset: [0, 0],\r\n            };\r\n        }\r\n        var snapLine = checkSnapRightLine(otherStartPos, otherEndPos, snapBoundInfo, keepRatio);\r\n        if (!snapLine) {\r\n            return {\r\n                sign: multiple,\r\n                isBound: false,\r\n                isSnap: false,\r\n                offset: [0, 0],\r\n            };\r\n        }\r\n        var isVertical = snapLine === \"vertical\";\r\n        var sizeOffset = [0, 0];\r\n        if (!keepRatio\r\n            && abs(endDirection[0]) === 1\r\n            && abs(endDirection[1]) === 1\r\n            && startDirection[0] !== endDirection[0]\r\n            && startDirection[1] !== endDirection[1]) {\r\n            sizeOffset = getDragDist({\r\n                datas: datas,\r\n                distX: -otherVerticalOffset,\r\n                distY: -otherHorizontalOffset,\r\n            });\r\n        }\r\n        else {\r\n            sizeOffset = solveNextOffset(otherStartPos, otherEndPos, -(isVertical ? otherVerticalOffset : otherHorizontalOffset), isVertical, datas).offset;\r\n        }\r\n        sizeOffset = sizeOffset.map(function (size, i) { return size * (multiple[i] ? 2 / multiple[i] : 0); });\r\n        return {\r\n            sign: multiple,\r\n            isBound: isVertical ? isOtherVerticalBound : isOtherHorizontalBound,\r\n            isSnap: isVertical ? isOtherVerticalSnap : isOtherHorizontalSnap,\r\n            offset: sizeOffset,\r\n        };\r\n    });\r\n}\r\nfunction getSnapBoundOffset(boundInfo, snapInfo) {\r\n    if (boundInfo.isBound) {\r\n        return boundInfo.offset;\r\n    }\r\n    else if (snapInfo.isSnap) {\r\n        return snapInfo.offset;\r\n    }\r\n    return 0;\r\n}\r\nfunction checkSnapBoundsKeepRatio(moveable, startPos, endPos, isRequest) {\r\n    var _a = checkBoundKeepRatio(moveable, startPos, endPos), horizontalBoundInfo = _a.horizontal, verticalBoundInfo = _a.vertical;\r\n    var _b = isRequest ? {\r\n        horizontal: { isSnap: false },\r\n        vertical: { isSnap: false },\r\n    } : checkSnapKeepRatio(moveable, startPos, endPos), horizontalSnapInfo = _b.horizontal, verticalSnapInfo = _b.vertical;\r\n    var horizontalOffset = getSnapBoundOffset(horizontalBoundInfo, horizontalSnapInfo);\r\n    var verticalOffset = getSnapBoundOffset(verticalBoundInfo, verticalSnapInfo);\r\n    var horizontalDist = abs(horizontalOffset);\r\n    var verticalDist = abs(verticalOffset);\r\n    return {\r\n        horizontal: {\r\n            isBound: horizontalBoundInfo.isBound,\r\n            isSnap: horizontalSnapInfo.isSnap,\r\n            offset: horizontalOffset,\r\n            dist: horizontalDist,\r\n        },\r\n        vertical: {\r\n            isBound: verticalBoundInfo.isBound,\r\n            isSnap: verticalSnapInfo.isSnap,\r\n            offset: verticalOffset,\r\n            dist: verticalDist,\r\n        },\r\n    };\r\n}\r\nfunction checkMaxBounds(moveable, poses, direction, fixedPosition, datas) {\r\n    var fixedDirection = [-direction[0], -direction[1]];\r\n    var _a = moveable.state, width = _a.width, height = _a.height;\r\n    var bounds = moveable.props.bounds;\r\n    var maxWidth = Infinity;\r\n    var maxHeight = Infinity;\r\n    if (bounds) {\r\n        var directions = [\r\n            [direction[0], -direction[1]],\r\n            [-direction[0], direction[1]],\r\n        ];\r\n        var _b = bounds.left, left_1 = _b === void 0 ? -Infinity : _b, _c = bounds.top, top_1 = _c === void 0 ? -Infinity : _c, _d = bounds.right, right_1 = _d === void 0 ? Infinity : _d, _e = bounds.bottom, bottom_1 = _e === void 0 ? Infinity : _e;\r\n        directions.forEach(function (otherDirection) {\r\n            var isCheckVertical = otherDirection[0] !== fixedDirection[0];\r\n            var isCheckHorizontal = otherDirection[1] !== fixedDirection[1];\r\n            var otherPos = getPosByDirection(poses, otherDirection);\r\n            var deg = (getRad(fixedPosition, otherPos) * 360) / Math.PI;\r\n            if (isCheckHorizontal) {\r\n                var nextOtherPos = otherPos.slice();\r\n                if (abs(deg - 360) < 2 || abs(deg - 180) < 2) {\r\n                    nextOtherPos[1] = fixedPosition[1];\r\n                }\r\n                var _a = solveNextOffset(fixedPosition, nextOtherPos, (fixedPosition[1] < otherPos[1] ? bottom_1 : top_1) -\r\n                    otherPos[1], false, datas), _b = __read(_a.offset, 2), heightOffset = _b[1], isHeightOutside = _a.isOutside;\r\n                if (!isNaN(heightOffset)) {\r\n                    maxHeight = height + (isHeightOutside ? 1 : -1) * abs(heightOffset);\r\n                }\r\n            }\r\n            if (isCheckVertical) {\r\n                var nextOtherPos = otherPos.slice();\r\n                if (abs(deg - 90) < 2 || abs(deg - 270) < 2) {\r\n                    nextOtherPos[0] = fixedPosition[0];\r\n                }\r\n                var _c = solveNextOffset(fixedPosition, nextOtherPos, (fixedPosition[0] < otherPos[0] ? right_1 : left_1) - otherPos[0], true, datas), _d = __read(_c.offset, 1), widthOffset = _d[0], isWidthOutside = _c.isOutside;\r\n                if (!isNaN(widthOffset)) {\r\n                    maxWidth = width + (isWidthOutside ? 1 : -1) * abs(widthOffset);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return {\r\n        maxWidth: maxWidth,\r\n        maxHeight: maxHeight,\r\n    };\r\n}\n\n/**\r\n * @namespace Draggable\r\n * @memberof Moveable\r\n * @description Draggable refers to the ability to drag and move targets.\r\n */\r\nvar Draggable = {\r\n    name: \"draggable\",\r\n    props: [\r\n        \"draggable\",\r\n        \"throttleDrag\",\r\n        \"throttleDragRotate\",\r\n        \"hideThrottleDragRotateLine\",\r\n        \"startDragRotate\",\r\n        \"edgeDraggable\",\r\n    ],\r\n    events: [\r\n        \"dragStart\",\r\n        \"drag\",\r\n        \"dragEnd\",\r\n        \"dragGroupStart\",\r\n        \"dragGroup\",\r\n        \"dragGroupEnd\",\r\n    ],\r\n    requestStyle: function () {\r\n        return [\"left\", \"top\", \"right\", \"bottom\"];\r\n    },\r\n    requestChildStyle: function () {\r\n        return [\"left\", \"top\", \"right\", \"bottom\"];\r\n    },\r\n    render: function (moveable, React) {\r\n        var _a = moveable.props, hideThrottleDragRotateLine = _a.hideThrottleDragRotateLine, throttleDragRotate = _a.throttleDragRotate, zoom = _a.zoom;\r\n        var _b = moveable.getState(), dragInfo = _b.dragInfo, beforeOrigin = _b.beforeOrigin;\r\n        if (hideThrottleDragRotateLine || !throttleDragRotate || !dragInfo) {\r\n            return [];\r\n        }\r\n        var dist = dragInfo.dist;\r\n        if (!dist[0] && !dist[1]) {\r\n            return [];\r\n        }\r\n        var width = getDistSize(dist);\r\n        var rad = getRad(dist, [0, 0]);\r\n        return [React.createElement(\"div\", { className: prefix(\"line\", \"horizontal\", \"dragline\", \"dashed\"), key: \"dragRotateGuideline\", style: {\r\n                    width: \"\".concat(width, \"px\"),\r\n                    transform: \"translate(\".concat(beforeOrigin[0], \"px, \").concat(beforeOrigin[1], \"px) rotate(\").concat(rad, \"rad) scaleY(\").concat(zoom, \")\"),\r\n                } })];\r\n    },\r\n    dragStart: function (moveable, e) {\r\n        var datas = e.datas, parentEvent = e.parentEvent, parentGesto = e.parentGesto;\r\n        var state = moveable.state;\r\n        var gestos = state.gestos, style = state.style;\r\n        if (gestos.draggable) {\r\n            return false;\r\n        }\r\n        gestos.draggable = parentGesto || moveable.targetGesto;\r\n        datas.datas = {};\r\n        datas.left = parseFloat(style.left || \"\") || 0;\r\n        datas.top = parseFloat(style.top || \"\") || 0;\r\n        datas.bottom = parseFloat(style.bottom || \"\") || 0;\r\n        datas.right = parseFloat(style.right || \"\") || 0;\r\n        datas.startValue = [0, 0];\r\n        setDragStart(moveable, e);\r\n        setDefaultTransformIndex(moveable, e, \"translate\");\r\n        startCheckSnapDrag(moveable, datas);\r\n        datas.prevDist = [0, 0];\r\n        datas.prevBeforeDist = [0, 0];\r\n        datas.isDrag = false;\r\n        datas.deltaOffset = [0, 0];\r\n        var params = fillParams(moveable, e, __assign({ set: function (translate) {\r\n                datas.startValue = translate;\r\n            } }, fillTransformStartEvent(moveable, e)));\r\n        var result = parentEvent || triggerEvent(moveable, \"onDragStart\", params);\r\n        if (result !== false) {\r\n            datas.isDrag = true;\r\n            moveable.state.dragInfo = {\r\n                startRect: moveable.getRect(),\r\n                dist: [0, 0],\r\n            };\r\n        }\r\n        else {\r\n            gestos.draggable = null;\r\n            datas.isPinch = false;\r\n        }\r\n        return datas.isDrag ? params : false;\r\n    },\r\n    drag: function (moveable, e) {\r\n        if (!e) {\r\n            return;\r\n        }\r\n        resolveTransformEvent(moveable, e, \"translate\");\r\n        var datas = e.datas, parentEvent = e.parentEvent, parentFlag = e.parentFlag, isPinch = e.isPinch, deltaOffset = e.deltaOffset, useSnap = e.useSnap, isRequest = e.isRequest;\r\n        var distX = e.distX, distY = e.distY;\r\n        var isDrag = datas.isDrag, prevDist = datas.prevDist, prevBeforeDist = datas.prevBeforeDist, startValue = datas.startValue;\r\n        if (!isDrag) {\r\n            return;\r\n        }\r\n        if (deltaOffset) {\r\n            distX += deltaOffset[0];\r\n            distY += deltaOffset[1];\r\n        }\r\n        var props = moveable.props;\r\n        var parentMoveable = props.parentMoveable;\r\n        var throttleDrag = parentEvent ? 0 : (props.throttleDrag || 0);\r\n        var throttleDragRotate = parentEvent ? 0 : (props.throttleDragRotate || 0);\r\n        var dragRotateRad = 0;\r\n        var isVerticalSnap = false;\r\n        var isVerticalBound = false;\r\n        var isHorizontalSnap = false;\r\n        var isHorizontalBound = false;\r\n        if (!parentEvent && throttleDragRotate > 0 && (distX || distY)) {\r\n            var startDragRotate = props.startDragRotate || 0;\r\n            var deg = throttle(startDragRotate + getRad([0, 0], [distX, distY]) * 180 / Math.PI, throttleDragRotate)\r\n                - startDragRotate;\r\n            var ry = distY * Math.abs(Math.cos((deg - 90) / 180 * Math.PI));\r\n            var rx = distX * Math.abs(Math.cos(deg / 180 * Math.PI));\r\n            var r = getDistSize([rx, ry]);\r\n            dragRotateRad = deg * Math.PI / 180;\r\n            distX = r * Math.cos(dragRotateRad);\r\n            distY = r * Math.sin(dragRotateRad);\r\n        }\r\n        if (!isPinch && !parentEvent && !parentFlag) {\r\n            var _a = __read(checkSnapBoundsDrag(moveable, distX, distY, throttleDragRotate, (!useSnap && isRequest) || deltaOffset, datas), 2), verticalInfo = _a[0], horizontalInfo = _a[1];\r\n            isVerticalSnap = verticalInfo.isSnap;\r\n            isVerticalBound = verticalInfo.isBound;\r\n            isHorizontalSnap = horizontalInfo.isSnap;\r\n            isHorizontalBound = horizontalInfo.isBound;\r\n            var verticalOffset = verticalInfo.offset;\r\n            var horizontalOffset = horizontalInfo.offset;\r\n            distX += verticalOffset;\r\n            distY += horizontalOffset;\r\n        }\r\n        var beforeTranslate = plus(getBeforeDragDist({ datas: datas, distX: distX, distY: distY }), startValue);\r\n        var translate = plus(getTransformDist({ datas: datas, distX: distX, distY: distY }), startValue);\r\n        throttleArray(translate, TINY_NUM);\r\n        throttleArray(beforeTranslate, TINY_NUM);\r\n        if (!throttleDragRotate) {\r\n            if (!isVerticalSnap && !isVerticalBound) {\r\n                translate[0] = throttle(translate[0], throttleDrag);\r\n                beforeTranslate[0] = throttle(beforeTranslate[0], throttleDrag);\r\n            }\r\n            if (!isHorizontalSnap && !isHorizontalBound) {\r\n                translate[1] = throttle(translate[1], throttleDrag);\r\n                beforeTranslate[1] = throttle(beforeTranslate[1], throttleDrag);\r\n            }\r\n        }\r\n        var beforeDist = minus(beforeTranslate, startValue);\r\n        var dist = minus(translate, startValue);\r\n        var delta = minus(dist, prevDist);\r\n        var beforeDelta = minus(beforeDist, prevBeforeDist);\r\n        datas.prevDist = dist;\r\n        datas.prevBeforeDist = beforeDist;\r\n        datas.passDelta = delta; //distX - (datas.passDistX || 0);\r\n        // datas.passDeltaY = distY - (datas.passDistY || 0);\r\n        datas.passDist = dist; //distX;\r\n        // datas.passDistY = distY;\r\n        var left = datas.left + beforeDist[0];\r\n        var top = datas.top + beforeDist[1];\r\n        var right = datas.right - beforeDist[0];\r\n        var bottom = datas.bottom - beforeDist[1];\r\n        var nextTransform = convertTransformFormat(datas, \"translate(\".concat(translate[0], \"px, \").concat(translate[1], \"px)\"), \"translate(\".concat(dist[0], \"px, \").concat(dist[1], \"px)\"));\r\n        fillOriginalTransform(e, nextTransform);\r\n        moveable.state.dragInfo.dist = parentEvent ? [0, 0] : dist;\r\n        if (!parentEvent && !parentMoveable && delta.every(function (num) { return !num; }) && beforeDelta.some(function (num) { return !num; })) {\r\n            return;\r\n        }\r\n        var _b = moveable.state, width = _b.width, height = _b.height;\r\n        var params = fillParams(moveable, e, __assign({ transform: nextTransform, dist: dist, delta: delta, translate: translate, beforeDist: beforeDist, beforeDelta: beforeDelta, beforeTranslate: beforeTranslate, left: left, top: top, right: right, bottom: bottom, width: width, height: height, isPinch: isPinch }, fillCSSObject({\r\n            transform: nextTransform,\r\n        }, e)));\r\n        !parentEvent && triggerEvent(moveable, \"onDrag\", params);\r\n        return params;\r\n    },\r\n    dragAfter: function (moveable, e) {\r\n        var datas = e.datas;\r\n        var deltaOffset = datas.deltaOffset;\r\n        if (deltaOffset[0] || deltaOffset[1]) {\r\n            datas.deltaOffset = [0, 0];\r\n            return this.drag(moveable, __assign(__assign({}, e), { deltaOffset: deltaOffset }));\r\n        }\r\n        return false;\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        var parentEvent = e.parentEvent, datas = e.datas;\r\n        moveable.state.dragInfo = null;\r\n        if (!datas.isDrag) {\r\n            return;\r\n        }\r\n        datas.isDrag = false;\r\n        var param = fillEndParams(moveable, e, {});\r\n        !parentEvent && triggerEvent(moveable, \"onDragEnd\", param);\r\n        return param;\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        var datas = e.datas, clientX = e.clientX, clientY = e.clientY;\r\n        var params = this.dragStart(moveable, e);\r\n        if (!params) {\r\n            return false;\r\n        }\r\n        var events = triggerChildGesto(moveable, this, \"dragStart\", [\r\n            clientX || 0,\r\n            clientY || 0,\r\n        ], e, false, \"draggable\");\r\n        var nextParams = __assign(__assign({}, params), { targets: moveable.props.targets, events: events });\r\n        var result = triggerEvent(moveable, \"onDragGroupStart\", nextParams);\r\n        datas.isDrag = result !== false;\r\n        return datas.isDrag ? params : false;\r\n    },\r\n    dragGroup: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isDrag) {\r\n            return;\r\n        }\r\n        var params = this.drag(moveable, e);\r\n        var passDelta = e.datas.passDelta;\r\n        var events = triggerChildGesto(moveable, this, \"drag\", passDelta, e, false, \"draggable\");\r\n        if (!params) {\r\n            return;\r\n        }\r\n        var nextParams = __assign({ targets: moveable.props.targets, events: events }, params);\r\n        triggerEvent(moveable, \"onDragGroup\", nextParams);\r\n        return nextParams;\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        var isDrag = e.isDrag, datas = e.datas;\r\n        if (!datas.isDrag) {\r\n            return;\r\n        }\r\n        this.dragEnd(moveable, e);\r\n        var events = triggerChildGesto(moveable, this, \"dragEnd\", [0, 0], e, false, \"draggable\");\r\n        triggerEvent(moveable, \"onDragGroupEnd\", fillEndParams(moveable, e, {\r\n            targets: moveable.props.targets,\r\n            events: events,\r\n        }));\r\n        return isDrag;\r\n    },\r\n    /**\r\n     * @method Moveable.Draggable#request\r\n     * @param {object} [e] - the draggable's request parameter\r\n     * @param {number} [e.x] - x position\r\n     * @param {number} [e.y] - y position\r\n     * @param {number} [e.deltaX] - X number to move\r\n     * @param {number} [e.deltaY] - Y number to move\r\n     * @return {Moveable.Requester} Moveable Requester\r\n     * @example\r\n\n     * // Instantly Request (requestStart - request - requestEnd)\r\n     * // Use Relative Value\r\n     * moveable.request(\"draggable\", { deltaX: 10, deltaY: 10 }, true);\r\n     * // Use Absolute Value\r\n     * moveable.request(\"draggable\", { x: 200, y: 100 }, true);\r\n     *\r\n     * // requestStart\r\n     * const requester = moveable.request(\"draggable\");\r\n     *\r\n     * // request\r\n     * // Use Relative Value\r\n     * requester.request({ deltaX: 10, deltaY: 10 });\r\n     * requester.request({ deltaX: 10, deltaY: 10 });\r\n     * requester.request({ deltaX: 10, deltaY: 10 });\r\n     * // Use Absolute Value\r\n     * moveable.request(\"draggable\", { x: 200, y: 100 });\r\n     * moveable.request(\"draggable\", { x: 220, y: 100 });\r\n     * moveable.request(\"draggable\", { x: 240, y: 100 });\r\n     *\r\n     * // requestEnd\r\n     * requester.requestEnd();\r\n     */\r\n    request: function (moveable) {\r\n        var datas = {};\r\n        var rect = moveable.getRect();\r\n        var distX = 0;\r\n        var distY = 0;\r\n        var useSnap = false;\r\n        return {\r\n            isControl: false,\r\n            requestStart: function (e) {\r\n                useSnap = e.useSnap;\r\n                return { datas: datas, useSnap: useSnap };\r\n            },\r\n            request: function (e) {\r\n                if (\"x\" in e) {\r\n                    distX = e.x - rect.left;\r\n                }\r\n                else if (\"deltaX\" in e) {\r\n                    distX += e.deltaX;\r\n                }\r\n                if (\"y\" in e) {\r\n                    distY = e.y - rect.top;\r\n                }\r\n                else if (\"deltaY\" in e) {\r\n                    distY += e.deltaY;\r\n                }\r\n                return { datas: datas, distX: distX, distY: distY, useSnap: useSnap };\r\n            },\r\n            requestEnd: function () {\r\n                return { datas: datas, isDrag: true, useSnap: useSnap };\r\n            },\r\n        };\r\n    },\r\n    unset: function (moveable) {\r\n        moveable.state.gestos.draggable = null;\r\n        moveable.state.dragInfo = null;\r\n    },\r\n};\r\n/**\r\n * Whether or not target can be dragged. (default: false)\r\n * @name Moveable.Draggable#draggable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.draggable = true;\r\n */\r\n/**\r\n * throttle of x, y when drag.\r\n * @name Moveable.Draggable#throttleDrag\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.throttleDrag = 1;\r\n */\r\n/**\r\n* throttle of angle of x, y when drag.\r\n* @name Moveable.Draggable#throttleDragRotate\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body);\r\n*\r\n* moveable.throttleDragRotate = 45;\r\n*/\r\n/**\r\n* start angle of throttleDragRotate of x, y when drag.\r\n* @name Moveable.Draggable#startDragRotate\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body);\r\n*\r\n* // 45, 135, 225, 315\r\n* moveable.throttleDragRotate = 90;\r\n* moveable.startDragRotate = 45;\r\n*/\r\n/**\r\n * When the drag starts, the dragStart event is called.\r\n * @memberof Moveable.Draggable\r\n * @event dragStart\r\n * @param {Moveable.Draggable.OnDragStart} - Parameters for the dragStart event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { draggable: true });\r\n * moveable.on(\"dragStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n * When dragging, the drag event is called.\r\n * @memberof Moveable.Draggable\r\n * @event drag\r\n * @param {Moveable.Draggable.OnDrag} - Parameters for the drag event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { draggable: true });\r\n * moveable.on(\"drag\", ({ target, transform }) => {\r\n *     target.style.transform = transform;\r\n * });\r\n */\r\n/**\r\n * When the drag finishes, the dragEnd event is called.\r\n * @memberof Moveable.Draggable\r\n * @event dragEnd\r\n * @param {Moveable.Draggable.OnDragEnd} - Parameters for the dragEnd event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { draggable: true });\r\n * moveable.on(\"dragEnd\", ({ target, isDrag }) => {\r\n *     console.log(target, isDrag);\r\n * });\r\n */\r\n/**\r\n* When the group drag starts, the `dragGroupStart` event is called.\r\n* @memberof Moveable.Draggable\r\n* @event dragGroupStart\r\n* @param {Moveable.Draggable.OnDragGroupStart} - Parameters for the `dragGroupStart` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     draggable: true\r\n* });\r\n* moveable.on(\"dragGroupStart\", ({ targets }) => {\r\n*     console.log(\"onDragGroupStart\", targets);\r\n* });\r\n*/\r\n/**\r\n* When the group drag, the `dragGroup` event is called.\r\n* @memberof Moveable.Draggable\r\n* @event dragGroup\r\n* @param {Moveable.Draggable.OnDragGroup} - Parameters for the `dragGroup` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     draggable: true\r\n* });\r\n* moveable.on(\"dragGroup\", ({ targets, events }) => {\r\n*     console.log(\"onDragGroup\", targets);\r\n*     events.forEach(ev => {\r\n*          // drag event\r\n*          console.log(\"onDrag left, top\", ev.left, ev.top);\r\n*          // ev.target!.style.left = `${ev.left}px`;\r\n*          // ev.target!.style.top = `${ev.top}px`;\r\n*          console.log(\"onDrag translate\", ev.dist);\r\n*          ev.target!.style.transform = ev.transform;)\r\n*     });\r\n* });\r\n*/\r\n/**\r\n * When the group drag finishes, the `dragGroupEnd` event is called.\r\n * @memberof Moveable.Draggable\r\n * @event dragGroupEnd\r\n * @param {Moveable.Draggable.OnDragGroupEnd} - Parameters for the `dragGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     draggable: true\r\n * });\r\n * moveable.on(\"dragGroupEnd\", ({ targets, isDrag }) => {\r\n *     console.log(\"onDragGroupEnd\", targets, isDrag);\r\n * });\r\n */\n\nfunction getFixedDirectionInfo(startPositions, fixedDirection) {\r\n    var fixedPosition = getPosByDirection(startPositions, fixedDirection);\r\n    var fixedOffset = [0, 0];\r\n    return {\r\n        fixedPosition: fixedPosition,\r\n        fixedDirection: fixedDirection,\r\n        fixedOffset: fixedOffset,\r\n    };\r\n}\r\nfunction getOffsetFixedDirectionInfo(state, fixedDirection) {\r\n    // for start\r\n    var allMatrix = state.allMatrix, is3d = state.is3d, width = state.width, height = state.height;\r\n    var n = is3d ? 4 : 3;\r\n    var nextFixedOffset = [\r\n        width / 2 * (1 + fixedDirection[0]),\r\n        height / 2 * (1 + fixedDirection[1]),\r\n    ];\r\n    var fixedPosition = calculatePosition(allMatrix, nextFixedOffset, n);\r\n    var fixedOffset = [0, 0];\r\n    return {\r\n        fixedPosition: fixedPosition,\r\n        fixedDirection: fixedDirection,\r\n        fixedOffset: fixedOffset,\r\n    };\r\n}\r\nfunction getOffsetFixedPositionInfo(state, offsetFixedPosition) {\r\n    // for start\r\n    var allMatrix = state.allMatrix, is3d = state.is3d, width = state.width, height = state.height;\r\n    var n = is3d ? 4 : 3;\r\n    var fixedDirection = getDirectionByPos(offsetFixedPosition, width, height);\r\n    var nextFixedPosition = calculatePosition(allMatrix, offsetFixedPosition, n);\r\n    var fixedOffset = [\r\n        width ? 0 : offsetFixedPosition[0],\r\n        height ? 0 : offsetFixedPosition[1],\r\n    ];\r\n    return {\r\n        fixedPosition: nextFixedPosition,\r\n        fixedDirection: fixedDirection,\r\n        fixedOffset: fixedOffset,\r\n    };\r\n}\n\n/**\r\n * @namespace Resizable\r\n * @memberof Moveable\r\n * @description Resizable indicates whether the target's width and height can be increased or decreased.\r\n */\r\nvar directionCondition$2 = getDirectionCondition(\"resizable\");\r\nvar Resizable = {\r\n    name: \"resizable\",\r\n    ableGroup: \"size\",\r\n    canPinch: true,\r\n    props: [\r\n        \"resizable\",\r\n        \"throttleResize\",\r\n        \"renderDirections\",\r\n        \"displayAroundControls\",\r\n        \"keepRatio\",\r\n        \"resizeFormat\",\r\n        \"keepRatioFinally\",\r\n        \"edge\",\r\n        \"checkResizableError\",\r\n    ],\r\n    events: [\r\n        \"resizeStart\",\r\n        \"beforeResize\",\r\n        \"resize\",\r\n        \"resizeEnd\",\r\n        \"resizeGroupStart\",\r\n        \"beforeResizeGroup\",\r\n        \"resizeGroup\",\r\n        \"resizeGroupEnd\",\r\n    ],\r\n    render: getRenderDirections(\"resizable\"),\r\n    dragControlCondition: directionCondition$2,\r\n    viewClassName: getDirectionViewClassName(\"resizable\"),\r\n    dragControlStart: function (moveable, e) {\r\n        var _a;\r\n        var inputEvent = e.inputEvent, isPinch = e.isPinch, isGroup = e.isGroup, parentDirection = e.parentDirection, parentGesto = e.parentGesto, datas = e.datas, parentFixedDirection = e.parentFixedDirection, parentEvent = e.parentEvent;\r\n        var direction = getTotalDirection(parentDirection, isPinch, inputEvent, datas);\r\n        var state = moveable.state;\r\n        var target = state.target, width = state.width, height = state.height, gestos = state.gestos;\r\n        if (!direction || !target) {\r\n            return false;\r\n        }\r\n        if (gestos.resizable) {\r\n            return false;\r\n        }\r\n        gestos.resizable = parentGesto || moveable.controlGesto;\r\n        !isPinch && setDragStart(moveable, e);\r\n        datas.datas = {};\r\n        datas.direction = direction;\r\n        datas.startOffsetWidth = width;\r\n        datas.startOffsetHeight = height;\r\n        datas.prevWidth = 0;\r\n        datas.prevHeight = 0;\r\n        datas.minSize = [0, 0];\r\n        datas.startWidth = state.inlineCSSWidth || state.cssWidth;\r\n        datas.startHeight = state.inlineCSSHeight || state.cssHeight;\r\n        datas.maxSize = [Infinity, Infinity];\r\n        if (!isGroup) {\r\n            datas.minSize = [\r\n                state.minOffsetWidth,\r\n                state.minOffsetHeight,\r\n            ];\r\n            datas.maxSize = [\r\n                state.maxOffsetWidth,\r\n                state.maxOffsetHeight,\r\n            ];\r\n        }\r\n        var transformOrigin = moveable.props.transformOrigin || \"% %\";\r\n        datas.transformOrigin = transformOrigin && isString(transformOrigin)\r\n            ? transformOrigin.split(\" \")\r\n            : transformOrigin;\r\n        datas.startOffsetMatrix = state.offsetMatrix;\r\n        datas.startTransformOrigin = state.transformOrigin;\r\n        datas.isWidth = (_a = e === null || e === void 0 ? void 0 : e.parentIsWidth) !== null && _a !== void 0 ? _a : ((!direction[0] && !direction[1]) || direction[0] || !direction[1]);\r\n        function setRatio(ratio) {\r\n            datas.ratio = ratio && isFinite(ratio) ? ratio : 0;\r\n        }\r\n        datas.startPositions = getAbsolutePosesByState(moveable.state);\r\n        function setFixedDirection(fixedDirection) {\r\n            var result = getFixedDirectionInfo(datas.startPositions, fixedDirection);\r\n            datas.fixedDirection = result.fixedDirection;\r\n            datas.fixedPosition = result.fixedPosition;\r\n            datas.fixedOffset = result.fixedOffset;\r\n        }\r\n        function setFixedPosition(fixedPosition) {\r\n            var result = getOffsetFixedPositionInfo(moveable.state, fixedPosition);\r\n            datas.fixedDirection = result.fixedDirection;\r\n            datas.fixedPosition = result.fixedPosition;\r\n            datas.fixedOffset = result.fixedOffset;\r\n        }\r\n        function setMin(minSize) {\r\n            datas.minSize = [\r\n                convertUnitSize(\"\".concat(minSize[0]), 0) || 0,\r\n                convertUnitSize(\"\".concat(minSize[1]), 0) || 0,\r\n            ];\r\n        }\r\n        function setMax(maxSize) {\r\n            var nextMaxSize = [\r\n                maxSize[0] || Infinity,\r\n                maxSize[1] || Infinity,\r\n            ];\r\n            if (!isNumber(nextMaxSize[0]) || isFinite(nextMaxSize[0])) {\r\n                nextMaxSize[0] = convertUnitSize(\"\".concat(nextMaxSize[0]), 0) || Infinity;\r\n            }\r\n            if (!isNumber(nextMaxSize[1]) || isFinite(nextMaxSize[1])) {\r\n                nextMaxSize[1] = convertUnitSize(\"\".concat(nextMaxSize[1]), 0) || Infinity;\r\n            }\r\n            datas.maxSize = nextMaxSize;\r\n        }\r\n        setRatio(width / height);\r\n        setFixedDirection(parentFixedDirection || [-direction[0], -direction[1]]);\r\n        datas.setFixedDirection = setFixedDirection;\r\n        datas.setFixedPosition = setFixedPosition;\r\n        datas.setMin = setMin;\r\n        datas.setMax = setMax;\r\n        var params = fillParams(moveable, e, {\r\n            direction: direction,\r\n            startRatio: datas.ratio,\r\n            set: function (_a) {\r\n                var _b = __read(_a, 2), startWidth = _b[0], startHeight = _b[1];\r\n                datas.startWidth = startWidth;\r\n                datas.startHeight = startHeight;\r\n            },\r\n            setMin: setMin,\r\n            setMax: setMax,\r\n            setRatio: setRatio,\r\n            setFixedDirection: setFixedDirection,\r\n            setFixedPosition: setFixedPosition,\r\n            setOrigin: function (origin) {\r\n                datas.transformOrigin = origin;\r\n            },\r\n            dragStart: Draggable.dragStart(moveable, new CustomGesto().dragStart([0, 0], e)),\r\n        });\r\n        var result = parentEvent || triggerEvent(moveable, \"onResizeStart\", params);\r\n        datas.startFixedDirection = datas.fixedDirection;\r\n        datas.startFixedPosition = datas.fixedPosition;\r\n        if (result !== false) {\r\n            datas.isResize = true;\r\n            moveable.state.snapRenderInfo = {\r\n                request: e.isRequest,\r\n                direction: direction,\r\n            };\r\n        }\r\n        return datas.isResize ? params : false;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        var _a;\r\n        var datas = e.datas, parentFlag = e.parentFlag, isPinch = e.isPinch, parentKeepRatio = e.parentKeepRatio, dragClient = e.dragClient, parentDist = e.parentDist, useSnap = e.useSnap, isRequest = e.isRequest, isGroup = e.isGroup, parentEvent = e.parentEvent, resolveMatrix = e.resolveMatrix;\r\n        var isResize = datas.isResize, transformOrigin = datas.transformOrigin, startWidth = datas.startWidth, startHeight = datas.startHeight, prevWidth = datas.prevWidth, prevHeight = datas.prevHeight, minSize = datas.minSize, maxSize = datas.maxSize, ratio = datas.ratio, startOffsetWidth = datas.startOffsetWidth, startOffsetHeight = datas.startOffsetHeight, isWidth = datas.isWidth;\r\n        if (!isResize) {\r\n            return;\r\n        }\r\n        if (resolveMatrix) {\r\n            var is3d = moveable.state.is3d;\r\n            var startOffsetMatrix = datas.startOffsetMatrix, startTransformOrigin = datas.startTransformOrigin;\r\n            var n = is3d ? 4 : 3;\r\n            var targetMatrix = parseMat(getNextTransforms(e));\r\n            var targetN = Math.sqrt(targetMatrix.length);\r\n            if (n !== targetN) {\r\n                targetMatrix = convertDimension(targetMatrix, targetN, n);\r\n            }\r\n            var nextAllMatrix = getNextMatrix(startOffsetMatrix, targetMatrix, startTransformOrigin, n);\r\n            var poses = calculatePoses(nextAllMatrix, startOffsetWidth, startOffsetHeight, n);\r\n            datas.startPositions = poses;\r\n            datas.nextTargetMatrix = targetMatrix;\r\n            datas.nextAllMatrix = nextAllMatrix;\r\n        }\r\n        var props = getProps(moveable.props, \"resizable\");\r\n        var resizeFormat = props.resizeFormat, _b = props.throttleResize, throttleResize = _b === void 0 ? parentFlag ? 0 : 1 : _b, parentMoveable = props.parentMoveable, keepRatioFinally = props.keepRatioFinally;\r\n        var direction = datas.direction;\r\n        var sizeDirection = direction;\r\n        var distWidth = 0;\r\n        var distHeight = 0;\r\n        if (!direction[0] && !direction[1]) {\r\n            sizeDirection = [1, 1];\r\n        }\r\n        var keepRatio = (ratio && (parentKeepRatio != null ? parentKeepRatio : props.keepRatio)) || false;\r\n        function getNextBoundingSize() {\r\n            var fixedDirection = datas.fixedDirection;\r\n            var nextSize = getOffsetSizeDist(sizeDirection, keepRatio, datas, e);\r\n            distWidth = nextSize.distWidth;\r\n            distHeight = nextSize.distHeight;\r\n            var nextWidth = (sizeDirection[0] - fixedDirection[0]) || keepRatio\r\n                ? Math.max(startOffsetWidth + distWidth, TINY_NUM) : startOffsetWidth;\r\n            var nextHeight = (sizeDirection[1] - fixedDirection[1]) || keepRatio\r\n                ? Math.max(startOffsetHeight + distHeight, TINY_NUM) : startOffsetHeight;\r\n            if (keepRatio && startOffsetWidth && startOffsetHeight) {\r\n                // startOffsetWidth : startOffsetHeight = nextWidth : nextHeight\r\n                if (isWidth) {\r\n                    nextHeight = nextWidth / ratio;\r\n                }\r\n                else {\r\n                    nextWidth = nextHeight * ratio;\r\n                }\r\n            }\r\n            return [nextWidth, nextHeight];\r\n        }\r\n        var _c = __read(getNextBoundingSize(), 2), boundingWidth = _c[0], boundingHeight = _c[1];\r\n        if (!parentEvent) {\r\n            datas.setFixedDirection(datas.fixedDirection);\r\n            triggerEvent(moveable, \"onBeforeResize\", fillParams(moveable, e, {\r\n                startFixedDirection: datas.startFixedDirection,\r\n                startFixedPosition: datas.startFixedPosition,\r\n                setFixedDirection: function (nextFixedDirection) {\r\n                    var _a;\r\n                    datas.setFixedDirection(nextFixedDirection);\r\n                    _a = __read(getNextBoundingSize(), 2), boundingWidth = _a[0], boundingHeight = _a[1];\r\n                    return [boundingWidth, boundingHeight];\r\n                },\r\n                setFixedPosition: function (nextFixedPosition) {\r\n                    var _a;\r\n                    datas.setFixedPosition(nextFixedPosition);\r\n                    _a = __read(getNextBoundingSize(), 2), boundingWidth = _a[0], boundingHeight = _a[1];\r\n                    return [boundingWidth, boundingHeight];\r\n                },\r\n                boundingWidth: boundingWidth,\r\n                boundingHeight: boundingHeight,\r\n                setSize: function (size) {\r\n                    var _a;\r\n                    _a = __read(size, 2), boundingWidth = _a[0], boundingHeight = _a[1];\r\n                },\r\n            }, true));\r\n        }\r\n        var fixedPosition = dragClient;\r\n        if (!dragClient) {\r\n            if (!parentFlag && isPinch) {\r\n                fixedPosition = getAbsolutePosition(moveable, [0, 0]);\r\n            }\r\n            else {\r\n                fixedPosition = datas.fixedPosition;\r\n            }\r\n        }\r\n        var snapDist = [0, 0];\r\n        if (!isPinch) {\r\n            snapDist = checkSnapResize(moveable, boundingWidth, boundingHeight, direction, fixedPosition, !useSnap && isRequest, datas);\r\n        }\r\n        if (parentDist) {\r\n            !parentDist[0] && (snapDist[0] = 0);\r\n            !parentDist[1] && (snapDist[1] = 0);\r\n        }\r\n        function computeSize() {\r\n            var _a;\r\n            if (resizeFormat) {\r\n                _a = __read(resizeFormat([boundingWidth, boundingHeight]), 2), boundingWidth = _a[0], boundingHeight = _a[1];\r\n            }\r\n            boundingWidth = throttle(boundingWidth, throttleResize);\r\n            boundingHeight = throttle(boundingHeight, throttleResize);\r\n        }\r\n        if (keepRatio) {\r\n            if (sizeDirection[0] && sizeDirection[1] && snapDist[0] && snapDist[1]) {\r\n                if (abs(snapDist[0]) > abs(snapDist[1])) {\r\n                    snapDist[1] = 0;\r\n                }\r\n                else {\r\n                    snapDist[0] = 0;\r\n                }\r\n            }\r\n            var isNoSnap = !snapDist[0] && !snapDist[1];\r\n            if (isNoSnap) {\r\n                // pre-compute before maintaining the ratio\r\n                computeSize();\r\n            }\r\n            if ((sizeDirection[0] && !sizeDirection[1])\r\n                || (snapDist[0] && !snapDist[1])\r\n                || (isNoSnap && isWidth)) {\r\n                boundingWidth += snapDist[0];\r\n                boundingHeight = boundingWidth / ratio;\r\n            }\r\n            else if ((!sizeDirection[0] && sizeDirection[1])\r\n                || (!snapDist[0] && snapDist[1])\r\n                || (isNoSnap && !isWidth)) {\r\n                boundingHeight += snapDist[1];\r\n                boundingWidth = boundingHeight * ratio;\r\n            }\r\n        }\r\n        else {\r\n            boundingWidth += snapDist[0];\r\n            boundingHeight += snapDist[1];\r\n            boundingWidth = Math.max(0, boundingWidth);\r\n            boundingHeight = Math.max(0, boundingHeight);\r\n        }\r\n        _a = __read(calculateBoundSize([boundingWidth, boundingHeight], minSize, maxSize, keepRatio ? ratio : false), 2), boundingWidth = _a[0], boundingHeight = _a[1];\r\n        computeSize();\r\n        if (keepRatio && (isGroup || keepRatioFinally)) {\r\n            if (isWidth) {\r\n                boundingHeight = boundingWidth / ratio;\r\n            }\r\n            else {\r\n                boundingWidth = boundingHeight * ratio;\r\n            }\r\n        }\r\n        distWidth = boundingWidth - startOffsetWidth;\r\n        distHeight = boundingHeight - startOffsetHeight;\r\n        var delta = [distWidth - prevWidth, distHeight - prevHeight];\r\n        datas.prevWidth = distWidth;\r\n        datas.prevHeight = distHeight;\r\n        var inverseDelta = getResizeDist(moveable, boundingWidth, boundingHeight, fixedPosition, transformOrigin, datas);\r\n        if (!parentMoveable && delta.every(function (num) { return !num; }) && inverseDelta.every(function (num) { return !num; })) {\r\n            return;\r\n        }\r\n        var drag = Draggable.drag(moveable, setCustomDrag(e, moveable.state, inverseDelta, !!isPinch, false, \"draggable\"));\r\n        var transform = drag.transform;\r\n        var nextWidth = startWidth + distWidth;\r\n        var nextHeight = startHeight + distHeight;\r\n        var params = fillParams(moveable, e, __assign({ width: nextWidth, height: nextHeight, offsetWidth: Math.round(boundingWidth), offsetHeight: Math.round(boundingHeight), startRatio: ratio, boundingWidth: boundingWidth, boundingHeight: boundingHeight, direction: direction, dist: [distWidth, distHeight], delta: delta, isPinch: !!isPinch, drag: drag }, fillAfterTransform({\r\n            style: {\r\n                width: \"\".concat(nextWidth, \"px\"),\r\n                height: \"\".concat(nextHeight, \"px\"),\r\n            },\r\n            transform: transform,\r\n        }, drag, e)));\r\n        !parentEvent && triggerEvent(moveable, \"onResize\", params);\r\n        return params;\r\n    },\r\n    dragControlAfter: function (moveable, e) {\r\n        var datas = e.datas;\r\n        var isResize = datas.isResize, startOffsetWidth = datas.startOffsetWidth, startOffsetHeight = datas.startOffsetHeight, prevWidth = datas.prevWidth, prevHeight = datas.prevHeight;\r\n        if (!isResize || moveable.props.checkResizableError === false) {\r\n            return;\r\n        }\r\n        var _a = moveable.state, width = _a.width, height = _a.height;\r\n        var errorWidth = width - (startOffsetWidth + prevWidth);\r\n        var errorHeight = height - (startOffsetHeight + prevHeight);\r\n        var isErrorWidth = abs(errorWidth) > 3;\r\n        var isErrorHeight = abs(errorHeight) > 3;\r\n        if (isErrorWidth) {\r\n            datas.startWidth += errorWidth;\r\n            datas.startOffsetWidth += errorWidth;\r\n            datas.prevWidth += errorWidth;\r\n        }\r\n        if (isErrorHeight) {\r\n            datas.startHeight += errorHeight;\r\n            datas.startOffsetHeight += errorHeight;\r\n            datas.prevHeight += errorHeight;\r\n        }\r\n        if (isErrorWidth || isErrorHeight) {\r\n            return this.dragControl(moveable, e);\r\n        }\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        var datas = e.datas, parentEvent = e.parentEvent;\r\n        if (!datas.isResize) {\r\n            return;\r\n        }\r\n        datas.isResize = false;\r\n        var params = fillEndParams(moveable, e, {});\r\n        !parentEvent && triggerEvent(moveable, \"onResizeEnd\", params);\r\n        return params;\r\n    },\r\n    dragGroupControlCondition: directionCondition$2,\r\n    dragGroupControlStart: function (moveable, e) {\r\n        var datas = e.datas;\r\n        var params = this.dragControlStart(moveable, __assign(__assign({}, e), { isGroup: true }));\r\n        if (!params) {\r\n            return false;\r\n        }\r\n        var originalEvents = fillChildEvents(moveable, \"resizable\", e);\r\n        var parentStartOffsetWidth = datas.startOffsetWidth, parentStartOffsetHeight = datas.startOffsetHeight;\r\n        function updateGroupMin() {\r\n            var originalMinSize = datas.minSize;\r\n            originalEvents.forEach(function (ev) {\r\n                var _a = ev.datas, childMinSize = _a.minSize, childStartOffsetWidth = _a.startOffsetWidth, childStartOffsetHeight = _a.startOffsetHeight;\r\n                var parentMinWidth = parentStartOffsetWidth\r\n                    * (childStartOffsetWidth ? childMinSize[0] / childStartOffsetWidth : 0);\r\n                var parentMinHeight = parentStartOffsetHeight\r\n                    * (childStartOffsetHeight ? childMinSize[1] / childStartOffsetHeight : 0);\r\n                originalMinSize[0] = Math.max(originalMinSize[0], parentMinWidth);\r\n                originalMinSize[1] = Math.max(originalMinSize[1], parentMinHeight);\r\n            });\r\n        }\r\n        function updateGroupMax() {\r\n            var originalMaxSize = datas.maxSize;\r\n            originalEvents.forEach(function (ev) {\r\n                var _a = ev.datas, childMaxSize = _a.maxSize, childStartOffsetWidth = _a.startOffsetWidth, childStartOffsetHeight = _a.startOffsetHeight;\r\n                var parentMaxWidth = parentStartOffsetWidth\r\n                    * (childStartOffsetWidth ? childMaxSize[0] / childStartOffsetWidth : 0);\r\n                var parentMaxHeight = parentStartOffsetHeight\r\n                    * (childStartOffsetHeight ? childMaxSize[1] / childStartOffsetHeight : 0);\r\n                originalMaxSize[0] = Math.min(originalMaxSize[0], parentMaxWidth);\r\n                originalMaxSize[1] = Math.min(originalMaxSize[1], parentMaxHeight);\r\n            });\r\n        }\r\n        var events = triggerChildAbles(moveable, this, \"dragControlStart\", e, function (child, ev) {\r\n            return startChildDist(moveable, child, datas, ev);\r\n        });\r\n        updateGroupMin();\r\n        updateGroupMax();\r\n        var setFixedDirection = function (fixedDirection) {\r\n            params.setFixedDirection(fixedDirection);\r\n            events.forEach(function (ev, i) {\r\n                ev.setFixedDirection(fixedDirection);\r\n                startChildDist(moveable, ev.moveable, datas, originalEvents[i]);\r\n            });\r\n        };\r\n        datas.setFixedDirection = setFixedDirection;\r\n        var nextParams = __assign(__assign({}, params), { targets: moveable.props.targets, events: events.map(function (ev) {\r\n                return __assign(__assign({}, ev), { setMin: function (minSize) {\r\n                        ev.setMin(minSize);\r\n                        updateGroupMin();\r\n                    }, setMax: function (maxSize) {\r\n                        ev.setMax(maxSize);\r\n                        updateGroupMax();\r\n                    } });\r\n            }), setFixedDirection: setFixedDirection, setMin: function (minSize) {\r\n                params.setMin(minSize);\r\n                updateGroupMin();\r\n            }, setMax: function (maxSize) {\r\n                params.setMax(maxSize);\r\n                updateGroupMax();\r\n            } });\r\n        var result = triggerEvent(moveable, \"onResizeGroupStart\", nextParams);\r\n        datas.isResize = result !== false;\r\n        return datas.isResize ? params : false;\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isResize) {\r\n            return;\r\n        }\r\n        var props = getProps(moveable.props, \"resizable\");\r\n        catchEvent(moveable, \"onBeforeResize\", function (parentEvent) {\r\n            triggerEvent(moveable, \"onBeforeResizeGroup\", fillParams(moveable, e, __assign(__assign({}, parentEvent), { targets: props.targets }), true));\r\n        });\r\n        var params = this.dragControl(moveable, __assign(__assign({}, e), { isGroup: true }));\r\n        if (!params) {\r\n            return;\r\n        }\r\n        var boundingWidth = params.boundingWidth, boundingHeight = params.boundingHeight, dist = params.dist;\r\n        var keepRatio = props.keepRatio;\r\n        var parentScale = [\r\n            boundingWidth / (boundingWidth - dist[0]),\r\n            boundingHeight / (boundingHeight - dist[1]),\r\n        ];\r\n        var fixedPosition = datas.fixedPosition;\r\n        var events = triggerChildAbles(moveable, this, \"dragControl\", e, function (_, ev) {\r\n            var _a = __read(calculate(createRotateMatrix(moveable.rotation / 180 * Math.PI, 3), [\r\n                ev.datas.originalX * parentScale[0],\r\n                ev.datas.originalY * parentScale[1],\r\n                1,\r\n            ], 3), 2), clientX = _a[0], clientY = _a[1];\r\n            return __assign(__assign({}, ev), { parentDist: null, parentScale: parentScale, dragClient: plus(fixedPosition, [clientX, clientY]), parentKeepRatio: keepRatio });\r\n        });\r\n        var nextParams = __assign({ targets: props.targets, events: events }, params);\r\n        triggerEvent(moveable, \"onResizeGroup\", nextParams);\r\n        return nextParams;\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        var isDrag = e.isDrag, datas = e.datas;\r\n        if (!datas.isResize) {\r\n            return;\r\n        }\r\n        this.dragControlEnd(moveable, e);\r\n        var events = triggerChildAbles(moveable, this, \"dragControlEnd\", e);\r\n        var nextParams = fillEndParams(moveable, e, {\r\n            targets: moveable.props.targets,\r\n            events: events,\r\n        });\r\n        triggerEvent(moveable, \"onResizeGroupEnd\", nextParams);\r\n        return isDrag;\r\n    },\r\n    /**\r\n     * @method Moveable.Resizable#request\r\n     * @param {Moveable.Resizable.ResizableRequestParam} e - the Resizable's request parameter\r\n     * @return {Moveable.Requester} Moveable Requester\r\n     * @example\r\n\n     * // Instantly Request (requestStart - request - requestEnd)\r\n     * // Use Relative Value\r\n     * moveable.request(\"resizable\", { deltaWidth: 10, deltaHeight: 10 }, true);\r\n     *\r\n     * // Use Absolute Value\r\n     * moveable.request(\"resizable\", { offsetWidth: 100, offsetHeight: 100 }, true);\r\n     *\r\n     * // requestStart\r\n     * const requester = moveable.request(\"resizable\");\r\n     *\r\n     * // request\r\n     * // Use Relative Value\r\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\r\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\r\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\r\n     *\r\n     * // Use Absolute Value\r\n     * moveable.request(\"resizable\", { offsetWidth: 100, offsetHeight: 100 });\r\n     * moveable.request(\"resizable\", { offsetWidth: 110, offsetHeight: 100 });\r\n     * moveable.request(\"resizable\", { offsetWidth: 120, offsetHeight: 100 });\r\n     *\r\n     * // requestEnd\r\n     * requester.requestEnd();\r\n     */\r\n    request: function (moveable) {\r\n        var datas = {};\r\n        var distWidth = 0;\r\n        var distHeight = 0;\r\n        var useSnap = false;\r\n        var rect = moveable.getRect();\r\n        return {\r\n            isControl: true,\r\n            requestStart: function (e) {\r\n                var _a;\r\n                useSnap = e.useSnap;\r\n                return {\r\n                    datas: datas,\r\n                    parentDirection: e.direction || [1, 1],\r\n                    parentIsWidth: (_a = e === null || e === void 0 ? void 0 : e.horizontal) !== null && _a !== void 0 ? _a : true,\r\n                    useSnap: useSnap,\r\n                };\r\n            },\r\n            request: function (e) {\r\n                if (\"offsetWidth\" in e) {\r\n                    distWidth = e.offsetWidth - rect.offsetWidth;\r\n                }\r\n                else if (\"deltaWidth\" in e) {\r\n                    distWidth += e.deltaWidth;\r\n                }\r\n                if (\"offsetHeight\" in e) {\r\n                    distHeight = e.offsetHeight - rect.offsetHeight;\r\n                }\r\n                else if (\"deltaHeight\" in e) {\r\n                    distHeight += e.deltaHeight;\r\n                }\r\n                return {\r\n                    datas: datas,\r\n                    parentDist: [distWidth, distHeight],\r\n                    parentKeepRatio: e.keepRatio,\r\n                    useSnap: useSnap,\r\n                };\r\n            },\r\n            requestEnd: function () {\r\n                return { datas: datas, isDrag: true, useSnap: useSnap };\r\n            },\r\n        };\r\n    },\r\n    unset: function (moveable) {\r\n        moveable.state.gestos.resizable = null;\r\n    },\r\n};\r\n/**\r\n * Whether or not target can be resized.\r\n * @name Moveable.Resizable#resizable\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     resizable: false,\r\n * });\r\n *\r\n * moveable.resizable = true;\r\n */\r\n/**\r\n * throttle of width, height when resize. If throttleResize is set to less than 1, the target may shake.\r\n * @name Moveable.Resizable#throttleResize\r\n * @default 1\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   resizable: true,\r\n *   throttleResize: 1,\r\n * });\r\n *\r\n * moveable.throttleResize = 0;\r\n */\r\n/**\r\n * When resize or scale, keeps a ratio of the width, height.\r\n * @name Moveable.Resizable#keepRatio\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   resizable: true,\r\n * });\r\n *\r\n * moveable.keepRatio = true;\r\n */\r\n/**\r\n * Set directions to show the control box.\r\n * @name Moveable.Resizable#renderDirections\r\n * @default [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"]\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   resizable: true,\r\n *   renderDirections: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"],\r\n * });\r\n *\r\n * moveable.renderDirections = [\"nw\", \"ne\", \"sw\", \"se\"];\r\n */\r\n/**\r\n * Function to convert size for resize\r\n * @name Moveable.Resizable#resizeFormat\r\n * @default oneself\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   resizable: true,\r\n *   resizeFormat: v => v,\r\n * });\r\n *\r\n * moveable.resizeFormat = (size: number[]) => ([Math.trunc(size[0]), Math.trunc(size[1])];\r\n */\r\n/**\r\n * When the resize starts, the resizeStart event is called.\r\n * @memberof Moveable.Resizable\r\n * @event resizeStart\r\n * @param {Moveable.Resizable.OnResizeStart} - Parameters for the resizeStart event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { resizable: true });\r\n * moveable.on(\"resizeStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n * When resizing, `beforeResize` is called before `resize` occurs. In `beforeResize`, you can get and set the pre-value before resizing.\r\n * @memberof Moveable.Resizable\r\n * @event beforeResize\r\n * @param {Moveable.Resizable.OnBeforeResize} - Parameters for the `beforeResize` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { resizable: true });\r\n * moveable.on(\"beforeResize\", ({ setFixedDirection }) => {\r\n *     if (shiftKey) {\r\n *        setFixedDirection([0, 0]);\r\n *     }\r\n * });\r\n * moveable.on(\"resize\", ({ target, width, height, drag }) => {\r\n *     target.style.width = `${width}px`;\r\n *     target.style.height = `${height}px`;\r\n *     target.style.transform = drag.transform;\r\n * });\r\n */\r\n/**\r\n * When resizing, the resize event is called.\r\n * @memberof Moveable.Resizable\r\n * @event resize\r\n * @param {Moveable.Resizable.OnResize} - Parameters for the resize event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { resizable: true });\r\n * moveable.on(\"resize\", ({ target, width, height }) => {\r\n *     target.style.width = `${e.width}px`;\r\n *     target.style.height = `${e.height}px`;\r\n * });\r\n */\r\n/**\r\n * When the resize finishes, the resizeEnd event is called.\r\n * @memberof Moveable.Resizable\r\n * @event resizeEnd\r\n * @param {Moveable.Resizable.OnResizeEnd} - Parameters for the resizeEnd event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { resizable: true });\r\n * moveable.on(\"resizeEnd\", ({ target, isDrag }) => {\r\n *     console.log(target, isDrag);\r\n * });\r\n */\r\n/**\r\n* When the group resize starts, the `resizeGroupStart` event is called.\r\n* @memberof Moveable.Resizable\r\n* @event resizeGroupStart\r\n* @param {Moveable.Resizable.OnResizeGroupStart} - Parameters for the `resizeGroupStart` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     resizable: true\r\n* });\r\n* moveable.on(\"resizeGroupStart\", ({ targets }) => {\r\n*     console.log(\"onResizeGroupStart\", targets);\r\n* });\r\n*/\r\n/**\r\n* When the group resize, the `resizeGroup` event is called.\r\n* @memberof Moveable.Resizable\r\n* @event resizeGroup\r\n* @param {Moveable.Resizable.onResizeGroup} - Parameters for the `resizeGroup` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     resizable: true\r\n* });\r\n* moveable.on(\"resizeGroup\", ({ targets, events }) => {\r\n*     console.log(\"onResizeGroup\", targets);\r\n*     events.forEach(ev => {\r\n*         const offset = [\r\n*             direction[0] < 0 ? -ev.delta[0] : 0,\r\n*             direction[1] < 0 ? -ev.delta[1] : 0,\r\n*         ];\r\n*         // ev.drag is a drag event that occurs when the group resize.\r\n*         const left = offset[0] + ev.drag.beforeDist[0];\r\n*         const top = offset[1] + ev.drag.beforeDist[1];\r\n*         const width = ev.width;\r\n*         const top = ev.top;\r\n*     });\r\n* });\r\n*/\r\n/**\r\n * When the group resize finishes, the `resizeGroupEnd` event is called.\r\n * @memberof Moveable.Resizable\r\n * @event resizeGroupEnd\r\n * @param {Moveable.Resizable.OnResizeGroupEnd} - Parameters for the `resizeGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     resizable: true\r\n * });\r\n * moveable.on(\"resizeGroupEnd\", ({ targets, isDrag }) => {\r\n *     console.log(\"onResizeGroupEnd\", targets, isDrag);\r\n * });\r\n */\n\n/**\r\n * @namespace Rotatable\r\n * @memberof Moveable\r\n * @description Rotatable indicates whether the target can be rotated.\r\n */\r\nfunction setRotateStartInfo(moveable, datas, clientX, clientY, rect) {\r\n    var groupable = moveable.props.groupable;\r\n    var state = moveable.state;\r\n    var n = state.is3d ? 4 : 3;\r\n    var origin = datas.origin;\r\n    var nextOrigin = calculatePosition(moveable.state.rootMatrix, \r\n    // TO-DO #710\r\n    minus([origin[0], origin[1]], groupable ? [0, 0] : [state.left, state.top]), n);\r\n    var startAbsoluteOrigin = plus([rect.left, rect.top], nextOrigin);\r\n    datas.startAbsoluteOrigin = startAbsoluteOrigin;\r\n    datas.prevDeg = getRad(startAbsoluteOrigin, [clientX, clientY]) / Math.PI * 180;\r\n    datas.defaultDeg = datas.prevDeg;\r\n    datas.prevSnapDeg = 0;\r\n    datas.loop = 0;\r\n    datas.startDist = getDist$1(startAbsoluteOrigin, [clientX, clientY]);\r\n}\r\nfunction getAbsoluteDist(deg, direction, datas) {\r\n    var defaultDeg = datas.defaultDeg, prevDeg = datas.prevDeg;\r\n    var normalizedPrevDeg = prevDeg % 360;\r\n    var loop = Math.floor(prevDeg / 360);\r\n    if (normalizedPrevDeg < 0) {\r\n        normalizedPrevDeg += 360;\r\n    }\r\n    if (normalizedPrevDeg > deg && normalizedPrevDeg > 270 && deg < 90) {\r\n        // 360 => 0\r\n        ++loop;\r\n    }\r\n    else if (normalizedPrevDeg < deg && normalizedPrevDeg < 90 && deg > 270) {\r\n        // 0 => 360\r\n        --loop;\r\n    }\r\n    var dist = direction * (loop * 360 + deg - defaultDeg);\r\n    datas.prevDeg = defaultDeg + dist;\r\n    return dist;\r\n}\r\nfunction getAbsoluteDistByClient(clientX, clientY, direction, datas) {\r\n    return getAbsoluteDist(getRad(datas.startAbsoluteOrigin, [clientX, clientY]) / Math.PI * 180, direction, datas);\r\n}\r\nfunction getRotateInfo(moveable, moveableRect, datas, dist, startValue, checkSnap) {\r\n    var _a = moveable.props.throttleRotate, throttleRotate = _a === void 0 ? 0 : _a;\r\n    var prevSnapDeg = datas.prevSnapDeg;\r\n    var snapRotation = 0;\r\n    var isSnap = false;\r\n    if (checkSnap) {\r\n        var result = checkSnapRotate(moveable, moveableRect, dist, startValue + dist);\r\n        isSnap = result.isSnap;\r\n        snapRotation = startValue + result.dist;\r\n    }\r\n    if (!isSnap) {\r\n        snapRotation = throttle(startValue + dist, throttleRotate);\r\n    }\r\n    var snapDeg = snapRotation - startValue;\r\n    datas.prevSnapDeg = snapDeg;\r\n    return [snapDeg - prevSnapDeg, snapDeg, snapRotation];\r\n}\r\nfunction getRotationPositions(rotationPosition, _a, direction) {\r\n    var _b = __read(_a, 4), pos1 = _b[0], pos2 = _b[1], pos3 = _b[2], pos4 = _b[3];\r\n    if (rotationPosition === \"none\") {\r\n        return [];\r\n    }\r\n    if (isArray(rotationPosition)) {\r\n        return rotationPosition.map(function (child) { return getRotationPositions(child, [pos1, pos2, pos3, pos4], direction)[0]; });\r\n    }\r\n    var _c = __read((rotationPosition || \"top\").split(\"-\"), 2), dir1 = _c[0], dir2 = _c[1];\r\n    var radPoses = [pos1, pos2];\r\n    if (dir1 === \"left\") {\r\n        radPoses = [pos3, pos1];\r\n    }\r\n    else if (dir1 === \"right\") {\r\n        radPoses = [pos2, pos4];\r\n    }\r\n    else if (dir1 === \"bottom\") {\r\n        radPoses = [pos4, pos3];\r\n    }\r\n    var pos = [\r\n        (radPoses[0][0] + radPoses[1][0]) / 2,\r\n        (radPoses[0][1] + radPoses[1][1]) / 2,\r\n    ];\r\n    var rad = getRotationRad(radPoses, direction);\r\n    if (dir2) {\r\n        var isStart = dir2 === \"top\" || dir2 === \"left\";\r\n        var isReverse = dir1 === \"bottom\" || dir1 === \"left\";\r\n        pos = radPoses[(isStart && !isReverse) || (!isStart && isReverse) ? 0 : 1];\r\n    }\r\n    return [[pos, rad]];\r\n}\r\nfunction dragControlCondition(moveable, e) {\r\n    if (e.isRequest) {\r\n        return e.requestAble === \"rotatable\";\r\n    }\r\n    var target = e.inputEvent.target;\r\n    if (hasClass(target, prefix(\"rotation-control\"))\r\n        || (moveable.props.rotateAroundControls && hasClass(target, prefix(\"around-control\")))\r\n        || (hasClass(target, prefix(\"control\")) && hasClass(target, prefix(\"rotatable\")))) {\r\n        return true;\r\n    }\r\n    var rotationTarget = moveable.props.rotationTarget;\r\n    if (rotationTarget) {\r\n        return getRefTargets(rotationTarget, true).some(function (element) {\r\n            if (!element) {\r\n                return false;\r\n            }\r\n            return target === element || target.contains(element);\r\n        });\r\n    }\r\n    return false;\r\n}\r\nvar css = \".rotation {\\nposition: absolute;\\nheight: 40px;\\nwidth: 1px;\\ntransform-origin: 50% 100%;\\nheight: calc(40px * var(--zoom));\\ntop: auto;\\nleft: 0;\\nbottom: 100%;\\nwill-change: transform;\\n}\\n.rotation .rotation-line {\\ndisplay: block;\\nwidth: 100%;\\nheight: 100%;\\ntransform-origin: 50% 50%;\\n}\\n.rotation .rotation-control {\\nborder-color: #4af;\\nborder-color: var(--moveable-color);\\nbackground:#fff;\\ncursor: alias;\\n}\\n:global .view-rotation-dragging, .rotatable.direction.control {\\ncursor: alias;\\n}\\n.rotatable.direction.control.move {\\ncursor: move;\\n}\\n\";\r\nvar Rotatable = {\r\n    name: \"rotatable\",\r\n    canPinch: true,\r\n    props: [\r\n        \"rotatable\",\r\n        \"rotationPosition\",\r\n        \"throttleRotate\",\r\n        \"renderDirections\",\r\n        \"rotationTarget\",\r\n        \"rotateAroundControls\",\r\n        \"edge\",\r\n        \"resolveAblesWithRotatable\",\r\n        \"displayAroundControls\",\r\n    ],\r\n    events: [\r\n        \"rotateStart\",\r\n        \"beforeRotate\",\r\n        \"rotate\",\r\n        \"rotateEnd\",\r\n        \"rotateGroupStart\",\r\n        \"beforeRotateGroup\",\r\n        \"rotateGroup\",\r\n        \"rotateGroupEnd\",\r\n    ],\r\n    css: [css],\r\n    viewClassName: function (moveable) {\r\n        if (!moveable.isDragging(\"rotatable\")) {\r\n            return \"\";\r\n        }\r\n        return prefix(\"view-rotation-dragging\");\r\n    },\r\n    render: function (moveable, React) {\r\n        var _a = getProps(moveable.props, \"rotatable\"), rotatable = _a.rotatable, rotationPosition = _a.rotationPosition, zoom = _a.zoom, renderDirections = _a.renderDirections, rotateAroundControls = _a.rotateAroundControls, resolveAblesWithRotatable = _a.resolveAblesWithRotatable;\r\n        var _b = moveable.getState(), renderPoses = _b.renderPoses, direction = _b.direction;\r\n        if (!rotatable) {\r\n            return null;\r\n        }\r\n        var positions = getRotationPositions(rotationPosition, renderPoses, direction);\r\n        var jsxs = [];\r\n        positions.forEach(function (_a, i) {\r\n            var _b = __read(_a, 2), pos = _b[0], rad = _b[1];\r\n            jsxs.push(React.createElement(\"div\", { key: \"rotation\".concat(i), className: prefix(\"rotation\"), style: {\r\n                    // tslint:disable-next-line: max-line-length\r\n                    transform: \"translate(-50%) translate(\".concat(pos[0], \"px, \").concat(pos[1], \"px) rotate(\").concat(rad, \"rad)\"),\r\n                } },\r\n                React.createElement(\"div\", { className: prefix(\"line rotation-line\"), style: {\r\n                        transform: \"scaleX(\".concat(zoom, \")\"),\r\n                    } }),\r\n                React.createElement(\"div\", { className: prefix(\"control rotation-control\"), style: {\r\n                        transform: \"translate(0.5px) scale(\".concat(zoom, \")\"),\r\n                    } })));\r\n        });\r\n        if (renderDirections) {\r\n            var ables = getKeys(resolveAblesWithRotatable || {});\r\n            var resolveMap_1 = {};\r\n            ables.forEach(function (name) {\r\n                resolveAblesWithRotatable[name].forEach(function (direction) {\r\n                    resolveMap_1[direction] = name;\r\n                });\r\n            });\r\n            var directionControlInfos = [];\r\n            if (isArray(renderDirections)) {\r\n                directionControlInfos = renderDirections.map(function (dir) {\r\n                    var able = resolveMap_1[dir];\r\n                    return {\r\n                        data: able ? { resolve: able } : {},\r\n                        classNames: able ? [\"move\"] : [],\r\n                        dir: dir,\r\n                    };\r\n                });\r\n            }\r\n            jsxs.push.apply(jsxs, __spreadArray([], __read(renderDirectionControlsByInfos(moveable, \"rotatable\", directionControlInfos, React)), false));\r\n        }\r\n        if (rotateAroundControls) {\r\n            jsxs.push.apply(jsxs, __spreadArray([], __read(renderAroundControls(moveable, React)), false));\r\n        }\r\n        return jsxs;\r\n    },\r\n    dragControlCondition: dragControlCondition,\r\n    dragControlStart: function (moveable, e) {\r\n        var _a;\r\n        var _b;\r\n        var datas = e.datas, clientX = e.clientX, clientY = e.clientY, parentRotate = e.parentRotate, parentFlag = e.parentFlag, isPinch = e.isPinch, isRequest = e.isRequest;\r\n        var state = moveable.state;\r\n        var target = state.target, left = state.left, top = state.top, direction = state.direction, beforeDirection = state.beforeDirection, targetTransform = state.targetTransform, moveableClientRect = state.moveableClientRect, offsetMatrix = state.offsetMatrix, targetMatrix = state.targetMatrix, allMatrix = state.allMatrix, width = state.width, height = state.height;\r\n        if (!isRequest && !target) {\r\n            return false;\r\n        }\r\n        var rect = moveable.getRect();\r\n        datas.rect = rect;\r\n        datas.transform = targetTransform;\r\n        datas.left = left;\r\n        datas.top = top;\r\n        var setFixedPosition = function (fixedPosition) {\r\n            var result = getOffsetFixedPositionInfo(moveable.state, fixedPosition);\r\n            datas.fixedDirection = result.fixedDirection;\r\n            datas.fixedOffset = result.fixedOffset;\r\n            datas.fixedPosition = result.fixedPosition;\r\n            if (resizeStart) {\r\n                resizeStart.setFixedPosition(fixedPosition);\r\n            }\r\n        };\r\n        var setFixedDirection = function (fixedDirection) {\r\n            var result = getOffsetFixedDirectionInfo(moveable.state, fixedDirection);\r\n            datas.fixedDirection = result.fixedDirection;\r\n            datas.fixedOffset = result.fixedOffset;\r\n            datas.fixedPosition = result.fixedPosition;\r\n            if (resizeStart) {\r\n                resizeStart.setFixedDirection(fixedDirection);\r\n            }\r\n        };\r\n        var startClientX = clientX;\r\n        var startClientY = clientY;\r\n        if (isRequest || isPinch || parentFlag) {\r\n            var externalRotate = parentRotate || 0;\r\n            datas.beforeInfo = {\r\n                origin: rect.beforeOrigin,\r\n                prevDeg: externalRotate,\r\n                defaultDeg: externalRotate,\r\n                prevSnapDeg: 0,\r\n                startDist: 0,\r\n            };\r\n            datas.afterInfo = __assign(__assign({}, datas.beforeInfo), { origin: rect.origin });\r\n            datas.absoluteInfo = __assign(__assign({}, datas.beforeInfo), { origin: rect.origin, startValue: externalRotate });\r\n        }\r\n        else {\r\n            var inputTarget = (_b = e.inputEvent) === null || _b === void 0 ? void 0 : _b.target;\r\n            if (inputTarget) {\r\n                var regionDirection = inputTarget.getAttribute(\"data-direction\") || \"\";\r\n                var controlDirection = DIRECTION_REGION_TO_DIRECTION[regionDirection];\r\n                if (controlDirection) {\r\n                    datas.isControl = true;\r\n                    datas.isAroundControl = hasClass(inputTarget, prefix(\"around-control\"));\r\n                    datas.controlDirection = controlDirection;\r\n                    var resolve = inputTarget.getAttribute(\"data-resolve\");\r\n                    if (resolve) {\r\n                        datas.resolveAble = resolve;\r\n                    }\r\n                    var clientPoses = calculateMoveableClientPositions(state.rootMatrix, state.renderPoses, moveableClientRect);\r\n                    _a = __read(getPosByDirection(clientPoses, controlDirection), 2), startClientX = _a[0], startClientY = _a[1];\r\n                }\r\n            }\r\n            datas.beforeInfo = { origin: rect.beforeOrigin };\r\n            datas.afterInfo = { origin: rect.origin };\r\n            datas.absoluteInfo = {\r\n                origin: rect.origin,\r\n                startValue: rect.rotation,\r\n            };\r\n            var originalFixedPosition_1 = setFixedPosition;\r\n            setFixedPosition = function (fixedPosition) {\r\n                var n = state.is3d ? 4 : 3;\r\n                var _a = __read(plus(getOrigin(targetMatrix, n), fixedPosition), 2), originX = _a[0], originY = _a[1];\r\n                var fixedBeforeOrigin = calculate(offsetMatrix, convertPositionMatrix([originX, originY], n));\r\n                var fixedAfterOrigin = calculate(allMatrix, convertPositionMatrix([fixedPosition[0], fixedPosition[1]], n));\r\n                originalFixedPosition_1(fixedPosition);\r\n                var posDelta = state.posDelta;\r\n                datas.beforeInfo.origin = minus(fixedBeforeOrigin, posDelta);\r\n                datas.afterInfo.origin = minus(fixedAfterOrigin, posDelta);\r\n                datas.absoluteInfo.origin = minus(fixedAfterOrigin, posDelta);\r\n                setRotateStartInfo(moveable, datas.beforeInfo, startClientX, startClientY, moveableClientRect);\r\n                setRotateStartInfo(moveable, datas.afterInfo, startClientX, startClientY, moveableClientRect);\r\n                setRotateStartInfo(moveable, datas.absoluteInfo, startClientX, startClientY, moveableClientRect);\r\n            };\r\n            setFixedDirection = function (fixedDirection) {\r\n                var fixedPosition = getPosByDirection([\r\n                    [0, 0],\r\n                    [width, 0],\r\n                    [0, height],\r\n                    [width, height],\r\n                ], fixedDirection);\r\n                setFixedPosition(fixedPosition);\r\n            };\r\n        }\r\n        datas.startClientX = startClientX;\r\n        datas.startClientY = startClientY;\r\n        datas.direction = direction;\r\n        datas.beforeDirection = beforeDirection;\r\n        datas.startValue = 0;\r\n        datas.datas = {};\r\n        setDefaultTransformIndex(moveable, e, \"rotate\");\r\n        var dragStart = false;\r\n        var resizeStart = false;\r\n        if (datas.isControl && datas.resolveAble) {\r\n            var resolveAble = datas.resolveAble;\r\n            if (resolveAble === \"resizable\") {\r\n                resizeStart = Resizable.dragControlStart(moveable, __assign(__assign({}, (new CustomGesto(\"resizable\").dragStart([0, 0], e))), { parentPosition: datas.controlPosition, parentFixedPosition: datas.fixedPosition }));\r\n            }\r\n        }\r\n        if (!resizeStart) {\r\n            dragStart = Draggable.dragStart(moveable, new CustomGesto().dragStart([0, 0], e));\r\n        }\r\n        setFixedPosition(getTotalOrigin(moveable));\r\n        var params = fillParams(moveable, e, __assign(__assign({ set: function (rotatation) {\r\n                datas.startValue = rotatation * Math.PI / 180;\r\n            }, setFixedDirection: setFixedDirection, setFixedPosition: setFixedPosition }, fillTransformStartEvent(moveable, e)), { dragStart: dragStart, resizeStart: resizeStart }));\r\n        var result = triggerEvent(moveable, \"onRotateStart\", params);\r\n        datas.isRotate = result !== false;\r\n        state.snapRenderInfo = {\r\n            request: e.isRequest,\r\n        };\r\n        return datas.isRotate ? params : false;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        var _a, _b, _c;\r\n        var datas = e.datas, clientDistX = e.clientDistX, clientDistY = e.clientDistY, parentRotate = e.parentRotate, parentFlag = e.parentFlag, isPinch = e.isPinch, groupDelta = e.groupDelta, resolveMatrix = e.resolveMatrix;\r\n        var beforeDirection = datas.beforeDirection, beforeInfo = datas.beforeInfo, afterInfo = datas.afterInfo, absoluteInfo = datas.absoluteInfo, isRotate = datas.isRotate, startValue = datas.startValue, rect = datas.rect, startClientX = datas.startClientX, startClientY = datas.startClientY;\r\n        if (!isRotate) {\r\n            return;\r\n        }\r\n        resolveTransformEvent(moveable, e, \"rotate\");\r\n        var targetDirection = getTransformDirection(e);\r\n        var direction = beforeDirection * targetDirection;\r\n        var parentMoveable = moveable.props.parentMoveable;\r\n        var beforeDelta = 0;\r\n        var beforeDist;\r\n        var beforeRotation;\r\n        var delta = 0;\r\n        var dist;\r\n        var rotation;\r\n        var absoluteDelta = 0;\r\n        var absoluteDist;\r\n        var absoluteRotation;\r\n        var startRotation = 180 / Math.PI * startValue;\r\n        var absoluteStartRotation = absoluteInfo.startValue;\r\n        var isSnap = false;\r\n        var nextClientX = startClientX + clientDistX;\r\n        var nextClientY = startClientY + clientDistY;\r\n        if (!parentFlag && \"parentDist\" in e) {\r\n            var parentDist = e.parentDist;\r\n            beforeDist = parentDist;\r\n            dist = parentDist;\r\n            absoluteDist = parentDist;\r\n        }\r\n        else if (isPinch || parentFlag) {\r\n            beforeDist = getAbsoluteDist(parentRotate, beforeDirection, beforeInfo);\r\n            dist = getAbsoluteDist(parentRotate, direction, afterInfo);\r\n            absoluteDist = getAbsoluteDist(parentRotate, direction, absoluteInfo);\r\n        }\r\n        else {\r\n            beforeDist = getAbsoluteDistByClient(nextClientX, nextClientY, beforeDirection, beforeInfo);\r\n            dist = getAbsoluteDistByClient(nextClientX, nextClientY, direction, afterInfo);\r\n            absoluteDist = getAbsoluteDistByClient(nextClientX, nextClientY, direction, absoluteInfo);\r\n            isSnap = true;\r\n        }\r\n        beforeRotation = startRotation + beforeDist;\r\n        rotation = startRotation + dist;\r\n        absoluteRotation = absoluteStartRotation + absoluteDist;\r\n        triggerEvent(moveable, \"onBeforeRotate\", fillParams(moveable, e, {\r\n            beforeRotation: beforeRotation,\r\n            rotation: rotation,\r\n            absoluteRotation: absoluteRotation,\r\n            setRotation: function (nextRotation) {\r\n                dist = nextRotation - startRotation;\r\n                beforeDist = dist;\r\n                absoluteDist = dist;\r\n            },\r\n        }, true));\r\n        _a = __read(getRotateInfo(moveable, rect, beforeInfo, beforeDist, startRotation, isSnap), 3), beforeDelta = _a[0], beforeDist = _a[1], beforeRotation = _a[2];\r\n        _b = __read(getRotateInfo(moveable, rect, afterInfo, dist, startRotation, isSnap), 3), delta = _b[0], dist = _b[1], rotation = _b[2];\r\n        _c = __read(getRotateInfo(moveable, rect, absoluteInfo, absoluteDist, absoluteStartRotation, isSnap), 3), absoluteDelta = _c[0], absoluteDist = _c[1], absoluteRotation = _c[2];\r\n        if (!absoluteDelta && !delta && !beforeDelta && !parentMoveable && !resolveMatrix) {\r\n            return;\r\n        }\r\n        var nextTransform = convertTransformFormat(datas, \"rotate(\".concat(rotation, \"deg)\"), \"rotate(\".concat(dist, \"deg)\"));\r\n        if (resolveMatrix) {\r\n            datas.fixedPosition = getTranslateFixedPosition(moveable, datas.targetAllTransform, datas.fixedDirection, datas.fixedOffset, datas);\r\n        }\r\n        var inverseDist = getRotateDist(moveable, dist, datas);\r\n        var inverseDelta = minus(plus(groupDelta || [0, 0], inverseDist), datas.prevInverseDist || [0, 0]);\r\n        datas.prevInverseDist = inverseDist;\r\n        datas.requestValue = null;\r\n        var dragEvent = fillTransformEvent(moveable, nextTransform, inverseDelta, isPinch, e);\r\n        var transformEvent = dragEvent;\r\n        var parentDistance = getDist$1([nextClientX, nextClientY], absoluteInfo.startAbsoluteOrigin) - absoluteInfo.startDist;\r\n        var resize = undefined;\r\n        if (datas.resolveAble === \"resizable\") {\r\n            var resizeEvent = Resizable.dragControl(moveable, __assign(__assign({}, setCustomDrag(e, moveable.state, [e.deltaX, e.deltaY], !!isPinch, false, \"resizable\")), { resolveMatrix: true, parentDistance: parentDistance }));\r\n            if (resizeEvent) {\r\n                resize = resizeEvent;\r\n                transformEvent = fillAfterTransform(transformEvent, resizeEvent, e);\r\n            }\r\n        }\r\n        var params = fillParams(moveable, e, __assign(__assign({ delta: delta, dist: dist, rotate: rotation, rotation: rotation, beforeDist: beforeDist, beforeDelta: beforeDelta, beforeRotate: beforeRotation, beforeRotation: beforeRotation, absoluteDist: absoluteDist, absoluteDelta: absoluteDelta, absoluteRotate: absoluteRotation, absoluteRotation: absoluteRotation, isPinch: !!isPinch, resize: resize }, dragEvent), transformEvent));\r\n        triggerEvent(moveable, \"onRotate\", params);\r\n        return params;\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isRotate) {\r\n            return;\r\n        }\r\n        datas.isRotate = false;\r\n        var params = fillEndParams(moveable, e, {});\r\n        triggerEvent(moveable, \"onRotateEnd\", params);\r\n        return params;\r\n    },\r\n    dragGroupControlCondition: dragControlCondition,\r\n    dragGroupControlStart: function (moveable, e) {\r\n        var datas = e.datas;\r\n        var _a = moveable.state, parentLeft = _a.left, parentTop = _a.top, parentBeforeOrigin = _a.beforeOrigin;\r\n        var params = this.dragControlStart(moveable, e);\r\n        if (!params) {\r\n            return false;\r\n        }\r\n        params.set(datas.beforeDirection * moveable.rotation);\r\n        var events = triggerChildAbles(moveable, this, \"dragControlStart\", e, function (child, ev) {\r\n            var _a = child.state, left = _a.left, top = _a.top, beforeOrigin = _a.beforeOrigin;\r\n            var childClient = plus(minus([left, top], [parentLeft, parentTop]), minus(beforeOrigin, parentBeforeOrigin));\r\n            ev.datas.startGroupClient = childClient;\r\n            ev.datas.groupClient = childClient;\r\n            return __assign(__assign({}, ev), { parentRotate: 0 });\r\n        });\r\n        var nextParams = __assign(__assign({}, params), { targets: moveable.props.targets, events: events });\r\n        var result = triggerEvent(moveable, \"onRotateGroupStart\", nextParams);\r\n        datas.isRotate = result !== false;\r\n        return datas.isRotate ? params : false;\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isRotate) {\r\n            return;\r\n        }\r\n        catchEvent(moveable, \"onBeforeRotate\", function (parentEvent) {\r\n            triggerEvent(moveable, \"onBeforeRotateGroup\", fillParams(moveable, e, __assign(__assign({}, parentEvent), { targets: moveable.props.targets }), true));\r\n        });\r\n        var params = this.dragControl(moveable, e);\r\n        if (!params) {\r\n            return;\r\n        }\r\n        var direction = datas.beforeDirection;\r\n        var parentRotate = params.beforeDist;\r\n        var rad = parentRotate / 180 * Math.PI;\r\n        var events = triggerChildAbles(moveable, this, \"dragControl\", e, function (_, ev) {\r\n            var startGroupClient = ev.datas.startGroupClient;\r\n            var _a = __read(ev.datas.groupClient, 2), prevClientX = _a[0], prevClientY = _a[1];\r\n            var _b = __read(rotate(startGroupClient, rad * direction), 2), clientX = _b[0], clientY = _b[1];\r\n            var delta = [clientX - prevClientX, clientY - prevClientY];\r\n            ev.datas.groupClient = [clientX, clientY];\r\n            return __assign(__assign({}, ev), { parentRotate: parentRotate, groupDelta: delta });\r\n        });\r\n        moveable.rotation = direction * params.beforeRotation;\r\n        var nextParams = __assign({ targets: moveable.props.targets, events: events, set: function (rotation) {\r\n                moveable.rotation = rotation;\r\n            }, setGroupRotation: function (rotation) {\r\n                moveable.rotation = rotation;\r\n            } }, params);\r\n        triggerEvent(moveable, \"onRotateGroup\", nextParams);\r\n        return nextParams;\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        var isDrag = e.isDrag, datas = e.datas;\r\n        if (!datas.isRotate) {\r\n            return;\r\n        }\r\n        this.dragControlEnd(moveable, e);\r\n        var events = triggerChildAbles(moveable, this, \"dragControlEnd\", e);\r\n        var nextParams = fillEndParams(moveable, e, {\r\n            targets: moveable.props.targets,\r\n            events: events,\r\n        });\r\n        triggerEvent(moveable, \"onRotateGroupEnd\", nextParams);\r\n        return isDrag;\r\n    },\r\n    /**\r\n     * @method Moveable.Rotatable#request\r\n     * @param {object} [e] - the Resizable's request parameter\r\n     * @param {number} [e.deltaRotate=0] -  delta number of rotation\r\n     * @param {number} [e.rotate=0] - absolute number of moveable's rotation\r\n     * @return {Moveable.Requester} Moveable Requester\r\n     * @example\r\n\n     * // Instantly Request (requestStart - request - requestEnd)\r\n     * moveable.request(\"rotatable\", { deltaRotate: 10 }, true);\r\n     *\r\n     * * moveable.request(\"rotatable\", { rotate: 10 }, true);\r\n     *\r\n     * // requestStart\r\n     * const requester = moveable.request(\"rotatable\");\r\n     *\r\n     * // request\r\n     * requester.request({ deltaRotate: 10 });\r\n     * requester.request({ deltaRotate: 10 });\r\n     * requester.request({ deltaRotate: 10 });\r\n     *\r\n     * requester.request({ rotate: 10 });\r\n     * requester.request({ rotate: 20 });\r\n     * requester.request({ rotate: 30 });\r\n     *\r\n     * // requestEnd\r\n     * requester.requestEnd();\r\n     */\r\n    request: function (moveable) {\r\n        var datas = {};\r\n        var distRotate = 0;\r\n        var startRotation = moveable.getRotation();\r\n        return {\r\n            isControl: true,\r\n            requestStart: function () {\r\n                return { datas: datas };\r\n            },\r\n            request: function (e) {\r\n                if (\"deltaRotate\" in e) {\r\n                    distRotate += e.deltaRotate;\r\n                }\r\n                else if (\"rotate\" in e) {\r\n                    distRotate = e.rotate - startRotation;\r\n                }\r\n                return { datas: datas, parentDist: distRotate };\r\n            },\r\n            requestEnd: function () {\r\n                return { datas: datas, isDrag: true };\r\n            },\r\n        };\r\n    },\r\n};\r\n/**\r\n * Whether or not target can be rotated. (default: false)\r\n * @name Moveable.Rotatable#rotatable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.rotatable = true;\r\n */\r\n/**\r\n * You can specify the position of the rotation. (default: \"top\")\r\n * @name Moveable.Rotatable#rotationPosition\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   rotationPosition: \"top\",\r\n * });\r\n *\r\n * moveable.rotationPosition = \"bottom\"\r\n */\r\n/**\r\n * throttle of angle(degree) when rotate.\r\n * @name Moveable.Rotatable#throttleRotate\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.throttleRotate = 1;\r\n */\r\n/**\r\n * When the rotate starts, the rotateStart event is called.\r\n * @memberof Moveable.Rotatable\r\n * @event rotateStart\r\n * @param {Moveable.Rotatable.OnRotateStart} - Parameters for the rotateStart event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { rotatable: true });\r\n * moveable.on(\"rotateStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n* When rotating, the rotate event is called.\r\n* @memberof Moveable.Rotatable\r\n* @event rotate\r\n* @param {Moveable.Rotatable.OnRotate} - Parameters for the rotate event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, { rotatable: true });\r\n* moveable.on(\"rotate\", ({ target, transform, dist }) => {\r\n*     target.style.transform = transform;\r\n* });\r\n*/\r\n/**\r\n * When the rotate finishes, the rotateEnd event is called.\r\n * @memberof Moveable.Rotatable\r\n * @event rotateEnd\r\n * @param {Moveable.Rotatable.OnRotateEnd} - Parameters for the rotateEnd event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { rotatable: true });\r\n * moveable.on(\"rotateEnd\", ({ target, isDrag }) => {\r\n *     console.log(target, isDrag);\r\n * });\r\n */\r\n/**\r\n * When the group rotate starts, the `rotateGroupStart` event is called.\r\n * @memberof Moveable.Rotatable\r\n * @event rotateGroupStart\r\n * @param {Moveable.Rotatable.OnRotateGroupStart} - Parameters for the `rotateGroupStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     rotatable: true\r\n * });\r\n * moveable.on(\"rotateGroupStart\", ({ targets }) => {\r\n *     console.log(\"onRotateGroupStart\", targets);\r\n * });\r\n */\r\n/**\r\n* When the group rotate, the `rotateGroup` event is called.\r\n* @memberof Moveable.Rotatable\r\n* @event rotateGroup\r\n* @param {Moveable.Rotatable.OnRotateGroup} - Parameters for the `rotateGroup` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     rotatable: true\r\n* });\r\n* moveable.on(\"rotateGroup\", ({ targets, events }) => {\r\n*     console.log(\"onRotateGroup\", targets);\r\n*     events.forEach(ev => {\r\n*         const target = ev.target;\r\n*         // ev.drag is a drag event that occurs when the group rotate.\r\n*         const left = ev.drag.beforeDist[0];\r\n*         const top = ev.drag.beforeDist[1];\r\n*         const deg = ev.beforeDist;\r\n*     });\r\n* });\r\n*/\r\n/**\r\n * When the group rotate finishes, the `rotateGroupEnd` event is called.\r\n * @memberof Moveable.Rotatable\r\n * @event rotateGroupEnd\r\n * @param {Moveable.Rotatable.OnRotateGroupEnd} - Parameters for the `rotateGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     rotatable: true\r\n * });\r\n * moveable.on(\"rotateGroupEnd\", ({ targets, isDrag }) => {\r\n *     console.log(\"onRotateGroupEnd\", targets, isDrag);\r\n * });\r\n */\n\nfunction renderGuideline(info, React) {\r\n    var _a;\r\n    var direction = info.direction, classNames = info.classNames, size = info.size, pos = info.pos, zoom = info.zoom, key = info.key;\r\n    var isHorizontal = direction === \"horizontal\";\r\n    var scaleType = isHorizontal ? \"Y\" : \"X\";\r\n    // const scaleType2 = isHorizontal ? \"Y\" : \"X\";\r\n    return React.createElement(\"div\", {\r\n        key: key,\r\n        className: classNames.join(\" \"),\r\n        style: (_a = {},\r\n            _a[isHorizontal ? \"width\" : \"height\"] = \"\".concat(size),\r\n            _a.transform = \"translate(\".concat(pos[0], \", \").concat(pos[1], \") translate\").concat(scaleType, \"(-50%) scale\").concat(scaleType, \"(\").concat(zoom, \")\"),\r\n            _a),\r\n    });\r\n}\r\nfunction renderInnerGuideline(info, React) {\r\n    return renderGuideline(__assign(__assign({}, info), { classNames: __spreadArray([\r\n            prefix(\"line\", \"guideline\", info.direction)\r\n        ], __read(info.classNames), false).filter(function (className) { return className; }), size: info.size || \"\".concat(info.sizeValue, \"px\"), pos: info.pos || info.posValue.map(function (v) { return \"\".concat(throttle(v, 0.1), \"px\"); }) }), React);\r\n}\r\nfunction renderSnapPoses(moveable, direction, snapPoses, minPos, targetPos, size, index, React) {\r\n    var zoom = moveable.props.zoom;\r\n    return snapPoses.map(function (_a, i) {\r\n        var type = _a.type, pos = _a.pos;\r\n        var renderPos = [0, 0];\r\n        renderPos[index] = minPos;\r\n        renderPos[index ? 0 : 1] = -targetPos + pos;\r\n        return renderInnerGuideline({\r\n            key: \"\".concat(direction, \"TargetGuideline\").concat(i),\r\n            classNames: [prefix(\"target\", \"bold\", type)],\r\n            posValue: renderPos,\r\n            sizeValue: size,\r\n            zoom: zoom,\r\n            direction: direction,\r\n        }, React);\r\n    });\r\n}\r\nfunction renderGuidelines(moveable, type, guidelines, targetPos, targetRect, React) {\r\n    var _a = moveable.props, zoom = _a.zoom, isDisplayInnerSnapDigit = _a.isDisplayInnerSnapDigit;\r\n    var mainNames = type === \"horizontal\" ? VERTICAL_NAMES_MAP : HORIZONTAL_NAMES_MAP;\r\n    var targetStart = targetRect[mainNames.start];\r\n    var targetEnd = targetRect[mainNames.end];\r\n    return guidelines.filter(function (_a) {\r\n        var hide = _a.hide, elementRect = _a.elementRect;\r\n        if (hide) {\r\n            return false;\r\n        }\r\n        if (isDisplayInnerSnapDigit && elementRect) {\r\n            // inner\r\n            var rect = elementRect.rect;\r\n            if (rect[mainNames.start] <= targetStart && targetEnd <= rect[mainNames.end]) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }).map(function (guideline, i) {\r\n        var pos = guideline.pos, size = guideline.size, element = guideline.element, className = guideline.className;\r\n        var renderPos = [\r\n            -targetPos[0] + pos[0],\r\n            -targetPos[1] + pos[1],\r\n        ];\r\n        return renderInnerGuideline({\r\n            key: \"\".concat(type, \"-default-guideline-\").concat(i),\r\n            classNames: element ? [prefix(\"bold\"), className] : [prefix(\"normal\"), className],\r\n            direction: type,\r\n            posValue: renderPos,\r\n            sizeValue: size,\r\n            zoom: zoom,\r\n        }, React);\r\n    });\r\n}\r\nfunction renderDigitLine(moveable, type, lineType, index, gap, renderPos, className, React) {\r\n    var _a;\r\n    var _b = moveable.props, _c = _b.snapDigit, snapDigit = _c === void 0 ? 0 : _c, _d = _b.isDisplaySnapDigit, isDisplaySnapDigit = _d === void 0 ? true : _d, _e = _b.snapDistFormat, snapDistFormat = _e === void 0 ? function (v, type) {\r\n        // Type can be used render different values.\r\n        if (type === 'vertical') {\r\n            return v;\r\n        }\r\n        return v;\r\n    } : _e, zoom = _b.zoom;\r\n    var scaleType = type === \"horizontal\" ? \"X\" : \"Y\";\r\n    var sizeName = type === \"vertical\" ? \"height\" : \"width\";\r\n    var absGap = Math.abs(gap);\r\n    var snapSize = isDisplaySnapDigit\r\n        ? parseFloat(absGap.toFixed(snapDigit))\r\n        : 0;\r\n    return React.createElement(\"div\", { key: \"\".concat(type, \"-\").concat(lineType, \"-guideline-\").concat(index), className: prefix(\"guideline-group\", type), style: (_a = {\r\n                left: \"\".concat(renderPos[0], \"px\"),\r\n                top: \"\".concat(renderPos[1], \"px\")\r\n            },\r\n            _a[sizeName] = \"\".concat(absGap, \"px\"),\r\n            _a) },\r\n        renderInnerGuideline({\r\n            direction: type,\r\n            classNames: [prefix(lineType), className],\r\n            size: \"100%\",\r\n            posValue: [0, 0],\r\n            sizeValue: absGap,\r\n            zoom: zoom,\r\n        }, React),\r\n        React.createElement(\"div\", { className: prefix(\"size-value\", \"gap\"), style: {\r\n                transform: \"translate\".concat(scaleType, \"(-50%) scale(\").concat(zoom, \")\"),\r\n            } }, snapSize > 0 ? snapDistFormat(snapSize, type) : \"\"));\r\n}\r\nfunction groupByElementGuidelines(type, guidelines, targetRect, isDisplayInnerSnapDigit) {\r\n    var index = type === \"vertical\" ? 0 : 1;\r\n    var otherIndex = type === \"vertical\" ? 1 : 0;\r\n    var names = index ? VERTICAL_NAMES_MAP : HORIZONTAL_NAMES_MAP;\r\n    var targetStart = targetRect[names.start];\r\n    var targetEnd = targetRect[names.end];\r\n    return groupBy(guidelines, function (guideline) {\r\n        return guideline.pos[index];\r\n    }).map(function (nextGuidelines) {\r\n        var start = [];\r\n        var end = [];\r\n        var inner = [];\r\n        nextGuidelines.forEach(function (guideline) {\r\n            var _a, _b;\r\n            var element = guideline.element;\r\n            var rect = guideline.elementRect.rect;\r\n            if (rect[names.end] < targetStart) {\r\n                start.push(guideline);\r\n            }\r\n            else if (targetEnd < rect[names.start]) {\r\n                end.push(guideline);\r\n            }\r\n            else if (rect[names.start] <= targetStart && targetEnd <= rect[names.end] && isDisplayInnerSnapDigit) {\r\n                var pos = guideline.pos;\r\n                var elementRect1 = { element: element, rect: __assign(__assign({}, rect), (_a = {}, _a[names.end] = rect[names.start], _a)) };\r\n                var elementRect2 = { element: element, rect: __assign(__assign({}, rect), (_b = {}, _b[names.start] = rect[names.end], _b)) };\r\n                var nextPos1 = [0, 0];\r\n                var nextPos2 = [0, 0];\r\n                nextPos1[index] = pos[index];\r\n                nextPos1[otherIndex] = pos[otherIndex];\r\n                nextPos2[index] = pos[index];\r\n                nextPos2[otherIndex] = pos[otherIndex] + guideline.size;\r\n                start.push({\r\n                    type: type,\r\n                    pos: nextPos1,\r\n                    size: 0,\r\n                    elementRect: elementRect1,\r\n                    direction: \"\",\r\n                    elementDirection: \"end\",\r\n                });\r\n                end.push({\r\n                    type: type,\r\n                    pos: nextPos2,\r\n                    size: 0,\r\n                    elementRect: elementRect2,\r\n                    direction: \"\",\r\n                    elementDirection: \"start\",\r\n                });\r\n                // inner.push(guideline);\r\n            }\r\n        });\r\n        start.sort(function (a, b) {\r\n            return b.pos[otherIndex] - a.pos[otherIndex];\r\n        });\r\n        end.sort(function (a, b) {\r\n            return a.pos[otherIndex] - b.pos[otherIndex];\r\n        });\r\n        return {\r\n            total: nextGuidelines,\r\n            start: start,\r\n            end: end,\r\n            inner: inner,\r\n        };\r\n    });\r\n}\r\nfunction renderDashedGuidelines(moveable, guidelines, targetPos, targetRect, React) {\r\n    var isDisplayInnerSnapDigit = moveable.props.isDisplayInnerSnapDigit;\r\n    var rendered = [];\r\n    [\"vertical\", \"horizontal\"].forEach(function (type) {\r\n        var nextGuidelines = guidelines.filter(function (guideline) { return guideline.type === type; });\r\n        var index = type === \"vertical\" ? 1 : 0;\r\n        var otherIndex = index ? 0 : 1;\r\n        var groups = groupByElementGuidelines(type, nextGuidelines, targetRect, isDisplayInnerSnapDigit);\r\n        var mainNames = index ? HORIZONTAL_NAMES_MAP : VERTICAL_NAMES_MAP;\r\n        var sideNames = index ? VERTICAL_NAMES_MAP : HORIZONTAL_NAMES_MAP;\r\n        var targetStart = targetRect[mainNames.start];\r\n        var targetEnd = targetRect[mainNames.end];\r\n        groups.forEach(function (_a) {\r\n            var total = _a.total, start = _a.start, end = _a.end, inner = _a.inner;\r\n            var sidePos = targetPos[otherIndex] + total[0].pos[otherIndex] - targetRect[sideNames.start];\r\n            var prevRect = targetRect;\r\n            start.forEach(function (guideline) {\r\n                var nextRect = guideline.elementRect.rect;\r\n                var size = prevRect[mainNames.start] - nextRect[mainNames.end];\r\n                if (size > 0) {\r\n                    var renderPos = [0, 0];\r\n                    renderPos[index] = targetPos[index] + prevRect[mainNames.start] - targetStart - size;\r\n                    renderPos[otherIndex] = sidePos;\r\n                    rendered.push(renderDigitLine(moveable, type, \"dashed\", rendered.length, size, renderPos, guideline.className, React));\r\n                }\r\n                prevRect = nextRect;\r\n            });\r\n            prevRect = targetRect;\r\n            end.forEach(function (guideline) {\r\n                var nextRect = guideline.elementRect.rect;\r\n                var size = nextRect[mainNames.start] - prevRect[mainNames.end];\r\n                if (size > 0) {\r\n                    var renderPos = [0, 0];\r\n                    renderPos[index] = targetPos[index] + prevRect[mainNames.end] - targetStart;\r\n                    renderPos[otherIndex] = sidePos;\r\n                    rendered.push(renderDigitLine(moveable, type, \"dashed\", rendered.length, size, renderPos, guideline.className, React));\r\n                }\r\n                prevRect = nextRect;\r\n            });\r\n            inner.forEach(function (guideline) {\r\n                var nextRect = guideline.elementRect.rect;\r\n                var size1 = targetStart - nextRect[mainNames.start];\r\n                var size2 = nextRect[mainNames.end] - targetEnd;\r\n                var renderPos1 = [0, 0];\r\n                var renderPos2 = [0, 0];\r\n                renderPos1[index] = targetPos[index] - size1;\r\n                renderPos1[otherIndex] = sidePos;\r\n                renderPos2[index] = targetPos[index] + targetEnd - targetStart;\r\n                renderPos2[otherIndex] = sidePos;\r\n                rendered.push(renderDigitLine(moveable, type, \"dashed\", rendered.length, size1, renderPos1, guideline.className, React));\r\n                rendered.push(renderDigitLine(moveable, type, \"dashed\", rendered.length, size2, renderPos2, guideline.className, React));\r\n            });\r\n        });\r\n    });\r\n    return rendered;\r\n}\r\nfunction renderGapGuidelines(moveable, guidelines, targetPos, targetRect, React) {\r\n    var rendered = [];\r\n    [\"horizontal\", \"vertical\"].forEach(function (type) {\r\n        var nextGuidelines = guidelines.filter(function (guideline) { return guideline.type === type; }).slice(0, 1);\r\n        var index = type === \"vertical\" ? 0 : 1;\r\n        var otherIndex = index ? 0 : 1;\r\n        var mainNames = index ? HORIZONTAL_NAMES_MAP : VERTICAL_NAMES_MAP;\r\n        var sideNames = index ? VERTICAL_NAMES_MAP : HORIZONTAL_NAMES_MAP;\r\n        var targetStart = targetRect[mainNames.start];\r\n        var targetEnd = targetRect[mainNames.end];\r\n        var targetSideStart = targetRect[sideNames.start];\r\n        var targetSideEnd = targetRect[sideNames.end];\r\n        nextGuidelines.forEach(function (_a) {\r\n            var gap = _a.gap, gapRects = _a.gapRects;\r\n            var sideStartPos = Math.max.apply(Math, __spreadArray([targetSideStart], __read(gapRects.map(function (_a) {\r\n                var rect = _a.rect;\r\n                return rect[sideNames.start];\r\n            })), false));\r\n            var sideEndPos = Math.min.apply(Math, __spreadArray([targetSideEnd], __read(gapRects.map(function (_a) {\r\n                var rect = _a.rect;\r\n                return rect[sideNames.end];\r\n            })), false));\r\n            var sideCenterPos = (sideStartPos + sideEndPos) / 2;\r\n            if (sideStartPos === sideEndPos || sideCenterPos === (targetSideStart + targetSideEnd) / 2) {\r\n                return;\r\n            }\r\n            gapRects.forEach(function (_a) {\r\n                var rect = _a.rect, className = _a.className;\r\n                var renderPos = [targetPos[0], targetPos[1]];\r\n                if (rect[mainNames.end] < targetStart) {\r\n                    renderPos[index] += rect[mainNames.end] - targetStart;\r\n                }\r\n                else if (targetEnd < rect[mainNames.start]) {\r\n                    renderPos[index] += rect[mainNames.start] - targetStart - gap;\r\n                }\r\n                else {\r\n                    return;\r\n                }\r\n                renderPos[otherIndex] += sideCenterPos - targetSideStart;\r\n                rendered.push(renderDigitLine(moveable, index ? \"vertical\" : \"horizontal\", \"gap\", rendered.length, gap, renderPos, className, React));\r\n            });\r\n        });\r\n    });\r\n    return rendered;\r\n}\n\nfunction getTotalGuidelines(moveable) {\r\n    var state = moveable.state;\r\n    var containerClientRect = state.containerClientRect, hasFixed = state.hasFixed;\r\n    var overflow = containerClientRect.overflow, containerHeight = containerClientRect.scrollHeight, containerWidth = containerClientRect.scrollWidth, containerClientHeight = containerClientRect.clientHeight, containerClientWidth = containerClientRect.clientWidth, clientLeft = containerClientRect.clientLeft, clientTop = containerClientRect.clientTop;\r\n    var _a = moveable.props, _b = _a.snapGap, snapGap = _b === void 0 ? true : _b, verticalGuidelines = _a.verticalGuidelines, horizontalGuidelines = _a.horizontalGuidelines, _c = _a.snapThreshold, snapThreshold = _c === void 0 ? 5 : _c, _d = _a.snapGridWidth, snapGridWidth = _d === void 0 ? 0 : _d, _e = _a.snapGridHeight, snapGridHeight = _e === void 0 ? 0 : _e, _f = _a.maxSnapElementGuidelineDistance, maxSnapElementGuidelineDistance = _f === void 0 ? Infinity : _f, isDisplayGridGuidelines = _a.isDisplayGridGuidelines;\r\n    var _g = getRect(getAbsolutePosesByState(moveable.state)), top = _g.top, left = _g.left, bottom = _g.bottom, right = _g.right;\r\n    var targetRect = { top: top, left: left, bottom: bottom, right: right, center: (left + right) / 2, middle: (top + bottom) / 2 };\r\n    var elementGuidelines = getElementGuidelines(moveable);\r\n    var totalGuidelines = __spreadArray([], __read(elementGuidelines), false);\r\n    if (snapGap) {\r\n        totalGuidelines.push.apply(totalGuidelines, __spreadArray([], __read(getGapGuidelines(moveable, targetRect, snapThreshold)), false));\r\n    }\r\n    var snapOffset = __assign({}, (state.snapOffset || {\r\n        left: 0,\r\n        top: 0,\r\n        bottom: 0,\r\n        right: 0,\r\n    }));\r\n    totalGuidelines.push.apply(totalGuidelines, __spreadArray([], __read(getGridGuidelines(snapGridWidth, snapGridHeight, overflow ? containerWidth : containerClientWidth, overflow ? containerHeight : containerClientHeight, clientLeft, clientTop, snapOffset, isDisplayGridGuidelines)), false));\r\n    if (hasFixed) {\r\n        var left_1 = containerClientRect.left, top_1 = containerClientRect.top;\r\n        snapOffset.left += left_1;\r\n        snapOffset.top += top_1;\r\n        snapOffset.right += left_1;\r\n        snapOffset.bottom += top_1;\r\n    }\r\n    totalGuidelines.push.apply(totalGuidelines, __spreadArray([], __read(getDefaultGuidelines(horizontalGuidelines || false, verticalGuidelines || false, overflow ? containerWidth : containerClientWidth, overflow ? containerHeight : containerClientHeight, clientLeft, clientTop, snapOffset)), false));\r\n    totalGuidelines = totalGuidelines.filter(function (_a) {\r\n        var element = _a.element, elementRect = _a.elementRect, type = _a.type;\r\n        if (!element || !elementRect) {\r\n            return true;\r\n        }\r\n        var rect = elementRect.rect;\r\n        return checkBetweenRects(targetRect, rect, type, maxSnapElementGuidelineDistance);\r\n    });\r\n    return totalGuidelines;\r\n}\r\nfunction getGapGuidelines(moveable, targetRect, snapThreshold) {\r\n    var _a = moveable.props, _b = _a.maxSnapElementGuidelineDistance, maxSnapElementGuidelineDistance = _b === void 0 ? Infinity : _b, _c = _a.maxSnapElementGapDistance, maxSnapElementGapDistance = _c === void 0 ? Infinity : _c;\r\n    var elementRects = moveable.state.elementRects;\r\n    var gapGuidelines = [];\r\n    [\r\n        [\"vertical\", VERTICAL_NAMES_MAP, HORIZONTAL_NAMES_MAP],\r\n        [\"horizontal\", HORIZONTAL_NAMES_MAP, VERTICAL_NAMES_MAP],\r\n    ].forEach(function (_a) {\r\n        var _b = __read(_a, 3), type = _b[0], mainNames = _b[1], sideNames = _b[2];\r\n        var targetStart = targetRect[mainNames.start];\r\n        var targetEnd = targetRect[mainNames.end];\r\n        var targetCenter = targetRect[mainNames.center];\r\n        var targetStart2 = targetRect[sideNames.start];\r\n        var targetEnd2 = targetRect[sideNames.end];\r\n        // element : moveable\r\n        function getDist(elementRect) {\r\n            var rect = elementRect.rect;\r\n            if (rect[mainNames.end] < targetStart + snapThreshold) {\r\n                return targetStart - rect[mainNames.end];\r\n            }\r\n            else if (targetEnd - snapThreshold < rect[mainNames.start]) {\r\n                return rect[mainNames.start] - targetEnd;\r\n            }\r\n            else {\r\n                return -1;\r\n            }\r\n        }\r\n        var nextElementRects = elementRects.filter(function (elementRect) {\r\n            var rect = elementRect.rect;\r\n            if (rect[sideNames.start] > targetEnd2 || rect[sideNames.end] < targetStart2) {\r\n                return false;\r\n            }\r\n            return getDist(elementRect) > 0;\r\n        }).sort(function (a, b) {\r\n            return getDist(a) - getDist(b);\r\n        });\r\n        var groups = [];\r\n        nextElementRects.forEach(function (snapRect1) {\r\n            nextElementRects.forEach(function (snapRect2) {\r\n                if (snapRect1 === snapRect2) {\r\n                    return;\r\n                }\r\n                var rect1 = snapRect1.rect;\r\n                var rect2 = snapRect2.rect;\r\n                var rect1Start = rect1[sideNames.start];\r\n                var rect1End = rect1[sideNames.end];\r\n                var rect2Start = rect2[sideNames.start];\r\n                var rect2End = rect2[sideNames.end];\r\n                if (rect1Start > rect2End || rect2Start > rect1End) {\r\n                    return;\r\n                }\r\n                groups.push([snapRect1, snapRect2]);\r\n            });\r\n        });\r\n        groups.forEach(function (_a) {\r\n            var _b = __read(_a, 2), snapRect1 = _b[0], snapRect2 = _b[1];\r\n            var rect1 = snapRect1.rect;\r\n            var rect2 = snapRect2.rect;\r\n            var rect1Start = rect1[mainNames.start];\r\n            var rect1End = rect1[mainNames.end];\r\n            var rect2Start = rect2[mainNames.start];\r\n            var rect2End = rect2[mainNames.end];\r\n            var gap = 0;\r\n            var pos = 0;\r\n            var isStart = false;\r\n            var isCenter = false;\r\n            var isEnd = false;\r\n            if (rect1End <= targetStart && targetEnd <= rect2Start) {\r\n                // (l)element1(r) : (l)target(r) : (l)element2(r)\r\n                isCenter = true;\r\n                gap = ((rect2Start - rect1End) - (targetEnd - targetStart)) / 2;\r\n                pos = rect1End + gap + (targetEnd - targetStart) / 2;\r\n                if (abs(pos - targetCenter) > snapThreshold) {\r\n                    return;\r\n                }\r\n            }\r\n            else if (rect1End < rect2Start && rect2End < targetStart + snapThreshold) {\r\n                // (l)element1(r) : (l)element2(r) : (l)target\r\n                isStart = true;\r\n                gap = rect2Start - rect1End;\r\n                pos = rect2End + gap;\r\n                if (abs(pos - targetStart) > snapThreshold) {\r\n                    return;\r\n                }\r\n            }\r\n            else if (rect1End < rect2Start && targetEnd - snapThreshold < rect1Start) {\r\n                // target(r) : (l)element1(r) : (l)element2(r)\r\n                isEnd = true;\r\n                gap = rect2Start - rect1End;\r\n                pos = rect1Start - gap;\r\n                if (abs(pos - targetEnd) > snapThreshold) {\r\n                    return;\r\n                }\r\n            }\r\n            else {\r\n                return;\r\n            }\r\n            if (!gap) {\r\n                return;\r\n            }\r\n            if (!checkBetweenRects(targetRect, rect2, type, maxSnapElementGuidelineDistance)) {\r\n                return;\r\n            }\r\n            if (gap > maxSnapElementGapDistance) {\r\n                return;\r\n            }\r\n            gapGuidelines.push({\r\n                type: type,\r\n                pos: type === \"vertical\" ? [pos, 0] : [0, pos],\r\n                element: snapRect2.element,\r\n                size: 0,\r\n                className: snapRect2.className,\r\n                isStart: isStart,\r\n                isCenter: isCenter,\r\n                isEnd: isEnd,\r\n                gap: gap,\r\n                hide: true,\r\n                gapRects: [snapRect1, snapRect2],\r\n                direction: \"\",\r\n                elementDirection: \"\",\r\n            });\r\n        });\r\n    });\r\n    return gapGuidelines;\r\n}\r\nfunction getGridGuidelines(snapGridWidth, snapGridHeight, containerWidth, containerHeight, clientLeft, clientTop, snapOffset, isDisplayGridGuidelines) {\r\n    if (clientLeft === void 0) { clientLeft = 0; }\r\n    if (clientTop === void 0) { clientTop = 0; }\r\n    var guidelines = [];\r\n    var snapOffsetLeft = snapOffset.left, snapOffsetTop = snapOffset.top;\r\n    if (snapGridHeight) {\r\n        for (var pos = 0; pos <= containerHeight; pos += snapGridHeight) {\r\n            guidelines.push({\r\n                type: \"horizontal\",\r\n                pos: [\r\n                    snapOffsetLeft,\r\n                    throttle(pos - clientTop + snapOffsetTop, 0.1),\r\n                ],\r\n                className: prefix(\"grid-guideline\"),\r\n                size: containerWidth,\r\n                hide: !isDisplayGridGuidelines,\r\n                direction: \"\",\r\n            });\r\n        }\r\n    }\r\n    if (snapGridWidth) {\r\n        for (var pos = 0; pos <= containerWidth; pos += snapGridWidth) {\r\n            guidelines.push({\r\n                type: \"vertical\",\r\n                pos: [\r\n                    throttle(pos - clientLeft + snapOffsetLeft, 0.1),\r\n                    snapOffsetTop,\r\n                ],\r\n                className: prefix(\"grid-guideline\"),\r\n                size: containerHeight,\r\n                hide: !isDisplayGridGuidelines,\r\n                direction: \"\",\r\n            });\r\n        }\r\n    }\r\n    return guidelines;\r\n}\r\nfunction checkBetweenRects(rect1, rect2, type, distance) {\r\n    if (type === \"horizontal\") {\r\n        return abs(rect1.right - rect2.left) <= distance\r\n            || abs(rect1.left - rect2.right) <= distance\r\n            || rect1.left <= rect2.right && rect2.left <= rect1.right;\r\n    }\r\n    else if (type === \"vertical\") {\r\n        return abs(rect1.bottom - rect2.top) <= distance\r\n            || abs(rect1.top - rect2.bottom) <= distance\r\n            || rect1.top <= rect2.bottom && rect2.top <= rect1.bottom;\r\n    }\r\n    return true;\r\n}\r\nfunction getElementGuidelines(moveable) {\r\n    var state = moveable.state;\r\n    var _a = moveable.props.elementGuidelines, elementGuidelines = _a === void 0 ? [] : _a;\r\n    if (!elementGuidelines.length) {\r\n        state.elementRects = [];\r\n        return [];\r\n    }\r\n    var prevValues = (state.elementRects || []).filter(function (snapRect) { return !snapRect.refresh; });\r\n    var nextElementGuidelines = elementGuidelines.map(function (el) {\r\n        if (isObject(el) && \"element\" in el) {\r\n            return __assign(__assign({}, el), { element: getRefTarget(el.element, true) });\r\n        }\r\n        return {\r\n            element: getRefTarget(el, true),\r\n        };\r\n    }).filter(function (value) {\r\n        return value.element;\r\n    });\r\n    var _b = diff(prevValues.map(function (v) { return v.element; }), nextElementGuidelines.map(function (v) { return v.element; })), maintained = _b.maintained, added = _b.added;\r\n    var nextValues = [];\r\n    maintained.forEach(function (_a) {\r\n        var _b = __read(_a, 2), prevIndex = _b[0], nextIndex = _b[1];\r\n        nextValues[nextIndex] = prevValues[prevIndex];\r\n    });\r\n    getSnapElementRects(moveable, added.map(function (index) { return nextElementGuidelines[index]; })).map(function (rect, i) {\r\n        nextValues[added[i]] = rect;\r\n    });\r\n    state.elementRects = nextValues;\r\n    var elementSnapDirections = getSnapDirections(moveable.props.elementSnapDirections);\r\n    var nextGuidelines = [];\r\n    nextValues.forEach(function (snapRect) {\r\n        var element = snapRect.element, _a = snapRect.top, topValue = _a === void 0 ? elementSnapDirections.top : _a, _b = snapRect.left, leftValue = _b === void 0 ? elementSnapDirections.left : _b, _c = snapRect.right, rightValue = _c === void 0 ? elementSnapDirections.right : _c, _d = snapRect.bottom, bottomValue = _d === void 0 ? elementSnapDirections.bottom : _d, _e = snapRect.center, centerValue = _e === void 0 ? elementSnapDirections.center : _e, _f = snapRect.middle, middleValue = _f === void 0 ? elementSnapDirections.middle : _f, className = snapRect.className, rect = snapRect.rect;\r\n        var _g = splitSnapDirectionPoses({\r\n            top: topValue,\r\n            right: rightValue,\r\n            left: leftValue,\r\n            bottom: bottomValue,\r\n            center: centerValue,\r\n            middle: middleValue,\r\n        }, rect), horizontal = _g.horizontal, vertical = _g.vertical, horizontalNames = _g.horizontalNames, verticalNames = _g.verticalNames;\r\n        var rectTop = rect.top;\r\n        var rectLeft = rect.left;\r\n        var width = rect.right - rectLeft;\r\n        var height = rect.bottom - rectTop;\r\n        var sizes = [width, height];\r\n        vertical.forEach(function (pos, i) {\r\n            nextGuidelines.push({\r\n                type: \"vertical\",\r\n                element: element,\r\n                pos: [\r\n                    throttle(pos, 0.1),\r\n                    rectTop,\r\n                ], size: height,\r\n                sizes: sizes,\r\n                className: className,\r\n                elementRect: snapRect,\r\n                elementDirection: SNAP_SKIP_NAMES_MAP[verticalNames[i]] || verticalNames[i],\r\n                direction: \"\",\r\n            });\r\n        });\r\n        horizontal.forEach(function (pos, i) {\r\n            nextGuidelines.push({\r\n                type: \"horizontal\",\r\n                element: element,\r\n                pos: [\r\n                    rectLeft,\r\n                    throttle(pos, 0.1),\r\n                ],\r\n                size: width,\r\n                sizes: sizes,\r\n                className: className,\r\n                elementRect: snapRect,\r\n                elementDirection: SNAP_SKIP_NAMES_MAP[horizontalNames[i]] || horizontalNames[i],\r\n                direction: \"\",\r\n            });\r\n        });\r\n    });\r\n    return nextGuidelines;\r\n}\r\nfunction getObjectGuidelines(guidelines, containerSize) {\r\n    return guidelines ? guidelines.map(function (info) {\r\n        var posGuideline = isObject(info) ? info : { pos: info };\r\n        var pos = posGuideline.pos;\r\n        if (isNumber(pos)) {\r\n            return posGuideline;\r\n        }\r\n        else {\r\n            return __assign(__assign({}, posGuideline), { pos: convertUnitSize(pos, containerSize) });\r\n        }\r\n    }) : [];\r\n}\r\nfunction getDefaultGuidelines(horizontalGuidelines, verticalGuidelines, width, height, clientLeft, clientTop, snapOffset) {\r\n    if (clientLeft === void 0) { clientLeft = 0; }\r\n    if (clientTop === void 0) { clientTop = 0; }\r\n    if (snapOffset === void 0) { snapOffset = { left: 0, top: 0, right: 0, bottom: 0 }; }\r\n    var guidelines = [];\r\n    var snapOffsetLeft = snapOffset.left, snapOffsetTop = snapOffset.top, snapOffsetBottom = snapOffset.bottom, snapOffsetRight = snapOffset.right;\r\n    var snapWidth = width + snapOffsetRight - snapOffsetLeft;\r\n    var snapHeight = height + snapOffsetBottom - snapOffsetTop;\r\n    getObjectGuidelines(horizontalGuidelines, snapHeight).forEach(function (posInfo) {\r\n        guidelines.push({\r\n            type: \"horizontal\",\r\n            pos: [\r\n                snapOffsetLeft,\r\n                throttle(posInfo.pos - clientTop + snapOffsetTop, 0.1),\r\n            ],\r\n            size: snapWidth,\r\n            className: posInfo.className,\r\n            direction: \"\",\r\n        });\r\n    });\r\n    getObjectGuidelines(verticalGuidelines, snapWidth).forEach(function (posInfo) {\r\n        guidelines.push({\r\n            type: \"vertical\",\r\n            pos: [\r\n                throttle(posInfo.pos - clientLeft + snapOffsetLeft, 0.1),\r\n                snapOffsetTop,\r\n            ],\r\n            size: snapHeight,\r\n            className: posInfo.className,\r\n            direction: \"\",\r\n        });\r\n    });\r\n    return guidelines;\r\n}\r\nfunction getSnapElementRects(moveable, values) {\r\n    if (!values.length) {\r\n        return [];\r\n    }\r\n    var groupable = moveable.props.groupable;\r\n    var state = moveable.state;\r\n    var containerClientRect = state.containerClientRect, \r\n    // targetClientRect: {\r\n    //     top: clientTop,\r\n    //     left: clientLeft,\r\n    // },\r\n    rootMatrix = state.rootMatrix, is3d = state.is3d, offsetDelta = state.offsetDelta;\r\n    var n = is3d ? 4 : 3;\r\n    var _a = __read(calculateContainerPos(rootMatrix, containerClientRect, n), 2), containerLeft = _a[0], containerTop = _a[1];\r\n    // const poses = getAbsolutePosesByState(state);\r\n    // const {\r\n    //     minX: targetLeft,\r\n    //     minY: targetTop,\r\n    // } = getMinMaxs(poses);\r\n    // const [distLeft, distTop] = minus([targetLeft, targetTop], calculateInversePosition(rootMatrix, [\r\n    //     clientLeft - containerLeft,\r\n    //     clientTop - containerTop,\r\n    // ], n)).map(pos => roundSign(pos));\r\n    var offsetLeft = groupable ? 0 : offsetDelta[0];\r\n    var offsetTop = groupable ? 0 : offsetDelta[1];\r\n    return values.map(function (value) {\r\n        var rect = value.element.getBoundingClientRect();\r\n        var left = rect.left - containerLeft - offsetLeft;\r\n        var top = rect.top - containerTop - offsetTop;\r\n        var bottom = top + rect.height;\r\n        var right = left + rect.width;\r\n        var _a = __read(calculateInversePosition(rootMatrix, [left, top], n), 2), elementLeft = _a[0], elementTop = _a[1];\r\n        var _b = __read(calculateInversePosition(rootMatrix, [right, bottom], n), 2), elementRight = _b[0], elementBottom = _b[1];\r\n        return __assign(__assign({}, value), { rect: {\r\n                left: elementLeft,\r\n                right: elementRight,\r\n                top: elementTop,\r\n                bottom: elementBottom,\r\n                center: (elementLeft + elementRight) / 2,\r\n                middle: (elementTop + elementBottom) / 2,\r\n            } });\r\n    });\r\n}\n\nfunction checkSnapInfo(moveable) {\r\n    var state = moveable.state;\r\n    var container = state.container;\r\n    var snapContainer = moveable.props.snapContainer || container;\r\n    if (state.snapContainer === snapContainer && state.guidelines && state.guidelines.length) {\r\n        return false;\r\n    }\r\n    var containerClientRect = state.containerClientRect;\r\n    var snapOffset = {\r\n        left: 0,\r\n        top: 0,\r\n        bottom: 0,\r\n        right: 0,\r\n    };\r\n    if (container !== snapContainer) {\r\n        var snapContainerTarget = getRefTarget(snapContainer, true);\r\n        if (snapContainerTarget) {\r\n            var snapContainerRect = getClientRect(snapContainerTarget);\r\n            var offset1 = getDragDistByState(state, [\r\n                snapContainerRect.left - containerClientRect.left,\r\n                snapContainerRect.top - containerClientRect.top,\r\n            ]);\r\n            var offset2 = getDragDistByState(state, [\r\n                snapContainerRect.right - containerClientRect.right,\r\n                snapContainerRect.bottom - containerClientRect.bottom,\r\n            ]);\r\n            snapOffset.left = throttle(offset1[0], 0.00001);\r\n            snapOffset.top = throttle(offset1[1], 0.00001);\r\n            snapOffset.right = throttle(offset2[0], 0.00001);\r\n            snapOffset.bottom = throttle(offset2[1], 0.00001);\r\n        }\r\n    }\r\n    state.snapContainer = snapContainer;\r\n    state.snapOffset = snapOffset;\r\n    state.guidelines = getTotalGuidelines(moveable);\r\n    state.enableSnap = true;\r\n    return true;\r\n}\r\nfunction getNextFixedPoses(matrix, width, height, fixedDirection, fixedPos, is3d) {\r\n    var nextPoses = calculatePoses(matrix, width, height, is3d ? 4 : 3);\r\n    var nextFixedPos = getPosByDirection(nextPoses, fixedDirection);\r\n    return getAbsolutePoses(nextPoses, minus(fixedPos, nextFixedPos));\r\n}\r\nfunction normalized(value) {\r\n    return value ? value / abs(value) : 0;\r\n}\r\nfunction getSizeOffsetInfo(moveable, poses, direction, keepRatio, isRequest, datas) {\r\n    var fixedDirection = datas.fixedDirection;\r\n    var directions = getCheckSnapDirections(direction, fixedDirection, keepRatio);\r\n    var innerBoundLineInfos = getCheckInnerBoundLineInfos(moveable, poses, direction, keepRatio);\r\n    var offsets = __spreadArray(__spreadArray([], __read(getSnapBoundInfo(moveable, poses, directions, keepRatio, isRequest, datas)), false), __read(getInnerBoundInfo(moveable, innerBoundLineInfos, datas)), false);\r\n    var widthOffsetInfo = getNearOffsetInfo(offsets, 0);\r\n    var heightOffsetInfo = getNearOffsetInfo(offsets, 1);\r\n    return {\r\n        width: {\r\n            isBound: widthOffsetInfo.isBound,\r\n            offset: widthOffsetInfo.offset[0],\r\n        },\r\n        height: {\r\n            isBound: heightOffsetInfo.isBound,\r\n            offset: heightOffsetInfo.offset[1],\r\n        },\r\n    };\r\n}\r\nfunction recheckSizeByTwoDirection(moveable, poses, width, height, maxWidth, maxHeight, direction, isRequest, datas) {\r\n    var snapPos = getPosByDirection(poses, direction);\r\n    var _a = checkMoveableSnapBounds(moveable, isRequest, {\r\n        vertical: [snapPos[0]],\r\n        horizontal: [snapPos[1]],\r\n    }), horizontalOffset = _a.horizontal.offset, verticalOffset = _a.vertical.offset;\r\n    if (throttle(verticalOffset, FLOAT_POINT_NUM) || throttle(horizontalOffset, FLOAT_POINT_NUM)) {\r\n        var _b = __read(getDragDist({\r\n            datas: datas,\r\n            distX: -verticalOffset,\r\n            distY: -horizontalOffset,\r\n        }), 2), nextWidthOffset = _b[0], nextHeightOffset = _b[1];\r\n        var nextWidth = Math.min(maxWidth || Infinity, width + direction[0] * nextWidthOffset);\r\n        var nextHeight = Math.min(maxHeight || Infinity, height + direction[1] * nextHeightOffset);\r\n        return [nextWidth - width, nextHeight - height];\r\n    }\r\n    return [0, 0];\r\n}\r\nfunction checkSizeDist(moveable, getNextPoses, width, height, direction, fixedPosition, isRequest, datas) {\r\n    var poses = getAbsolutePosesByState(moveable.state);\r\n    var keepRatio = moveable.props.keepRatio;\r\n    var widthOffset = 0;\r\n    var heightOffset = 0;\r\n    for (var i = 0; i < 2; ++i) {\r\n        var nextPoses = getNextPoses(widthOffset, heightOffset);\r\n        var _a = getSizeOffsetInfo(moveable, nextPoses, direction, keepRatio, isRequest, datas), widthOffsetInfo = _a.width, heightOffsetInfo = _a.height;\r\n        var isWidthBound = widthOffsetInfo.isBound;\r\n        var isHeightBound = heightOffsetInfo.isBound;\r\n        var nextWidthOffset = widthOffsetInfo.offset;\r\n        var nextHeightOffset = heightOffsetInfo.offset;\r\n        if (i === 1) {\r\n            if (!isWidthBound) {\r\n                nextWidthOffset = 0;\r\n            }\r\n            if (!isHeightBound) {\r\n                nextHeightOffset = 0;\r\n            }\r\n        }\r\n        if (i === 0 && isRequest && !isWidthBound && !isHeightBound) {\r\n            return [0, 0];\r\n        }\r\n        if (keepRatio) {\r\n            var widthDist = abs(nextWidthOffset) * (width ? 1 / width : 1);\r\n            var heightDist = abs(nextHeightOffset) * (height ? 1 / height : 1);\r\n            var isGetWidthOffset = isWidthBound && isHeightBound\r\n                ? widthDist < heightDist\r\n                : isHeightBound ||\r\n                    (!isWidthBound && widthDist < heightDist);\r\n            if (isGetWidthOffset) {\r\n                // width : height = ? : heightOffset\r\n                nextWidthOffset = (width * nextHeightOffset) / height;\r\n            }\r\n            else {\r\n                // width : height = widthOffset : ?\r\n                nextHeightOffset = (height * nextWidthOffset) / width;\r\n            }\r\n        }\r\n        widthOffset += nextWidthOffset;\r\n        heightOffset += nextHeightOffset;\r\n    }\r\n    if (!keepRatio && direction[0] && direction[1]) {\r\n        var _b = checkMaxBounds(moveable, poses, direction, fixedPosition, datas), maxWidth = _b.maxWidth, maxHeight = _b.maxHeight;\r\n        var _c = __read(recheckSizeByTwoDirection(moveable, getNextPoses(widthOffset, heightOffset).map(function (pos) { return pos.map(function (p) { return throttle(p, FLOAT_POINT_NUM); }); }), width + widthOffset, height + heightOffset, maxWidth, maxHeight, direction, isRequest, datas), 2), nextWidthOffset = _c[0], nextHeightOffset = _c[1];\r\n        widthOffset += nextWidthOffset;\r\n        heightOffset += nextHeightOffset;\r\n    }\r\n    return [widthOffset, heightOffset];\r\n}\r\nfunction absDegree(deg) {\r\n    if (deg < 0) {\r\n        deg = deg % 360 + 360;\r\n    }\r\n    deg %= 360;\r\n    return deg;\r\n}\r\nfunction bumpDegree(baseDeg, snapDeg) {\r\n    // baseDeg -80\r\n    // snapDeg 270\r\n    // return -90\r\n    snapDeg = absDegree(snapDeg);\r\n    var count = Math.floor(baseDeg / 360);\r\n    var deg1 = count * 360 + 360 - snapDeg;\r\n    var deg2 = count * 360 + snapDeg;\r\n    return abs(baseDeg - deg1) < abs(baseDeg - deg2) ? deg1 : deg2;\r\n}\r\nfunction getMinDegreeDistance(deg1, deg2) {\r\n    deg1 = absDegree(deg1);\r\n    deg2 = absDegree(deg2);\r\n    var deg3 = absDegree(deg1 - deg2);\r\n    return Math.min(deg3, 360 - deg3);\r\n}\r\nfunction checkSnapRotate(moveable, rect, dist, rotation) {\r\n    var _a;\r\n    var props = moveable.props;\r\n    var snapRotationThreshold = (_a = props[NAME_snapRotationThreshold]) !== null && _a !== void 0 ? _a : 5;\r\n    var snapRotationDegrees = props[NAME_snapRotationDegrees];\r\n    if (hasGuidelines(moveable, \"rotatable\")) {\r\n        var pos1 = rect.pos1, pos2 = rect.pos2, pos3 = rect.pos3, pos4 = rect.pos4, origin2_1 = rect.origin;\r\n        var rad_1 = (dist * Math.PI) / 180;\r\n        var prevPoses = [pos1, pos2, pos3, pos4].map(function (pos) { return minus(pos, origin2_1); });\r\n        var nextPoses = prevPoses.map(function (pos) { return rotate(pos, rad_1); });\r\n        // console.log(moveable.state.left, moveable.state.top, moveable.state.origin);\r\n        // console.log(pos1, pos2, pos3, pos4, origin, rad, prevPoses, nextPoses);\r\n        var result = __spreadArray(__spreadArray([], __read(checkRotateBounds(moveable, prevPoses, nextPoses, origin2_1, dist)), false), __read(checkRotateInnerBounds(moveable, prevPoses, nextPoses, origin2_1, dist)), false);\r\n        result.sort(function (a, b) { return abs(a - dist) - abs(b - dist); });\r\n        var isSnap = result.length > 0;\r\n        if (isSnap) {\r\n            return {\r\n                isSnap: isSnap,\r\n                dist: isSnap ? result[0] : dist,\r\n            };\r\n        }\r\n    }\r\n    if ((snapRotationDegrees === null || snapRotationDegrees === void 0 ? void 0 : snapRotationDegrees.length) && snapRotationThreshold) {\r\n        var sorted = snapRotationDegrees.slice().sort(function (a, b) {\r\n            return getMinDegreeDistance(a, rotation) - getMinDegreeDistance(b, rotation);\r\n        });\r\n        var firstDegree = sorted[0];\r\n        if (getMinDegreeDistance(firstDegree, rotation) <= snapRotationThreshold) {\r\n            return {\r\n                isSnap: true,\r\n                dist: dist + bumpDegree(rotation, firstDegree) - rotation,\r\n            };\r\n        }\r\n    }\r\n    return {\r\n        isSnap: false,\r\n        dist: dist,\r\n    };\r\n}\r\nfunction checkSnapResize(moveable, width, height, direction, fixedPosition, isRequest, datas) {\r\n    if (!hasGuidelines(moveable, \"resizable\")) {\r\n        return [0, 0];\r\n    }\r\n    var fixedDirection = datas.fixedDirection, nextAllMatrix = datas.nextAllMatrix;\r\n    var _a = moveable.state, allMatrix = _a.allMatrix, is3d = _a.is3d;\r\n    return checkSizeDist(moveable, function (widthOffset, heightOffset) {\r\n        return getNextFixedPoses(nextAllMatrix || allMatrix, width + widthOffset, height + heightOffset, fixedDirection, fixedPosition, is3d);\r\n    }, width, height, direction, fixedPosition, isRequest, datas);\r\n}\r\nfunction checkSnapScale(moveable, scale, direction, isRequest, datas) {\r\n    if (!hasGuidelines(moveable, \"scalable\")) {\r\n        return [0, 0];\r\n    }\r\n    var startOffsetWidth = datas.startOffsetWidth, startOffsetHeight = datas.startOffsetHeight, fixedPosition = datas.fixedPosition, fixedDirection = datas.fixedDirection, is3d = datas.is3d;\r\n    var sizeDist = checkSizeDist(moveable, function (widthOffset, heightOffset) {\r\n        return getNextFixedPoses(scaleMatrix(datas, plus(scale, [widthOffset / startOffsetWidth, heightOffset / startOffsetHeight])), startOffsetWidth, startOffsetHeight, fixedDirection, fixedPosition, is3d);\r\n    }, startOffsetWidth, startOffsetHeight, direction, fixedPosition, isRequest, datas);\r\n    return [sizeDist[0] / startOffsetWidth, sizeDist[1] / startOffsetHeight];\r\n}\r\nfunction startCheckSnapDrag(moveable, datas) {\r\n    datas.absolutePoses = getAbsolutePosesByState(moveable.state);\r\n}\r\nfunction getSnapGuidelines(posInfos) {\r\n    var guidelines = [];\r\n    posInfos.forEach(function (posInfo) {\r\n        posInfo.guidelineInfos.forEach(function (_a) {\r\n            var guideline = _a.guideline;\r\n            if (find(guidelines, function (info) { return info.guideline === guideline; })) {\r\n                return;\r\n            }\r\n            guideline.direction = \"\";\r\n            guidelines.push({ guideline: guideline, posInfo: posInfo });\r\n        });\r\n    });\r\n    return guidelines.map(function (_a) {\r\n        var guideline = _a.guideline, posInfo = _a.posInfo;\r\n        return __assign(__assign({}, guideline), { direction: posInfo.direction });\r\n    });\r\n}\r\nfunction addBoundGuidelines(moveable, verticalPoses, horizontalPoses, verticalSnapPoses, horizontalSnapPoses, externalBounds) {\r\n    var _a = checkBoundPoses(getBounds(moveable, externalBounds), verticalPoses, horizontalPoses), verticalBoundInfos = _a.vertical, horizontalBoundInfos = _a.horizontal;\r\n    var boundMap = getInitialBounds();\r\n    verticalBoundInfos.forEach(function (info) {\r\n        if (info.isBound) {\r\n            if (info.direction === \"start\") {\r\n                boundMap.left = true;\r\n            }\r\n            if (info.direction === \"end\") {\r\n                boundMap.right = true;\r\n            }\r\n            verticalSnapPoses.push({\r\n                type: \"bounds\",\r\n                pos: info.pos,\r\n            });\r\n        }\r\n    });\r\n    horizontalBoundInfos.forEach(function (info) {\r\n        if (info.isBound) {\r\n            if (info.direction === \"start\") {\r\n                boundMap.top = true;\r\n            }\r\n            if (info.direction === \"end\") {\r\n                boundMap.bottom = true;\r\n            }\r\n            horizontalSnapPoses.push({\r\n                type: \"bounds\",\r\n                pos: info.pos,\r\n            });\r\n        }\r\n    });\r\n    var _b = checkInnerBoundPoses(moveable), innerBoundMap = _b.boundMap, verticalInnerBoundPoses = _b.vertical, horizontalInnerBoundPoses = _b.horizontal;\r\n    verticalInnerBoundPoses.forEach(function (innerPos) {\r\n        if (findIndex(verticalSnapPoses, function (_a) {\r\n            var type = _a.type, pos = _a.pos;\r\n            return type === \"bounds\" && pos === innerPos;\r\n        }) >= 0) {\r\n            return;\r\n        }\r\n        verticalSnapPoses.push({\r\n            type: \"bounds\",\r\n            pos: innerPos,\r\n        });\r\n    });\r\n    horizontalInnerBoundPoses.forEach(function (innerPos) {\r\n        if (findIndex(horizontalSnapPoses, function (_a) {\r\n            var type = _a.type, pos = _a.pos;\r\n            return type === \"bounds\" && pos === innerPos;\r\n        }) >= 0) {\r\n            return;\r\n        }\r\n        horizontalSnapPoses.push({\r\n            type: \"bounds\",\r\n            pos: innerPos,\r\n        });\r\n    });\r\n    return {\r\n        boundMap: boundMap,\r\n        innerBoundMap: innerBoundMap,\r\n    };\r\n}\r\nvar directionCondition$1 = getDirectionCondition(\"\", [\"resizable\", \"scalable\"]);\r\nvar NAME_snapRotationThreshold = \"snapRotationThreshold\";\r\nvar NAME_snapRotationDegrees = \"snapRotationDegrees\";\r\n/**\r\n * @namespace Moveable.Snappable\r\n * @description Whether or not target can be snapped to the guideline. (default: false)\r\n * @sort 2\r\n */\r\nvar Snappable = {\r\n    name: \"snappable\",\r\n    dragRelation: \"strong\",\r\n    props: [\r\n        \"snappable\",\r\n        \"snapContainer\",\r\n        \"snapDirections\",\r\n        \"elementSnapDirections\",\r\n        \"snapGap\",\r\n        \"snapGridWidth\",\r\n        \"snapGridHeight\",\r\n        \"isDisplaySnapDigit\",\r\n        \"isDisplayInnerSnapDigit\",\r\n        \"isDisplayGridGuidelines\",\r\n        \"snapDigit\",\r\n        \"snapThreshold\",\r\n        \"snapRenderThreshold\",\r\n        NAME_snapRotationThreshold,\r\n        NAME_snapRotationDegrees,\r\n        \"horizontalGuidelines\",\r\n        \"verticalGuidelines\",\r\n        \"elementGuidelines\",\r\n        \"bounds\",\r\n        \"innerBounds\",\r\n        \"snapDistFormat\",\r\n        \"maxSnapElementGuidelineDistance\",\r\n        \"maxSnapElementGapDistance\",\r\n    ],\r\n    events: [\"snap\", \"bound\"],\r\n    css: [\r\n        \":host {\\n--bounds-color: #d66;\\n}\\n.guideline {\\npointer-events: none;\\nz-index: 2;\\n}\\n.guideline.bounds {\\nbackground: #d66;\\nbackground: var(--bounds-color);\\n}\\n.guideline-group {\\nposition: absolute;\\ntop: 0;\\nleft: 0;\\n}\\n.guideline-group .size-value {\\nposition: absolute;\\ncolor: #f55;\\nfont-size: 12px;\\nfont-size: calc(12px * var(--zoom));\\nfont-weight: bold;\\n}\\n.guideline-group.horizontal .size-value {\\ntransform-origin: 50% 100%;\\ntransform: translateX(-50%);\\nleft: 50%;\\nbottom: 5px;\\nbottom: calc(2px + 3px * var(--zoom));\\n}\\n.guideline-group.vertical .size-value {\\ntransform-origin: 0% 50%;\\ntop: 50%;\\ntransform: translateY(-50%);\\nleft: 5px;\\nleft: calc(2px + 3px * var(--zoom));\\n}\\n.guideline.gap {\\nbackground: #f55;\\n}\\n.size-value.gap {\\ncolor: #f55;\\n}\\n\",\r\n    ],\r\n    render: function (moveable, React) {\r\n        var state = moveable.state;\r\n        var targetTop = state.top, targetLeft = state.left, pos1 = state.pos1, pos2 = state.pos2, pos3 = state.pos3, pos4 = state.pos4, snapRenderInfo = state.snapRenderInfo;\r\n        var _a = moveable.props.snapRenderThreshold, snapRenderThreshold = _a === void 0 ? 1 : _a;\r\n        if (!snapRenderInfo || !snapRenderInfo.render || !hasGuidelines(moveable, \"\")) {\r\n            // reset store\r\n            watchValue(moveable, \"boundMap\", getInitialBounds(), function (v) { return JSON.stringify(v); });\r\n            watchValue(moveable, \"innerBoundMap\", getInitialBounds(), function (v) { return JSON.stringify(v); });\r\n            return [];\r\n        }\r\n        state.guidelines = getTotalGuidelines(moveable);\r\n        var minLeft = Math.min(pos1[0], pos2[0], pos3[0], pos4[0]);\r\n        var minTop = Math.min(pos1[1], pos2[1], pos3[1], pos4[1]);\r\n        var externalPoses = snapRenderInfo.externalPoses || [];\r\n        var poses = getAbsolutePosesByState(moveable.state);\r\n        var verticalSnapPoses = [];\r\n        var horizontalSnapPoses = [];\r\n        var verticalGuidelines = [];\r\n        var horizontalGuidelines = [];\r\n        var snapInfos = [];\r\n        var _b = getRect(poses), width = _b.width, height = _b.height, top = _b.top, left = _b.left, bottom = _b.bottom, right = _b.right;\r\n        var targetRect = { left: left, right: right, top: top, bottom: bottom, center: (left + right) / 2, middle: (top + bottom) / 2 };\r\n        var hasExternalPoses = externalPoses.length > 0;\r\n        var externalRect = hasExternalPoses\r\n            ? getRect(externalPoses)\r\n            : {};\r\n        if (!snapRenderInfo.request) {\r\n            if (snapRenderInfo.direction) {\r\n                snapInfos.push(getSnapInfosByDirection(moveable, poses, snapRenderInfo.direction, snapRenderThreshold));\r\n            }\r\n            if (snapRenderInfo.snap) {\r\n                var rect = getRect(poses);\r\n                if (snapRenderInfo.center) {\r\n                    rect.middle = (rect.top + rect.bottom) / 2;\r\n                    rect.center = (rect.left + rect.right) / 2;\r\n                }\r\n                snapInfos.push(checkSnaps(moveable, rect, snapRenderThreshold));\r\n            }\r\n            if (hasExternalPoses) {\r\n                if (snapRenderInfo.center) {\r\n                    externalRect.middle =\r\n                        (externalRect.top + externalRect.bottom) / 2;\r\n                    externalRect.center =\r\n                        (externalRect.left + externalRect.right) / 2;\r\n                }\r\n                snapInfos.push(checkSnaps(moveable, externalRect, snapRenderThreshold));\r\n            }\r\n            snapInfos.forEach(function (snapInfo) {\r\n                var verticalPosInfos = snapInfo.vertical.posInfos, horizontalPosInfos = snapInfo.horizontal.posInfos;\r\n                verticalSnapPoses.push.apply(verticalSnapPoses, __spreadArray([], __read(verticalPosInfos.filter(function (_a) {\r\n                    var guidelineInfos = _a.guidelineInfos;\r\n                    return guidelineInfos.some(function (_a) {\r\n                        var guideline = _a.guideline;\r\n                        return !guideline.hide;\r\n                    });\r\n                }).map(function (posInfo) { return ({\r\n                    type: \"snap\",\r\n                    pos: posInfo.pos,\r\n                }); })), false));\r\n                horizontalSnapPoses.push.apply(horizontalSnapPoses, __spreadArray([], __read(horizontalPosInfos.filter(function (_a) {\r\n                    var guidelineInfos = _a.guidelineInfos;\r\n                    return guidelineInfos.some(function (_a) {\r\n                        var guideline = _a.guideline;\r\n                        return !guideline.hide;\r\n                    });\r\n                }).map(function (posInfo) { return ({\r\n                    type: \"snap\",\r\n                    pos: posInfo.pos,\r\n                }); })), false));\r\n                verticalGuidelines.push.apply(verticalGuidelines, __spreadArray([], __read(getSnapGuidelines(verticalPosInfos)), false));\r\n                horizontalGuidelines.push.apply(horizontalGuidelines, __spreadArray([], __read(getSnapGuidelines(horizontalPosInfos)), false));\r\n            });\r\n        }\r\n        var _c = addBoundGuidelines(moveable, [left, right], [top, bottom], verticalSnapPoses, horizontalSnapPoses), boundMap = _c.boundMap, innerBoundMap = _c.innerBoundMap;\r\n        if (hasExternalPoses) {\r\n            addBoundGuidelines(moveable, [externalRect.left, externalRect.right], [externalRect.top, externalRect.bottom], verticalSnapPoses, horizontalSnapPoses, snapRenderInfo.externalBounds);\r\n        }\r\n        var allGuidelines = __spreadArray(__spreadArray([], __read(verticalGuidelines), false), __read(horizontalGuidelines), false);\r\n        var elementGuidelines = allGuidelines.filter(function (guideline) { return guideline.element && !guideline.gapRects; });\r\n        var gapGuidelines = allGuidelines.filter(function (guideline) { return guideline.gapRects; }).sort(function (a, b) {\r\n            return a.gap - b.gap;\r\n        });\r\n        triggerEvent(moveable, \"onSnap\", {\r\n            guidelines: allGuidelines.filter(function (_a) {\r\n                var element = _a.element;\r\n                return !element;\r\n            }),\r\n            elements: elementGuidelines,\r\n            gaps: gapGuidelines,\r\n        }, true);\r\n        var nextBoundMap = watchValue(moveable, \"boundMap\", boundMap, function (v) { return JSON.stringify(v); }, getInitialBounds());\r\n        var nextInnerBoundMap = watchValue(moveable, \"innerBoundMap\", innerBoundMap, function (v) { return JSON.stringify(v); }, getInitialBounds());\r\n        if (boundMap === nextBoundMap || innerBoundMap === nextInnerBoundMap) {\r\n            triggerEvent(moveable, \"onBound\", {\r\n                bounds: boundMap,\r\n                innerBounds: innerBoundMap,\r\n            }, true);\r\n        }\r\n        // verticalSnapPoses.\r\n        return __spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([], __read(renderDashedGuidelines(moveable, elementGuidelines, [minLeft, minTop], targetRect, React)), false), __read(renderGapGuidelines(moveable, gapGuidelines, [minLeft, minTop], targetRect, React)), false), __read(renderGuidelines(moveable, \"horizontal\", horizontalGuidelines, [targetLeft, targetTop], targetRect, React)), false), __read(renderGuidelines(moveable, \"vertical\", verticalGuidelines, [targetLeft, targetTop], targetRect, React)), false), __read(renderSnapPoses(moveable, \"horizontal\", horizontalSnapPoses, minLeft, targetTop, width, 0, React)), false), __read(renderSnapPoses(moveable, \"vertical\", verticalSnapPoses, minTop, targetLeft, height, 1, React)), false);\r\n    },\r\n    dragStart: function (moveable, e) {\r\n        moveable.state.snapRenderInfo = {\r\n            request: e.isRequest,\r\n            snap: true,\r\n            center: true,\r\n        };\r\n        checkSnapInfo(moveable);\r\n    },\r\n    drag: function (moveable) {\r\n        var state = moveable.state;\r\n        if (!checkSnapInfo(moveable)) {\r\n            state.guidelines = getTotalGuidelines(moveable);\r\n        }\r\n        if (state.snapRenderInfo) {\r\n            state.snapRenderInfo.render = true;\r\n        }\r\n    },\r\n    pinchStart: function (moveable) {\r\n        this.unset(moveable);\r\n    },\r\n    dragEnd: function (moveable) {\r\n        this.unset(moveable);\r\n    },\r\n    dragControlCondition: function (moveable, e) {\r\n        if (directionCondition$1(moveable, e) || dragControlCondition(moveable, e)) {\r\n            return true;\r\n        }\r\n        if (!e.isRequest && e.inputEvent) {\r\n            return hasClass(e.inputEvent.target, prefix(\"snap-control\"));\r\n        }\r\n    },\r\n    dragControlStart: function (moveable) {\r\n        moveable.state.snapRenderInfo = null;\r\n        checkSnapInfo(moveable);\r\n    },\r\n    dragControl: function (moveable) {\r\n        this.drag(moveable);\r\n    },\r\n    dragControlEnd: function (moveable) {\r\n        this.unset(moveable);\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        this.dragStart(moveable, e);\r\n    },\r\n    dragGroup: function (moveable) {\r\n        this.drag(moveable);\r\n    },\r\n    dragGroupEnd: function (moveable) {\r\n        this.unset(moveable);\r\n    },\r\n    dragGroupControlStart: function (moveable) {\r\n        moveable.state.snapRenderInfo = null;\r\n        checkSnapInfo(moveable);\r\n    },\r\n    dragGroupControl: function (moveable) {\r\n        this.drag(moveable);\r\n    },\r\n    dragGroupControlEnd: function (moveable) {\r\n        this.unset(moveable);\r\n    },\r\n    unset: function (moveable) {\r\n        var state = moveable.state;\r\n        state.enableSnap = false;\r\n        state.guidelines = [];\r\n        state.snapRenderInfo = null;\r\n        state.elementRects = [];\r\n    },\r\n};\r\n/**\r\n * Whether or not target can be snapped to the guideline. (default: false)\r\n * @name Moveable.Snappable#snappable\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.snappable = true;\r\n */\r\n/**\r\n *  A snap container that is the basis for snap, bounds, and innerBounds. (default: null = container)\r\n * @name Moveable.Snappable#snapContainer\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.querySelector(\".container\"));\r\n *\r\n * moveable.snapContainer = document.body;\r\n */\r\n/**\r\n * You can specify the directions to snap to the target. (default: { left: true, top: true, right: true, bottom: true })\r\n * @name Moveable.Snappable#snapDirections\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   snappable: true,\r\n *   snapDirections: true,\r\n * });\r\n * // snap center\r\n * moveable.snapDirections = { left: true, top: true, right: true, bottom: true, center: true, middle: true };\r\n */\r\n/**\r\n * You can specify the snap directions of elements. (default: { left: true, ftrue, right: true, bottom: true })\r\n * @name Moveable.Snappable#elementSnapDirections\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   snappable: true,\r\n *   elementSnapDirections: true,\r\n * });\r\n * // snap center\r\n * moveable.elementSnapDirections = { left: true, top: true, right: true, bottom: true, center: true, middle: true };\r\n */\r\n/**\r\n * When you drag, make the gap snap in the element guidelines. (default: true)\r\n * @name Moveable.Snappable#snapGap\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   snappable: true,\r\n *   snapElement: true,\r\n *   snapGap: true,\r\n * });\r\n *\r\n * moveable.snapGap = false;\r\n */\r\n/**\r\n * Distance value that can snap to guidelines. (default: 5)\r\n * @name Moveable.Snappable#snapThreshold\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.snapThreshold = 5;\r\n */\r\n/**\r\n * Add guidelines in the horizontal direction. (default: [])\r\n * @name Moveable.Snappable#horizontalGuidelines\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.horizontalGuidelines = [100, 200, 500];\r\n */\r\n/**\r\n * Add guidelines in the vertical direction. (default: [])\r\n * @name Moveable.Snappable#verticalGuidelines\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.verticalGuidelines = [100, 200, 500];\r\n */\r\n/**\r\n * Add guidelines for the element. (default: [])\r\n * @name Moveable.Snappable#elementGuidelines\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.elementGuidelines = [\r\n *   document.querySelector(\".element\"),\r\n * ];\r\n */\r\n/**\r\n * You can set up boundaries.\r\n * @name Moveable.Snappable#bounds\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @default null\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.bounds = { left: 0, right: 1000, top: 0, bottom: 1000};\r\n */\r\n/**\r\n * You can set up inner boundaries.\r\n * @name Moveable.Snappable#innerBounds\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @default null\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.innerBounds = { left: 500, top: 500, width: 100, height: 100};\r\n */\r\n/**\r\n * snap distance digits (default: 0)\r\n * @name Moveable.Snappable#snapDigit\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.snapDigit = 0\r\n */\r\n/**\r\n * If width size is greater than 0, you can vertical snap to the grid. (default: 0)\r\n * @name Moveable.Snappable#snapGridWidth\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.snapGridWidth = 5;\r\n */\r\n/**\r\n * If height size is greater than 0, you can horizontal snap to the grid. (default: 0)\r\n * @name Moveable.Snappable#snapGridHeight\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.snapGridHeight = 5;\r\n */\r\n/**\r\n * Whether to show snap distance (default: true)\r\n * @name Moveable.Snappable#isDisplaySnapDigit\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.isDisplaySnapDigit = true;\r\n */\r\n/**\r\n * Whether to show element inner snap distance (default: false)\r\n * @name Moveable.Snappable#isDisplayInnerSnapDigit\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.isDisplayInnerSnapDigit = true;\r\n */\r\n/**\r\n * You can set the text format of the distance shown in the guidelines. (default: self)\r\n * @name Moveable.Snappable#snapDistFormat\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *  snappable: true,\r\n *  snapDistFormat: (v, type) => v,\r\n * });\r\n * moveable.snapDistFormat = (v, type) => `${v}px`;\r\n */\r\n/**\r\n * When you drag or dragControl, the `snap` event is called.\r\n * @memberof Moveable.Snappable\r\n * @event snap\r\n * @param {Moveable.Snappable.OnSnap} - Parameters for the `snap` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     snappable: true\r\n * });\r\n * moveable.on(\"snap\", e => {\r\n *     console.log(\"onSnap\", e);\r\n * });\r\n */\n\nfunction multiply2(pos1, pos2) {\r\n    return [\r\n        pos1[0] * pos2[0],\r\n        pos1[1] * pos2[1],\r\n    ];\r\n}\r\nfunction prefix() {\r\n    var classNames = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        classNames[_i] = arguments[_i];\r\n    }\r\n    return prefixNames.apply(void 0, __spreadArray([PREFIX], __read(classNames), false));\r\n}\r\nfunction defaultSync(fn) {\r\n    fn();\r\n}\r\nfunction getTransformMatrix(transform) {\r\n    if (!transform || transform === \"none\") {\r\n        return [1, 0, 0, 1, 0, 0];\r\n    }\r\n    if (isObject(transform)) {\r\n        return transform;\r\n    }\r\n    return parseMat(transform);\r\n}\r\nfunction getAbsoluteMatrix(matrix, n, origin) {\r\n    return multiplies(n, createOriginMatrix(origin, n), matrix, createOriginMatrix(origin.map(function (a) { return -a; }), n));\r\n}\r\nfunction measureSVGSize(el, unit, isHorizontal) {\r\n    if (unit === \"%\") {\r\n        var viewBox = getSVGViewBox(el.ownerSVGElement);\r\n        return viewBox[isHorizontal ? \"width\" : \"height\"] / 100;\r\n    }\r\n    return 1;\r\n}\r\nfunction getBeforeTransformOrigin(el) {\r\n    var relativeOrigin = getTransformOrigin(getComputedStyle(el, \":before\"));\r\n    return relativeOrigin.map(function (o, i) {\r\n        var _a = splitUnit(o), value = _a.value, unit = _a.unit;\r\n        return value * measureSVGSize(el, unit, i === 0);\r\n    });\r\n}\r\nfunction getTransformOriginArray(transformOrigin) {\r\n    return transformOrigin ? transformOrigin.split(\" \") : [\"0\", \"0\"];\r\n}\r\nfunction getTransformOrigin(style) {\r\n    return getTransformOriginArray(style.transformOrigin);\r\n}\r\nfunction getElementTransform(target) {\r\n    var getStyle = getCachedStyle(target);\r\n    var computedTransform = getStyle(\"transform\");\r\n    if (computedTransform && computedTransform !== \"none\") {\r\n        return computedTransform;\r\n    }\r\n    if (\"transform\" in target) {\r\n        var list = target.transform;\r\n        var baseVal = list.baseVal;\r\n        if (!baseVal) {\r\n            return \"\";\r\n        }\r\n        var length_1 = baseVal.length;\r\n        if (!length_1) {\r\n            return \"\";\r\n        }\r\n        var matrixes = [];\r\n        var _loop_1 = function (i) {\r\n            var matrix = baseVal[i].matrix;\r\n            matrixes.push(\"matrix(\".concat([\"a\", \"b\", \"c\", \"d\", \"e\", \"f\"].map(function (chr) { return matrix[chr]; }).join(\", \"), \")\"));\r\n        };\r\n        for (var i = 0; i < length_1; ++i) {\r\n            _loop_1(i);\r\n        }\r\n        return matrixes.join(\" \");\r\n    }\r\n    return \"\";\r\n}\r\nfunction getOffsetInfo(el, lastParent, isParent, checkZoom, getTargetStyle) {\r\n    var _a, _b;\r\n    var documentElement = getDocumentElement(el) || getDocumentBody(el);\r\n    var hasSlot = false;\r\n    var target;\r\n    var parentSlotElement;\r\n    if (!el || isParent) {\r\n        target = el;\r\n    }\r\n    else {\r\n        var assignedSlotParentElement = (_a = el === null || el === void 0 ? void 0 : el.assignedSlot) === null || _a === void 0 ? void 0 : _a.parentElement;\r\n        var parentElement = el.parentElement;\r\n        if (assignedSlotParentElement) {\r\n            hasSlot = true;\r\n            parentSlotElement = parentElement;\r\n            target = assignedSlotParentElement;\r\n        }\r\n        else {\r\n            target = parentElement;\r\n        }\r\n    }\r\n    var isCustomElement = false;\r\n    var isEnd = el === lastParent || target === lastParent;\r\n    var position = \"relative\";\r\n    var offsetZoom = 1;\r\n    var targetZoom = parseFloat(getTargetStyle === null || getTargetStyle === void 0 ? void 0 : getTargetStyle(\"zoom\")) || 1;\r\n    var targetPosition = getTargetStyle === null || getTargetStyle === void 0 ? void 0 : getTargetStyle(\"position\");\r\n    while (target && target !== documentElement) {\r\n        if (lastParent === target) {\r\n            isEnd = true;\r\n        }\r\n        var getStyle = getCachedStyle(target);\r\n        var tagName = target.tagName.toLowerCase();\r\n        var transform = getElementTransform(target);\r\n        var willChange = getStyle(\"willChange\");\r\n        var zoom = parseFloat(getStyle(\"zoom\")) || 1;\r\n        position = getStyle(\"position\");\r\n        if (checkZoom && zoom !== 1) {\r\n            offsetZoom = zoom;\r\n            break;\r\n        }\r\n        if (\r\n        // offsetParent is the parentElement if the target's zoom is not 1 and not absolute.\r\n        !isParent && checkZoom && targetZoom !== 1 && targetPosition && targetPosition !== \"absolute\"\r\n            || tagName === \"svg\"\r\n            || position !== \"static\"\r\n            || (transform && transform !== \"none\")\r\n            || willChange === \"transform\") {\r\n            break;\r\n        }\r\n        var slotParentNode = (_b = el === null || el === void 0 ? void 0 : el.assignedSlot) === null || _b === void 0 ? void 0 : _b.parentNode;\r\n        var targetParentNode = target.parentNode;\r\n        if (slotParentNode) {\r\n            hasSlot = true;\r\n            parentSlotElement = targetParentNode;\r\n        }\r\n        var parentNode = targetParentNode;\r\n        if (parentNode && parentNode.nodeType === 11) {\r\n            // Shadow Root\r\n            target = parentNode.host;\r\n            isCustomElement = true;\r\n            position = getCachedStyle(target)(\"position\");\r\n            break;\r\n        }\r\n        target = parentNode;\r\n        position = \"relative\";\r\n    }\r\n    return {\r\n        offsetZoom: offsetZoom,\r\n        hasSlot: hasSlot,\r\n        parentSlotElement: parentSlotElement,\r\n        isCustomElement: isCustomElement,\r\n        isStatic: position === \"static\",\r\n        isEnd: isEnd || !target || target === documentElement,\r\n        offsetParent: target || documentElement,\r\n    };\r\n}\r\nfunction getOffsetPosInfo(el, target) {\r\n    var _a;\r\n    var tagName = el.tagName.toLowerCase();\r\n    var offsetLeft = el.offsetLeft;\r\n    var offsetTop = el.offsetTop;\r\n    var getStyle = getCachedStyle(el);\r\n    // svg\r\n    var isSVG = isUndefined(offsetLeft);\r\n    var hasOffset = !isSVG;\r\n    var origin;\r\n    var targetOrigin;\r\n    // inner svg element\r\n    if (!hasOffset && tagName !== \"svg\") {\r\n        origin = IS_WEBKIT605\r\n            ? getBeforeTransformOrigin(el)\r\n            : getTransformOriginArray(getStyle(\"transformOrigin\")).map(function (pos) { return parseFloat(pos); });\r\n        targetOrigin = origin.slice();\r\n        hasOffset = true;\r\n        _a = __read(getSVGGraphicsOffset(el, origin, el === target && target.tagName.toLowerCase() === \"g\"), 4), offsetLeft = _a[0], offsetTop = _a[1], origin[0] = _a[2], origin[1] = _a[3];\r\n    }\r\n    else {\r\n        origin = getTransformOriginArray(getStyle(\"transformOrigin\")).map(function (pos) { return parseFloat(pos); });\r\n        targetOrigin = origin.slice();\r\n    }\r\n    return {\r\n        tagName: tagName,\r\n        isSVG: isSVG,\r\n        hasOffset: hasOffset,\r\n        offset: [offsetLeft || 0, offsetTop || 0],\r\n        origin: origin,\r\n        targetOrigin: targetOrigin,\r\n    };\r\n}\r\nfunction getBodyOffset(el, isSVG) {\r\n    var getStyle = getCachedStyle(el);\r\n    var getBodyStyle = getCachedStyle(getDocumentBody(el));\r\n    var bodyPosition = getBodyStyle(\"position\");\r\n    if (!isSVG && (!bodyPosition || bodyPosition === \"static\")) {\r\n        return [0, 0];\r\n    }\r\n    var marginLeft = parseInt(getBodyStyle(\"marginLeft\"), 10);\r\n    var marginTop = parseInt(getBodyStyle(\"marginTop\"), 10);\r\n    if (getStyle(\"position\") === \"absolute\") {\r\n        if (getStyle(\"top\") !== \"auto\" || getStyle(\"bottom\") !== \"auto\") {\r\n            marginTop = 0;\r\n        }\r\n        if (getStyle(\"left\") !== \"auto\" || getStyle(\"right\") !== \"auto\") {\r\n            marginLeft = 0;\r\n        }\r\n    }\r\n    return [marginLeft, marginTop];\r\n}\r\nfunction convert3DMatrixes(matrixes) {\r\n    matrixes.forEach(function (info) {\r\n        var matrix = info.matrix;\r\n        if (matrix) {\r\n            info.matrix = convertDimension(matrix, 3, 4);\r\n        }\r\n    });\r\n}\r\nfunction getPositionFixedInfo(el) {\r\n    var fixedContainer = el.parentElement;\r\n    var hasTransform = false;\r\n    var body = getDocumentBody(el);\r\n    while (fixedContainer) {\r\n        var transform = getComputedStyle(fixedContainer).transform;\r\n        if (transform && transform !== \"none\") {\r\n            hasTransform = true;\r\n            break;\r\n        }\r\n        if (fixedContainer === body) {\r\n            break;\r\n        }\r\n        fixedContainer = fixedContainer.parentElement;\r\n    }\r\n    return {\r\n        fixedContainer: fixedContainer || body,\r\n        hasTransform: hasTransform,\r\n    };\r\n}\r\nfunction makeMatrixCSS(matrix, is3d) {\r\n    if (is3d === void 0) { is3d = matrix.length > 9; }\r\n    return \"\".concat(is3d ? \"matrix3d\" : \"matrix\", \"(\").concat(convertMatrixtoCSS(matrix, !is3d).join(\",\"), \")\");\r\n}\r\nfunction getSVGViewBox(el) {\r\n    var clientWidth = el.clientWidth;\r\n    var clientHeight = el.clientHeight;\r\n    if (!el) {\r\n        return { x: 0, y: 0, width: 0, height: 0, clientWidth: clientWidth, clientHeight: clientHeight };\r\n    }\r\n    var viewBox = el.viewBox;\r\n    var baseVal = (viewBox && viewBox.baseVal) || { x: 0, y: 0, width: 0, height: 0 };\r\n    return {\r\n        x: baseVal.x,\r\n        y: baseVal.y,\r\n        width: baseVal.width || clientWidth,\r\n        height: baseVal.height || clientHeight,\r\n        clientWidth: clientWidth,\r\n        clientHeight: clientHeight,\r\n    };\r\n}\r\nfunction getSVGMatrix(el, n) {\r\n    var _a;\r\n    var _b = getSVGViewBox(el), viewBoxWidth = _b.width, viewBoxHeight = _b.height, clientWidth = _b.clientWidth, clientHeight = _b.clientHeight;\r\n    var scaleX = clientWidth / viewBoxWidth;\r\n    var scaleY = clientHeight / viewBoxHeight;\r\n    var preserveAspectRatio = el.preserveAspectRatio.baseVal;\r\n    // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/preserveAspectRatio\r\n    var align = preserveAspectRatio.align;\r\n    // 1 : meet 2: slice\r\n    var meetOrSlice = preserveAspectRatio.meetOrSlice;\r\n    var svgOrigin = [0, 0];\r\n    var scale = [scaleX, scaleY];\r\n    var translate = [0, 0];\r\n    if (align !== 1) {\r\n        var xAlign = (align - 2) % 3;\r\n        var yAlign = Math.floor((align - 2) / 3);\r\n        svgOrigin[0] = viewBoxWidth * xAlign / 2;\r\n        svgOrigin[1] = viewBoxHeight * yAlign / 2;\r\n        var scaleDimension = meetOrSlice === 2 ? Math.max(scaleY, scaleX) : Math.min(scaleX, scaleY);\r\n        scale[0] = scaleDimension;\r\n        scale[1] = scaleDimension;\r\n        translate[0] = (clientWidth - viewBoxWidth) / 2 * xAlign;\r\n        translate[1] = (clientHeight - viewBoxHeight) / 2 * yAlign;\r\n    }\r\n    var scaleMatrix = createScaleMatrix(scale, n);\r\n    _a = __read(translate, 2), scaleMatrix[n * (n - 1)] = _a[0], scaleMatrix[n * (n - 1) + 1] = _a[1];\r\n    return getAbsoluteMatrix(scaleMatrix, n, svgOrigin);\r\n}\r\nfunction getSVGGraphicsOffset(el, origin, isGTarget) {\r\n    if (!el.getBBox || !isGTarget && el.tagName.toLowerCase() === \"g\") {\r\n        return [0, 0, 0, 0];\r\n    }\r\n    var bbox = el.getBBox();\r\n    var viewBox = getSVGViewBox(el.ownerSVGElement);\r\n    var left = bbox.x - viewBox.x;\r\n    var top = bbox.y - viewBox.y;\r\n    return [\r\n        left,\r\n        top,\r\n        origin[0] - left,\r\n        origin[1] - top,\r\n    ];\r\n}\r\nfunction calculatePosition(matrix, pos, n) {\r\n    return calculate(matrix, convertPositionMatrix(pos, n), n);\r\n}\r\nfunction calculatePoses(matrix, width, height, n) {\r\n    return [[0, 0], [width, 0], [0, height], [width, height]].map(function (pos) { return calculatePosition(matrix, pos, n); });\r\n}\r\nfunction getRect(poses) {\r\n    var posesX = poses.map(function (pos) { return pos[0]; });\r\n    var posesY = poses.map(function (pos) { return pos[1]; });\r\n    var left = Math.min.apply(Math, __spreadArray([], __read(posesX), false));\r\n    var top = Math.min.apply(Math, __spreadArray([], __read(posesY), false));\r\n    var right = Math.max.apply(Math, __spreadArray([], __read(posesX), false));\r\n    var bottom = Math.max.apply(Math, __spreadArray([], __read(posesY), false));\r\n    var rectWidth = right - left;\r\n    var rectHeight = bottom - top;\r\n    return {\r\n        left: left,\r\n        top: top,\r\n        right: right,\r\n        bottom: bottom,\r\n        width: rectWidth,\r\n        height: rectHeight,\r\n    };\r\n}\r\nfunction calculateRect(matrix, width, height, n) {\r\n    var poses = calculatePoses(matrix, width, height, n);\r\n    return getRect(poses);\r\n}\r\nfunction getSVGOffset(offsetInfo, targetInfo, container, n, beforeMatrix) {\r\n    var _a;\r\n    var target = offsetInfo.target;\r\n    var origin = offsetInfo.origin;\r\n    var targetMatrix = targetInfo.matrix;\r\n    var _b = getSize(target), width = _b.offsetWidth, height = _b.offsetHeight;\r\n    var containerClientRect = container.getBoundingClientRect();\r\n    var margin = [0, 0];\r\n    if (container === getDocumentBody(container)) {\r\n        margin = getBodyOffset(target, true);\r\n    }\r\n    var rect = target.getBoundingClientRect();\r\n    var rectLeft = rect.left - containerClientRect.left + container.scrollLeft\r\n        - (container.clientLeft || 0) + margin[0];\r\n    var rectTop = rect.top - containerClientRect.top + container.scrollTop\r\n        - (container.clientTop || 0) + margin[1];\r\n    var rectWidth = rect.width;\r\n    var rectHeight = rect.height;\r\n    var mat = multiplies(n, beforeMatrix, targetMatrix);\r\n    var _c = calculateRect(mat, width, height, n), prevLeft = _c.left, prevTop = _c.top, prevWidth = _c.width, prevHeight = _c.height;\r\n    var posOrigin = calculatePosition(mat, origin, n);\r\n    var prevOrigin = minus(posOrigin, [prevLeft, prevTop]);\r\n    var rectOrigin = [\r\n        rectLeft + prevOrigin[0] * rectWidth / prevWidth,\r\n        rectTop + prevOrigin[1] * rectHeight / prevHeight,\r\n    ];\r\n    var offset = [0, 0];\r\n    var count = 0;\r\n    while (++count < 10) {\r\n        var inverseBeforeMatrix = invert(beforeMatrix, n);\r\n        _a = __read(minus(calculatePosition(inverseBeforeMatrix, rectOrigin, n), calculatePosition(inverseBeforeMatrix, posOrigin, n)), 2), offset[0] = _a[0], offset[1] = _a[1];\r\n        var mat2 = multiplies(n, beforeMatrix, createOriginMatrix(offset, n), targetMatrix);\r\n        var _d = calculateRect(mat2, width, height, n), nextLeft = _d.left, nextTop = _d.top;\r\n        var distLeft = nextLeft - rectLeft;\r\n        var distTop = nextTop - rectTop;\r\n        if (abs(distLeft) < 2 && abs(distTop) < 2) {\r\n            break;\r\n        }\r\n        rectOrigin[0] -= distLeft;\r\n        rectOrigin[1] -= distTop;\r\n    }\r\n    return offset.map(function (p) { return Math.round(p); });\r\n}\r\nfunction calculateMoveableClientPositions(rootMatrix, poses, rootClientRect) {\r\n    var is3d = rootMatrix.length === 16;\r\n    var n = is3d ? 4 : 3;\r\n    var rootPoses = poses.map(function (pos) { return calculatePosition(rootMatrix, pos, n); });\r\n    var left = rootClientRect.left, top = rootClientRect.top;\r\n    return rootPoses.map(function (pos) {\r\n        return [pos[0] + left, pos[1] + top];\r\n    });\r\n}\r\nfunction getDistSize(vec) {\r\n    return Math.sqrt(vec[0] * vec[0] + vec[1] * vec[1]);\r\n}\r\nfunction getDiagonalSize(pos1, pos2) {\r\n    return getDistSize([\r\n        pos2[0] - pos1[0],\r\n        pos2[1] - pos1[1],\r\n    ]);\r\n}\r\nfunction getLineStyle(pos1, pos2, zoom, rad) {\r\n    if (zoom === void 0) { zoom = 1; }\r\n    if (rad === void 0) { rad = getRad(pos1, pos2); }\r\n    var width = getDiagonalSize(pos1, pos2);\r\n    return {\r\n        transform: \"translateY(-50%) translate(\".concat(pos1[0], \"px, \").concat(pos1[1], \"px) rotate(\").concat(rad, \"rad) scaleY(\").concat(zoom, \")\"),\r\n        width: \"\".concat(width, \"px\"),\r\n    };\r\n}\r\nfunction getControlTransform(rotation, zoom) {\r\n    var poses = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        poses[_i - 2] = arguments[_i];\r\n    }\r\n    var length = poses.length;\r\n    var x = poses.reduce(function (prev, pos) { return prev + pos[0]; }, 0) / length;\r\n    var y = poses.reduce(function (prev, pos) { return prev + pos[1]; }, 0) / length;\r\n    return {\r\n        transform: \"translateZ(0px) translate(\".concat(x, \"px, \").concat(y, \"px) rotate(\").concat(rotation, \"rad) scale(\").concat(zoom, \")\"),\r\n    };\r\n}\r\nfunction getProps(props, ableName) {\r\n    var self = props[ableName];\r\n    if (isObject(self)) {\r\n        return __assign(__assign({}, props), self);\r\n    }\r\n    return props;\r\n}\r\nfunction getSize(target) {\r\n    var hasOffset = target && !isUndefined(target.offsetWidth);\r\n    var offsetWidth = 0;\r\n    var offsetHeight = 0;\r\n    var clientWidth = 0;\r\n    var clientHeight = 0;\r\n    var cssWidth = 0;\r\n    var cssHeight = 0;\r\n    var contentWidth = 0;\r\n    var contentHeight = 0;\r\n    var minWidth = 0;\r\n    var minHeight = 0;\r\n    var minOffsetWidth = 0;\r\n    var minOffsetHeight = 0;\r\n    var maxWidth = Infinity;\r\n    var maxHeight = Infinity;\r\n    var maxOffsetWidth = Infinity;\r\n    var maxOffsetHeight = Infinity;\r\n    var inlineCSSWidth = 0;\r\n    var inlineCSSHeight = 0;\r\n    var svg = false;\r\n    if (target) {\r\n        if (!hasOffset && target.tagName.toLowerCase() !== \"svg\") {\r\n            // check svg elements\r\n            var bbox = target.getBBox();\r\n            svg = true;\r\n            offsetWidth = bbox.width;\r\n            offsetHeight = bbox.height;\r\n            cssWidth = offsetWidth;\r\n            cssHeight = offsetHeight;\r\n            contentWidth = offsetWidth;\r\n            contentHeight = offsetHeight;\r\n            clientWidth = offsetWidth;\r\n            clientHeight = offsetHeight;\r\n        }\r\n        else {\r\n            // check html elements\r\n            var getStyle = getCachedStyle(target);\r\n            var targetStyle = target.style;\r\n            var boxSizing = getStyle(\"boxSizing\") === \"border-box\";\r\n            var borderLeft = parseFloat(getStyle(\"borderLeftWidth\")) || 0;\r\n            var borderRight = parseFloat(getStyle(\"borderRightWidth\")) || 0;\r\n            var borderTop = parseFloat(getStyle(\"borderTopWidth\")) || 0;\r\n            var borderBottom = parseFloat(getStyle(\"borderBottomWidth\")) || 0;\r\n            var paddingLeft = parseFloat(getStyle(\"paddingLeft\")) || 0;\r\n            var paddingRight = parseFloat(getStyle(\"paddingRight\")) || 0;\r\n            var paddingTop = parseFloat(getStyle(\"paddingTop\")) || 0;\r\n            var paddingBottom = parseFloat(getStyle(\"paddingBottom\")) || 0;\r\n            var horizontalPadding = paddingLeft + paddingRight;\r\n            var verticalPadding = paddingTop + paddingBottom;\r\n            var horizontalBorder = borderLeft + borderRight;\r\n            var verticalBorder = borderTop + borderBottom;\r\n            var horizontalOffset = horizontalPadding + horizontalBorder;\r\n            var verticalOffset = verticalPadding + verticalBorder;\r\n            var position = getStyle(\"position\");\r\n            var containerWidth = 0;\r\n            var containerHeight = 0;\r\n            // SVGSVGElement, HTMLElement\r\n            if (\"clientLeft\" in target) {\r\n                var parentElement = null;\r\n                if (position === \"absolute\") {\r\n                    var offsetInfo = getOffsetInfo(target, getDocumentBody(target));\r\n                    parentElement = offsetInfo.offsetParent;\r\n                }\r\n                else {\r\n                    parentElement = target.parentElement;\r\n                }\r\n                if (parentElement) {\r\n                    var getParentStyle = getCachedStyle(parentElement);\r\n                    containerWidth = parseFloat(getParentStyle(\"width\"));\r\n                    containerHeight = parseFloat(getParentStyle(\"height\"));\r\n                }\r\n            }\r\n            minWidth = Math.max(horizontalPadding, convertUnitSize(getStyle(\"minWidth\"), containerWidth) || 0);\r\n            minHeight = Math.max(verticalPadding, convertUnitSize(getStyle(\"minHeight\"), containerHeight) || 0);\r\n            maxWidth = convertUnitSize(getStyle(\"maxWidth\"), containerWidth);\r\n            maxHeight = convertUnitSize(getStyle(\"maxHeight\"), containerHeight);\r\n            if (isNaN(maxWidth)) {\r\n                maxWidth = Infinity;\r\n            }\r\n            if (isNaN(maxHeight)) {\r\n                maxHeight = Infinity;\r\n            }\r\n            inlineCSSWidth = convertUnitSize(targetStyle.width, 0) || 0;\r\n            inlineCSSHeight = convertUnitSize(targetStyle.height, 0) || 0;\r\n            cssWidth = parseFloat(getStyle(\"width\")) || 0;\r\n            cssHeight = parseFloat(getStyle(\"height\")) || 0;\r\n            contentWidth = abs(cssWidth - inlineCSSWidth) < 1\r\n                ? between(minWidth, inlineCSSWidth || cssWidth, maxWidth)\r\n                : cssWidth;\r\n            contentHeight = abs(cssHeight - inlineCSSHeight) < 1\r\n                ? between(minHeight, inlineCSSHeight || cssHeight, maxHeight)\r\n                : cssHeight;\r\n            offsetWidth = contentWidth;\r\n            offsetHeight = contentHeight;\r\n            clientWidth = contentWidth;\r\n            clientHeight = contentHeight;\r\n            if (boxSizing) {\r\n                maxOffsetWidth = maxWidth;\r\n                maxOffsetHeight = maxHeight;\r\n                minOffsetWidth = minWidth;\r\n                minOffsetHeight = minHeight;\r\n                contentWidth = offsetWidth - horizontalOffset;\r\n                contentHeight = offsetHeight - verticalOffset;\r\n            }\r\n            else {\r\n                maxOffsetWidth = maxWidth + horizontalOffset;\r\n                maxOffsetHeight = maxHeight + verticalOffset;\r\n                minOffsetWidth = minWidth + horizontalOffset;\r\n                minOffsetHeight = minHeight + verticalOffset;\r\n                offsetWidth = contentWidth + horizontalOffset;\r\n                offsetHeight = contentHeight + verticalOffset;\r\n            }\r\n            clientWidth = contentWidth + horizontalPadding;\r\n            clientHeight = contentHeight + verticalPadding;\r\n        }\r\n    }\r\n    return {\r\n        svg: svg,\r\n        offsetWidth: offsetWidth,\r\n        offsetHeight: offsetHeight,\r\n        clientWidth: clientWidth,\r\n        clientHeight: clientHeight,\r\n        contentWidth: contentWidth,\r\n        contentHeight: contentHeight,\r\n        inlineCSSWidth: inlineCSSWidth,\r\n        inlineCSSHeight: inlineCSSHeight,\r\n        cssWidth: cssWidth,\r\n        cssHeight: cssHeight,\r\n        minWidth: minWidth,\r\n        minHeight: minHeight,\r\n        maxWidth: maxWidth,\r\n        maxHeight: maxHeight,\r\n        minOffsetWidth: minOffsetWidth,\r\n        minOffsetHeight: minOffsetHeight,\r\n        maxOffsetWidth: maxOffsetWidth,\r\n        maxOffsetHeight: maxOffsetHeight,\r\n    };\r\n}\r\nfunction getRotationRad(poses, direction) {\r\n    return getRad(direction > 0 ? poses[0] : poses[1], direction > 0 ? poses[1] : poses[0]);\r\n}\r\nfunction resetClientRect() {\r\n    return {\r\n        left: 0, top: 0,\r\n        width: 0, height: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        clientLeft: 0, clientTop: 0,\r\n        clientWidth: 0, clientHeight: 0,\r\n        scrollWidth: 0, scrollHeight: 0,\r\n    };\r\n}\r\nfunction getExtendsRect(el, rect) {\r\n    var isRoot = el === getDocumentBody(el) || el === getDocumentElement(el);\r\n    var extendsRect = {\r\n        clientLeft: el.clientLeft,\r\n        clientTop: el.clientTop,\r\n        clientWidth: el.clientWidth,\r\n        clientHeight: el.clientHeight,\r\n        scrollWidth: el.scrollWidth,\r\n        scrollHeight: el.scrollHeight,\r\n        overflow: false,\r\n    };\r\n    if (isRoot) {\r\n        extendsRect.clientHeight = Math.max(rect.height, extendsRect.clientHeight);\r\n        extendsRect.scrollHeight = Math.max(rect.height, extendsRect.scrollHeight);\r\n    }\r\n    extendsRect.overflow = getCachedStyle(el)(\"overflow\") !== \"visible\";\r\n    return __assign(__assign({}, rect), extendsRect);\r\n}\r\nfunction getClientRectByPosition(position, base, el, isExtends) {\r\n    var left = position.left, right = position.right, top = position.top, bottom = position.bottom;\r\n    var baseTop = base.top;\r\n    var baseLeft = base.left;\r\n    var rect = {\r\n        left: baseLeft + left,\r\n        top: baseTop + top,\r\n        right: baseLeft + right,\r\n        bottom: baseTop + bottom,\r\n        width: right - left,\r\n        height: bottom - top,\r\n    };\r\n    if (el && isExtends) {\r\n        return getExtendsRect(el, rect);\r\n    }\r\n    return rect;\r\n}\r\nfunction getClientRect(el, isExtends) {\r\n    var left = 0;\r\n    var top = 0;\r\n    var width = 0;\r\n    var height = 0;\r\n    // let isRoot = false;\r\n    if (el) {\r\n        var clientRect = el.getBoundingClientRect();\r\n        left = clientRect.left;\r\n        top = clientRect.top;\r\n        width = clientRect.width;\r\n        height = clientRect.height;\r\n    }\r\n    var rect = {\r\n        left: left,\r\n        top: top,\r\n        width: width,\r\n        height: height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    if (el && isExtends) {\r\n        return getExtendsRect(el, rect);\r\n    }\r\n    return rect;\r\n}\r\nfunction getTotalOrigin(moveable) {\r\n    var _a = moveable.props, groupable = _a.groupable, svgOrigin = _a.svgOrigin;\r\n    var _b = moveable.getState(), offsetWidth = _b.offsetWidth, offsetHeight = _b.offsetHeight, svg = _b.svg, transformOrigin = _b.transformOrigin;\r\n    if (!groupable && svg && svgOrigin) {\r\n        return convertTransformOriginArray(svgOrigin, offsetWidth, offsetHeight);\r\n    }\r\n    return transformOrigin;\r\n}\r\nfunction getTotalDirection(parentDirection, isPinch, inputEvent, datas) {\r\n    var direction;\r\n    if (parentDirection) {\r\n        direction = parentDirection;\r\n    }\r\n    else if (isPinch) {\r\n        direction = [0, 0];\r\n    }\r\n    else {\r\n        var target = inputEvent.target;\r\n        direction = getDirection(target, datas);\r\n    }\r\n    return direction;\r\n}\r\nfunction getDirection(target, datas) {\r\n    if (!target) {\r\n        return;\r\n    }\r\n    var deg = target.getAttribute(\"data-rotation\") || \"\";\r\n    var direciton = target.getAttribute(\"data-direction\");\r\n    datas.deg = deg;\r\n    if (!direciton) {\r\n        return;\r\n    }\r\n    var dir = [0, 0];\r\n    (direciton.indexOf(\"w\") > -1) && (dir[0] = -1);\r\n    (direciton.indexOf(\"e\") > -1) && (dir[0] = 1);\r\n    (direciton.indexOf(\"n\") > -1) && (dir[1] = -1);\r\n    (direciton.indexOf(\"s\") > -1) && (dir[1] = 1);\r\n    return dir;\r\n}\r\nfunction getAbsolutePoses(poses, dist) {\r\n    return [\r\n        plus(dist, poses[0]),\r\n        plus(dist, poses[1]),\r\n        plus(dist, poses[2]),\r\n        plus(dist, poses[3]),\r\n    ];\r\n}\r\nfunction getAbsolutePosesByState(_a) {\r\n    var left = _a.left, top = _a.top, pos1 = _a.pos1, pos2 = _a.pos2, pos3 = _a.pos3, pos4 = _a.pos4;\r\n    return getAbsolutePoses([pos1, pos2, pos3, pos4], [left, top]);\r\n}\r\nfunction unsetAbles(self, isControl) {\r\n    self[isControl ? \"controlAbles\" : \"targetAbles\"].forEach(function (able) {\r\n        able.unset && able.unset(self);\r\n    });\r\n}\r\nfunction unsetGesto(self, isControl) {\r\n    var gestoName = isControl ? \"controlGesto\" : \"targetGesto\";\r\n    var gesto = self[gestoName];\r\n    if ((gesto === null || gesto === void 0 ? void 0 : gesto.isIdle()) === false) {\r\n        unsetAbles(self, isControl);\r\n    }\r\n    gesto === null || gesto === void 0 ? void 0 : gesto.unset();\r\n    self[gestoName] = null;\r\n}\r\nfunction fillCSSObject(style, resolvedEvent) {\r\n    if (resolvedEvent) {\r\n        var originalDatas = getBeforeRenderableDatas(resolvedEvent);\r\n        originalDatas.nextStyle = __assign(__assign({}, originalDatas.nextStyle), style);\r\n    }\r\n    return {\r\n        style: style,\r\n        cssText: getKeys(style).map(function (name) { return \"\".concat(decamelize(name, \"-\"), \": \").concat(style[name], \";\"); }).join(\"\"),\r\n    };\r\n}\r\nfunction fillAfterTransform(prevEvent, nextEvent, resolvedEvent) {\r\n    var afterTransform = nextEvent.afterTransform || nextEvent.transform;\r\n    return __assign(__assign({}, fillCSSObject(__assign(__assign(__assign({}, prevEvent.style), nextEvent.style), { transform: afterTransform }), resolvedEvent)), { afterTransform: afterTransform, transform: prevEvent.transform });\r\n}\r\nfunction fillParams(moveable, e, params, isBeforeEvent) {\r\n    var datas = e.datas;\r\n    if (!datas.datas) {\r\n        datas.datas = {};\r\n    }\r\n    var nextParams = __assign(__assign({}, params), { target: moveable.state.target, clientX: e.clientX, clientY: e.clientY, inputEvent: e.inputEvent, currentTarget: moveable, moveable: moveable, datas: datas.datas, isRequest: e.isRequest, isRequestChild: e.isRequestChild, isFirstDrag: !!e.isFirstDrag, isTrusted: e.isTrusted !== false, stopAble: function () {\r\n            datas.isEventStart = false;\r\n        }, stopDrag: function () {\r\n            var _a;\r\n            (_a = e.stop) === null || _a === void 0 ? void 0 : _a.call(e);\r\n        } });\r\n    if (!datas.isStartEvent) {\r\n        datas.isStartEvent = true;\r\n    }\r\n    else if (!isBeforeEvent) {\r\n        datas.lastEvent = nextParams;\r\n    }\r\n    return nextParams;\r\n}\r\nfunction fillEndParams(moveable, e, params) {\r\n    var datas = e.datas;\r\n    var isDrag = \"isDrag\" in params ? params.isDrag : e.isDrag;\r\n    if (!datas.datas) {\r\n        datas.datas = {};\r\n    }\r\n    return __assign(__assign({ isDrag: isDrag }, params), { moveable: moveable, target: moveable.state.target, clientX: e.clientX, clientY: e.clientY, inputEvent: e.inputEvent, currentTarget: moveable, lastEvent: datas.lastEvent, isDouble: e.isDouble, datas: datas.datas, isFirstDrag: !!e.isFirstDrag });\r\n}\r\nfunction catchEvent(moveable, name, callback) {\r\n    moveable._emitter.on(name, callback);\r\n}\r\nfunction triggerEvent(moveable, name, params, isManager, isRequest) {\r\n    return moveable.triggerEvent(name, params, isManager, isRequest);\r\n}\r\nfunction getComputedStyle(el, pseudoElt) {\r\n    return getWindow(el).getComputedStyle(el, pseudoElt);\r\n}\r\nfunction filterAbles(ables, methods, triggerAblesSimultaneously) {\r\n    var enabledAbles = {};\r\n    var ableGroups = {};\r\n    return ables.filter(function (able) {\r\n        var name = able.name;\r\n        if (enabledAbles[name] || !methods.some(function (method) { return able[method]; })) {\r\n            return false;\r\n        }\r\n        if (!triggerAblesSimultaneously && able.ableGroup) {\r\n            if (ableGroups[able.ableGroup]) {\r\n                return false;\r\n            }\r\n            ableGroups[able.ableGroup] = true;\r\n        }\r\n        enabledAbles[name] = true;\r\n        return true;\r\n    });\r\n}\r\nfunction equals(a1, a2) {\r\n    return a1 === a2 || (a1 == null && a2 == null);\r\n}\r\nfunction selectValue() {\r\n    var values = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        values[_i] = arguments[_i];\r\n    }\r\n    var length = values.length - 1;\r\n    for (var i = 0; i < length; ++i) {\r\n        var value = values[i];\r\n        if (!isUndefined(value)) {\r\n            return value;\r\n        }\r\n    }\r\n    return values[length];\r\n}\r\nfunction groupBy(arr, func) {\r\n    var groups = [];\r\n    var groupKeys = [];\r\n    arr.forEach(function (el, index) {\r\n        var groupKey = func(el, index, arr);\r\n        var keyIndex = groupKeys.indexOf(groupKey);\r\n        var group = groups[keyIndex] || [];\r\n        if (keyIndex === -1) {\r\n            groupKeys.push(groupKey);\r\n            groups.push(group);\r\n        }\r\n        group.push(el);\r\n    });\r\n    return groups;\r\n}\r\nfunction groupByMap(arr, func) {\r\n    var groups = [];\r\n    var groupKeys = {};\r\n    arr.forEach(function (el, index) {\r\n        var groupKey = func(el, index, arr);\r\n        var group = groupKeys[groupKey];\r\n        if (!group) {\r\n            group = [];\r\n            groupKeys[groupKey] = group;\r\n            groups.push(group);\r\n        }\r\n        group.push(el);\r\n    });\r\n    return groups;\r\n}\r\nfunction flat(arr) {\r\n    return arr.reduce(function (prev, cur) {\r\n        return prev.concat(cur);\r\n    }, []);\r\n}\r\nfunction maxOffset() {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    args.sort(function (a, b) { return abs(b) - abs(a); });\r\n    return args[0];\r\n}\r\nfunction calculateInversePosition(matrix, pos, n) {\r\n    return calculate(invert(matrix, n), convertPositionMatrix(pos, n), n);\r\n}\r\nfunction convertDragDist(state, e) {\r\n    var _a;\r\n    var is3d = state.is3d, rootMatrix = state.rootMatrix;\r\n    var n = is3d ? 4 : 3;\r\n    _a = __read(calculateInversePosition(rootMatrix, [e.distX, e.distY], n), 2), e.distX = _a[0], e.distY = _a[1];\r\n    return e;\r\n}\r\nfunction calculatePadding(matrix, pos, added, n) {\r\n    if (!added[0] && !added[1]) {\r\n        return pos;\r\n    }\r\n    var xAdded = calculatePosition(matrix, [normalized(added[0]), 0], n);\r\n    var yAdded = calculatePosition(matrix, [0, normalized(added[1])], n);\r\n    var nextAdded = calculatePosition(matrix, [\r\n        added[0] / getDistSize(xAdded),\r\n        added[1] / getDistSize(yAdded),\r\n    ], n);\r\n    return plus(pos, nextAdded);\r\n}\r\nfunction convertCSSSize(value, size, isRelative) {\r\n    return isRelative ? \"\".concat(value / size * 100, \"%\") : \"\".concat(value, \"px\");\r\n}\r\nfunction getTinyDist(v) {\r\n    return abs(v) <= TINY_NUM ? 0 : v;\r\n}\r\nfunction getDirectionViewClassName(ableName) {\r\n    return function (moveable) {\r\n        if (!moveable.isDragging(ableName)) {\r\n            return \"\";\r\n        }\r\n        var data = getGestoData(moveable, ableName);\r\n        var deg = data.deg;\r\n        if (!deg) {\r\n            return \"\";\r\n        }\r\n        return prefix(\"view-control-rotation\".concat(deg));\r\n    };\r\n}\r\nfunction getDirectionCondition(ableName, checkAbles) {\r\n    if (checkAbles === void 0) { checkAbles = [ableName]; }\r\n    return function (moveable, e) {\r\n        if (e.isRequest) {\r\n            if (checkAbles.some(function (name) { return e.requestAble === name; })) {\r\n                return e.parentDirection;\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        }\r\n        var target = e.inputEvent.target;\r\n        return hasClass(target, prefix(\"direction\")) && (!ableName || hasClass(target, prefix(ableName)));\r\n    };\r\n}\r\nfunction convertTransformInfo(transforms, state, index) {\r\n    var _a;\r\n    var matrixInfos = parse(transforms, {\r\n        \"x%\": function (v) { return v / 100 * state.offsetWidth; },\r\n        \"y%\": function (v) { return v / 100 * state.offsetHeight; },\r\n    });\r\n    var beforeFunctionTexts = transforms.slice(0, index < 0 ? undefined : index);\r\n    var beforeFunctionTexts2 = transforms.slice(0, index < 0 ? undefined : index + 1);\r\n    var targetFunctionText = transforms[index] || \"\";\r\n    var afterFunctionTexts = index < 0 ? [] : transforms.slice(index);\r\n    var afterFunctionTexts2 = index < 0 ? [] : transforms.slice(index + 1);\r\n    var beforeFunctions = matrixInfos.slice(0, index < 0 ? undefined : index);\r\n    var beforeFunctions2 = matrixInfos.slice(0, index < 0 ? undefined : index + 1);\r\n    var targetFunction = (_a = matrixInfos[index]) !== null && _a !== void 0 ? _a : parse([\"\"])[0];\r\n    var afterFunctions = index < 0 ? [] : matrixInfos.slice(index);\r\n    var afterFunctions2 = index < 0 ? [] : matrixInfos.slice(index + 1);\r\n    var targetFunctions = targetFunction ? [targetFunction] : [];\r\n    var beforeFunctionMatrix = toMat(beforeFunctions);\r\n    var beforeFunctionMatrix2 = toMat(beforeFunctions2);\r\n    var afterFunctionMatrix = toMat(afterFunctions);\r\n    var afterFunctionMatrix2 = toMat(afterFunctions2);\r\n    var allFunctionMatrix = multiply(beforeFunctionMatrix, afterFunctionMatrix, 4);\r\n    return {\r\n        transforms: transforms,\r\n        beforeFunctionMatrix: beforeFunctionMatrix,\r\n        beforeFunctionMatrix2: beforeFunctionMatrix2,\r\n        targetFunctionMatrix: toMat(targetFunctions),\r\n        afterFunctionMatrix: afterFunctionMatrix,\r\n        afterFunctionMatrix2: afterFunctionMatrix2,\r\n        allFunctionMatrix: allFunctionMatrix,\r\n        beforeFunctions: beforeFunctions,\r\n        beforeFunctions2: beforeFunctions2,\r\n        targetFunction: targetFunctions[0],\r\n        afterFunctions: afterFunctions,\r\n        afterFunctions2: afterFunctions2,\r\n        beforeFunctionTexts: beforeFunctionTexts,\r\n        beforeFunctionTexts2: beforeFunctionTexts2,\r\n        targetFunctionText: targetFunctionText,\r\n        afterFunctionTexts: afterFunctionTexts,\r\n        afterFunctionTexts2: afterFunctionTexts2,\r\n    };\r\n}\r\nfunction isArrayFormat(arr) {\r\n    if (!arr || !isObject(arr)) {\r\n        return false;\r\n    }\r\n    if (isNode(arr)) {\r\n        return false;\r\n    }\r\n    return isArray(arr) || \"length\" in arr;\r\n}\r\nfunction getRefTarget(target, isSelector) {\r\n    if (!target) {\r\n        return null;\r\n    }\r\n    if (isNode(target)) {\r\n        return target;\r\n    }\r\n    if (isString(target)) {\r\n        if (isSelector) {\r\n            return document.querySelector(target);\r\n        }\r\n        return target;\r\n    }\r\n    if (isFunction(target)) {\r\n        return target();\r\n    }\r\n    if (isWindow(target)) {\r\n        return target;\r\n    }\r\n    if (\"current\" in target) {\r\n        return target.current;\r\n    }\r\n    return target;\r\n}\r\nfunction getRefTargets(targets, isSelector) {\r\n    if (!targets) {\r\n        return [];\r\n    }\r\n    var userTargets = isArrayFormat(targets) ? [].slice.call(targets) : [targets];\r\n    return userTargets.reduce(function (prev, target) {\r\n        if (isString(target) && isSelector) {\r\n            return __spreadArray(__spreadArray([], __read(prev), false), __read([].slice.call(document.querySelectorAll(target))), false);\r\n        }\r\n        if (isArray(target)) {\r\n            prev.push(getRefTargets(target, isSelector));\r\n        }\r\n        else {\r\n            prev.push(getRefTarget(target, isSelector));\r\n        }\r\n        return prev;\r\n    }, []);\r\n}\r\nfunction getAbsoluteRotation(pos1, pos2, direction) {\r\n    var deg = getRad(pos1, pos2) / Math.PI * 180;\r\n    deg = direction >= 0 ? deg : 180 - deg;\r\n    deg = deg >= 0 ? deg : 360 + deg;\r\n    return deg;\r\n}\r\nfunction getDragDistByState(state, dist) {\r\n    var rootMatrix = state.rootMatrix, is3d = state.is3d;\r\n    var n = is3d ? 4 : 3;\r\n    var inverseMatrix = invert(rootMatrix, n);\r\n    if (!is3d) {\r\n        inverseMatrix = convertDimension(inverseMatrix, 3, 4);\r\n    }\r\n    inverseMatrix[12] = 0;\r\n    inverseMatrix[13] = 0;\r\n    inverseMatrix[14] = 0;\r\n    return calculateMatrixDist(inverseMatrix, dist);\r\n}\r\nfunction getSizeDistByDist(startSize, dist, ratio, direction, keepRatio) {\r\n    var _a = __read(startSize, 2), startOffsetWidth = _a[0], startOffsetHeight = _a[1];\r\n    var distWidth = 0;\r\n    var distHeight = 0;\r\n    if (keepRatio && startOffsetWidth && startOffsetHeight) {\r\n        var rad = getRad([0, 0], dist);\r\n        var standardRad = getRad([0, 0], direction);\r\n        var size = getDistSize(dist);\r\n        var signSize = Math.cos(rad - standardRad) * size;\r\n        if (!direction[0]) {\r\n            // top, bottom\r\n            distHeight = signSize;\r\n            distWidth = distHeight * ratio;\r\n        }\r\n        else if (!direction[1]) {\r\n            // left, right\r\n            distWidth = signSize;\r\n            distHeight = distWidth / ratio;\r\n        }\r\n        else {\r\n            // two-way\r\n            var startWidthSize = direction[0] * startOffsetWidth;\r\n            var startHeightSize = direction[1] * startOffsetHeight;\r\n            var secondRad = Math.atan2(startWidthSize + dist[0], startHeightSize + dist[1]);\r\n            var firstRad = Math.atan2(startWidthSize, startHeightSize);\r\n            if (secondRad < 0) {\r\n                secondRad += Math.PI * 2;\r\n            }\r\n            if (firstRad < 0) {\r\n                firstRad += Math.PI * 2;\r\n            }\r\n            var rad_1 = 0;\r\n            if (abs(secondRad - firstRad) < Math.PI / 2 || abs(secondRad - firstRad) > Math.PI / 2 * 3) {\r\n                rad_1 = secondRad - firstRad;\r\n            }\r\n            else {\r\n                firstRad += Math.PI;\r\n                rad_1 = secondRad - firstRad;\r\n            }\r\n            if (rad_1 > Math.PI * 2) {\r\n                rad_1 -= Math.PI * 2;\r\n            }\r\n            else if (rad_1 > Math.PI) {\r\n                rad_1 = 2 * Math.PI - rad_1;\r\n            }\r\n            else if (rad_1 < -Math.PI) {\r\n                rad_1 = -2 * Math.PI - rad_1;\r\n            }\r\n            //       180\r\n            // -1, -1,  // 1, -1\r\n            // 270            90\r\n            // -1, 1    // 1, 1\r\n            //       0\r\n            var distSize = getDistSize([startWidthSize + dist[0], startHeightSize + dist[1]]) * Math.cos(rad_1);\r\n            distWidth = distSize * Math.sin(firstRad) - startWidthSize;\r\n            distHeight = distSize * Math.cos(firstRad) - startHeightSize;\r\n            if (direction[0] < 0) {\r\n                distWidth *= -1;\r\n            }\r\n            if (direction[1] < 0) {\r\n                distHeight *= -1;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        distWidth = direction[0] * dist[0];\r\n        distHeight = direction[1] * dist[1];\r\n    }\r\n    return [distWidth, distHeight];\r\n}\r\nfunction getOffsetSizeDist(sizeDirection, keepRatio, datas, e) {\r\n    var _a;\r\n    var ratio = datas.ratio, startOffsetWidth = datas.startOffsetWidth, startOffsetHeight = datas.startOffsetHeight;\r\n    var distWidth = 0;\r\n    var distHeight = 0;\r\n    var distX = e.distX, distY = e.distY, pinchScale = e.pinchScale, parentDistance = e.parentDistance, parentDist = e.parentDist, parentScale = e.parentScale;\r\n    var startFixedDirection = datas.fixedDirection;\r\n    var directionsDists = [0, 1].map(function (index) {\r\n        return abs(sizeDirection[index] - startFixedDirection[index]);\r\n    });\r\n    var directionRatios = [0, 1].map(function (index) {\r\n        var dist = directionsDists[index];\r\n        if (dist !== 0) {\r\n            dist = 2 / dist;\r\n        }\r\n        return dist;\r\n    });\r\n    if (parentDist) {\r\n        distWidth = parentDist[0];\r\n        distHeight = parentDist[1];\r\n        if (keepRatio) {\r\n            if (!distWidth) {\r\n                distWidth = distHeight * ratio;\r\n            }\r\n            else if (!distHeight) {\r\n                distHeight = distWidth / ratio;\r\n            }\r\n        }\r\n    }\r\n    else if (isNumber(pinchScale)) {\r\n        distWidth = (pinchScale - 1) * startOffsetWidth;\r\n        distHeight = (pinchScale - 1) * startOffsetHeight;\r\n    }\r\n    else if (parentScale) {\r\n        distWidth = (parentScale[0] - 1) * startOffsetWidth;\r\n        distHeight = (parentScale[1] - 1) * startOffsetHeight;\r\n    }\r\n    else if (parentDistance) {\r\n        var scaleX = startOffsetWidth * directionsDists[0];\r\n        var scaleY = startOffsetHeight * directionsDists[1];\r\n        var ratioDistance = getDistSize([scaleX, scaleY]);\r\n        distWidth = parentDistance / ratioDistance * scaleX * directionRatios[0];\r\n        distHeight = parentDistance / ratioDistance * scaleY * directionRatios[1];\r\n    }\r\n    else {\r\n        var dist_1 = getDragDist({ datas: datas, distX: distX, distY: distY });\r\n        dist_1 = directionRatios.map(function (ratio, i) {\r\n            return dist_1[i] * ratio;\r\n        });\r\n        _a = __read(getSizeDistByDist([startOffsetWidth, startOffsetHeight], dist_1, ratio, sizeDirection, keepRatio), 2), distWidth = _a[0], distHeight = _a[1];\r\n    }\r\n    return {\r\n        // direction,\r\n        // sizeDirection,\r\n        distWidth: distWidth,\r\n        distHeight: distHeight,\r\n    };\r\n}\r\nfunction convertTransformUnit(origin, xy) {\r\n    if (xy) {\r\n        if (origin === \"left\") {\r\n            return { x: \"0%\", y: \"50%\" };\r\n        }\r\n        else if (origin === \"top\") {\r\n            return { x: \"50%\", y: \"50%\" };\r\n        }\r\n        else if (origin === \"center\") {\r\n            return { x: \"50%\", y: \"50%\" };\r\n        }\r\n        else if (origin === \"right\") {\r\n            return { x: \"100%\", y: \"50%\" };\r\n        }\r\n        else if (origin === \"bottom\") {\r\n            return { x: \"50%\", y: \"100%\" };\r\n        }\r\n        var _a = __read(origin.split(\" \"), 2), left = _a[0], right = _a[1];\r\n        var leftOrigin = convertTransformUnit(left || \"\");\r\n        var rightOrigin = convertTransformUnit(right || \"\");\r\n        var originObject = __assign(__assign({}, leftOrigin), rightOrigin);\r\n        var nextOriginObject = {\r\n            x: \"50%\",\r\n            y: \"50%\",\r\n        };\r\n        if (originObject.x) {\r\n            nextOriginObject.x = originObject.x;\r\n        }\r\n        if (originObject.y) {\r\n            nextOriginObject.y = originObject.y;\r\n        }\r\n        if (originObject.value) {\r\n            if (originObject.x && !originObject.y) {\r\n                nextOriginObject.y = originObject.value;\r\n            }\r\n            if (!originObject.x && originObject.y) {\r\n                nextOriginObject.x = originObject.value;\r\n            }\r\n        }\r\n        return nextOriginObject;\r\n    }\r\n    if (origin === \"left\") {\r\n        return { x: \"0%\" };\r\n    }\r\n    if (origin === \"right\") {\r\n        return { x: \"100%\" };\r\n    }\r\n    if (origin === \"top\") {\r\n        return { y: \"0%\" };\r\n    }\r\n    if (origin === \"bottom\") {\r\n        return { y: \"100%\" };\r\n    }\r\n    if (!origin) {\r\n        return {};\r\n    }\r\n    if (origin === \"center\") {\r\n        return { value: \"50%\" };\r\n    }\r\n    return { value: origin };\r\n}\r\nfunction convertTransformOriginArray(transformOrigin, width, height) {\r\n    var _a = convertTransformUnit(transformOrigin, true), x = _a.x, y = _a.y;\r\n    return [\r\n        convertUnitSize(x, width) || 0,\r\n        convertUnitSize(y, height) || 0,\r\n    ];\r\n}\r\nfunction rotatePosesInfo(poses, origin, rad) {\r\n    var prevPoses = poses.map(function (pos) { return minus(pos, origin); });\r\n    var nextPoses = prevPoses.map(function (pos) { return rotate(pos, rad); });\r\n    return {\r\n        prev: prevPoses,\r\n        next: nextPoses,\r\n        result: nextPoses.map(function (pos) { return plus(pos, origin); }),\r\n    };\r\n}\r\nfunction isDeepArrayEquals(arr1, arr2) {\r\n    return arr1.length === arr2.length && arr1.every(function (value1, i) {\r\n        var value2 = arr2[i];\r\n        var isArray1 = isArray(value1);\r\n        var isArray2 = isArray(value2);\r\n        if (isArray1 && isArray2) {\r\n            return isDeepArrayEquals(value1, value2);\r\n        }\r\n        else if (!isArray1 && !isArray2) {\r\n            return value1 === value2;\r\n        }\r\n        return false;\r\n    });\r\n}\r\nfunction watchValue(moveable, property, nextValue, valueKey, defaultValue) {\r\n    var store = moveable._store;\r\n    var prevValue = store[property];\r\n    if (!(property in store)) {\r\n        if (defaultValue != null) {\r\n            store[property] = defaultValue;\r\n            prevValue = defaultValue;\r\n        }\r\n        else {\r\n            store[property] = nextValue;\r\n            return nextValue;\r\n        }\r\n    }\r\n    if (prevValue === nextValue || valueKey(prevValue) === valueKey(nextValue)) {\r\n        return prevValue;\r\n    }\r\n    store[property] = nextValue;\r\n    return nextValue;\r\n}\r\nfunction sign(value) {\r\n    return value >= 0 ? 1 : -1;\r\n}\r\nfunction abs(value) {\r\n    return Math.abs(value);\r\n}\r\nfunction countEach(count, callback) {\r\n    return counter(count).map(function (index) { return callback(index); });\r\n}\r\nfunction getPaddingBox(padding) {\r\n    if (isNumber(padding)) {\r\n        return {\r\n            top: padding,\r\n            left: padding,\r\n            right: padding,\r\n            bottom: padding,\r\n        };\r\n    }\r\n    return {\r\n        left: padding.left || 0,\r\n        top: padding.top || 0,\r\n        right: padding.right || 0,\r\n        bottom: padding.bottom || 0,\r\n    };\r\n}\n\n/**\r\n * @namespace Moveable.Pinchable\r\n * @description Whether or not target can be pinched with draggable, resizable, scalable, rotatable (default: false)\r\n */\r\nvar Pinchable = makeAble(\"pinchable\", {\r\n    props: [\r\n        \"pinchable\",\r\n    ],\r\n    events: [\r\n        \"pinchStart\",\r\n        \"pinch\",\r\n        \"pinchEnd\",\r\n        \"pinchGroupStart\",\r\n        \"pinchGroup\",\r\n        \"pinchGroupEnd\",\r\n    ],\r\n    dragStart: function () {\r\n        return true;\r\n    },\r\n    pinchStart: function (moveable, e) {\r\n        var datas = e.datas, targets = e.targets, angle = e.angle, originalDatas = e.originalDatas;\r\n        var _a = moveable.props, pinchable = _a.pinchable, ables = _a.ables;\r\n        if (!pinchable) {\r\n            return false;\r\n        }\r\n        var eventName = \"onPinch\".concat(targets ? \"Group\" : \"\", \"Start\");\r\n        var controlEventName = \"drag\".concat(targets ? \"Group\" : \"\", \"ControlStart\");\r\n        var pinchAbles = (pinchable === true ? moveable.controlAbles : ables.filter(function (able) {\r\n            return pinchable.indexOf(able.name) > -1;\r\n        })).filter(function (able) { return able.canPinch && able[controlEventName]; });\r\n        var params = fillParams(moveable, e, {});\r\n        if (targets) {\r\n            params.targets = targets;\r\n        }\r\n        var result = triggerEvent(moveable, eventName, params);\r\n        datas.isPinch = result !== false;\r\n        datas.ables = pinchAbles;\r\n        var isPinch = datas.isPinch;\r\n        if (!isPinch) {\r\n            return false;\r\n        }\r\n        pinchAbles.forEach(function (able) {\r\n            originalDatas[able.name] = originalDatas[able.name] || {};\r\n            if (!able[controlEventName]) {\r\n                return;\r\n            }\r\n            var ableEvent = __assign(__assign({}, e), { datas: originalDatas[able.name], parentRotate: angle, isPinch: true });\r\n            able[controlEventName](moveable, ableEvent);\r\n        });\r\n        moveable.state.snapRenderInfo = {\r\n            request: e.isRequest,\r\n            direction: [0, 0],\r\n        };\r\n        return isPinch;\r\n    },\r\n    pinch: function (moveable, e) {\r\n        var datas = e.datas, pinchScale = e.scale, distance = e.distance, originalDatas = e.originalDatas, inputEvent = e.inputEvent, targets = e.targets, angle = e.angle;\r\n        if (!datas.isPinch) {\r\n            return;\r\n        }\r\n        var parentDistance = distance * (1 - 1 / pinchScale);\r\n        var params = fillParams(moveable, e, {});\r\n        if (targets) {\r\n            params.targets = targets;\r\n        }\r\n        var eventName = \"onPinch\".concat(targets ? \"Group\" : \"\");\r\n        triggerEvent(moveable, eventName, params);\r\n        var ables = datas.ables;\r\n        var controlEventName = \"drag\".concat(targets ? \"Group\" : \"\", \"Control\");\r\n        ables.forEach(function (able) {\r\n            if (!able[controlEventName]) {\r\n                return;\r\n            }\r\n            able[controlEventName](moveable, __assign(__assign({}, e), { datas: originalDatas[able.name], inputEvent: inputEvent, resolveMatrix: true, pinchScale: pinchScale, parentDistance: parentDistance, parentRotate: angle, isPinch: true }));\r\n        });\r\n        return params;\r\n    },\r\n    pinchEnd: function (moveable, e) {\r\n        var datas = e.datas, isPinch = e.isPinch, inputEvent = e.inputEvent, targets = e.targets, originalDatas = e.originalDatas;\r\n        if (!datas.isPinch) {\r\n            return;\r\n        }\r\n        var eventName = \"onPinch\".concat(targets ? \"Group\" : \"\", \"End\");\r\n        var params = fillEndParams(moveable, e, { isDrag: isPinch });\r\n        if (targets) {\r\n            params.targets = targets;\r\n        }\r\n        triggerEvent(moveable, eventName, params);\r\n        var ables = datas.ables;\r\n        var controlEventName = \"drag\".concat(targets ? \"Group\" : \"\", \"ControlEnd\");\r\n        ables.forEach(function (able) {\r\n            if (!able[controlEventName]) {\r\n                return;\r\n            }\r\n            able[controlEventName](moveable, __assign(__assign({}, e), { isDrag: isPinch, datas: originalDatas[able.name], inputEvent: inputEvent, isPinch: true }));\r\n        });\r\n        return isPinch;\r\n    },\r\n    pinchGroupStart: function (moveable, e) {\r\n        return this.pinchStart(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    pinchGroup: function (moveable, e) {\r\n        return this.pinch(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    pinchGroupEnd: function (moveable, e) {\r\n        return this.pinchEnd(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n});\r\n/**\r\n * Whether or not target can be pinched with draggable, resizable, scalable, rotatable (default: false)\r\n * @name Moveable.Pinchable#pinchable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.pinchable = true;\r\n */\r\n/**\r\n * When the pinch starts, the pinchStart event is called with part of scaleStart, rotateStart, resizeStart\r\n * @memberof Moveable.Pinchable\r\n * @event pinchStart\r\n * @param {Moveable.Pinchable.OnPinchStart} - Parameters for the pinchStart event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     rotatable: true,\r\n *     scalable: true,\r\n *     pinchable: true, // [\"rotatable\", \"scalable\"]\r\n * });\r\n * moveable.on(\"pinchStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n * moveable.on(\"rotateStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n * moveable.on(\"scaleStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n * When pinching, the pinch event is called with part of scale, rotate, resize\r\n * @memberof Moveable.Pinchable\r\n * @event pinch\r\n * @param {Moveable.Pinchable.OnPinch} - Parameters for the pinch event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     rotatable: true,\r\n *     scalable: true,\r\n *     pinchable: true, // [\"rotatable\", \"scalable\"]\r\n * });\r\n * moveable.on(\"pinch\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n * moveable.on(\"rotate\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n * moveable.on(\"scale\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n * When the pinch finishes, the pinchEnd event is called.\r\n * @memberof Moveable.Pinchable\r\n * @event pinchEnd\r\n * @param {Moveable.Pinchable.OnPinchEnd} - Parameters for the pinchEnd event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     rotatable: true,\r\n *     scalable: true,\r\n *     pinchable: true, // [\"rotatable\", \"scalable\"]\r\n * });\r\n * moveable.on(\"pinchEnd\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n * moveable.on(\"rotateEnd\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n * moveable.on(\"scaleEnd\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n * When the group pinch starts, the `pinchGroupStart` event is called.\r\n * @memberof Moveable.Pinchable\r\n * @event pinchGroupStart\r\n * @param {Moveable.Pinchable.OnPinchGroupStart} - Parameters for the `pinchGroupStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     pinchable: true\r\n * });\r\n * moveable.on(\"pinchGroupStart\", ({ targets }) => {\r\n *     console.log(\"onPinchGroupStart\", targets);\r\n * });\r\n */\r\n/**\r\n * When the group pinch, the `pinchGroup` event is called.\r\n * @memberof Moveable.Pinchable\r\n * @event pinchGroup\r\n * @param {Moveable.Pinchable.OnPinchGroup} - Parameters for the `pinchGroup` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     pinchable: true\r\n * });\r\n * moveable.on(\"pinchGroup\", ({ targets, events }) => {\r\n *     console.log(\"onPinchGroup\", targets);\r\n * });\r\n */\r\n/**\r\n * When the group pinch finishes, the `pinchGroupEnd` event is called.\r\n * @memberof Moveable.Pinchable\r\n * @event pinchGroupEnd\r\n * @param {Moveable.Pinchable.OnPinchGroupEnd} - Parameters for the `pinchGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     pinchable: true\r\n * });\r\n * moveable.on(\"pinchGroupEnd\", ({ targets, isDrag }) => {\r\n *     console.log(\"onPinchGroupEnd\", targets, isDrag);\r\n * });\r\n */\n\nvar directionCondition = getDirectionCondition(\"scalable\");\r\n/**\r\n * @namespace Scalable\r\n * @memberof Moveable\r\n * @description Scalable indicates whether the target's x and y can be scale of transform.\r\n */\r\nvar Scalable = {\r\n    name: \"scalable\",\r\n    ableGroup: \"size\",\r\n    canPinch: true,\r\n    props: [\r\n        \"scalable\",\r\n        \"throttleScale\",\r\n        \"renderDirections\",\r\n        \"keepRatio\",\r\n        \"edge\",\r\n        \"displayAroundControls\",\r\n    ],\r\n    events: [\r\n        \"scaleStart\",\r\n        \"beforeScale\",\r\n        \"scale\",\r\n        \"scaleEnd\",\r\n        \"scaleGroupStart\",\r\n        \"beforeScaleGroup\",\r\n        \"scaleGroup\",\r\n        \"scaleGroupEnd\",\r\n    ],\r\n    render: getRenderDirections(\"scalable\"),\r\n    dragControlCondition: directionCondition,\r\n    viewClassName: getDirectionViewClassName(\"scalable\"),\r\n    dragControlStart: function (moveable, e) {\r\n        var datas = e.datas, isPinch = e.isPinch, inputEvent = e.inputEvent, parentDirection = e.parentDirection;\r\n        var direction = getTotalDirection(parentDirection, isPinch, inputEvent, datas);\r\n        var _a = moveable.state, width = _a.width, height = _a.height, targetTransform = _a.targetTransform, target = _a.target, pos1 = _a.pos1, pos2 = _a.pos2, pos4 = _a.pos4;\r\n        if (!direction || !target) {\r\n            return false;\r\n        }\r\n        if (!isPinch) {\r\n            setDragStart(moveable, e);\r\n        }\r\n        datas.datas = {};\r\n        datas.transform = targetTransform;\r\n        datas.prevDist = [1, 1];\r\n        datas.direction = direction;\r\n        datas.startOffsetWidth = width;\r\n        datas.startOffsetHeight = height;\r\n        datas.startValue = [1, 1];\r\n        // const scaleWidth = getDist(pos1, pos2);\r\n        // const scaleHeight = getDist(pos2, pos4);\r\n        var isWidth = (!direction[0] && !direction[1]) || direction[0] || !direction[1];\r\n        // datas.scaleWidth = scaleWidth;\r\n        // datas.scaleHeight = scaleHeight;\r\n        // datas.scaleXRatio = scaleWidth / width;\r\n        // datas.scaleYRatio = scaleHeight / height;\r\n        setDefaultTransformIndex(moveable, e, \"scale\");\r\n        datas.isWidth = isWidth;\r\n        function setRatio(ratio) {\r\n            datas.ratio = ratio && isFinite(ratio) ? ratio : 0;\r\n        }\r\n        datas.startPositions = getAbsolutePosesByState(moveable.state);\r\n        function setFixedDirection(fixedDirection) {\r\n            var result = getFixedDirectionInfo(datas.startPositions, fixedDirection);\r\n            datas.fixedDirection = result.fixedDirection;\r\n            datas.fixedPosition = result.fixedPosition;\r\n            datas.fixedOffset = result.fixedOffset;\r\n        }\r\n        datas.setFixedDirection = setFixedDirection;\r\n        setRatio(getDist$1(pos1, pos2) / getDist$1(pos2, pos4));\r\n        setFixedDirection([-direction[0], -direction[1]]);\r\n        var setMinScaleSize = function (min) {\r\n            datas.minScaleSize = min;\r\n        };\r\n        var setMaxScaleSize = function (max) {\r\n            datas.maxScaleSize = max;\r\n        };\r\n        // const setMinScale = (min: number[]) => {\r\n        // };\r\n        // const setMaxScale = (max: number[]) => {\r\n        // };\r\n        setMinScaleSize([-Infinity, -Infinity]);\r\n        setMaxScaleSize([Infinity, Infinity]);\r\n        var params = fillParams(moveable, e, __assign(__assign({ direction: direction, set: function (scale) {\r\n                datas.startValue = scale;\r\n            }, setRatio: setRatio, setFixedDirection: setFixedDirection, setMinScaleSize: setMinScaleSize, setMaxScaleSize: setMaxScaleSize }, fillTransformStartEvent(moveable, e)), { dragStart: Draggable.dragStart(moveable, new CustomGesto().dragStart([0, 0], e)) }));\r\n        var result = triggerEvent(moveable, \"onScaleStart\", params);\r\n        datas.startFixedDirection = datas.fixedDirection;\r\n        if (result !== false) {\r\n            datas.isScale = true;\r\n            moveable.state.snapRenderInfo = {\r\n                request: e.isRequest,\r\n                direction: direction,\r\n            };\r\n        }\r\n        return datas.isScale ? params : false;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        resolveTransformEvent(moveable, e, \"scale\");\r\n        var datas = e.datas, parentKeepRatio = e.parentKeepRatio, parentFlag = e.parentFlag, isPinch = e.isPinch, dragClient = e.dragClient, isRequest = e.isRequest, useSnap = e.useSnap, resolveMatrix = e.resolveMatrix;\r\n        var prevDist = datas.prevDist, direction = datas.direction, startOffsetWidth = datas.startOffsetWidth, startOffsetHeight = datas.startOffsetHeight, isScale = datas.isScale, startValue = datas.startValue, isWidth = datas.isWidth, ratio = datas.ratio;\r\n        if (!isScale) {\r\n            return false;\r\n        }\r\n        var props = moveable.props;\r\n        var throttleScale = props.throttleScale, parentMoveable = props.parentMoveable;\r\n        var sizeDirection = direction;\r\n        if (!direction[0] && !direction[1]) {\r\n            sizeDirection = [1, 1];\r\n        }\r\n        var keepRatio = (ratio && (parentKeepRatio != null ? parentKeepRatio : props.keepRatio)) || false;\r\n        var state = moveable.state;\r\n        var tempScaleValue = [\r\n            startValue[0],\r\n            startValue[1],\r\n        ];\r\n        function getNextScale() {\r\n            var _a = getOffsetSizeDist(sizeDirection, keepRatio, datas, e), distWidth = _a.distWidth, distHeight = _a.distHeight;\r\n            var distX = startOffsetWidth ? (startOffsetWidth + distWidth) / startOffsetWidth : 1;\r\n            var distY = startOffsetHeight ? (startOffsetHeight + distHeight) / startOffsetHeight : 1;\r\n            if (!startValue[0]) {\r\n                tempScaleValue[0] = distWidth / startOffsetWidth;\r\n            }\r\n            if (!startValue[1]) {\r\n                tempScaleValue[1] = distHeight / startOffsetHeight;\r\n            }\r\n            var scaleX = (sizeDirection[0] || keepRatio ? distX : 1) * tempScaleValue[0];\r\n            var scaleY = (sizeDirection[1] || keepRatio ? distY : 1) * tempScaleValue[1];\r\n            if (scaleX === 0) {\r\n                scaleX = sign(prevDist[0]) * MIN_SCALE;\r\n            }\r\n            if (scaleY === 0) {\r\n                scaleY = sign(prevDist[1]) * MIN_SCALE;\r\n            }\r\n            return [scaleX, scaleY];\r\n        }\r\n        var scale = getNextScale();\r\n        if (!isPinch && moveable.props.groupable) {\r\n            var snapRenderInfo = state.snapRenderInfo || {};\r\n            var stateDirection = snapRenderInfo.direction;\r\n            if (isArray(stateDirection) && (stateDirection[0] || stateDirection[1])) {\r\n                state.snapRenderInfo = { direction: direction, request: e.isRequest };\r\n            }\r\n        }\r\n        triggerEvent(moveable, \"onBeforeScale\", fillParams(moveable, e, {\r\n            scale: scale,\r\n            setFixedDirection: function (nextFixedDirection) {\r\n                datas.setFixedDirection(nextFixedDirection);\r\n                scale = getNextScale();\r\n                return scale;\r\n            },\r\n            startFixedDirection: datas.startFixedDirection,\r\n            setScale: function (nextScale) {\r\n                scale = nextScale;\r\n            },\r\n        }, true));\r\n        var dist = [\r\n            scale[0] / tempScaleValue[0],\r\n            scale[1] / tempScaleValue[1],\r\n        ];\r\n        var fixedPosition = dragClient;\r\n        var snapDist = [0, 0];\r\n        var isSelfPinch = !dragClient && !parentFlag && isPinch;\r\n        if (isSelfPinch || resolveMatrix) {\r\n            fixedPosition = getTranslateFixedPosition(moveable, datas.targetAllTransform, [0, 0], [0, 0], datas);\r\n        }\r\n        else if (!dragClient) {\r\n            fixedPosition = datas.fixedPosition;\r\n        }\r\n        if (!isPinch) {\r\n            snapDist = checkSnapScale(moveable, dist, direction, !useSnap && isRequest, datas);\r\n        }\r\n        if (keepRatio) {\r\n            if (sizeDirection[0] && sizeDirection[1] && snapDist[0] && snapDist[1]) {\r\n                if (Math.abs(snapDist[0] * startOffsetWidth) > Math.abs(snapDist[1] * startOffsetHeight)) {\r\n                    snapDist[1] = 0;\r\n                }\r\n                else {\r\n                    snapDist[0] = 0;\r\n                }\r\n            }\r\n            var isNoSnap = !snapDist[0] && !snapDist[1];\r\n            if (isNoSnap) {\r\n                // throttle scale value (not absolute scale size)\r\n                if (isWidth) {\r\n                    dist[0] = throttle(dist[0] * tempScaleValue[0], throttleScale) / tempScaleValue[0];\r\n                }\r\n                else {\r\n                    dist[1] = throttle(dist[1] * tempScaleValue[1], throttleScale) / tempScaleValue[1];\r\n                }\r\n            }\r\n            if ((sizeDirection[0] && !sizeDirection[1])\r\n                || (snapDist[0] && !snapDist[1])\r\n                || (isNoSnap && isWidth)) {\r\n                dist[0] += snapDist[0];\r\n                var snapHeight = startOffsetWidth * dist[0] * tempScaleValue[0] / ratio;\r\n                dist[1] = snapHeight / startOffsetHeight / tempScaleValue[1];\r\n            }\r\n            else if ((!sizeDirection[0] && sizeDirection[1])\r\n                || (!snapDist[0] && snapDist[1])\r\n                || (isNoSnap && !isWidth)) {\r\n                dist[1] += snapDist[1];\r\n                var snapWidth = startOffsetHeight * dist[1] * tempScaleValue[1] * ratio;\r\n                dist[0] = snapWidth / startOffsetWidth / tempScaleValue[0];\r\n            }\r\n        }\r\n        else {\r\n            dist[0] += snapDist[0];\r\n            dist[1] += snapDist[1];\r\n            if (!snapDist[0]) {\r\n                dist[0] = throttle(dist[0] * tempScaleValue[0], throttleScale) / tempScaleValue[0];\r\n            }\r\n            if (!snapDist[1]) {\r\n                dist[1] = throttle(dist[1] * tempScaleValue[1], throttleScale) / tempScaleValue[1];\r\n            }\r\n        }\r\n        if (dist[0] === 0) {\r\n            dist[0] = sign(prevDist[0]) * MIN_SCALE;\r\n        }\r\n        if (dist[1] === 0) {\r\n            dist[1] = sign(prevDist[1]) * MIN_SCALE;\r\n        }\r\n        scale = multiply2(dist, [tempScaleValue[0], tempScaleValue[1]]);\r\n        var startOffsetSize = [\r\n            startOffsetWidth,\r\n            startOffsetHeight,\r\n        ];\r\n        var scaleSize = [\r\n            startOffsetWidth * scale[0],\r\n            startOffsetHeight * scale[1],\r\n        ];\r\n        scaleSize = calculateBoundSize(scaleSize, datas.minScaleSize, datas.maxScaleSize, keepRatio ? ratio : false);\r\n        // if (keepRatio && (isGroup || keepRatioFinally)) {\r\n        //     if (isWidth) {\r\n        //         boundingHeight = boundingWidth / ratio;\r\n        //     } else {\r\n        //         boundingWidth = boundingHeight * ratio;\r\n        //     }\r\n        // }\r\n        scale = countEach(2, function (i) {\r\n            return startOffsetSize[i] ? scaleSize[i] / startOffsetSize[i] : scaleSize[i];\r\n        });\r\n        dist = countEach(2, function (i) {\r\n            return scale[i] / tempScaleValue[i];\r\n        });\r\n        var delta = countEach(2, function (i) { return prevDist[i] ? dist[i] / prevDist[i] : dist[i]; });\r\n        var distText = \"scale(\".concat(dist.join(\", \"), \")\");\r\n        var scaleText = \"scale(\".concat(scale.join(\", \"), \")\");\r\n        var nextTransform = convertTransformFormat(datas, scaleText, distText);\r\n        var isZeroScale = !startValue[0] || !startValue[1];\r\n        var inverseDist = getScaleDist(moveable, isZeroScale ? scaleText : distText, datas.fixedDirection, fixedPosition, datas.fixedOffset, datas, isZeroScale);\r\n        var inverseDelta = isSelfPinch ? inverseDist : minus(inverseDist, datas.prevInverseDist || [0, 0]);\r\n        datas.prevDist = dist;\r\n        datas.prevInverseDist = inverseDist;\r\n        if (scale[0] === prevDist[0] && scale[1] === prevDist[1]\r\n            && inverseDelta.every(function (num) { return !num; })\r\n            && !parentMoveable\r\n            && !isSelfPinch) {\r\n            return false;\r\n        }\r\n        var params = fillParams(moveable, e, __assign({ offsetWidth: startOffsetWidth, offsetHeight: startOffsetHeight, direction: direction, scale: scale, dist: dist, delta: delta, isPinch: !!isPinch }, fillTransformEvent(moveable, nextTransform, inverseDelta, isPinch, e)));\r\n        triggerEvent(moveable, \"onScale\", params);\r\n        return params;\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isScale) {\r\n            return false;\r\n        }\r\n        datas.isScale = false;\r\n        var scaleEndParam = fillEndParams(moveable, e, {});\r\n        triggerEvent(moveable, \"onScaleEnd\", scaleEndParam);\r\n        return scaleEndParam;\r\n    },\r\n    dragGroupControlCondition: directionCondition,\r\n    dragGroupControlStart: function (moveable, e) {\r\n        var datas = e.datas;\r\n        var params = this.dragControlStart(moveable, e);\r\n        if (!params) {\r\n            return false;\r\n        }\r\n        var originalEvents = fillChildEvents(moveable, \"resizable\", e);\r\n        datas.moveableScale = moveable.scale;\r\n        var events = triggerChildAbles(moveable, this, \"dragControlStart\", e, function (child, ev) {\r\n            return startChildDist(moveable, child, datas, ev);\r\n        });\r\n        var setFixedDirection = function (fixedDirection) {\r\n            params.setFixedDirection(fixedDirection);\r\n            events.forEach(function (ev, i) {\r\n                ev.setFixedDirection(fixedDirection);\r\n                startChildDist(moveable, ev.moveable, datas, originalEvents[i]);\r\n            });\r\n        };\r\n        datas.setFixedDirection = setFixedDirection;\r\n        var nextParams = __assign(__assign({}, params), { targets: moveable.props.targets, events: events, setFixedDirection: setFixedDirection });\r\n        var result = triggerEvent(moveable, \"onScaleGroupStart\", nextParams);\r\n        datas.isScale = result !== false;\r\n        return datas.isScale ? nextParams : false;\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isScale) {\r\n            return;\r\n        }\r\n        catchEvent(moveable, \"onBeforeScale\", function (parentEvent) {\r\n            triggerEvent(moveable, \"onBeforeScaleGroup\", fillParams(moveable, e, __assign(__assign({}, parentEvent), { targets: moveable.props.targets }), true));\r\n        });\r\n        var params = this.dragControl(moveable, e);\r\n        if (!params) {\r\n            return;\r\n        }\r\n        var dist = params.dist;\r\n        var moveableScale = datas.moveableScale;\r\n        moveable.scale = [\r\n            dist[0] * moveableScale[0],\r\n            dist[1] * moveableScale[1],\r\n        ];\r\n        var keepRatio = moveable.props.keepRatio;\r\n        var fixedPosition = datas.fixedPosition;\r\n        var events = triggerChildAbles(moveable, this, \"dragControl\", e, function (_, ev) {\r\n            var _a = __read(calculate(createRotateMatrix(moveable.rotation / 180 * Math.PI, 3), [\r\n                ev.datas.originalX * dist[0],\r\n                ev.datas.originalY * dist[1],\r\n                1,\r\n            ], 3), 2), clientX = _a[0], clientY = _a[1];\r\n            return __assign(__assign({}, ev), { parentDist: null, parentScale: dist, parentKeepRatio: keepRatio, \r\n                // recalculate child fixed position for parent group's dragging.\r\n                dragClient: plus(fixedPosition, [clientX, clientY]) });\r\n        });\r\n        var nextParams = __assign({ targets: moveable.props.targets, events: events }, params);\r\n        triggerEvent(moveable, \"onScaleGroup\", nextParams);\r\n        return nextParams;\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        var isDrag = e.isDrag, datas = e.datas;\r\n        if (!datas.isScale) {\r\n            return;\r\n        }\r\n        this.dragControlEnd(moveable, e);\r\n        var events = triggerChildAbles(moveable, this, \"dragControlEnd\", e);\r\n        var nextParams = fillEndParams(moveable, e, {\r\n            targets: moveable.props.targets,\r\n            events: events,\r\n        });\r\n        triggerEvent(moveable, \"onScaleGroupEnd\", nextParams);\r\n        return isDrag;\r\n    },\r\n    /**\r\n     * @method Moveable.Scalable#request\r\n     * @param {Moveable.Scalable.ScalableRequestParam} e - the Scalable's request parameter\r\n     * @return {Moveable.Requester} Moveable Requester\r\n     * @example\r\n\n     * // Instantly Request (requestStart - request - requestEnd)\r\n     * moveable.request(\"scalable\", { deltaWidth: 10, deltaHeight: 10 }, true);\r\n     *\r\n     * // requestStart\r\n     * const requester = moveable.request(\"scalable\");\r\n     *\r\n     * // request\r\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\r\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\r\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\r\n     *\r\n     * // requestEnd\r\n     * requester.requestEnd();\r\n     */\r\n    request: function () {\r\n        var datas = {};\r\n        var distWidth = 0;\r\n        var distHeight = 0;\r\n        var useSnap = false;\r\n        return {\r\n            isControl: true,\r\n            requestStart: function (e) {\r\n                useSnap = e.useSnap;\r\n                return {\r\n                    datas: datas,\r\n                    parentDirection: e.direction || [1, 1],\r\n                    useSnap: useSnap,\r\n                };\r\n            },\r\n            request: function (e) {\r\n                distWidth += e.deltaWidth;\r\n                distHeight += e.deltaHeight;\r\n                return {\r\n                    datas: datas,\r\n                    parentDist: [distWidth, distHeight],\r\n                    parentKeepRatio: e.keepRatio,\r\n                    useSnap: useSnap,\r\n                };\r\n            },\r\n            requestEnd: function () {\r\n                return { datas: datas, isDrag: true, useSnap: useSnap };\r\n            },\r\n        };\r\n    },\r\n};\r\n/**\r\n * Whether or not target can scaled.\r\n *\r\n * @name Moveable.Scalable#scalable\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.scalable = true;\r\n */\r\n/**\r\n * throttle of scaleX, scaleY when scale.\r\n * @name Moveable.Scalable#throttleScale\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.throttleScale = 0.1;\r\n */\r\n/**\r\n * Set directions to show the control box. (default: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"])\r\n * @name Moveable.Scalable#renderDirections\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     scalable: true,\r\n *   renderDirections: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"],\r\n * });\r\n *\r\n * moveable.renderDirections = [\"nw\", \"ne\", \"sw\", \"se\"];\r\n */\r\n/**\r\n * When resize or scale, keeps a ratio of the width, height. (default: false)\r\n * @name Moveable.Scalable#keepRatio\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     scalable: true,\r\n * });\r\n *\r\n * moveable.keepRatio = true;\r\n */\r\n/**\r\n * When the scale starts, the scaleStart event is called.\r\n * @memberof Moveable.Scalable\r\n * @event scaleStart\r\n * @param {Moveable.Scalable.OnScaleStart} - Parameters for the scaleStart event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { scalable: true });\r\n * moveable.on(\"scaleStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n * When scaling, `beforeScale` is called before `scale` occurs. In `beforeScale`, you can get and set the pre-value before scaling.\r\n * @memberof Moveable.Scalable\r\n * @event beforeScale\r\n * @param {Moveable.Scalable.OnBeforeScale} - Parameters for the `beforeScale` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { scalable: true });\r\n * moveable.on(\"beforeScale\", ({ setFixedDirection }) => {\r\n *     if (shiftKey) {\r\n *        setFixedDirection([0, 0]);\r\n *     }\r\n * });\r\n * moveable.on(\"scale\", ({ target, transform, dist }) => {\r\n *     target.style.transform = transform;\r\n * });\r\n */\r\n/**\r\n * When scaling, the `scale` event is called.\r\n * @memberof Moveable.Scalable\r\n * @event scale\r\n * @param {Moveable.Scalable.OnScale} - Parameters for the `scale` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { scalable: true });\r\n * moveable.on(\"scale\", ({ target, transform, dist }) => {\r\n *     target.style.transform = transform;\r\n * });\r\n */\r\n/**\r\n * When the scale finishes, the `scaleEnd` event is called.\r\n * @memberof Moveable.Scalable\r\n * @event scaleEnd\r\n * @param {Moveable.Scalable.OnScaleEnd} - Parameters for the `scaleEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { scalable: true });\r\n * moveable.on(\"scaleEnd\", ({ target, isDrag }) => {\r\n *     console.log(target, isDrag);\r\n * });\r\n */\r\n/**\r\n* When the group scale starts, the `scaleGroupStart` event is called.\r\n* @memberof Moveable.Scalable\r\n* @event scaleGroupStart\r\n* @param {Moveable.Scalable.OnScaleGroupStart} - Parameters for the `scaleGroupStart` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     scalable: true\r\n* });\r\n* moveable.on(\"scaleGroupStart\", ({ targets }) => {\r\n*     console.log(\"onScaleGroupStart\", targets);\r\n* });\r\n*/\r\n/**\r\n* When the group scale, the `scaleGroup` event is called.\r\n* @memberof Moveable.Scalable\r\n* @event scaleGroup\r\n* @param {Moveable.Scalable.OnScaleGroup} - Parameters for the `scaleGroup` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     scalable: true\r\n* });\r\n* moveable.on(\"scaleGroup\", ({ targets, events }) => {\r\n*     console.log(\"onScaleGroup\", targets);\r\n*     events.forEach(ev => {\r\n*         const target = ev.target;\r\n*         // ev.drag is a drag event that occurs when the group scale.\r\n*         const left = ev.drag.beforeDist[0];\r\n*         const top = ev.drag.beforeDist[1];\r\n*         const scaleX = ev.scale[0];\r\n*         const scaleY = ev.scale[1];\r\n*     });\r\n* });\r\n*/\r\n/**\r\n * When the group scale finishes, the `scaleGroupEnd` event is called.\r\n * @memberof Moveable.Scalable\r\n * @event scaleGroupEnd\r\n * @param {Moveable.Scalable.OnScaleGroupEnd} - Parameters for the `scaleGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     scalable: true\r\n * });\r\n * moveable.on(\"scaleGroupEnd\", ({ targets, isDrag }) => {\r\n *     console.log(\"onScaleGroupEnd\", targets, isDrag);\r\n * });\r\n */\n\nfunction getMiddleLinePos(pos1, pos2) {\r\n    return pos1.map(function (pos, i) { return dot(pos, pos2[i], 1, 2); });\r\n}\r\nfunction getTriangleRad(pos1, pos2, pos3) {\r\n    // pos1 Rad\r\n    var rad1 = getRad(pos1, pos2);\r\n    var rad2 = getRad(pos1, pos3);\r\n    var rad = rad2 - rad1;\r\n    return rad >= 0 ? rad : rad + 2 * Math.PI;\r\n}\r\nfunction isValidPos(poses1, poses2) {\r\n    var rad1 = getTriangleRad(poses1[0], poses1[1], poses1[2]);\r\n    var rad2 = getTriangleRad(poses2[0], poses2[1], poses2[2]);\r\n    var pi = Math.PI;\r\n    if ((rad1 >= pi && rad2 <= pi) || (rad1 <= pi && rad2 >= pi)) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * @namespace Moveable.Warpable\r\n * @description Warpable indicates whether the target can be warped(distorted, bented).\r\n */\r\nvar Warpable = {\r\n    name: \"warpable\",\r\n    ableGroup: \"size\",\r\n    props: [\r\n        \"warpable\",\r\n        \"renderDirections\",\r\n        \"edge\",\r\n        \"displayAroundControls\",\r\n    ],\r\n    events: [\r\n        \"warpStart\",\r\n        \"warp\",\r\n        \"warpEnd\",\r\n    ],\r\n    viewClassName: getDirectionViewClassName(\"warpable\"),\r\n    render: function (moveable, React) {\r\n        var _a = moveable.props, resizable = _a.resizable, scalable = _a.scalable, warpable = _a.warpable, zoom = _a.zoom;\r\n        if (resizable || scalable || !warpable) {\r\n            return [];\r\n        }\r\n        var _b = moveable.state, pos1 = _b.pos1, pos2 = _b.pos2, pos3 = _b.pos3, pos4 = _b.pos4;\r\n        var linePosFrom1 = getMiddleLinePos(pos1, pos2);\r\n        var linePosFrom2 = getMiddleLinePos(pos2, pos1);\r\n        var linePosFrom3 = getMiddleLinePos(pos1, pos3);\r\n        var linePosFrom4 = getMiddleLinePos(pos3, pos1);\r\n        var linePosTo1 = getMiddleLinePos(pos3, pos4);\r\n        var linePosTo2 = getMiddleLinePos(pos4, pos3);\r\n        var linePosTo3 = getMiddleLinePos(pos2, pos4);\r\n        var linePosTo4 = getMiddleLinePos(pos4, pos2);\r\n        return __spreadArray([\r\n            React.createElement(\"div\", { className: prefix(\"line\"), key: \"middeLine1\", style: getLineStyle(linePosFrom1, linePosTo1, zoom) }),\r\n            React.createElement(\"div\", { className: prefix(\"line\"), key: \"middeLine2\", style: getLineStyle(linePosFrom2, linePosTo2, zoom) }),\r\n            React.createElement(\"div\", { className: prefix(\"line\"), key: \"middeLine3\", style: getLineStyle(linePosFrom3, linePosTo3, zoom) }),\r\n            React.createElement(\"div\", { className: prefix(\"line\"), key: \"middeLine4\", style: getLineStyle(linePosFrom4, linePosTo4, zoom) })\r\n        ], __read(renderAllDirections(moveable, \"warpable\", React)), false);\r\n    },\r\n    dragControlCondition: function (moveable, e) {\r\n        if (e.isRequest) {\r\n            return false;\r\n        }\r\n        var target = e.inputEvent.target;\r\n        return hasClass(target, prefix(\"direction\")) && hasClass(target, prefix(\"warpable\"));\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        var datas = e.datas, inputEvent = e.inputEvent;\r\n        var target = moveable.props.target;\r\n        var inputTarget = inputEvent.target;\r\n        var direction = getDirection(inputTarget, datas);\r\n        if (!direction || !target) {\r\n            return false;\r\n        }\r\n        var state = moveable.state;\r\n        var transformOrigin = state.transformOrigin, is3d = state.is3d, targetTransform = state.targetTransform, targetMatrix = state.targetMatrix, width = state.width, height = state.height, left = state.left, top = state.top;\r\n        datas.datas = {};\r\n        datas.targetTransform = targetTransform;\r\n        datas.warpTargetMatrix = is3d ? targetMatrix : convertDimension(targetMatrix, 3, 4);\r\n        datas.targetInverseMatrix = ignoreDimension(invert(datas.warpTargetMatrix, 4), 3, 4);\r\n        datas.direction = direction;\r\n        datas.left = left;\r\n        datas.top = top;\r\n        datas.poses = [\r\n            [0, 0],\r\n            [width, 0],\r\n            [0, height],\r\n            [width, height],\r\n        ].map(function (p) { return minus(p, transformOrigin); });\r\n        datas.nextPoses = datas.poses.map(function (_a) {\r\n            var _b = __read(_a, 2), x = _b[0], y = _b[1];\r\n            return calculate(datas.warpTargetMatrix, [x, y, 0, 1], 4);\r\n        });\r\n        datas.startValue = createIdentityMatrix(4);\r\n        datas.prevMatrix = createIdentityMatrix(4);\r\n        datas.absolutePoses = getAbsolutePosesByState(state);\r\n        datas.posIndexes = getPosIndexesByDirection(direction);\r\n        setDragStart(moveable, e);\r\n        setDefaultTransformIndex(moveable, e, \"matrix3d\");\r\n        state.snapRenderInfo = {\r\n            request: e.isRequest,\r\n            direction: direction,\r\n        };\r\n        var params = fillParams(moveable, e, __assign({ set: function (matrix) {\r\n                datas.startValue = matrix;\r\n            } }, fillTransformStartEvent(moveable, e)));\r\n        var result = triggerEvent(moveable, \"onWarpStart\", params);\r\n        if (result !== false) {\r\n            datas.isWarp = true;\r\n        }\r\n        return datas.isWarp;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        var datas = e.datas, isRequest = e.isRequest;\r\n        var distX = e.distX, distY = e.distY;\r\n        var targetInverseMatrix = datas.targetInverseMatrix, prevMatrix = datas.prevMatrix, isWarp = datas.isWarp, startValue = datas.startValue, poses = datas.poses, posIndexes = datas.posIndexes, absolutePoses = datas.absolutePoses;\r\n        if (!isWarp) {\r\n            return false;\r\n        }\r\n        resolveTransformEvent(moveable, e, \"matrix3d\");\r\n        if (hasGuidelines(moveable, \"warpable\")) {\r\n            var selectedPoses = posIndexes.map(function (index) { return absolutePoses[index]; });\r\n            if (selectedPoses.length > 1) {\r\n                selectedPoses.push([\r\n                    (selectedPoses[0][0] + selectedPoses[1][0]) / 2,\r\n                    (selectedPoses[0][1] + selectedPoses[1][1]) / 2,\r\n                ]);\r\n            }\r\n            var _a = checkMoveableSnapBounds(moveable, isRequest, {\r\n                horizontal: selectedPoses.map(function (pos) { return pos[1] + distY; }),\r\n                vertical: selectedPoses.map(function (pos) { return pos[0] + distX; }),\r\n            }), horizontalSnapInfo = _a.horizontal, verticalSnapInfo = _a.vertical;\r\n            distY -= horizontalSnapInfo.offset;\r\n            distX -= verticalSnapInfo.offset;\r\n        }\r\n        var dist = getDragDist({ datas: datas, distX: distX, distY: distY }, true);\r\n        var nextPoses = datas.nextPoses.slice();\r\n        posIndexes.forEach(function (index) {\r\n            nextPoses[index] = plus(nextPoses[index], dist);\r\n        });\r\n        if (!NEARBY_POS.every(function (nearByPoses) { return isValidPos(nearByPoses.map(function (i) { return poses[i]; }), nearByPoses.map(function (i) { return nextPoses[i]; })); })) {\r\n            return false;\r\n        }\r\n        var h = createWarpMatrix(poses[0], poses[2], poses[1], poses[3], nextPoses[0], nextPoses[2], nextPoses[1], nextPoses[3]);\r\n        if (!h.length) {\r\n            return false;\r\n        }\r\n        // B * A * M\r\n        var afterMatrix = multiply(targetInverseMatrix, h, 4);\r\n        // B * M * A\r\n        var matrix = getTransfromMatrix(datas, afterMatrix, true);\r\n        var delta = multiply(invert(prevMatrix, 4), matrix, 4);\r\n        datas.prevMatrix = matrix;\r\n        var totalMatrix = multiply(startValue, matrix, 4);\r\n        var nextTransform = convertTransformFormat(datas, \"matrix3d(\".concat(totalMatrix.join(\", \"), \")\"), \"matrix3d(\".concat(matrix.join(\", \"), \")\"));\r\n        fillOriginalTransform(e, nextTransform);\r\n        triggerEvent(moveable, \"onWarp\", fillParams(moveable, e, __assign({ delta: delta, matrix: totalMatrix, dist: matrix, multiply: multiply, transform: nextTransform }, fillCSSObject({\r\n            transform: nextTransform,\r\n        }, e))));\r\n        return true;\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        var datas = e.datas, isDrag = e.isDrag;\r\n        if (!datas.isWarp) {\r\n            return false;\r\n        }\r\n        datas.isWarp = false;\r\n        triggerEvent(moveable, \"onWarpEnd\", fillEndParams(moveable, e, {}));\r\n        return isDrag;\r\n    },\r\n};\r\n/**\r\n * Whether or not target can be warped. (default: false)\r\n * @name Moveable.Warpable#warpable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.warpable = true;\r\n */\r\n/**\r\n* Set directions to show the control box. (default: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"])\r\n* @name Moveable.Warpable#renderDirections\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     warpable: true,\r\n*     renderDirections: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"],\r\n* });\r\n*\r\n* moveable.renderDirections = [\"nw\", \"ne\", \"sw\", \"se\"];\r\n*/\r\n/**\r\n* When the warp starts, the warpStart event is called.\r\n* @memberof Moveable.Warpable\r\n* @event warpStart\r\n* @param {Moveable.Warpable.OnWarpStart} - Parameters for the warpStart event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, { warpable: true });\r\n* moveable.on(\"warpStart\", ({ target }) => {\r\n*     console.log(target);\r\n* });\r\n*/\r\n/**\r\n * When warping, the warp event is called.\r\n * @memberof Moveable.Warpable\r\n * @event warp\r\n * @param {Moveable.Warpable.OnWarp} - Parameters for the warp event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n * let matrix = [\r\n *  1, 0, 0, 0,\r\n *  0, 1, 0, 0,\r\n *  0, 0, 1, 0,\r\n *  0, 0, 0, 1,\r\n * ];\r\n * const moveable = new Moveable(document.body, { warpable: true });\r\n * moveable.on(\"warp\", ({ target, transform, delta, multiply }) => {\r\n *    // target.style.transform = transform;\r\n *    matrix = multiply(matrix, delta);\r\n *    target.style.transform = `matrix3d(${matrix.join(\",\")})`;\r\n * });\r\n */\r\n/**\r\n * When the warp finishes, the warpEnd event is called.\r\n * @memberof Moveable.Warpable\r\n * @event warpEnd\r\n * @param {Moveable.Warpable.OnWarpEnd} - Parameters for the warpEnd event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { warpable: true });\r\n * moveable.on(\"warpEnd\", ({ target, isDrag }) => {\r\n *     console.log(target, isDrag);\r\n * });\r\n */\n\nvar AREA_PIECES = /*#__PURE__*/ prefix(\"area-pieces\");\r\nvar AREA_PIECE = /*#__PURE__*/ prefix(\"area-piece\");\r\nvar AVOID = /*#__PURE__*/ prefix(\"avoid\");\r\nvar VIEW_DRAGGING = prefix(\"view-dragging\");\n\nfunction restoreStyle(moveable) {\r\n    var el = moveable.areaElement;\r\n    if (!el) {\r\n        return;\r\n    }\r\n    var _a = moveable.state, width = _a.width, height = _a.height;\r\n    removeClass(el, AVOID);\r\n    el.style.cssText += \"left: 0px; top: 0px; width: \".concat(width, \"px; height: \").concat(height, \"px\");\r\n}\r\nfunction renderPieces(React) {\r\n    return (React.createElement(\"div\", { key: \"area_pieces\", className: AREA_PIECES },\r\n        React.createElement(\"div\", { className: AREA_PIECE }),\r\n        React.createElement(\"div\", { className: AREA_PIECE }),\r\n        React.createElement(\"div\", { className: AREA_PIECE }),\r\n        React.createElement(\"div\", { className: AREA_PIECE })));\r\n}\r\nvar DragArea = {\r\n    name: \"dragArea\",\r\n    props: [\r\n        \"dragArea\",\r\n        \"passDragArea\",\r\n    ],\r\n    events: [\r\n        \"click\",\r\n        \"clickGroup\",\r\n    ],\r\n    render: function (moveable, React) {\r\n        var _a = moveable.props, target = _a.target, dragArea = _a.dragArea, groupable = _a.groupable, passDragArea = _a.passDragArea;\r\n        var _b = moveable.getState(), width = _b.width, height = _b.height, renderPoses = _b.renderPoses;\r\n        var className = passDragArea ? prefix(\"area\", \"pass\") : prefix(\"area\");\r\n        if (groupable) {\r\n            return [\r\n                React.createElement(\"div\", { key: \"area\", ref: ref(moveable, \"areaElement\"), className: className }),\r\n                renderPieces(React),\r\n            ];\r\n        }\r\n        if (!target || !dragArea) {\r\n            return [];\r\n        }\r\n        var h = createWarpMatrix([0, 0], [width, 0], [0, height], [width, height], renderPoses[0], renderPoses[1], renderPoses[2], renderPoses[3]);\r\n        var transform = h.length ? makeMatrixCSS(h, true) : \"none\";\r\n        return [\r\n            React.createElement(\"div\", { key: \"area\", ref: ref(moveable, \"areaElement\"), className: className, style: {\r\n                    top: \"0px\",\r\n                    left: \"0px\",\r\n                    width: \"\".concat(width, \"px\"),\r\n                    height: \"\".concat(height, \"px\"),\r\n                    transformOrigin: \"0 0\",\r\n                    transform: transform,\r\n                } }),\r\n            renderPieces(React),\r\n        ];\r\n    },\r\n    dragStart: function (moveable, _a) {\r\n        var datas = _a.datas, clientX = _a.clientX, clientY = _a.clientY, inputEvent = _a.inputEvent;\r\n        if (!inputEvent) {\r\n            return false;\r\n        }\r\n        datas.isDragArea = false;\r\n        var areaElement = moveable.areaElement;\r\n        var state = moveable.state;\r\n        var moveableClientRect = state.moveableClientRect, renderPoses = state.renderPoses, rootMatrix = state.rootMatrix, is3d = state.is3d;\r\n        var left = moveableClientRect.left, top = moveableClientRect.top;\r\n        var _b = getRect(renderPoses), relativeLeft = _b.left, relativeTop = _b.top, width = _b.width, height = _b.height;\r\n        var n = is3d ? 4 : 3;\r\n        var _c = __read(calculateInversePosition(rootMatrix, [clientX - left, clientY - top], n), 2), posX = _c[0], posY = _c[1];\r\n        posX -= relativeLeft;\r\n        posY -= relativeTop;\r\n        var rects = [\r\n            { left: relativeLeft, top: relativeTop, width: width, height: posY - 10 },\r\n            { left: relativeLeft, top: relativeTop, width: posX - 10, height: height },\r\n            { left: relativeLeft, top: relativeTop + posY + 10, width: width, height: height - posY - 10 },\r\n            { left: relativeLeft + posX + 10, top: relativeTop, width: width - posX - 10, height: height },\r\n        ];\r\n        var children = [].slice.call(areaElement.nextElementSibling.children);\r\n        rects.forEach(function (rect, i) {\r\n            children[i].style.cssText\r\n                = \"left: \".concat(rect.left, \"px;top: \").concat(rect.top, \"px; width: \").concat(rect.width, \"px; height: \").concat(rect.height, \"px;\");\r\n        });\r\n        addClass(areaElement, AVOID);\r\n        state.disableNativeEvent = true;\r\n        return;\r\n    },\r\n    drag: function (moveable, _a) {\r\n        var datas = _a.datas, inputEvent = _a.inputEvent;\r\n        this.enableNativeEvent(moveable);\r\n        if (!inputEvent) {\r\n            return false;\r\n        }\r\n        if (!datas.isDragArea) {\r\n            datas.isDragArea = true;\r\n            restoreStyle(moveable);\r\n        }\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        this.enableNativeEvent(moveable);\r\n        var inputEvent = e.inputEvent, datas = e.datas;\r\n        if (!inputEvent) {\r\n            return false;\r\n        }\r\n        if (!datas.isDragArea) {\r\n            restoreStyle(moveable);\r\n        }\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        return this.dragStart(moveable, e);\r\n    },\r\n    dragGroup: function (moveable, e) {\r\n        return this.drag(moveable, e);\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        return this.dragEnd(moveable, e);\r\n    },\r\n    unset: function (moveable) {\r\n        restoreStyle(moveable);\r\n        moveable.state.disableNativeEvent = false;\r\n    },\r\n    enableNativeEvent: function (moveable) {\r\n        var state = moveable.state;\r\n        if (state.disableNativeEvent) {\r\n            requestAnimationFrame(function () {\r\n                state.disableNativeEvent = false;\r\n            });\r\n        }\r\n    },\r\n};\r\n/**\r\n * Add an event to the moveable area instead of the target for stopPropagation. (default: false, true in group)\r\n * @name Moveable#dragArea\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *  dragArea: false,\r\n * });\r\n */\r\n/**\r\n * Set `pointerEvents: none;` css to pass events in dragArea. (default: false)\r\n * @name Moveable#passDragArea\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *  dragArea: false,\r\n * });\r\n */\n\nvar Origin = makeAble(\"origin\", {\r\n    props: [\"origin\", \"svgOrigin\"],\r\n    render: function (moveable, React) {\r\n        var _a = moveable.props, zoom = _a.zoom, svgOrigin = _a.svgOrigin, groupable = _a.groupable;\r\n        var _b = moveable.getState(), beforeOrigin = _b.beforeOrigin, rotation = _b.rotation, svg = _b.svg, allMatrix = _b.allMatrix, is3d = _b.is3d, left = _b.left, top = _b.top, offsetWidth = _b.offsetWidth, offsetHeight = _b.offsetHeight;\r\n        var originStyle;\r\n        if (!groupable && svg && svgOrigin) {\r\n            var _c = __read(convertTransformOriginArray(svgOrigin, offsetWidth, offsetHeight), 2), originX = _c[0], originY = _c[1];\r\n            var n = is3d ? 4 : 3;\r\n            var result = calculatePosition(allMatrix, [originX, originY], n);\r\n            originStyle = getControlTransform(rotation, zoom, minus(result, [left, top]));\r\n        }\r\n        else {\r\n            originStyle = getControlTransform(rotation, zoom, beforeOrigin);\r\n        }\r\n        return [\r\n            React.createElement(\"div\", { className: prefix(\"control\", \"origin\"), style: originStyle, key: \"beforeOrigin\" }),\r\n        ];\r\n    },\r\n});\r\n/**\r\n * Whether or not the origin controlbox will be visible or not (default: true)\r\n * @name Moveable#origin\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.origin = true;\r\n */\n\nfunction getDefaultScrollPosition(e) {\r\n    var scrollContainer = e.scrollContainer;\r\n    return [\r\n        scrollContainer.scrollLeft,\r\n        scrollContainer.scrollTop,\r\n    ];\r\n}\r\n/**\r\n * @namespace Moveable.Scrollable\r\n * @description Whether or not target can be scrolled to the scroll container (default: false)\r\n */\r\nvar Scrollable = {\r\n    name: \"scrollable\",\r\n    canPinch: true,\r\n    props: [\r\n        \"scrollable\",\r\n        \"scrollContainer\",\r\n        \"scrollThreshold\",\r\n        \"scrollThrottleTime\",\r\n        \"getScrollPosition\",\r\n        \"scrollOptions\",\r\n    ],\r\n    events: [\r\n        \"scroll\",\r\n        \"scrollGroup\",\r\n    ],\r\n    dragRelation: \"strong\",\r\n    dragStart: function (moveable, e) {\r\n        var props = moveable.props;\r\n        var _a = props.scrollContainer, scrollContainer = _a === void 0 ? moveable.getContainer() : _a, scrollOptions = props.scrollOptions;\r\n        var dragScroll = new DragScroll();\r\n        var scrollContainerElement = getRefTarget(scrollContainer, true);\r\n        e.datas.dragScroll = dragScroll;\r\n        moveable.state.dragScroll = dragScroll;\r\n        var gestoName = e.isControl ? \"controlGesto\" : \"targetGesto\";\r\n        var targets = e.targets;\r\n        dragScroll.on(\"scroll\", function (_a) {\r\n            var container = _a.container, direction = _a.direction;\r\n            var params = fillParams(moveable, e, {\r\n                scrollContainer: container,\r\n                direction: direction,\r\n            });\r\n            var eventName = targets ? \"onScrollGroup\" : \"onScroll\";\r\n            if (targets) {\r\n                params.targets = targets;\r\n            }\r\n            triggerEvent(moveable, eventName, params);\r\n        }).on(\"move\", function (_a) {\r\n            var offsetX = _a.offsetX, offsetY = _a.offsetY, inputEvent = _a.inputEvent;\r\n            moveable[gestoName].scrollBy(offsetX, offsetY, inputEvent.inputEvent, true);\r\n        }).on(\"scrollDrag\", function (_a) {\r\n            var next = _a.next;\r\n            next(moveable[gestoName].getCurrentEvent());\r\n        });\r\n        dragScroll.dragStart(e, __assign({ container: scrollContainerElement }, scrollOptions));\r\n    },\r\n    checkScroll: function (moveable, e) {\r\n        var dragScroll = e.datas.dragScroll;\r\n        if (!dragScroll) {\r\n            return;\r\n        }\r\n        var _a = moveable.props, _b = _a.scrollContainer, scrollContainer = _b === void 0 ? moveable.getContainer() : _b, _c = _a.scrollThreshold, scrollThreshold = _c === void 0 ? 0 : _c, _d = _a.scrollThrottleTime, scrollThrottleTime = _d === void 0 ? 0 : _d, _e = _a.getScrollPosition, getScrollPosition = _e === void 0 ? getDefaultScrollPosition : _e, scrollOptions = _a.scrollOptions;\r\n        dragScroll.drag(e, __assign({ container: scrollContainer, threshold: scrollThreshold, throttleTime: scrollThrottleTime, getScrollPosition: function (ev) {\r\n                return getScrollPosition({ scrollContainer: ev.container, direction: ev.direction });\r\n            } }, scrollOptions));\r\n        return true;\r\n    },\r\n    drag: function (moveable, e) {\r\n        return this.checkScroll(moveable, e);\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        e.datas.dragScroll.dragEnd();\r\n        e.datas.dragScroll = null;\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        return this.dragStart(moveable, __assign(__assign({}, e), { isControl: true }));\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        return this.drag(moveable, e);\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        return this.dragEnd(moveable, e);\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        return this.dragStart(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    dragGroup: function (moveable, e) {\r\n        return this.drag(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        return this.dragEnd(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    dragGroupControlStart: function (moveable, e) {\r\n        return this.dragStart(moveable, __assign(__assign({}, e), { targets: moveable.props.targets, isControl: true }));\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        return this.drag(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    dragGroupControEnd: function (moveable, e) {\r\n        return this.dragEnd(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    unset: function (moveable) {\r\n        var _a;\r\n        var state = moveable.state;\r\n        (_a = state.dragScroll) === null || _a === void 0 ? void 0 : _a.dragEnd();\r\n        state.dragScroll = null;\r\n    },\r\n};\r\n/**\r\n * When the drag cursor leaves the scrollContainer, the `scroll` event occur to scroll.\r\n * @memberof Moveable.Scrollable\r\n * @event scroll\r\n * @param {Moveable.Scrollable.OnScroll} - Parameters for the `scroll` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: document.querySelector(\".target\"),\r\n * });\r\n * moveable.on(\"scroll\", ({ scrollContainer, direction }) => {\r\n *   scrollContainer.scrollLeft += direction[0] * 10;\r\n *   scrollContainer.scrollTop += direction[1] * 10;\r\n * });\r\n */\r\n/**\r\n * When the drag cursor leaves the scrollContainer, the `scrollGroup` event occur to scroll in group.\r\n * @memberof Moveable.Scrollable\r\n * @event scrollGroup\r\n * @param {Moveable.Scrollable.OnScrollGroup} - Parameters for the `scrollGroup` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n * });\r\n * moveable.on(\"scroll\", ({ scrollContainer, direction }) => {\r\n *   scrollContainer.scrollLeft += direction[0] * 10;\r\n *   scrollContainer.scrollTop += direction[1] * 10;\r\n * });\r\n */\n\nvar Default = {\r\n    name: \"\",\r\n    props: [\r\n        \"target\",\r\n        \"dragTargetSelf\",\r\n        \"dragTarget\",\r\n        \"dragContainer\",\r\n        \"container\",\r\n        \"warpSelf\",\r\n        \"rootContainer\",\r\n        \"useResizeObserver\",\r\n        \"useMutationObserver\",\r\n        \"zoom\",\r\n        \"dragFocusedInput\",\r\n        \"transformOrigin\",\r\n        \"ables\",\r\n        \"className\",\r\n        \"pinchThreshold\",\r\n        \"pinchOutside\",\r\n        \"triggerAblesSimultaneously\",\r\n        \"checkInput\",\r\n        \"cspNonce\",\r\n        \"translateZ\",\r\n        \"hideDefaultLines\",\r\n        \"props\",\r\n        \"flushSync\",\r\n        \"stopPropagation\",\r\n        \"preventClickEventOnDrag\",\r\n        \"preventClickDefault\",\r\n        \"viewContainer\",\r\n        \"persistData\",\r\n        \"useAccuratePosition\",\r\n        \"firstRenderState\",\r\n        \"linePadding\",\r\n        \"controlPadding\",\r\n        \"preventDefault\",\r\n        \"requestStyles\",\r\n    ],\r\n    events: [\r\n        \"changeTargets\",\r\n    ],\r\n};\n\nvar Padding = makeAble(\"padding\", {\r\n    props: [\"padding\"],\r\n    render: function (moveable, React) {\r\n        var props = moveable.props;\r\n        if (props.dragArea) {\r\n            return [];\r\n        }\r\n        var _a = getPaddingBox(props.padding || {}), left = _a.left, top = _a.top, right = _a.right, bottom = _a.bottom;\r\n        var _b = moveable.getState(), renderPoses = _b.renderPoses, pos1 = _b.pos1, pos2 = _b.pos2, pos3 = _b.pos3, pos4 = _b.pos4;\r\n        var poses = [pos1, pos2, pos3, pos4];\r\n        var paddingDirections = [];\r\n        if (left > 0) {\r\n            paddingDirections.push([0, 2]);\r\n        }\r\n        if (top > 0) {\r\n            paddingDirections.push([0, 1]);\r\n        }\r\n        if (right > 0) {\r\n            paddingDirections.push([1, 3]);\r\n        }\r\n        if (bottom > 0) {\r\n            paddingDirections.push([2, 3]);\r\n        }\r\n        return paddingDirections.map(function (_a, i) {\r\n            var _b = __read(_a, 2), dir1 = _b[0], dir2 = _b[1];\r\n            var paddingPos1 = poses[dir1];\r\n            var paddingPos2 = poses[dir2];\r\n            var paddingPos3 = renderPoses[dir1];\r\n            var paddingPos4 = renderPoses[dir2];\r\n            var h = createWarpMatrix([0, 0], [100, 0], [0, 100], [100, 100], paddingPos1, paddingPos2, paddingPos3, paddingPos4);\r\n            if (!h.length) {\r\n                return undefined;\r\n            }\r\n            return (React.createElement(\"div\", { key: \"padding\".concat(i), className: prefix(\"padding\"), style: {\r\n                    transform: makeMatrixCSS(h, true),\r\n                } }));\r\n        });\r\n    },\r\n});\r\n/**\r\n * Add padding around the target to increase the drag area.\r\n * @name Moveable#padding\r\n * @default null\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *  target: document.querySelector(\".target\"),\r\n *  padding: { left: 0, top: 0, right: 0, bottom: 0 },\r\n * });\r\n * moveable.padding = { left: 10, top: 10, right: 10, bottom: 10 },\r\n * moveable.updateRect();\r\n */\n\nvar RADIUS_DIRECTIONS = [\"nw\", \"ne\", \"se\", \"sw\"];\r\nfunction calculateRatio(values, size) {\r\n    var sumSize = values[0] + values[1];\r\n    var sumRatio = sumSize > size ? size / sumSize : 1;\r\n    values[0] *= sumRatio;\r\n    values[1] = size - values[1] * sumRatio;\r\n    return values;\r\n}\r\nvar HORIZONTAL_RADIUS_ORDER = [1, 2, 5, 6];\r\nvar VERTICAL_RADIUS_ORDER = [0, 3, 4, 7];\r\nvar HORIZONTAL_RADIUS_DIRECTIONS = [1, -1, -1, 1];\r\nvar VERTICAL_RADIUS_DIRECTIONS = [1, 1, -1, -1];\r\nfunction getRadiusStyles(nextPoses, isRelative, width, height, left, top, right, bottom) {\r\n    if (left === void 0) { left = 0; }\r\n    if (top === void 0) { top = 0; }\r\n    if (right === void 0) { right = width; }\r\n    if (bottom === void 0) { bottom = height; }\r\n    var clipStyles = [];\r\n    var isVertical = false;\r\n    var radiusPoses = nextPoses.filter(function (pos) { return !pos.virtual; });\r\n    var raws = radiusPoses.map(function (posInfo) {\r\n        var horizontal = posInfo.horizontal, vertical = posInfo.vertical, pos = posInfo.pos;\r\n        if (vertical && !isVertical) {\r\n            isVertical = true;\r\n            clipStyles.push(\"/\");\r\n        }\r\n        if (isVertical) {\r\n            var rawPos = Math.max(0, vertical === 1 ? pos[1] - top : bottom - pos[1]);\r\n            clipStyles.push(convertCSSSize(rawPos, height, isRelative));\r\n            return rawPos;\r\n        }\r\n        else {\r\n            var rawPos = Math.max(0, horizontal === 1 ? pos[0] - left : right - pos[0]);\r\n            clipStyles.push(convertCSSSize(rawPos, width, isRelative));\r\n            return rawPos;\r\n        }\r\n    });\r\n    return {\r\n        radiusPoses: radiusPoses,\r\n        styles: clipStyles,\r\n        raws: raws,\r\n    };\r\n}\r\nfunction getRadiusRange(controlPoses) {\r\n    // [start, length]\r\n    var horizontalRange = [0, 0];\r\n    var verticalRange = [0, 0];\r\n    var length = controlPoses.length;\r\n    for (var i = 0; i < length; ++i) {\r\n        var clipPose = controlPoses[i];\r\n        if (!clipPose.sub) {\r\n            continue;\r\n        }\r\n        if (clipPose.horizontal) {\r\n            if (horizontalRange[1] === 0) {\r\n                horizontalRange[0] = i;\r\n            }\r\n            horizontalRange[1] = i - horizontalRange[0] + 1;\r\n            verticalRange[0] = i + 1;\r\n        }\r\n        if (clipPose.vertical) {\r\n            if (verticalRange[1] === 0) {\r\n                verticalRange[0] = i;\r\n            }\r\n            verticalRange[1] = i - verticalRange[0] + 1;\r\n        }\r\n    }\r\n    return {\r\n        horizontalRange: horizontalRange,\r\n        verticalRange: verticalRange,\r\n    };\r\n}\r\nfunction getRadiusValues(values, width, height, left, top, minCounts, full) {\r\n    var _a, _b, _c, _d;\r\n    if (minCounts === void 0) { minCounts = [0, 0]; }\r\n    if (full === void 0) { full = false; }\r\n    var splitIndex = values.indexOf(\"/\");\r\n    var splitLength = (splitIndex > -1 ? values.slice(0, splitIndex) : values).length;\r\n    var horizontalValues = values.slice(0, splitLength);\r\n    var verticalValues = values.slice(splitLength + 1);\r\n    var horizontalValuesLength = horizontalValues.length;\r\n    var verticalValuesLength = verticalValues.length;\r\n    var hasVerticalValues = verticalValuesLength > 0;\r\n    var _e = __read(horizontalValues, 4), _f = _e[0], nwValue = _f === void 0 ? \"0px\" : _f, _g = _e[1], neValue = _g === void 0 ? nwValue : _g, _h = _e[2], seValue = _h === void 0 ? nwValue : _h, _j = _e[3], swValue = _j === void 0 ? neValue : _j;\r\n    var _k = __read(verticalValues, 4), _l = _k[0], wnValue = _l === void 0 ? nwValue : _l, _m = _k[1], enValue = _m === void 0 ? hasVerticalValues ? wnValue : neValue : _m, _o = _k[2], esValue = _o === void 0 ? hasVerticalValues ? wnValue : seValue : _o, _p = _k[3], wsValue = _p === void 0 ? hasVerticalValues ? enValue : swValue : _p;\r\n    var horizontalRawPoses = [nwValue, neValue, seValue, swValue].map(function (pos) { return convertUnitSize(pos, width); });\r\n    var verticalRawPoses = [wnValue, enValue, esValue, wsValue].map(function (pos) { return convertUnitSize(pos, height); });\r\n    var horizontalPoses = horizontalRawPoses.slice();\r\n    var verticalPoses = verticalRawPoses.slice();\r\n    _a = __read(calculateRatio([horizontalPoses[0], horizontalPoses[1]], width), 2), horizontalPoses[0] = _a[0], horizontalPoses[1] = _a[1];\r\n    _b = __read(calculateRatio([horizontalPoses[3], horizontalPoses[2]], width), 2), horizontalPoses[3] = _b[0], horizontalPoses[2] = _b[1];\r\n    _c = __read(calculateRatio([verticalPoses[0], verticalPoses[3]], height), 2), verticalPoses[0] = _c[0], verticalPoses[3] = _c[1];\r\n    _d = __read(calculateRatio([verticalPoses[1], verticalPoses[2]], height), 2), verticalPoses[1] = _d[0], verticalPoses[2] = _d[1];\r\n    var nextHorizontalPoses = full\r\n        ? horizontalPoses\r\n        : horizontalPoses.slice(0, Math.max(minCounts[0], horizontalValuesLength));\r\n    var nextVerticalPoses = full\r\n        ? verticalPoses\r\n        : verticalPoses.slice(0, Math.max(minCounts[1], verticalValuesLength));\r\n    return __spreadArray(__spreadArray([], __read(nextHorizontalPoses.map(function (pos, i) {\r\n        var direction = RADIUS_DIRECTIONS[i];\r\n        return {\r\n            virtual: i >= horizontalValuesLength,\r\n            horizontal: HORIZONTAL_RADIUS_DIRECTIONS[i],\r\n            vertical: 0,\r\n            pos: [left + pos, top + (VERTICAL_RADIUS_DIRECTIONS[i] === -1 ? height : 0)],\r\n            sub: true,\r\n            raw: horizontalRawPoses[i],\r\n            direction: direction,\r\n        };\r\n    })), false), __read(nextVerticalPoses.map(function (pos, i) {\r\n        var direction = RADIUS_DIRECTIONS[i];\r\n        return {\r\n            virtual: i >= verticalValuesLength,\r\n            horizontal: 0,\r\n            vertical: VERTICAL_RADIUS_DIRECTIONS[i],\r\n            pos: [left + (HORIZONTAL_RADIUS_DIRECTIONS[i] === -1 ? width : 0), top + pos],\r\n            sub: true,\r\n            raw: verticalRawPoses[i],\r\n            direction: direction,\r\n        };\r\n    })), false);\r\n}\r\nfunction removeRadiusPos(controlPoses, poses, index, startIndex, length) {\r\n    if (length === void 0) { length = poses.length; }\r\n    var _a = getRadiusRange(controlPoses.slice(startIndex)), horizontalRange = _a.horizontalRange, verticalRange = _a.verticalRange;\r\n    var radiuslIndex = index - startIndex;\r\n    var deleteCount = 0;\r\n    if (radiuslIndex === 0) {\r\n        deleteCount = length;\r\n    }\r\n    else if (radiuslIndex > 0 && radiuslIndex < horizontalRange[1]) {\r\n        deleteCount = horizontalRange[1] - radiuslIndex;\r\n    }\r\n    else if (radiuslIndex >= verticalRange[0]) {\r\n        deleteCount = verticalRange[0] + verticalRange[1] - radiuslIndex;\r\n    }\r\n    else {\r\n        return;\r\n    }\r\n    controlPoses.splice(index, deleteCount);\r\n    poses.splice(index, deleteCount);\r\n}\r\nfunction addRadiusPos(controlPoses, poses, startIndex, horizontalIndex, verticalIndex, distX, distY, right, bottom, left, top) {\r\n    if (left === void 0) { left = 0; }\r\n    if (top === void 0) { top = 0; }\r\n    var _a = getRadiusRange(controlPoses.slice(startIndex)), horizontalRange = _a.horizontalRange, verticalRange = _a.verticalRange;\r\n    if (horizontalIndex > -1) {\r\n        var radiusX = HORIZONTAL_RADIUS_DIRECTIONS[horizontalIndex] === 1\r\n            ? distX - left\r\n            : right - distX;\r\n        for (var i = horizontalRange[1]; i <= horizontalIndex; ++i) {\r\n            var y = VERTICAL_RADIUS_DIRECTIONS[i] === 1 ? top : bottom;\r\n            var x = 0;\r\n            if (horizontalIndex === i) {\r\n                x = distX;\r\n            }\r\n            else if (i === 0) {\r\n                x = left + radiusX;\r\n            }\r\n            else if (HORIZONTAL_RADIUS_DIRECTIONS[i] === -1) {\r\n                x = right - (poses[startIndex][0] - left);\r\n            }\r\n            controlPoses.splice(startIndex + i, 0, {\r\n                horizontal: HORIZONTAL_RADIUS_DIRECTIONS[i],\r\n                vertical: 0,\r\n                pos: [x, y],\r\n            });\r\n            poses.splice(startIndex + i, 0, [x, y]);\r\n            if (i === 0) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    else if (verticalIndex > -1) {\r\n        var radiusY = VERTICAL_RADIUS_DIRECTIONS[verticalIndex] === 1\r\n            ? distY - top\r\n            : bottom - distY;\r\n        if (horizontalRange[1] === 0 && verticalRange[1] === 0) {\r\n            var pos = [\r\n                left + radiusY,\r\n                top,\r\n            ];\r\n            controlPoses.push({\r\n                horizontal: HORIZONTAL_RADIUS_DIRECTIONS[0],\r\n                vertical: 0,\r\n                pos: pos,\r\n            });\r\n            poses.push(pos);\r\n        }\r\n        var startVerticalIndex = verticalRange[0];\r\n        for (var i = verticalRange[1]; i <= verticalIndex; ++i) {\r\n            var x = HORIZONTAL_RADIUS_DIRECTIONS[i] === 1 ? left : right;\r\n            var y = 0;\r\n            if (verticalIndex === i) {\r\n                y = distY;\r\n            }\r\n            else if (i === 0) {\r\n                y = top + radiusY;\r\n            }\r\n            else if (VERTICAL_RADIUS_DIRECTIONS[i] === 1) {\r\n                y = poses[startIndex + startVerticalIndex][1];\r\n            }\r\n            else if (VERTICAL_RADIUS_DIRECTIONS[i] === -1) {\r\n                y = bottom - (poses[startIndex + startVerticalIndex][1] - top);\r\n            }\r\n            controlPoses.push({\r\n                horizontal: 0,\r\n                vertical: VERTICAL_RADIUS_DIRECTIONS[i],\r\n                pos: [x, y],\r\n            });\r\n            poses.push([x, y]);\r\n            if (i === 0) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction splitRadiusPoses(controlPoses, raws) {\r\n    if (raws === void 0) { raws = controlPoses.map(function (pos) { return pos.raw; }); }\r\n    var horizontals = controlPoses\r\n        .map(function (pos, i) { return pos.horizontal ? raws[i] : null; }).filter(function (pos) { return pos != null; });\r\n    var verticals = controlPoses\r\n        .map(function (pos, i) { return pos.vertical ? raws[i] : null; }).filter(function (pos) { return pos != null; });\r\n    return {\r\n        horizontals: horizontals,\r\n        verticals: verticals,\r\n    };\r\n}\n\nvar CLIP_DIRECTIONS = [\r\n    [0, -1, \"n\"],\r\n    [1, 0, \"e\"],\r\n];\r\nvar CLIP_RECT_DIRECTIONS = [\r\n    [-1, -1, \"nw\"],\r\n    [0, -1, \"n\"],\r\n    [1, -1, \"ne\"],\r\n    [1, 0, \"e\"],\r\n    [1, 1, \"se\"],\r\n    [0, 1, \"s\"],\r\n    [-1, 1, \"sw\"],\r\n    [-1, 0, \"w\"],\r\n];\r\n// 1 2 5 6 0 3 4 7\r\n// 0 1 2 3 4 5 6 7\r\nfunction getClipStyles(moveable, clipPath, poses) {\r\n    var clipRelative = moveable.props.clipRelative;\r\n    var _a = moveable.state, width = _a.width, height = _a.height;\r\n    var _b = clipPath, clipType = _b.type, clipPoses = _b.poses;\r\n    var isRect = clipType === \"rect\";\r\n    var isCircle = clipType === \"circle\";\r\n    if (clipType === \"polygon\") {\r\n        return poses.map(function (pos) { return \"\".concat(convertCSSSize(pos[0], width, clipRelative), \" \").concat(convertCSSSize(pos[1], height, clipRelative)); });\r\n    }\r\n    else if (isRect || clipType === \"inset\") {\r\n        var top_1 = poses[1][1];\r\n        var right = poses[3][0];\r\n        var left = poses[7][0];\r\n        var bottom = poses[5][1];\r\n        if (isRect) {\r\n            return [\r\n                top_1,\r\n                right,\r\n                bottom,\r\n                left,\r\n            ].map(function (pos) { return \"\".concat(pos, \"px\"); });\r\n        }\r\n        var clipStyles = [top_1, width - right, height - bottom, left]\r\n            .map(function (pos, i) { return convertCSSSize(pos, i % 2 ? width : height, clipRelative); });\r\n        if (poses.length > 8) {\r\n            var _c = __read(minus(poses[4], poses[0]), 2), subWidth = _c[0], subHeight = _c[1];\r\n            clipStyles.push.apply(clipStyles, __spreadArray([\"round\"], __read(getRadiusStyles(clipPoses.slice(8).map(function (info, i) {\r\n                return __assign(__assign({}, info), { pos: poses[i] });\r\n            }), clipRelative, subWidth, subHeight, left, top_1, right, bottom).styles), false));\r\n        }\r\n        return clipStyles;\r\n    }\r\n    else if (isCircle || clipType === \"ellipse\") {\r\n        var center = poses[0];\r\n        var ry = convertCSSSize(abs(poses[1][1] - center[1]), isCircle ? Math.sqrt((width * width + height * height) / 2) : height, clipRelative);\r\n        var clipStyles = isCircle ? [ry]\r\n            : [convertCSSSize(abs(poses[2][0] - center[0]), width, clipRelative), ry];\r\n        clipStyles.push(\"at\", convertCSSSize(center[0], width, clipRelative), convertCSSSize(center[1], height, clipRelative));\r\n        return clipStyles;\r\n    }\r\n}\r\nfunction getRectPoses(top, right, bottom, left) {\r\n    var xs = [left, (left + right) / 2, right];\r\n    var ys = [top, (top + bottom) / 2, bottom];\r\n    return CLIP_RECT_DIRECTIONS.map(function (_a) {\r\n        var _b = __read(_a, 3), dirx = _b[0], diry = _b[1], dir = _b[2];\r\n        var x = xs[dirx + 1];\r\n        var y = ys[diry + 1];\r\n        return {\r\n            vertical: abs(diry),\r\n            horizontal: abs(dirx),\r\n            direction: dir,\r\n            pos: [x, y],\r\n        };\r\n    });\r\n}\r\nfunction getControlSize(controlPoses) {\r\n    var xRange = [Infinity, -Infinity];\r\n    var yRange = [Infinity, -Infinity];\r\n    controlPoses.forEach(function (_a) {\r\n        var pos = _a.pos;\r\n        xRange[0] = Math.min(xRange[0], pos[0]);\r\n        xRange[1] = Math.max(xRange[1], pos[0]);\r\n        yRange[0] = Math.min(yRange[0], pos[1]);\r\n        yRange[1] = Math.max(yRange[1], pos[1]);\r\n    });\r\n    return [\r\n        abs(xRange[1] - xRange[0]),\r\n        abs(yRange[1] - yRange[0]),\r\n    ];\r\n}\r\nfunction getClipPath(target, width, height, defaultClip, customClip) {\r\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j;\r\n    if (!target) {\r\n        return;\r\n    }\r\n    var clipText = customClip;\r\n    if (!clipText) {\r\n        var getStyle = getCachedStyle(target);\r\n        var clipPath = getStyle(\"clipPath\");\r\n        clipText = clipPath !== \"none\" ? clipPath : getStyle(\"clip\");\r\n    }\r\n    if (!clipText || clipText === \"none\" || clipText === \"auto\") {\r\n        clipText = defaultClip;\r\n        if (!clipText) {\r\n            return;\r\n        }\r\n    }\r\n    var _k = splitBracket(clipText), _l = _k.prefix, clipPrefix = _l === void 0 ? clipText : _l, _m = _k.value, value = _m === void 0 ? \"\" : _m;\r\n    var isCircle = clipPrefix === \"circle\";\r\n    var splitter = \" \";\r\n    if (clipPrefix === \"polygon\") {\r\n        var values = splitComma(value || \"0% 0%, 100% 0%, 100% 100%, 0% 100%\");\r\n        splitter = \",\";\r\n        var poses = values.map(function (pos) {\r\n            var _a = __read(pos.split(\" \"), 2), xPos = _a[0], yPos = _a[1];\r\n            return {\r\n                vertical: 1,\r\n                horizontal: 1,\r\n                pos: [\r\n                    convertUnitSize(xPos, width),\r\n                    convertUnitSize(yPos, height),\r\n                ],\r\n            };\r\n        });\r\n        var minMaxs = getMinMaxs(poses.map(function (pos) { return pos.pos; }));\r\n        return {\r\n            type: clipPrefix,\r\n            clipText: clipText,\r\n            poses: poses,\r\n            splitter: splitter,\r\n            left: minMaxs.minX,\r\n            right: minMaxs.maxX,\r\n            top: minMaxs.minY,\r\n            bottom: minMaxs.maxY,\r\n        };\r\n    }\r\n    else if (isCircle || clipPrefix === \"ellipse\") {\r\n        var xPos = \"\";\r\n        var yPos = \"\";\r\n        var radiusX_1 = 0;\r\n        var radiusY_1 = 0;\r\n        var values = splitSpace(value);\r\n        if (isCircle) {\r\n            var radius = \"\";\r\n            _a = __read(values, 4), _b = _a[0], radius = _b === void 0 ? \"50%\" : _b, _c = _a[2], xPos = _c === void 0 ? \"50%\" : _c, _d = _a[3], yPos = _d === void 0 ? \"50%\" : _d;\r\n            radiusX_1 = convertUnitSize(radius, Math.sqrt((width * width + height * height) / 2));\r\n            radiusY_1 = radiusX_1;\r\n        }\r\n        else {\r\n            var xRadius = \"\";\r\n            var yRadius = \"\";\r\n            _e = __read(values, 5), _f = _e[0], xRadius = _f === void 0 ? \"50%\" : _f, _g = _e[1], yRadius = _g === void 0 ? \"50%\" : _g, _h = _e[3], xPos = _h === void 0 ? \"50%\" : _h, _j = _e[4], yPos = _j === void 0 ? \"50%\" : _j;\r\n            radiusX_1 = convertUnitSize(xRadius, width);\r\n            radiusY_1 = convertUnitSize(yRadius, height);\r\n        }\r\n        var centerPos_1 = [\r\n            convertUnitSize(xPos, width),\r\n            convertUnitSize(yPos, height),\r\n        ];\r\n        var poses = __spreadArray([\r\n            {\r\n                vertical: 1,\r\n                horizontal: 1,\r\n                pos: centerPos_1,\r\n                direction: \"nesw\",\r\n            }\r\n        ], __read(CLIP_DIRECTIONS.slice(0, isCircle ? 1 : 2).map(function (dir) { return ({\r\n            vertical: abs(dir[1]),\r\n            horizontal: dir[0],\r\n            direction: dir[2],\r\n            sub: true,\r\n            pos: [\r\n                centerPos_1[0] + dir[0] * radiusX_1,\r\n                centerPos_1[1] + dir[1] * radiusY_1,\r\n            ],\r\n        }); })), false);\r\n        return {\r\n            type: clipPrefix,\r\n            clipText: clipText,\r\n            radiusX: radiusX_1,\r\n            radiusY: radiusY_1,\r\n            left: centerPos_1[0] - radiusX_1,\r\n            top: centerPos_1[1] - radiusY_1,\r\n            right: centerPos_1[0] + radiusX_1,\r\n            bottom: centerPos_1[1] + radiusY_1,\r\n            poses: poses,\r\n            splitter: splitter,\r\n        };\r\n    }\r\n    else if (clipPrefix === \"inset\") {\r\n        var values = splitSpace(value || \"0 0 0 0\");\r\n        var roundIndex = values.indexOf(\"round\");\r\n        var rectLength = (roundIndex > -1 ? values.slice(0, roundIndex) : values).length;\r\n        var radiusValues = values.slice(rectLength + 1);\r\n        var _o = __read(values.slice(0, rectLength), 4), topValue = _o[0], _p = _o[1], rightValue = _p === void 0 ? topValue : _p, _q = _o[2], bottomValue = _q === void 0 ? topValue : _q, _r = _o[3], leftValue = _r === void 0 ? rightValue : _r;\r\n        var _s = __read([topValue, bottomValue].map(function (pos) { return convertUnitSize(pos, height); }), 2), top_2 = _s[0], bottom = _s[1];\r\n        var _t = __read([leftValue, rightValue].map(function (pos) { return convertUnitSize(pos, width); }), 2), left = _t[0], right = _t[1];\r\n        var nextRight = width - right;\r\n        var nextBottom = height - bottom;\r\n        var radiusPoses = getRadiusValues(radiusValues, nextRight - left, nextBottom - top_2, left, top_2);\r\n        var poses = __spreadArray(__spreadArray([], __read(getRectPoses(top_2, nextRight, nextBottom, left)), false), __read(radiusPoses), false);\r\n        return {\r\n            type: \"inset\",\r\n            clipText: clipText,\r\n            poses: poses,\r\n            top: top_2,\r\n            left: left,\r\n            right: nextRight,\r\n            bottom: nextBottom,\r\n            radius: radiusValues,\r\n            splitter: splitter,\r\n        };\r\n    }\r\n    else if (clipPrefix === \"rect\") {\r\n        // top right bottom left\r\n        var values = splitComma(value || \"0px, \".concat(width, \"px, \").concat(height, \"px, 0px\"));\r\n        splitter = \",\";\r\n        var _u = __read(values.map(function (pos) {\r\n            var posValue = splitUnit(pos).value;\r\n            return posValue;\r\n        }), 4), top_3 = _u[0], right = _u[1], bottom = _u[2], left = _u[3];\r\n        var poses = getRectPoses(top_3, right, bottom, left);\r\n        return {\r\n            type: \"rect\",\r\n            clipText: clipText,\r\n            poses: poses,\r\n            top: top_3,\r\n            right: right,\r\n            bottom: bottom,\r\n            left: left,\r\n            values: values,\r\n            splitter: splitter,\r\n        };\r\n    }\r\n    return;\r\n}\n\nfunction moveControlPos(controlPoses, index, dist, isRect, keepRatio) {\r\n    var _a = controlPoses[index], direction = _a.direction, sub = _a.sub;\r\n    var dists = controlPoses.map(function () { return [0, 0]; });\r\n    var directions = direction ? direction.split(\"\") : [];\r\n    if (isRect && index < 8) {\r\n        var verticalDirections = directions.filter(function (dir) { return dir === \"w\" || dir === \"e\"; });\r\n        var horizontalDirections = directions.filter(function (dir) { return dir === \"n\" || dir === \"s\"; });\r\n        var verticalDirection_1 = verticalDirections[0];\r\n        var horizontalDirection_1 = horizontalDirections[0];\r\n        dists[index] = dist;\r\n        var _b = __read(getControlSize(controlPoses), 2), width = _b[0], height = _b[1];\r\n        var ratio = width && height ? width / height : 0;\r\n        if (ratio && keepRatio) {\r\n            // 0 1 2\r\n            // 7   3\r\n            // 6 5 4\r\n            var fixedIndex = (index + 4) % 8;\r\n            var fixedPosition = controlPoses[fixedIndex].pos;\r\n            var sizeDirection = [0, 0];\r\n            if (direction.indexOf(\"w\") > -1) {\r\n                sizeDirection[0] = -1;\r\n            }\r\n            else if (direction.indexOf(\"e\") > -1) {\r\n                sizeDirection[0] = 1;\r\n            }\r\n            if (direction.indexOf(\"n\") > -1) {\r\n                sizeDirection[1] = -1;\r\n            }\r\n            else if (direction.indexOf(\"s\") > -1) {\r\n                sizeDirection[1] = 1;\r\n            }\r\n            var nextDist = getSizeDistByDist([width, height], dist, ratio, sizeDirection, true);\r\n            var nextWidth = width + nextDist[0];\r\n            var nextHeight = height + nextDist[1];\r\n            var top_1 = fixedPosition[1];\r\n            var bottom = fixedPosition[1];\r\n            var left = fixedPosition[0];\r\n            var right = fixedPosition[0];\r\n            if (sizeDirection[0] === -1) {\r\n                left = right - nextWidth;\r\n            }\r\n            else if (sizeDirection[0] === 1) {\r\n                right = left + nextWidth;\r\n            }\r\n            else {\r\n                left = left - nextWidth / 2;\r\n                right = right + nextWidth / 2;\r\n            }\r\n            if (sizeDirection[1] === -1) {\r\n                top_1 = bottom - nextHeight;\r\n            }\r\n            else if (sizeDirection[1] === 1) {\r\n                bottom = top_1 + nextHeight;\r\n            }\r\n            else {\r\n                top_1 = bottom - nextHeight / 2;\r\n                bottom = top_1 + nextHeight;\r\n            }\r\n            var nextControlPoses_1 = getRectPoses(top_1, right, bottom, left);\r\n            controlPoses.forEach(function (controlPose, i) {\r\n                dists[i][0] = nextControlPoses_1[i].pos[0] - controlPose.pos[0];\r\n                dists[i][1] = nextControlPoses_1[i].pos[1] - controlPose.pos[1];\r\n            });\r\n        }\r\n        else {\r\n            controlPoses.forEach(function (controlPose, i) {\r\n                var controlDir = controlPose.direction;\r\n                if (!controlDir) {\r\n                    return;\r\n                }\r\n                if (controlDir.indexOf(verticalDirection_1) > -1) {\r\n                    dists[i][0] = dist[0];\r\n                }\r\n                if (controlDir.indexOf(horizontalDirection_1) > -1) {\r\n                    dists[i][1] = dist[1];\r\n                }\r\n            });\r\n            if (verticalDirection_1) {\r\n                dists[1][0] = dist[0] / 2;\r\n                dists[5][0] = dist[0] / 2;\r\n            }\r\n            if (horizontalDirection_1) {\r\n                dists[3][1] = dist[1] / 2;\r\n                dists[7][1] = dist[1] / 2;\r\n            }\r\n        }\r\n    }\r\n    else if (direction && !sub) {\r\n        directions.forEach(function (dir) {\r\n            var isVertical = dir === \"n\" || dir === \"s\";\r\n            controlPoses.forEach(function (controlPose, i) {\r\n                var dirDir = controlPose.direction, dirHorizontal = controlPose.horizontal, dirVertical = controlPose.vertical;\r\n                if (!dirDir || dirDir.indexOf(dir) === -1) {\r\n                    return;\r\n                }\r\n                dists[i] = [\r\n                    isVertical || !dirHorizontal ? 0 : dist[0],\r\n                    !isVertical || !dirVertical ? 0 : dist[1],\r\n                ];\r\n            });\r\n        });\r\n    }\r\n    else {\r\n        dists[index] = dist;\r\n    }\r\n    return dists;\r\n}\r\nfunction addClipPath(moveable, e) {\r\n    var _a = __read(calculatePointerDist(moveable, e), 2), distX = _a[0], distY = _a[1];\r\n    var _b = e.datas, clipPath = _b.clipPath, clipIndex = _b.clipIndex;\r\n    var _c = clipPath, clipType = _c.type, clipPoses = _c.poses, splitter = _c.splitter;\r\n    var poses = clipPoses.map(function (pos) { return pos.pos; });\r\n    if (clipType === \"polygon\") {\r\n        poses.splice(clipIndex, 0, [distX, distY]);\r\n    }\r\n    else if (clipType === \"inset\") {\r\n        var horizontalIndex = HORIZONTAL_RADIUS_ORDER.indexOf(clipIndex);\r\n        var verticalIndex = VERTICAL_RADIUS_ORDER.indexOf(clipIndex);\r\n        var length_1 = clipPoses.length;\r\n        addRadiusPos(clipPoses, poses, 8, horizontalIndex, verticalIndex, distX, distY, poses[4][0], poses[4][1], poses[0][0], poses[0][1]);\r\n        if (length_1 === clipPoses.length) {\r\n            return;\r\n        }\r\n    }\r\n    else {\r\n        return;\r\n    }\r\n    var clipStyles = getClipStyles(moveable, clipPath, poses);\r\n    var clipStyle = \"\".concat(clipType, \"(\").concat(clipStyles.join(splitter), \")\");\r\n    triggerEvent(moveable, \"onClip\", fillParams(moveable, e, __assign({ clipEventType: \"added\", clipType: clipType, poses: poses, clipStyles: clipStyles, clipStyle: clipStyle, distX: 0, distY: 0 }, fillCSSObject({\r\n        clipPath: clipStyle,\r\n    }, e))));\r\n}\r\nfunction removeClipPath(moveable, e) {\r\n    var _a = e.datas, clipPath = _a.clipPath, clipIndex = _a.clipIndex;\r\n    var _b = clipPath, clipType = _b.type, clipPoses = _b.poses, splitter = _b.splitter;\r\n    var poses = clipPoses.map(function (pos) { return pos.pos; });\r\n    var length = poses.length;\r\n    if (clipType === \"polygon\") {\r\n        clipPoses.splice(clipIndex, 1);\r\n        poses.splice(clipIndex, 1);\r\n    }\r\n    else if (clipType === \"inset\") {\r\n        if (clipIndex < 8) {\r\n            return;\r\n        }\r\n        removeRadiusPos(clipPoses, poses, clipIndex, 8, length);\r\n        if (length === clipPoses.length) {\r\n            return;\r\n        }\r\n    }\r\n    else {\r\n        return;\r\n    }\r\n    var clipStyles = getClipStyles(moveable, clipPath, poses);\r\n    var clipStyle = \"\".concat(clipType, \"(\").concat(clipStyles.join(splitter), \")\");\r\n    triggerEvent(moveable, \"onClip\", fillParams(moveable, e, __assign({ clipEventType: \"removed\", clipType: clipType, poses: poses, clipStyles: clipStyles, clipStyle: clipStyle, distX: 0, distY: 0 }, fillCSSObject({\r\n        clipPath: clipStyle,\r\n    }, e))));\r\n}\r\n/**\r\n * @namespace Moveable.Clippable\r\n * @description Whether to clip the target.\r\n */\r\nvar Clippable = {\r\n    name: \"clippable\",\r\n    props: [\r\n        \"clippable\",\r\n        \"defaultClipPath\",\r\n        \"customClipPath\",\r\n        \"keepRatio\",\r\n        \"clipRelative\",\r\n        \"clipArea\",\r\n        \"dragWithClip\",\r\n        \"clipTargetBounds\",\r\n        \"clipVerticalGuidelines\",\r\n        \"clipHorizontalGuidelines\",\r\n        \"clipSnapThreshold\",\r\n    ],\r\n    events: [\r\n        \"clipStart\",\r\n        \"clip\",\r\n        \"clipEnd\",\r\n    ],\r\n    css: [\r\n        \".control.clip-control {\\nbackground: #6d6;\\ncursor: pointer;\\n}\\n.control.clip-control.clip-radius {\\nbackground: #d66;\\n}\\n.line.clip-line {\\nbackground: #6e6;\\ncursor: move;\\nz-index: 1;\\n}\\n.clip-area {\\nposition: absolute;\\ntop: 0;\\nleft: 0;\\n}\\n.clip-ellipse {\\nposition: absolute;\\ncursor: move;\\nborder: 1px solid #6d6;\\nborder: var(--zoompx) solid #6d6;\\nborder-radius: 50%;\\ntransform-origin: 0px 0px;\\n}\",\r\n        \":host {\\n--bounds-color: #d66;\\n}\",\r\n        \".guideline {\\npointer-events: none;\\nz-index: 2;\\n}\",\r\n        \".line.guideline.bounds {\\nbackground: #d66;\\nbackground: var(--bounds-color);\\n}\",\r\n    ],\r\n    render: function (moveable, React) {\r\n        var _a = moveable.props, customClipPath = _a.customClipPath, defaultClipPath = _a.defaultClipPath, clipArea = _a.clipArea, zoom = _a.zoom, groupable = _a.groupable;\r\n        var _b = moveable.getState(), target = _b.target, width = _b.width, height = _b.height, allMatrix = _b.allMatrix, is3d = _b.is3d, left = _b.left, top = _b.top, pos1 = _b.pos1, pos2 = _b.pos2, pos3 = _b.pos3, pos4 = _b.pos4, clipPathState = _b.clipPathState, snapBoundInfos = _b.snapBoundInfos, rotationRad = _b.rotation;\r\n        if (!target || groupable) {\r\n            return [];\r\n        }\r\n        var clipPath = getClipPath(target, width, height, defaultClipPath || \"inset\", clipPathState || customClipPath);\r\n        if (!clipPath) {\r\n            return [];\r\n        }\r\n        var n = is3d ? 4 : 3;\r\n        var type = clipPath.type;\r\n        var clipPoses = clipPath.poses;\r\n        var poses = clipPoses.map(function (pos) {\r\n            // return [x, y];\r\n            var calculatedPos = calculatePosition(allMatrix, pos.pos, n);\r\n            return [\r\n                calculatedPos[0] - left,\r\n                calculatedPos[1] - top,\r\n            ];\r\n        });\r\n        var controls = [];\r\n        var lines = [];\r\n        var isRect = type === \"rect\";\r\n        var isInset = type === \"inset\";\r\n        var isPolygon = type === \"polygon\";\r\n        if (isRect || isInset || isPolygon) {\r\n            var linePoses_1 = isInset ? poses.slice(0, 8) : poses;\r\n            lines = linePoses_1.map(function (to, i) {\r\n                var from = i === 0 ? linePoses_1[linePoses_1.length - 1] : linePoses_1[i - 1];\r\n                var rad = getRad(from, to);\r\n                var dist = getDiagonalSize(from, to);\r\n                return React.createElement(\"div\", { key: \"clipLine\".concat(i), className: prefix(\"line\", \"clip-line\", \"snap-control\"), \"data-clip-index\": i, style: {\r\n                        width: \"\".concat(dist, \"px\"),\r\n                        transform: \"translate(\".concat(from[0], \"px, \").concat(from[1], \"px) rotate(\").concat(rad, \"rad) scaleY(\").concat(zoom, \")\"),\r\n                    } });\r\n            });\r\n        }\r\n        controls = poses.map(function (pos, i) {\r\n            return React.createElement(\"div\", { key: \"clipControl\".concat(i), className: prefix(\"control\", \"clip-control\", \"snap-control\"), \"data-clip-index\": i, style: {\r\n                    transform: \"translate(\".concat(pos[0], \"px, \").concat(pos[1], \"px) rotate(\").concat(rotationRad, \"rad) scale(\").concat(zoom, \")\"),\r\n                } });\r\n        });\r\n        if (isInset) {\r\n            controls.push.apply(controls, __spreadArray([], __read(poses.slice(8).map(function (pos, i) {\r\n                return React.createElement(\"div\", { key: \"clipRadiusControl\".concat(i), className: prefix(\"control\", \"clip-control\", \"clip-radius\", \"snap-control\"), \"data-clip-index\": 8 + i, style: {\r\n                        transform: \"translate(\".concat(pos[0], \"px, \").concat(pos[1], \"px) rotate(\").concat(rotationRad, \"rad) scale(\").concat(zoom, \")\"),\r\n                    } });\r\n            })), false));\r\n        }\r\n        if (type === \"circle\" || type === \"ellipse\") {\r\n            var clipLeft = clipPath.left, clipTop = clipPath.top, radiusX = clipPath.radiusX, radiusY = clipPath.radiusY;\r\n            var _c = __read(minus(calculatePosition(allMatrix, [clipLeft, clipTop], n), calculatePosition(allMatrix, [0, 0], n)), 2), distLeft = _c[0], distTop = _c[1];\r\n            var ellipseClipPath = \"none\";\r\n            if (!clipArea) {\r\n                var piece = Math.max(10, radiusX / 5, radiusY / 5);\r\n                var areaPoses = [];\r\n                for (var i = 0; i <= piece; ++i) {\r\n                    var rad = Math.PI * 2 / piece * i;\r\n                    areaPoses.push([\r\n                        radiusX + (radiusX - zoom) * Math.cos(rad),\r\n                        radiusY + (radiusY - zoom) * Math.sin(rad),\r\n                    ]);\r\n                }\r\n                areaPoses.push([radiusX, -2]);\r\n                areaPoses.push([-2, -2]);\r\n                areaPoses.push([-2, radiusY * 2 + 2]);\r\n                areaPoses.push([radiusX * 2 + 2, radiusY * 2 + 2]);\r\n                areaPoses.push([radiusX * 2 + 2, -2]);\r\n                areaPoses.push([radiusX, -2]);\r\n                ellipseClipPath = \"polygon(\".concat(areaPoses.map(function (pos) { return \"\".concat(pos[0], \"px \").concat(pos[1], \"px\"); }).join(\", \"), \")\");\r\n            }\r\n            controls.push(React.createElement(\"div\", { key: \"clipEllipse\", className: prefix(\"clip-ellipse\", \"snap-control\"), style: {\r\n                    width: \"\".concat(radiusX * 2, \"px\"),\r\n                    height: \"\".concat(radiusY * 2, \"px\"),\r\n                    clipPath: ellipseClipPath,\r\n                    transform: \"translate(\".concat(-left + distLeft, \"px, \").concat(-top + distTop, \"px) \").concat(makeMatrixCSS(allMatrix)),\r\n                } }));\r\n        }\r\n        if (clipArea) {\r\n            var _d = getRect(__spreadArray([pos1, pos2, pos3, pos4], __read(poses), false)), allWidth = _d.width, allHeight = _d.height, allLeft_1 = _d.left, allTop_1 = _d.top;\r\n            if (isPolygon || isRect || isInset) {\r\n                var areaPoses = isInset ? poses.slice(0, 8) : poses;\r\n                controls.push(React.createElement(\"div\", { key: \"clipArea\", className: prefix(\"clip-area\", \"snap-control\"), style: {\r\n                        width: \"\".concat(allWidth, \"px\"),\r\n                        height: \"\".concat(allHeight, \"px\"),\r\n                        transform: \"translate(\".concat(allLeft_1, \"px, \").concat(allTop_1, \"px)\"),\r\n                        clipPath: \"polygon(\".concat(areaPoses.map(function (pos) { return \"\".concat(pos[0] - allLeft_1, \"px \").concat(pos[1] - allTop_1, \"px\"); }).join(\", \"), \")\"),\r\n                    } }));\r\n            }\r\n        }\r\n        if (snapBoundInfos) {\r\n            [\"vertical\", \"horizontal\"].forEach(function (directionType) {\r\n                var info = snapBoundInfos[directionType];\r\n                var isHorizontal = directionType === \"horizontal\";\r\n                if (info.isSnap) {\r\n                    lines.push.apply(lines, __spreadArray([], __read(info.snap.posInfos.map(function (_a, i) {\r\n                        var pos = _a.pos;\r\n                        var snapPos1 = minus(calculatePosition(allMatrix, isHorizontal ? [0, pos] : [pos, 0], n), [left, top]);\r\n                        var snapPos2 = minus(calculatePosition(allMatrix, isHorizontal ? [width, pos] : [pos, height], n), [left, top]);\r\n                        return renderLine(React, \"\", snapPos1, snapPos2, zoom, \"clip\".concat(directionType, \"snap\").concat(i), \"guideline\");\r\n                    })), false));\r\n                }\r\n                if (info.isBound) {\r\n                    lines.push.apply(lines, __spreadArray([], __read(info.bounds.map(function (_a, i) {\r\n                        var pos = _a.pos;\r\n                        var snapPos1 = minus(calculatePosition(allMatrix, isHorizontal ? [0, pos] : [pos, 0], n), [left, top]);\r\n                        var snapPos2 = minus(calculatePosition(allMatrix, isHorizontal ? [width, pos] : [pos, height], n), [left, top]);\r\n                        return renderLine(React, \"\", snapPos1, snapPos2, zoom, \"clip\".concat(directionType, \"bounds\").concat(i), \"guideline\", \"bounds\", \"bold\");\r\n                    })), false));\r\n                }\r\n            });\r\n        }\r\n        return __spreadArray(__spreadArray([], __read(controls), false), __read(lines), false);\r\n    },\r\n    dragControlCondition: function (moveable, e) {\r\n        return e.inputEvent && (e.inputEvent.target.getAttribute(\"class\") || \"\").indexOf(\"clip\") > -1;\r\n    },\r\n    dragStart: function (moveable, e) {\r\n        var props = moveable.props;\r\n        var _a = props.dragWithClip, dragWithClip = _a === void 0 ? true : _a;\r\n        if (dragWithClip) {\r\n            return false;\r\n        }\r\n        return this.dragControlStart(moveable, e);\r\n    },\r\n    drag: function (moveable, e) {\r\n        return this.dragControl(moveable, __assign(__assign({}, e), { isDragTarget: true }));\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        return this.dragControlEnd(moveable, e);\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        var state = moveable.state;\r\n        var _a = moveable.props, defaultClipPath = _a.defaultClipPath, customClipPath = _a.customClipPath;\r\n        var target = state.target, width = state.width, height = state.height;\r\n        var inputTarget = e.inputEvent ? e.inputEvent.target : null;\r\n        var className = (inputTarget && inputTarget.getAttribute(\"class\")) || \"\";\r\n        var datas = e.datas;\r\n        var clipPath = getClipPath(target, width, height, defaultClipPath || \"inset\", customClipPath);\r\n        if (!clipPath) {\r\n            return false;\r\n        }\r\n        var clipText = clipPath.clipText, type = clipPath.type, poses = clipPath.poses;\r\n        var result = triggerEvent(moveable, \"onClipStart\", fillParams(moveable, e, {\r\n            clipType: type,\r\n            clipStyle: clipText,\r\n            poses: poses.map(function (pos) { return pos.pos; }),\r\n        }));\r\n        if (result === false) {\r\n            datas.isClipStart = false;\r\n            return false;\r\n        }\r\n        datas.isControl = className && className.indexOf(\"clip-control\") > -1;\r\n        datas.isLine = className.indexOf(\"clip-line\") > -1;\r\n        datas.isArea = className.indexOf(\"clip-area\") > -1 || className.indexOf(\"clip-ellipse\") > -1;\r\n        datas.clipIndex = inputTarget ? parseInt(inputTarget.getAttribute(\"data-clip-index\"), 10) : -1;\r\n        datas.clipPath = clipPath;\r\n        datas.isClipStart = true;\r\n        state.clipPathState = clipText;\r\n        setDragStart(moveable, e);\r\n        return true;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        var _a, _b, _c;\r\n        var datas = e.datas, originalDatas = e.originalDatas, isDragTarget = e.isDragTarget;\r\n        if (!datas.isClipStart) {\r\n            return false;\r\n        }\r\n        var _d = datas, isControl = _d.isControl, isLine = _d.isLine, isArea = _d.isArea, clipIndex = _d.clipIndex, clipPath = _d.clipPath;\r\n        if (!clipPath) {\r\n            return false;\r\n        }\r\n        var props = getProps(moveable.props, \"clippable\");\r\n        var keepRatio = props.keepRatio;\r\n        var distX = 0;\r\n        var distY = 0;\r\n        var originalDraggable = originalDatas.draggable;\r\n        var originalDist = getDragDist(e);\r\n        if (isDragTarget && originalDraggable) {\r\n            _a = __read(originalDraggable.prevBeforeDist, 2), distX = _a[0], distY = _a[1];\r\n        }\r\n        else {\r\n            _b = __read(originalDist, 2), distX = _b[0], distY = _b[1];\r\n        }\r\n        var firstDist = [distX, distY];\r\n        var state = moveable.state;\r\n        var width = state.width, height = state.height;\r\n        var isDragWithTarget = !isArea && !isControl && !isLine;\r\n        var clipType = clipPath.type, clipPoses = clipPath.poses, splitter = clipPath.splitter;\r\n        var poses = clipPoses.map(function (pos) { return pos.pos; });\r\n        if (isDragWithTarget) {\r\n            distX = -distX;\r\n            distY = -distY;\r\n        }\r\n        var isAll = !isControl || clipPoses[clipIndex].direction === \"nesw\";\r\n        var isRect = clipType === \"inset\" || clipType === \"rect\";\r\n        var dists = clipPoses.map(function () { return [0, 0]; });\r\n        if (isControl && !isAll) {\r\n            var _e = clipPoses[clipIndex], horizontal = _e.horizontal, vertical = _e.vertical;\r\n            var dist = [\r\n                distX * abs(horizontal),\r\n                distY * abs(vertical),\r\n            ];\r\n            dists = moveControlPos(clipPoses, clipIndex, dist, isRect, keepRatio);\r\n        }\r\n        else if (isAll) {\r\n            dists = poses.map(function () { return [distX, distY]; });\r\n        }\r\n        var nextPoses = poses.map(function (pos, i) { return plus(pos, dists[i]); });\r\n        var guidePoses = __spreadArray([], __read(nextPoses), false);\r\n        state.snapBoundInfos = null;\r\n        var isCircle = clipPath.type === \"circle\";\r\n        var isEllipse = clipPath.type === \"ellipse\";\r\n        if (isCircle || isEllipse) {\r\n            var guideRect = getRect(nextPoses);\r\n            var ry = abs(guideRect.bottom - guideRect.top);\r\n            var rx = abs(isEllipse ? guideRect.right - guideRect.left : ry);\r\n            var bottom = nextPoses[0][1] + ry;\r\n            var left = nextPoses[0][0] - rx;\r\n            var right = nextPoses[0][0] + rx;\r\n            // right\r\n            if (isCircle) {\r\n                guidePoses.push([right, guideRect.bottom]);\r\n                dists.push([1, 0]);\r\n            }\r\n            // bottom\r\n            guidePoses.push([guideRect.left, bottom]);\r\n            dists.push([0, 1]);\r\n            // left\r\n            guidePoses.push([left, guideRect.bottom]);\r\n            dists.push([1, 0]);\r\n        }\r\n        var guidelines = getDefaultGuidelines((props.clipHorizontalGuidelines || []).map(function (v) { return convertUnitSize(\"\".concat(v), height); }), (props.clipVerticalGuidelines || []).map(function (v) { return convertUnitSize(\"\".concat(v), width); }), width, height);\r\n        var guideXPoses = [];\r\n        var guideYPoses = [];\r\n        if (isCircle || isEllipse) {\r\n            guideXPoses = [guidePoses[4][0], guidePoses[2][0]];\r\n            guideYPoses = [guidePoses[1][1], guidePoses[3][1]];\r\n        }\r\n        else if (isRect) {\r\n            var rectPoses = [guidePoses[0], guidePoses[2], guidePoses[4], guidePoses[6]];\r\n            var rectDists_1 = [dists[0], dists[2], dists[4], dists[6]];\r\n            guideXPoses = rectPoses.filter(function (_, i) { return rectDists_1[i][0]; }).map(function (pos) { return pos[0]; });\r\n            guideYPoses = rectPoses.filter(function (_, i) { return rectDists_1[i][1]; }).map(function (pos) { return pos[1]; });\r\n        }\r\n        else {\r\n            guideXPoses = guidePoses.filter(function (_, i) { return dists[i][0]; }).map(function (pos) { return pos[0]; });\r\n            guideYPoses = guidePoses.filter(function (_, i) { return dists[i][1]; }).map(function (pos) { return pos[1]; });\r\n        }\r\n        var boundDelta = [0, 0];\r\n        var _f = checkSnapBounds(guidelines, props.clipTargetBounds && { left: 0, top: 0, right: width, bottom: height }, guideXPoses, guideYPoses, 5), horizontalSnapInfo = _f.horizontal, verticalSnapInfo = _f.vertical;\r\n        var snapOffsetY = horizontalSnapInfo.offset;\r\n        var snapOffsetX = verticalSnapInfo.offset;\r\n        if (horizontalSnapInfo.isBound) {\r\n            boundDelta[1] += snapOffsetY;\r\n        }\r\n        if (verticalSnapInfo.isBound) {\r\n            boundDelta[0] += snapOffsetX;\r\n        }\r\n        if ((isEllipse || isCircle) && dists[0][0] === 0 && dists[0][1] === 0) {\r\n            var guideRect = getRect(nextPoses);\r\n            var cy = guideRect.bottom - guideRect.top;\r\n            var cx = isEllipse ? guideRect.right - guideRect.left : cy;\r\n            var distSnapX = verticalSnapInfo.isBound\r\n                ? abs(snapOffsetX)\r\n                : (verticalSnapInfo.snapIndex === 0 ? -snapOffsetX : snapOffsetX);\r\n            var distSnapY = horizontalSnapInfo.isBound\r\n                ? abs(snapOffsetY)\r\n                : (horizontalSnapInfo.snapIndex === 0 ? -snapOffsetY : snapOffsetY);\r\n            cx -= distSnapX;\r\n            cy -= distSnapY;\r\n            if (isCircle) {\r\n                cy = checkSnapBoundPriority(verticalSnapInfo, horizontalSnapInfo) > 0 ? cy : cx;\r\n                cx = cy;\r\n            }\r\n            var center = guidePoses[0];\r\n            guidePoses[1][1] = center[1] - cy;\r\n            guidePoses[2][0] = center[0] + cx;\r\n            guidePoses[3][1] = center[1] + cy;\r\n            guidePoses[4][0] = center[0] - cx;\r\n        }\r\n        else if (isRect && keepRatio && isControl) {\r\n            var _g = __read(getControlSize(clipPoses), 2), width_1 = _g[0], height_1 = _g[1];\r\n            var ratio = width_1 && height_1 ? width_1 / height_1 : 0;\r\n            var clipPose = clipPoses[clipIndex];\r\n            var direction = clipPose.direction || \"\";\r\n            var top_2 = guidePoses[1][1];\r\n            var bottom = guidePoses[5][1];\r\n            var left = guidePoses[7][0];\r\n            var right = guidePoses[3][0];\r\n            if (abs(snapOffsetY) <= abs(snapOffsetX)) {\r\n                snapOffsetY = sign(snapOffsetY) * abs(snapOffsetX) / ratio;\r\n            }\r\n            else {\r\n                snapOffsetX = sign(snapOffsetX) * abs(snapOffsetY) * ratio;\r\n            }\r\n            if (direction.indexOf(\"w\") > -1) {\r\n                left -= snapOffsetX;\r\n            }\r\n            else if (direction.indexOf(\"e\") > -1) {\r\n                right -= snapOffsetX;\r\n            }\r\n            else {\r\n                left += snapOffsetX / 2;\r\n                right -= snapOffsetX / 2;\r\n            }\r\n            if (direction.indexOf(\"n\") > -1) {\r\n                top_2 -= snapOffsetY;\r\n            }\r\n            else if (direction.indexOf(\"s\") > -1) {\r\n                bottom -= snapOffsetY;\r\n            }\r\n            else {\r\n                top_2 += snapOffsetY / 2;\r\n                bottom -= snapOffsetY / 2;\r\n            }\r\n            var nextControlPoses_2 = getRectPoses(top_2, right, bottom, left);\r\n            guidePoses.forEach(function (pos, i) {\r\n                var _a;\r\n                _a = __read(nextControlPoses_2[i].pos, 2), pos[0] = _a[0], pos[1] = _a[1];\r\n            });\r\n        }\r\n        else {\r\n            guidePoses.forEach(function (pos, j) {\r\n                var dist = dists[j];\r\n                if (dist[0]) {\r\n                    pos[0] -= snapOffsetX;\r\n                }\r\n                if (dist[1]) {\r\n                    pos[1] -= snapOffsetY;\r\n                }\r\n            });\r\n        }\r\n        var nextClipStyles = getClipStyles(moveable, clipPath, nextPoses);\r\n        var clipStyle = \"\".concat(clipType, \"(\").concat(nextClipStyles.join(splitter), \")\");\r\n        state.clipPathState = clipStyle;\r\n        if (isCircle || isEllipse) {\r\n            guideXPoses = [guidePoses[4][0], guidePoses[2][0]];\r\n            guideYPoses = [guidePoses[1][1], guidePoses[3][1]];\r\n        }\r\n        else if (isRect) {\r\n            var rectPoses = [guidePoses[0], guidePoses[2], guidePoses[4], guidePoses[6]];\r\n            guideXPoses = rectPoses.map(function (pos) { return pos[0]; });\r\n            guideYPoses = rectPoses.map(function (pos) { return pos[1]; });\r\n        }\r\n        else {\r\n            guideXPoses = guidePoses.map(function (pos) { return pos[0]; });\r\n            guideYPoses = guidePoses.map(function (pos) { return pos[1]; });\r\n        }\r\n        state.snapBoundInfos = checkSnapBounds(guidelines, props.clipTargetBounds && { left: 0, top: 0, right: width, bottom: height }, guideXPoses, guideYPoses, 1);\r\n        if (originalDraggable) {\r\n            var is3d = state.is3d, allMatrix = state.allMatrix;\r\n            var n = is3d ? 4 : 3;\r\n            var dragDist = boundDelta;\r\n            if (isDragTarget) {\r\n                dragDist = [\r\n                    firstDist[0] + boundDelta[0] - originalDist[0],\r\n                    firstDist[1] + boundDelta[1] - originalDist[1],\r\n                ];\r\n            }\r\n            originalDraggable.deltaOffset = multiply(allMatrix, [dragDist[0], dragDist[1], 0, 0], n);\r\n        }\r\n        triggerEvent(moveable, \"onClip\", fillParams(moveable, e, __assign({ clipEventType: \"changed\", clipType: clipType, poses: nextPoses, clipStyle: clipStyle, clipStyles: nextClipStyles, distX: distX, distY: distY }, fillCSSObject((_c = {},\r\n            _c[clipType === \"rect\" ? \"clip\" : \"clipPath\"] = clipStyle,\r\n            _c), e))));\r\n        return true;\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        this.unset(moveable);\r\n        var isDrag = e.isDrag, datas = e.datas, isDouble = e.isDouble;\r\n        var isLine = datas.isLine, isClipStart = datas.isClipStart, isControl = datas.isControl;\r\n        if (!isClipStart) {\r\n            return false;\r\n        }\r\n        triggerEvent(moveable, \"onClipEnd\", fillEndParams(moveable, e, {}));\r\n        if (isDouble) {\r\n            if (isControl) {\r\n                removeClipPath(moveable, e);\r\n            }\r\n            else if (isLine) {\r\n                // add\r\n                addClipPath(moveable, e);\r\n            }\r\n        }\r\n        return isDouble || isDrag;\r\n    },\r\n    unset: function (moveable) {\r\n        moveable.state.clipPathState = \"\";\r\n        moveable.state.snapBoundInfos = null;\r\n    },\r\n};\r\n/**\r\n * Whether to clip the target. (default: false)\r\n * @name Moveable.Clippable#clippable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n *  If clippath is not set, the default value can be set. (defaultClipPath < style < customClipPath < dragging clipPath)\r\n * @name Moveable.Clippable#defaultClipPath\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * % Can be used instead of the absolute px (`rect` not possible) (default: false)\r\n * @name Moveable.Clippable#clipRelative\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * You can force the custom clipPath. (defaultClipPath < style < customClipPath < dragging clipPath)\r\n * @name Moveable.Clippable#customClipPath\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When dragging the target, the clip also moves. (default: true)\r\n * @name Moveable.Clippable#dragWithClip\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * You can drag the clip by setting clipArea.\r\n * @name Moveable.Clippable#clipArea\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n* Whether the clip is bound to the target.\r\n* @name Moveable.Clippable#clipTargetBounds\r\n* @default false\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     clippable: true,\r\n*     defaultClipPath: \"inset\",\r\n*     customClipPath: \"\",\r\n*     clipRelative: false,\r\n*     clipArea: false,\r\n*     dragWithClip: true,\r\n*     clipTargetBounds: true,\r\n* });\r\n* moveable.on(\"clipStart\", e => {\r\n*     console.log(e);\r\n* }).on(\"clip\", e => {\r\n*     if (e.clipType === \"rect\") {\r\n*         e.target.style.clip = e.clipStyle;\r\n*     } else {\r\n*         e.target.style.clipPath = e.clipStyle;\r\n*     }\r\n* }).on(\"clipEnd\", e => {\r\n*     console.log(e);\r\n* });\r\n*/\r\n/**\r\n * Add clip guidelines in the vertical direction.\r\n * @name Moveable.Clippable#clipVerticalGuidelines\r\n * @default 0\r\n * @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     clippable: true,\r\n*     defaultClipPath: \"inset\",\r\n*     customClipPath: \"\",\r\n*     clipRelative: false,\r\n*     clipArea: false,\r\n*     dragWithClip: true,\r\n*     clipVerticalGuidelines: [0, 100, 200],\r\n*     clipHorizontalGuidelines: [0, 100, 200],\r\n*     clipSnapThreshold: 5,\r\n* });\r\n*/\r\n/**\r\n* Add clip guidelines in the horizontal direction.\r\n* @name Moveable.Clippable#clipHorizontalGuidelines\r\n* @default []\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     clippable: true,\r\n*     defaultClipPath: \"inset\",\r\n*     customClipPath: \"\",\r\n*     clipRelative: false,\r\n*     clipArea: false,\r\n*     dragWithClip: true,\r\n*     clipVerticalGuidelines: [0, 100, 200],\r\n*     clipHorizontalGuidelines: [0, 100, 200],\r\n*     clipSnapThreshold: 5,\r\n* });\r\n*/\r\n/**\r\n* istance value that can snap to clip guidelines.\r\n* @name Moveable.Clippable#clipSnapThreshold\r\n* @default 5\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     clippable: true,\r\n*     defaultClipPath: \"inset\",\r\n*     customClipPath: \"\",\r\n*     clipRelative: false,\r\n*     clipArea: false,\r\n*     dragWithClip: true,\r\n*     clipVerticalGuidelines: [0, 100, 200],\r\n*     clipHorizontalGuidelines: [0, 100, 200],\r\n*     clipSnapThreshold: 5,\r\n* });\r\n*/\r\n/**\r\n * When drag start the clip area or controls, the `clipStart` event is called.\r\n * @memberof Moveable.Clippable\r\n * @event clipStart\r\n * @param {Moveable.Clippable.OnClipStart} - Parameters for the `clipStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag the clip area or controls, the `clip` event is called.\r\n * @memberof Moveable.Clippable\r\n * @event clip\r\n * @param {Moveable.Clippable.OnClip} - Parameters for the `clip` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag end the clip area or controls, the `clipEnd` event is called.\r\n * @memberof Moveable.Clippable\r\n * @event clipEnd\r\n * @param {Moveable.Clippable.OnClipEnd} - Parameters for the `clipEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\n\n/**\r\n * @namespace OriginDraggable\r\n * @memberof Moveable\r\n * @description Whether to drag origin (default: false)\r\n */\r\nvar OriginDraggable = {\r\n    name: \"originDraggable\",\r\n    props: [\r\n        \"originDraggable\",\r\n        \"originRelative\",\r\n    ],\r\n    events: [\r\n        \"dragOriginStart\",\r\n        \"dragOrigin\",\r\n        \"dragOriginEnd\",\r\n    ],\r\n    css: [\r\n        \":host[data-able-origindraggable] .control.origin {\\npointer-events: auto;\\n}\",\r\n    ],\r\n    dragControlCondition: function (_, e) {\r\n        if (e.isRequest) {\r\n            return e.requestAble === \"originDraggable\";\r\n        }\r\n        return hasClass(e.inputEvent.target, prefix(\"origin\"));\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        var datas = e.datas;\r\n        setDragStart(moveable, e);\r\n        var params = fillParams(moveable, e, {\r\n            dragStart: Draggable.dragStart(moveable, new CustomGesto().dragStart([0, 0], e)),\r\n        });\r\n        var result = triggerEvent(moveable, \"onDragOriginStart\", params);\r\n        datas.startOrigin = moveable.state.transformOrigin;\r\n        datas.startTargetOrigin = moveable.state.targetOrigin;\r\n        datas.prevOrigin = [0, 0];\r\n        datas.isDragOrigin = true;\r\n        if (result === false) {\r\n            datas.isDragOrigin = false;\r\n            return false;\r\n        }\r\n        return params;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        var datas = e.datas, isPinch = e.isPinch, isRequest = e.isRequest;\r\n        if (!datas.isDragOrigin) {\r\n            return false;\r\n        }\r\n        var _a = __read(getDragDist(e), 2), distX = _a[0], distY = _a[1];\r\n        var state = moveable.state;\r\n        var width = state.width, height = state.height, offsetMatrix = state.offsetMatrix, targetMatrix = state.targetMatrix, is3d = state.is3d;\r\n        var _b = moveable.props.originRelative, originRelative = _b === void 0 ? true : _b;\r\n        var n = is3d ? 4 : 3;\r\n        var dist = [distX, distY];\r\n        if (isRequest) {\r\n            var distOrigin = e.distOrigin;\r\n            if (distOrigin[0] || distOrigin[1]) {\r\n                dist = distOrigin;\r\n            }\r\n        }\r\n        var origin = plus(datas.startOrigin, dist);\r\n        var targetOrigin = plus(datas.startTargetOrigin, dist);\r\n        var delta = minus(dist, datas.prevOrigin);\r\n        var nextMatrix = getNextMatrix(offsetMatrix, targetMatrix, origin, n);\r\n        var rect = moveable.getRect();\r\n        var nextRect = getRect(calculatePoses(nextMatrix, width, height, n));\r\n        var dragDelta = [\r\n            rect.left - nextRect.left,\r\n            rect.top - nextRect.top,\r\n        ];\r\n        datas.prevOrigin = dist;\r\n        var transformOrigin = [\r\n            convertCSSSize(targetOrigin[0], width, originRelative),\r\n            convertCSSSize(targetOrigin[1], height, originRelative),\r\n        ].join(\" \");\r\n        var result = Draggable.drag(moveable, setCustomDrag(e, moveable.state, dragDelta, !!isPinch, false));\r\n        var params = fillParams(moveable, e, __assign(__assign({ width: width, height: height, origin: origin, dist: dist, delta: delta, transformOrigin: transformOrigin, drag: result }, fillCSSObject({\r\n            transformOrigin: transformOrigin,\r\n            transform: result.transform,\r\n        }, e)), { afterTransform: result.transform }));\r\n        triggerEvent(moveable, \"onDragOrigin\", params);\r\n        return params;\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isDragOrigin) {\r\n            return false;\r\n        }\r\n        triggerEvent(moveable, \"onDragOriginEnd\", fillEndParams(moveable, e, {}));\r\n        return true;\r\n    },\r\n    dragGroupControlCondition: function (moveable, e) {\r\n        return this.dragControlCondition(moveable, e);\r\n    },\r\n    dragGroupControlStart: function (moveable, e) {\r\n        var params = this.dragControlStart(moveable, e);\r\n        if (!params) {\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        var params = this.dragControl(moveable, e);\r\n        if (!params) {\r\n            return false;\r\n        }\r\n        moveable.transformOrigin = params.transformOrigin;\r\n        return true;\r\n    },\r\n    /**\r\n    * @method Moveable.OriginDraggable#request\r\n    * @param {object} e - the OriginDraggable's request parameter\r\n    * @param {number} [e.x] - x position\r\n    * @param {number} [e.y] - y position\r\n    * @param {number} [e.deltaX] - x number to move\r\n    * @param {number} [e.deltaY] - y number to move\r\n    * @param {array} [e.deltaOrigin] - left, top number to move transform-origin\r\n    * @param {array} [e.origin] - transform-origin position\r\n    * @param {number} [e.isInstant] - Whether to execute the request instantly\r\n    * @return {Moveable.Requester} Moveable Requester\r\n    * @example\r\n\n    * // Instantly Request (requestStart - request - requestEnd)\r\n    * // Use Relative Value\r\n    * moveable.request(\"originDraggable\", { deltaX: 10, deltaY: 10 }, true);\r\n    * // Use Absolute Value\r\n    * moveable.request(\"originDraggable\", { x: 200, y: 100 }, true);\r\n    * // Use Transform Value\r\n    * moveable.request(\"originDraggable\", { deltaOrigin: [10, 0] }, true);\r\n    * moveable.request(\"originDraggable\", { origin: [100, 0] }, true);\r\n    * // requestStart\r\n    * const requester = moveable.request(\"originDraggable\");\r\n    *\r\n    * // request\r\n    * // Use Relative Value\r\n    * requester.request({ deltaX: 10, deltaY: 10 });\r\n    * requester.request({ deltaX: 10, deltaY: 10 });\r\n    * requester.request({ deltaX: 10, deltaY: 10 });\r\n    * // Use Absolute Value\r\n    * moveable.request(\"originDraggable\", { x: 200, y: 100 });\r\n    * moveable.request(\"originDraggable\", { x: 220, y: 100 });\r\n    * moveable.request(\"originDraggable\", { x: 240, y: 100 });\r\n    *\r\n    * // requestEnd\r\n    * requester.requestEnd();\r\n    */\r\n    request: function (moveable) {\r\n        var datas = {};\r\n        var rect = moveable.getRect();\r\n        var distX = 0;\r\n        var distY = 0;\r\n        var transformOrigin = rect.transformOrigin;\r\n        var distOrigin = [0, 0];\r\n        return {\r\n            isControl: true,\r\n            requestStart: function () {\r\n                return { datas: datas };\r\n            },\r\n            request: function (e) {\r\n                if (\"deltaOrigin\" in e) {\r\n                    distOrigin[0] += e.deltaOrigin[0];\r\n                    distOrigin[1] += e.deltaOrigin[1];\r\n                }\r\n                else if (\"origin\" in e) {\r\n                    distOrigin[0] = e.origin[0] - transformOrigin[0];\r\n                    distOrigin[1] = e.origin[1] - transformOrigin[1];\r\n                }\r\n                else {\r\n                    if (\"x\" in e) {\r\n                        distX = e.x - rect.left;\r\n                    }\r\n                    else if (\"deltaX\" in e) {\r\n                        distX += e.deltaX;\r\n                    }\r\n                    if (\"y\" in e) {\r\n                        distY = e.y - rect.top;\r\n                    }\r\n                    else if (\"deltaY\" in e) {\r\n                        distY += e.deltaY;\r\n                    }\r\n                }\r\n                return { datas: datas, distX: distX, distY: distY, distOrigin: distOrigin };\r\n            },\r\n            requestEnd: function () {\r\n                return { datas: datas, isDrag: true };\r\n            },\r\n        };\r\n    },\r\n};\r\n/**\r\n * Whether to drag origin (default: false)\r\n * @name Moveable.OriginDraggable#originDraggable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     originDraggable: true,\r\n * });\r\n * let translate = [0, 0];\r\n * moveable.on(\"dragOriginStart\", e => {\r\n *     e.dragStart && e.dragStart.set(translate);\r\n * }).on(\"dragOrigin\", e => {\r\n *     translate = e.drag.beforeTranslate;\r\n *     e.target.style.cssText\r\n *         = `transform-origin: ${e.transformOrigin};`\r\n *         + `transform: translate(${translate[0]}px, ${translate[1]}px)`;\r\n * }).on(\"dragOriginEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * % Can be used instead of the absolute px (default: true)\r\n * @name Moveable.OriginDraggable#originRelative\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     originDraggable: true,\r\n *     originRelative: false,\r\n * });\r\n * moveable.originRelative = true;\r\n */\r\n/**\r\n* When drag start the origin, the `dragOriginStart` event is called.\r\n* @memberof Moveable.OriginDraggable\r\n* @event dragOriginStart\r\n* @param {Moveable.OriginDraggable.OnDragOriginStart} - Parameters for the `dragOriginStart` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     originDraggable: true,\r\n* });\r\n* let translate = [0, 0];\r\n* moveable.on(\"dragOriginStart\", e => {\r\n*     e.dragStart && e.dragStart.set(translate);\r\n* }).on(\"dragOrigin\", e => {\r\n*     translate = e.drag.beforeTranslate;\r\n*     e.target.style.cssText\r\n*         = `transform-origin: ${e.transformOrigin};`\r\n*         + `transform: translate(${translate[0]}px, ${translate[1]}px)`;\r\n* }).on(\"dragOriginEnd\", e => {\r\n*     console.log(e);\r\n* });\r\n*/\r\n/**\r\n* When drag the origin, the `dragOrigin` event is called.\r\n* @memberof Moveable.OriginDraggable\r\n* @event dragOrigin\r\n* @param {Moveable.OriginDraggable.OnDragOrigin} - Parameters for the `dragOrigin` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     originDraggable: true,\r\n* });\r\n* let translate = [0, 0];\r\n* moveable.on(\"dragOriginStart\", e => {\r\n*     e.dragStart && e.dragStart.set(translate);\r\n* }).on(\"dragOrigin\", e => {\r\n*     translate = e.drag.beforeTranslate;\r\n*     e.target.style.cssText\r\n*         = `transform-origin: ${e.transformOrigin};`\r\n*         + `transform: translate(${translate[0]}px, ${translate[1]}px)`;\r\n* }).on(\"dragOriginEnd\", e => {\r\n*     console.log(e);\r\n* });\r\n*/\r\n/**\r\n* When drag end the origin, the `dragOriginEnd` event is called.\r\n* @memberof Moveable.OriginDraggable\r\n* @event dragOriginEnd\r\n* @param {Moveable.OriginDraggable.OnDragOriginEnd} - Parameters for the `dragOriginEnd` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     originDraggable: true,\r\n* });\r\n* let translate = [0, 0];\r\n* moveable.on(\"dragOriginStart\", e => {\r\n*     e.dragStart && e.dragStart.set(translate);\r\n* }).on(\"dragOrigin\", e => {\r\n*     translate = e.drag.beforeTranslate;\r\n*     e.target.style.cssText\r\n*         = `transform-origin: ${e.transformOrigin};`\r\n*         + `transform: translate(${translate[0]}px, ${translate[1]}px)`;\r\n* }).on(\"dragOriginEnd\", e => {\r\n*     console.log(e);\r\n* });\r\n*/\n\nfunction addBorderRadiusByLine(controlPoses, lineIndex, distX, distY) {\r\n    // lineIndex\r\n    // 0 top\r\n    // 1 right\r\n    // 2 bottom\r\n    // 3 left\r\n    var horizontalsLength = controlPoses.filter(function (_a) {\r\n        var virtual = _a.virtual, horizontal = _a.horizontal;\r\n        return horizontal && !virtual;\r\n    }).length;\r\n    var verticalsLength = controlPoses.filter(function (_a) {\r\n        var virtual = _a.virtual, vertical = _a.vertical;\r\n        return vertical && !virtual;\r\n    }).length;\r\n    var controlIndex = -1;\r\n    //top\r\n    if (lineIndex === 0) {\r\n        if (horizontalsLength === 0) {\r\n            controlIndex = 0;\r\n        }\r\n        else if (horizontalsLength === 1) {\r\n            controlIndex = 1;\r\n        }\r\n    }\r\n    // bottom\r\n    if (lineIndex === 2) {\r\n        if (horizontalsLength <= 2) {\r\n            controlIndex = 2;\r\n        }\r\n        else if (horizontalsLength <= 3) {\r\n            controlIndex = 3;\r\n        }\r\n    }\r\n    // left\r\n    if (lineIndex === 3) {\r\n        if (verticalsLength === 0) {\r\n            controlIndex = 4;\r\n        }\r\n        else if (verticalsLength < 4) {\r\n            controlIndex = 7;\r\n        }\r\n    }\r\n    // right\r\n    if (lineIndex === 1) {\r\n        if (verticalsLength <= 1) {\r\n            controlIndex = 5;\r\n        }\r\n        else if (verticalsLength <= 2) {\r\n            controlIndex = 6;\r\n        }\r\n    }\r\n    if (controlIndex === -1 || !controlPoses[controlIndex].virtual) {\r\n        return;\r\n    }\r\n    var controlPoseInfo = controlPoses[controlIndex];\r\n    addBorderRadius(controlPoses, controlIndex);\r\n    if (controlIndex < 4) {\r\n        controlPoseInfo.pos[0] = distX;\r\n    }\r\n    else {\r\n        controlPoseInfo.pos[1] = distY;\r\n    }\r\n}\r\nfunction addBorderRadius(controlPoses, index) {\r\n    if (index < 4) {\r\n        controlPoses.slice(0, index + 1).forEach(function (info) {\r\n            info.virtual = false;\r\n        });\r\n    }\r\n    else {\r\n        if (controlPoses[0].virtual) {\r\n            controlPoses[0].virtual = false;\r\n        }\r\n        controlPoses.slice(4, index + 1).forEach(function (info) {\r\n            info.virtual = false;\r\n        });\r\n    }\r\n}\r\nfunction removeBorderRadius(controlPoses, index) {\r\n    if (index < 4) {\r\n        controlPoses.slice(index, 4).forEach(function (info) {\r\n            info.virtual = true;\r\n        });\r\n    }\r\n    else {\r\n        controlPoses.slice(index).forEach(function (info) {\r\n            info.virtual = true;\r\n        });\r\n    }\r\n}\r\nfunction getBorderRadius(borderRadius, width, height, minCounts, full) {\r\n    if (minCounts === void 0) { minCounts = [0, 0]; }\r\n    var values = [];\r\n    if (!borderRadius || borderRadius === \"0px\") {\r\n        values = [];\r\n    }\r\n    else {\r\n        values = splitSpace(borderRadius);\r\n    }\r\n    return getRadiusValues(values, width, height, 0, 0, minCounts, full);\r\n}\r\nfunction triggerRoundEvent(moveable, e, dist, delta, nextPoses) {\r\n    var state = moveable.state;\r\n    var width = state.width, height = state.height;\r\n    var _a = getRadiusStyles(nextPoses, moveable.props.roundRelative, width, height), raws = _a.raws, styles = _a.styles, radiusPoses = _a.radiusPoses;\r\n    var _b = splitRadiusPoses(radiusPoses, raws), horizontals = _b.horizontals, verticals = _b.verticals;\r\n    var borderRadius = styles.join(\" \");\r\n    state.borderRadiusState = borderRadius;\r\n    var params = fillParams(moveable, e, __assign({ horizontals: horizontals, verticals: verticals, borderRadius: borderRadius, width: width, height: height, delta: delta, dist: dist }, fillCSSObject({\r\n        borderRadius: borderRadius,\r\n    }, e)));\r\n    triggerEvent(moveable, \"onRound\", params);\r\n    return params;\r\n}\r\nfunction getStyleBorderRadius(moveable) {\r\n    var _a, _b;\r\n    var style = moveable.getState().style;\r\n    var borderRadius = style.borderRadius || \"\";\r\n    if (!borderRadius && moveable.props.groupable) {\r\n        var firstMoveable = moveable.moveables[0];\r\n        var firstTarget = moveable.getTargets()[0];\r\n        if (firstTarget) {\r\n            if ((firstMoveable === null || firstMoveable === void 0 ? void 0 : firstMoveable.props.target) === firstTarget) {\r\n                borderRadius = (_b = (_a = moveable.moveables[0]) === null || _a === void 0 ? void 0 : _a.state.style.borderRadius) !== null && _b !== void 0 ? _b : \"\";\r\n                style.borderRadius = borderRadius;\r\n            }\r\n            else {\r\n                borderRadius = getComputedStyle(firstTarget).borderRadius;\r\n                style.borderRadius = borderRadius;\r\n            }\r\n        }\r\n    }\r\n    return borderRadius;\r\n}\r\n/**\r\n * @namespace Moveable.Roundable\r\n * @description Whether to show and drag or double click border-radius\r\n */\r\nvar Roundable = {\r\n    name: \"roundable\",\r\n    props: [\r\n        \"roundable\",\r\n        \"roundRelative\",\r\n        \"minRoundControls\",\r\n        \"maxRoundControls\",\r\n        \"roundClickable\",\r\n        \"roundPadding\",\r\n        \"isDisplayShadowRoundControls\",\r\n    ],\r\n    events: [\r\n        \"roundStart\",\r\n        \"round\",\r\n        \"roundEnd\",\r\n        \"roundGroupStart\",\r\n        \"roundGroup\",\r\n        \"roundGroupEnd\",\r\n    ],\r\n    css: [\r\n        \".control.border-radius {\\nbackground: #d66;\\ncursor: pointer;\\nz-index: 3;\\n}\",\r\n        \".control.border-radius.vertical {\\nbackground: #d6d;\\nz-index: 2;\\n}\",\r\n        \".control.border-radius.virtual {\\nopacity: 0.5;\\nz-index: 1;\\n}\",\r\n        \":host.round-line-clickable .line.direction {\\ncursor: pointer;\\n}\",\r\n    ],\r\n    className: function (moveable) {\r\n        var roundClickable = moveable.props.roundClickable;\r\n        return roundClickable === true || roundClickable === \"line\" ? prefix(\"round-line-clickable\") : \"\";\r\n    },\r\n    requestStyle: function () {\r\n        return [\"borderRadius\"];\r\n    },\r\n    requestChildStyle: function () {\r\n        return [\"borderRadius\"];\r\n    },\r\n    render: function (moveable, React) {\r\n        var _a = moveable.getState(), target = _a.target, width = _a.width, height = _a.height, allMatrix = _a.allMatrix, is3d = _a.is3d, left = _a.left, top = _a.top, borderRadiusState = _a.borderRadiusState;\r\n        var _b = moveable.props, _c = _b.minRoundControls, minRoundControls = _c === void 0 ? [0, 0] : _c, _d = _b.maxRoundControls, maxRoundControls = _d === void 0 ? [4, 4] : _d, zoom = _b.zoom, _e = _b.roundPadding, roundPadding = _e === void 0 ? 0 : _e, isDisplayShadowRoundControls = _b.isDisplayShadowRoundControls, groupable = _b.groupable;\r\n        if (!target) {\r\n            return null;\r\n        }\r\n        var borderRadius = borderRadiusState || getStyleBorderRadius(moveable);\r\n        var n = is3d ? 4 : 3;\r\n        var radiusValues = getBorderRadius(borderRadius, width, height, minRoundControls, true);\r\n        if (!radiusValues) {\r\n            return null;\r\n        }\r\n        var verticalCount = 0;\r\n        var horizontalCount = 0;\r\n        var basePos = groupable ? [0, 0] : [left, top];\r\n        return radiusValues.map(function (v, i) {\r\n            var horizontal = v.horizontal;\r\n            var vertical = v.vertical;\r\n            var direction = v.direction || \"\";\r\n            var originalPos = __spreadArray([], __read(v.pos), false);\r\n            horizontalCount += Math.abs(horizontal);\r\n            verticalCount += Math.abs(vertical);\r\n            if (horizontal && direction.indexOf(\"n\") > -1) {\r\n                originalPos[1] -= roundPadding;\r\n            }\r\n            if (vertical && direction.indexOf(\"w\") > -1) {\r\n                originalPos[0] -= roundPadding;\r\n            }\r\n            if (horizontal && direction.indexOf(\"s\") > -1) {\r\n                originalPos[1] += roundPadding;\r\n            }\r\n            if (vertical && direction.indexOf(\"e\") > -1) {\r\n                originalPos[0] += roundPadding;\r\n            }\r\n            var pos = minus(calculatePosition(allMatrix, originalPos, n), basePos);\r\n            var isDisplay = v.vertical\r\n                ? verticalCount <= maxRoundControls[1] && (isDisplayShadowRoundControls || !v.virtual)\r\n                : horizontalCount <= maxRoundControls[0] && (isDisplayShadowRoundControls || !v.virtual);\r\n            return React.createElement(\"div\", { key: \"borderRadiusControl\".concat(i), className: prefix(\"control\", \"border-radius\", v.vertical ? \"vertical\" : \"\", v.virtual ? \"virtual\" : \"\"), \"data-radius-index\": i, style: {\r\n                    display: isDisplay ? \"block\" : \"none\",\r\n                    transform: \"translate(\".concat(pos[0], \"px, \").concat(pos[1], \"px) scale(\").concat(zoom, \")\"),\r\n                } });\r\n        });\r\n    },\r\n    dragControlCondition: function (moveable, e) {\r\n        if (!e.inputEvent || e.isRequest) {\r\n            return false;\r\n        }\r\n        var className = (e.inputEvent.target.getAttribute(\"class\") || \"\");\r\n        return className.indexOf(\"border-radius\") > -1\r\n            || (className.indexOf(\"moveable-line\") > -1 && className.indexOf(\"moveable-direction\") > -1);\r\n    },\r\n    dragGroupControlCondition: function (moveable, e) {\r\n        return this.dragControlCondition(moveable, e);\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        var inputEvent = e.inputEvent, datas = e.datas;\r\n        var inputTarget = inputEvent.target;\r\n        var className = (inputTarget.getAttribute(\"class\") || \"\");\r\n        var isControl = className.indexOf(\"border-radius\") > -1;\r\n        var isLine = className.indexOf(\"moveable-line\") > -1 && className.indexOf(\"moveable-direction\") > -1;\r\n        var controlIndex = isControl ? parseInt(inputTarget.getAttribute(\"data-radius-index\"), 10) : -1;\r\n        var lineIndex = -1;\r\n        if (isLine) {\r\n            var indexAttr = inputTarget.getAttribute(\"data-line-key\") || \"\";\r\n            if (indexAttr) {\r\n                lineIndex = parseInt(indexAttr.replace(/render-line-/g, \"\"), 10);\r\n                if (isNaN(lineIndex)) {\r\n                    lineIndex = -1;\r\n                }\r\n            }\r\n        }\r\n        if (!isControl && !isLine) {\r\n            return false;\r\n        }\r\n        var params = fillParams(moveable, e, {});\r\n        var result = triggerEvent(moveable, \"onRoundStart\", params);\r\n        if (result === false) {\r\n            return false;\r\n        }\r\n        datas.lineIndex = lineIndex;\r\n        datas.controlIndex = controlIndex;\r\n        datas.isControl = isControl;\r\n        datas.isLine = isLine;\r\n        setDragStart(moveable, e);\r\n        var _a = moveable.props, roundRelative = _a.roundRelative, _b = _a.minRoundControls, minRoundControls = _b === void 0 ? [0, 0] : _b;\r\n        var state = moveable.state;\r\n        var width = state.width, height = state.height;\r\n        datas.isRound = true;\r\n        datas.prevDist = [0, 0];\r\n        var borderRadius = getStyleBorderRadius(moveable);\r\n        var controlPoses = getBorderRadius(borderRadius || \"\", width, height, minRoundControls, true) || [];\r\n        datas.controlPoses = controlPoses;\r\n        state.borderRadiusState = getRadiusStyles(controlPoses, roundRelative, width, height).styles.join(\" \");\r\n        return params;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        var datas = e.datas;\r\n        var controlPoses = datas.controlPoses;\r\n        if (!datas.isRound || !datas.isControl || !controlPoses.length) {\r\n            return false;\r\n        }\r\n        var index = datas.controlIndex;\r\n        var _a = __read(getDragDist(e), 2), distX = _a[0], distY = _a[1];\r\n        var dist = [distX, distY];\r\n        var delta = minus(dist, datas.prevDist);\r\n        var _b = moveable.props.maxRoundControls, maxRoundControls = _b === void 0 ? [4, 4] : _b;\r\n        var _c = moveable.state, width = _c.width, height = _c.height;\r\n        var selectedControlPose = controlPoses[index];\r\n        var selectedVertical = selectedControlPose.vertical;\r\n        var selectedHorizontal = selectedControlPose.horizontal;\r\n        // 0: [0, 1, 2, 3] maxCount === 1\r\n        // 0: [0, 2] maxCount === 2\r\n        // 1: [1, 3] maxCount === 2\r\n        // 0: [0] maxCount === 3\r\n        // 1: [1, 3] maxCount === 3\r\n        var dists = controlPoses.map(function (pose) {\r\n            var horizontal = pose.horizontal, vertical = pose.vertical;\r\n            var poseDist = [\r\n                horizontal * selectedHorizontal * dist[0],\r\n                vertical * selectedVertical * dist[1],\r\n            ];\r\n            if (horizontal) {\r\n                if (maxRoundControls[0] === 1) {\r\n                    return poseDist;\r\n                }\r\n                else if (maxRoundControls[0] < 4 && horizontal !== selectedHorizontal) {\r\n                    return poseDist;\r\n                }\r\n            }\r\n            else if (maxRoundControls[1] === 0) {\r\n                poseDist[1] = vertical * selectedHorizontal * dist[0] / width * height;\r\n                return poseDist;\r\n            }\r\n            else if (selectedVertical) {\r\n                if (maxRoundControls[1] === 1) {\r\n                    return poseDist;\r\n                }\r\n                else if (maxRoundControls[1] < 4 && vertical !== selectedVertical) {\r\n                    return poseDist;\r\n                }\r\n            }\r\n            return [0, 0];\r\n        });\r\n        dists[index] = dist;\r\n        var nextPoses = controlPoses.map(function (info, i) {\r\n            return __assign(__assign({}, info), { pos: plus(info.pos, dists[i]) });\r\n        });\r\n        if (index < 4) {\r\n            nextPoses.slice(0, index + 1).forEach(function (info) {\r\n                info.virtual = false;\r\n            });\r\n        }\r\n        else {\r\n            nextPoses.slice(4, index + 1).forEach(function (info) {\r\n                info.virtual = false;\r\n            });\r\n        }\r\n        datas.prevDist = [distX, distY];\r\n        return triggerRoundEvent(moveable, e, dist, delta, nextPoses);\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        var state = moveable.state;\r\n        state.borderRadiusState = \"\";\r\n        var datas = e.datas, isDouble = e.isDouble;\r\n        if (!datas.isRound) {\r\n            return false;\r\n        }\r\n        var isControl = datas.isControl, controlIndex = datas.controlIndex, isLine = datas.isLine, lineIndex = datas.lineIndex;\r\n        var controlPoses = datas.controlPoses;\r\n        var length = controlPoses.filter(function (_a) {\r\n            var virtual = _a.virtual;\r\n            return virtual;\r\n        }).length;\r\n        var _a = moveable.props.roundClickable, roundClickable = _a === void 0 ? true : _a;\r\n        if (isDouble && roundClickable) {\r\n            if (isControl && (roundClickable === true || roundClickable === \"control\")) {\r\n                removeBorderRadius(controlPoses, controlIndex);\r\n            }\r\n            else if (isLine && (roundClickable === true || roundClickable === \"line\")) {\r\n                var _b = __read(calculatePointerDist(moveable, e), 2), distX = _b[0], distY = _b[1];\r\n                addBorderRadiusByLine(controlPoses, lineIndex, distX, distY);\r\n            }\r\n            if (length !== controlPoses.filter(function (_a) {\r\n                var virtual = _a.virtual;\r\n                return virtual;\r\n            }).length) {\r\n                triggerRoundEvent(moveable, e, [0, 0], [0, 0], controlPoses);\r\n            }\r\n        }\r\n        var params = fillEndParams(moveable, e, {});\r\n        triggerEvent(moveable, \"onRoundEnd\", params);\r\n        state.borderRadiusState = \"\";\r\n        return params;\r\n    },\r\n    dragGroupControlStart: function (moveable, e) {\r\n        var result = this.dragControlStart(moveable, e);\r\n        if (!result) {\r\n            return false;\r\n        }\r\n        var moveables = moveable.moveables;\r\n        var targets = moveable.props.targets;\r\n        var events = fillChildEvents(moveable, \"roundable\", e);\r\n        var nextParams = __assign({ targets: moveable.props.targets, events: events.map(function (ev, i) {\r\n                return __assign(__assign({}, ev), { target: targets[i], moveable: moveables[i], currentTarget: moveables[i] });\r\n            }) }, result);\r\n        triggerEvent(moveable, \"onRoundGroupStart\", nextParams);\r\n        return result;\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        var result = this.dragControl(moveable, e);\r\n        if (!result) {\r\n            return false;\r\n        }\r\n        var moveables = moveable.moveables;\r\n        var targets = moveable.props.targets;\r\n        var events = fillChildEvents(moveable, \"roundable\", e);\r\n        var nextParams = __assign({ targets: moveable.props.targets, events: events.map(function (ev, i) {\r\n                return __assign(__assign(__assign({}, ev), { target: targets[i], moveable: moveables[i], currentTarget: moveables[i] }), fillCSSObject({\r\n                    borderRadius: result.borderRadius,\r\n                }, ev));\r\n            }) }, result);\r\n        triggerEvent(moveable, \"onRoundGroup\", nextParams);\r\n        return nextParams;\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        var moveables = moveable.moveables;\r\n        var targets = moveable.props.targets;\r\n        var events = fillChildEvents(moveable, \"roundable\", e);\r\n        catchEvent(moveable, \"onRound\", function (parentEvent) {\r\n            var nextParams = __assign({ targets: moveable.props.targets, events: events.map(function (ev, i) {\r\n                    return __assign(__assign(__assign({}, ev), { target: targets[i], moveable: moveables[i], currentTarget: moveables[i] }), fillCSSObject({\r\n                        borderRadius: parentEvent.borderRadius,\r\n                    }, ev));\r\n                }) }, parentEvent);\r\n            triggerEvent(moveable, \"onRoundGroup\", nextParams);\r\n        });\r\n        var result = this.dragControlEnd(moveable, e);\r\n        if (!result) {\r\n            return false;\r\n        }\r\n        var nextParams = __assign({ targets: moveable.props.targets, events: events.map(function (ev, i) {\r\n                var _a;\r\n                return __assign(__assign({}, ev), { target: targets[i], moveable: moveables[i], currentTarget: moveables[i], lastEvent: (_a = ev.datas) === null || _a === void 0 ? void 0 : _a.lastEvent });\r\n            }) }, result);\r\n        triggerEvent(moveable, \"onRoundGroupEnd\", nextParams);\r\n        return nextParams;\r\n    },\r\n    unset: function (moveable) {\r\n        moveable.state.borderRadiusState = \"\";\r\n    },\r\n};\r\n/**\r\n * Whether to show and drag or double click border-radius, (default: false)\r\n * @name Moveable.Roundable#roundable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n * });\r\n * moveable.on(\"roundStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"round\", e => {\r\n *     e.target.style.borderRadius = e.borderRadius;\r\n * }).on(\"roundEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * % Can be used instead of the absolute px\r\n * @name Moveable.Roundable#roundRelative\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n * });\r\n * moveable.on(\"roundStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"round\", e => {\r\n *     e.target.style.borderRadius = e.borderRadius;\r\n * }).on(\"roundEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * Minimum number of round controls. It moves in proportion by control. [horizontal, vertical] (default: [0, 0])\r\n * @name Moveable.Roundable#minRoundControls\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n *     minRoundControls: [0, 0],\r\n * });\r\n * moveable.minRoundControls = [1, 0];\r\n */\r\n/**\r\n * Maximum number of round controls. It moves in proportion by control. [horizontal, vertical] (default: [4, 4])\r\n * @name Moveable.Roundable#maxRoundControls\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n *     maxRoundControls: [4, 4],\r\n * });\r\n * moveable.maxRoundControls = [1, 0];\r\n */\r\n/**\r\n * Whether you can add/delete round controls by double-clicking a line or control.\r\n * @name Moveable.Roundable#roundClickable\r\n * @default true\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n *     roundClickable: true,\r\n * });\r\n * moveable.roundClickable = false;\r\n */\r\n/**\r\n * Whether to show a round control that does not actually exist as a shadow\r\n * @name Moveable.Roundable#isDisplayShadowRoundControls\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     isDisplayShadowRoundControls: false,\r\n * });\r\n * moveable.isDisplayShadowRoundControls = true;\r\n */\r\n/**\r\n * The padding value of the position of the round control\r\n * @name Moveable.Roundable#roundPadding\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundPadding: 0,\r\n * });\r\n * moveable.roundPadding = 15;\r\n */\r\n/**\r\n * When drag start the clip area or controls, the `roundStart` event is called.\r\n * @memberof Moveable.Roundable\r\n * @event roundStart\r\n * @param {Moveable.Roundable.OnRoundStart} - Parameters for the `roundStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n * });\r\n * moveable.on(\"roundStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"round\", e => {\r\n *     e.target.style.borderRadius = e.borderRadius;\r\n * }).on(\"roundEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag or double click the border area or controls, the `round` event is called.\r\n * @memberof Moveable.Roundable\r\n * @event round\r\n * @param {Moveable.Roundable.OnRound} - Parameters for the `round` event\r\n * @example\r\n  * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n * });\r\n * moveable.on(\"roundStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"round\", e => {\r\n *     e.target.style.borderRadius = e.borderRadius;\r\n * }).on(\"roundEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag end the border area or controls, the `roundEnd` event is called.\r\n * @memberof Moveable.Roundable\r\n * @event roundEnd\r\n * @param {Moveable.Roundable.onRoundEnd} - Parameters for the `roundEnd` event\r\n * @example\r\n  * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n * });\r\n * moveable.on(\"roundStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"round\", e => {\r\n *     e.target.style.borderRadius = e.borderRadius;\r\n * }).on(\"roundEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag start the clip area or controls, the `roundGroupStart` event is called.\r\n * @memberof Moveable.Roundable\r\n * @event roundGroupStart\r\n * @param {Moveable.Roundable.OnRoundGroupStart} - Parameters for the `roundGroupStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     targets: [target1, target2, target3],\r\n *     roundable: true,\r\n * });\r\n * moveable.on(\"roundGroupStart\", e => {\r\n *     console.log(e.targets);\r\n * }).on(\"roundGroup\", e => {\r\n *   e.events.forEach(ev => {\r\n *       ev.target.style.cssText += ev.cssText;\r\n *   });\r\n * }).on(\"roundGroupEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag or double click the border area or controls, the `roundGroup` event is called.\r\n * @memberof Moveable.Roundable\r\n * @event roundGroup\r\n * @param {Moveable.Roundable.OnRoundGroup} - Parameters for the `roundGroup` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     targets: [target1, target2, target3],\r\n *     roundable: true,\r\n * });\r\n * moveable.on(\"roundGroupStart\", e => {\r\n *     console.log(e.targets);\r\n * }).on(\"roundGroup\", e => {\r\n *   e.events.forEach(ev => {\r\n *       ev.target.style.cssText += ev.cssText;\r\n *   });\r\n * }).on(\"roundGroupEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag end the border area or controls, the `roundGroupEnd` event is called.\r\n * @memberof Moveable.Roundable\r\n * @event roundGroupEnd\r\n * @param {Moveable.Roundable.onRoundGroupEnd} - Parameters for the `roundGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     targets: [target1, target2, target3],\r\n *     roundable: true,\r\n * });\r\n * moveable.on(\"roundGroupStart\", e => {\r\n *     console.log(e.targets);\r\n * }).on(\"roundGroup\", e => {\r\n *     e.events.forEach(ev => {\r\n *         ev.target.style.cssText += ev.cssText;\r\n *     });\r\n * }).on(\"roundGroupEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\n\nfunction isIdentityMatrix(matrix, is3d) {\r\n    var n = is3d ? 4 : 3;\r\n    var identityMatrix = createIdentityMatrix(n);\r\n    var value = \"matrix\".concat(is3d ? \"3d\" : \"\", \"(\").concat(identityMatrix.join(\",\"), \")\");\r\n    return matrix === value || matrix === \"matrix(1,0,0,1,0,0)\";\r\n}\r\nvar BeforeRenderable = {\r\n    isPinch: true,\r\n    name: \"beforeRenderable\",\r\n    props: [],\r\n    events: [\r\n        \"beforeRenderStart\",\r\n        \"beforeRender\",\r\n        \"beforeRenderEnd\",\r\n        \"beforeRenderGroupStart\",\r\n        \"beforeRenderGroup\",\r\n        \"beforeRenderGroupEnd\",\r\n    ],\r\n    dragRelation: \"weak\",\r\n    setTransform: function (moveable, e) {\r\n        var _a = moveable.state, is3d = _a.is3d, targetMatrix = _a.targetMatrix, inlineTransform = _a.inlineTransform;\r\n        var cssMatrix = is3d\r\n            ? \"matrix3d(\".concat(targetMatrix.join(\",\"), \")\")\r\n            : \"matrix(\".concat(convertMatrixtoCSS(targetMatrix, true), \")\");\r\n        var startTransform = !inlineTransform || inlineTransform === \"none\" ? cssMatrix : inlineTransform;\r\n        e.datas.startTransforms = isIdentityMatrix(startTransform, is3d) ? [] : splitSpace(startTransform);\r\n    },\r\n    resetStyle: function (e) {\r\n        var datas = e.datas;\r\n        datas.nextStyle = {};\r\n        datas.nextTransforms = e.datas.startTransforms;\r\n        datas.nextTransformAppendedIndexes = [];\r\n    },\r\n    fillDragStartParams: function (moveable, e) {\r\n        return fillParams(moveable, e, {\r\n            setTransform: function (transform) {\r\n                e.datas.startTransforms = isArray(transform) ? transform : splitSpace(transform);\r\n            },\r\n            isPinch: !!e.isPinch,\r\n        });\r\n    },\r\n    fillDragParams: function (moveable, e) {\r\n        return fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n        });\r\n    },\r\n    dragStart: function (moveable, e) {\r\n        this.setTransform(moveable, e);\r\n        this.resetStyle(e);\r\n        triggerEvent(moveable, \"onBeforeRenderStart\", this.fillDragStartParams(moveable, e));\r\n    },\r\n    drag: function (moveable, e) {\r\n        if (!e.datas.startTransforms) {\r\n            this.setTransform(moveable, e);\r\n        }\r\n        this.resetStyle(e);\r\n        triggerEvent(moveable, \"onBeforeRender\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n        }));\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        if (!e.datas.startTransforms) {\r\n            this.setTransform(moveable, e);\r\n            this.resetStyle(e);\r\n        }\r\n        triggerEvent(moveable, \"onBeforeRenderEnd\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n            isDrag: e.isDrag,\r\n        }));\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        var _this = this;\r\n        this.dragStart(moveable, e);\r\n        var events = fillChildEvents(moveable, \"beforeRenderable\", e);\r\n        var moveables = moveable.moveables;\r\n        var params = events.map(function (childEvent, i) {\r\n            var childMoveable = moveables[i];\r\n            _this.setTransform(childMoveable, childEvent);\r\n            _this.resetStyle(childEvent);\r\n            return _this.fillDragStartParams(childMoveable, childEvent);\r\n        });\r\n        triggerEvent(moveable, \"onBeforeRenderGroupStart\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n            targets: moveable.props.targets,\r\n            setTransform: function () { },\r\n            events: params,\r\n        }));\r\n    },\r\n    dragGroup: function (moveable, e) {\r\n        var _this = this;\r\n        this.drag(moveable, e);\r\n        var events = fillChildEvents(moveable, \"beforeRenderable\", e);\r\n        var moveables = moveable.moveables;\r\n        var params = events.map(function (childEvent, i) {\r\n            var childMoveable = moveables[i];\r\n            _this.resetStyle(childEvent);\r\n            return _this.fillDragParams(childMoveable, childEvent);\r\n        });\r\n        triggerEvent(moveable, \"onBeforeRenderGroup\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n            targets: moveable.props.targets,\r\n            events: params,\r\n        }));\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        this.dragEnd(moveable, e);\r\n        triggerEvent(moveable, \"onBeforeRenderGroupEnd\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n            isDrag: e.isDrag,\r\n            targets: moveable.props.targets,\r\n        }));\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        return this.dragStart(moveable, e);\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        return this.drag(moveable, e);\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        return this.dragEnd(moveable, e);\r\n    },\r\n    dragGroupControlStart: function (moveable, e) {\r\n        return this.dragGroupStart(moveable, e);\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        return this.dragGroup(moveable, e);\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        return this.dragGroupEnd(moveable, e);\r\n    },\r\n};\n\nvar Renderable = {\r\n    name: \"renderable\",\r\n    props: [],\r\n    events: [\r\n        \"renderStart\",\r\n        \"render\",\r\n        \"renderEnd\",\r\n        \"renderGroupStart\",\r\n        \"renderGroup\",\r\n        \"renderGroupEnd\",\r\n    ],\r\n    dragRelation: \"weak\",\r\n    dragStart: function (moveable, e) {\r\n        triggerEvent(moveable, \"onRenderStart\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n        }));\r\n    },\r\n    drag: function (moveable, e) {\r\n        triggerEvent(moveable, \"onRender\", this.fillDragParams(moveable, e));\r\n    },\r\n    dragAfter: function (moveable, e) {\r\n        return this.drag(moveable, e);\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        triggerEvent(moveable, \"onRenderEnd\", this.fillDragEndParams(moveable, e));\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        triggerEvent(moveable, \"onRenderGroupStart\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n            targets: moveable.props.targets,\r\n        }));\r\n    },\r\n    dragGroup: function (moveable, e) {\r\n        var _this = this;\r\n        var events = fillChildEvents(moveable, \"beforeRenderable\", e);\r\n        var moveables = moveable.moveables;\r\n        var params = events.map(function (childEvent, i) {\r\n            var childMoveable = moveables[i];\r\n            return _this.fillDragParams(childMoveable, childEvent);\r\n        });\r\n        triggerEvent(moveable, \"onRenderGroup\", fillParams(moveable, e, __assign(__assign({ isPinch: !!e.isPinch, targets: moveable.props.targets, transform: getNextTransformText(e), transformObject: {} }, fillCSSObject(getNextStyle(e))), { events: params })));\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        var _this = this;\r\n        var events = fillChildEvents(moveable, \"beforeRenderable\", e);\r\n        var moveables = moveable.moveables;\r\n        var params = events.map(function (childEvent, i) {\r\n            var childMoveable = moveables[i];\r\n            return _this.fillDragEndParams(childMoveable, childEvent);\r\n        });\r\n        triggerEvent(moveable, \"onRenderGroupEnd\", fillParams(moveable, e, __assign({ isPinch: !!e.isPinch, isDrag: e.isDrag, targets: moveable.props.targets, events: params, transformObject: {}, transform: getNextTransformText(e) }, fillCSSObject(getNextStyle(e)))));\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        return this.dragStart(moveable, e);\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        return this.drag(moveable, e);\r\n    },\r\n    dragControlAfter: function (moveable, e) {\r\n        return this.dragAfter(moveable, e);\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        return this.dragEnd(moveable, e);\r\n    },\r\n    dragGroupControlStart: function (moveable, e) {\r\n        return this.dragGroupStart(moveable, e);\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        return this.dragGroup(moveable, e);\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        return this.dragGroupEnd(moveable, e);\r\n    },\r\n    fillDragParams: function (moveable, e) {\r\n        var transformObject = {};\r\n        parse(getNextTransforms(e) || []).forEach(function (matrixInfo) {\r\n            transformObject[matrixInfo.name] = matrixInfo.functionValue;\r\n        });\r\n        return fillParams(moveable, e, __assign({ isPinch: !!e.isPinch, transformObject: transformObject, transform: getNextTransformText(e) }, fillCSSObject(getNextStyle(e))));\r\n    },\r\n    fillDragEndParams: function (moveable, e) {\r\n        var transformObject = {};\r\n        parse(getNextTransforms(e) || []).forEach(function (matrixInfo) {\r\n            transformObject[matrixInfo.name] = matrixInfo.functionValue;\r\n        });\r\n        return fillParams(moveable, e, __assign({ isPinch: !!e.isPinch, isDrag: e.isDrag, transformObject: transformObject, transform: getNextTransformText(e) }, fillCSSObject(getNextStyle(e))));\r\n    },\r\n};\n\nfunction triggerAble(moveable, moveableAbles, eventOperations, eventAffix, eventType, e, requestInstant) {\r\n    // pre setting\r\n    e.clientDistX = e.distX;\r\n    e.clientDistY = e.distY;\r\n    var isStart = eventType === \"Start\";\r\n    var isEnd = eventType === \"End\";\r\n    var isAfter = eventType === \"After\";\r\n    var target = moveable.state.target;\r\n    var isRequest = e.isRequest;\r\n    var isControl = eventAffix.indexOf(\"Control\") > -1;\r\n    if (!target\r\n        || (isStart && isControl && !isRequest && moveable.areaElement === e.inputEvent.target)) {\r\n        return false;\r\n    }\r\n    var ables = __spreadArray([], __read(moveableAbles), false);\r\n    if (isRequest) {\r\n        var requestAble_1 = e.requestAble;\r\n        if (!ables.some(function (able) { return able.name === requestAble_1; })) {\r\n            ables.push.apply(ables, __spreadArray([], __read(moveable.props.ables.filter(function (able) { return able.name === requestAble_1; })), false));\r\n        }\r\n    }\r\n    if (!ables.length || ables.every(function (able) { return able.dragRelation; })) {\r\n        return false;\r\n    }\r\n    // \"drag\" \"Control\" \"After\"\r\n    var inputEvent = e.inputEvent;\r\n    var inputTarget;\r\n    if (isEnd && inputEvent) {\r\n        inputTarget = document.elementFromPoint(e.clientX, e.clientY) || inputEvent.target;\r\n    }\r\n    var isDragStop = false;\r\n    var stop = function () {\r\n        var _a;\r\n        isDragStop = true;\r\n        (_a = e.stop) === null || _a === void 0 ? void 0 : _a.call(e);\r\n    };\r\n    var isFirstStart = isStart && (!moveable.targetGesto || !moveable.controlGesto\r\n        || (!moveable.targetGesto.isFlag() || !moveable.controlGesto.isFlag()));\r\n    if (isFirstStart) {\r\n        moveable.updateRect(eventType, true, false);\r\n    }\r\n    // trigger ables\r\n    var datas = e.datas;\r\n    var gestoType = isControl ? \"controlGesto\" : \"targetGesto\";\r\n    var prevGesto = moveable[gestoType];\r\n    var trigger = function (able, eventName, conditionName) {\r\n        if (!(eventName in able) || prevGesto !== moveable[gestoType]) {\r\n            return false;\r\n        }\r\n        var ableName = able.name;\r\n        var nextDatas = datas[ableName] || (datas[ableName] = {});\r\n        if (isStart) {\r\n            nextDatas.isEventStart = !conditionName\r\n                || !able[conditionName] || able[conditionName](moveable, e);\r\n        }\r\n        if (!nextDatas.isEventStart) {\r\n            return false;\r\n        }\r\n        var result = able[eventName](moveable, __assign(__assign({}, e), { stop: stop, datas: nextDatas, originalDatas: datas, inputTarget: inputTarget }));\r\n        moveable._emitter.off();\r\n        if (isStart && result === false) {\r\n            nextDatas.isEventStart = false;\r\n        }\r\n        return result;\r\n    };\r\n    // unset ables for first drag start\r\n    if (isFirstStart) {\r\n        ables.forEach(function (able) {\r\n            able.unset && able.unset(moveable);\r\n        });\r\n    }\r\n    // BeforeRenderable\r\n    trigger(BeforeRenderable, \"drag\".concat(eventAffix).concat(eventType));\r\n    var forceEndedCount = 0;\r\n    var updatedCount = 0;\r\n    eventOperations.forEach(function (eventOperation) {\r\n        if (isDragStop) {\r\n            return false;\r\n        }\r\n        var eventName = \"\".concat(eventOperation).concat(eventAffix).concat(eventType);\r\n        var conditionName = \"\".concat(eventOperation).concat(eventAffix, \"Condition\");\r\n        if (eventType === \"\" && !isRequest) {\r\n            // Convert distX, distY\r\n            convertDragDist(moveable.state, e);\r\n        }\r\n        // const isGroup = eventAffix.indexOf(\"Group\") > -1;\r\n        var eventAbles = ables.filter(function (able) { return able[eventName]; });\r\n        eventAbles = eventAbles.filter(function (able, i) {\r\n            return able.name && eventAbles.indexOf(able) === i;\r\n        });\r\n        var results = eventAbles.filter(function (able) { return trigger(able, eventName, conditionName); });\r\n        var isUpdate = results.length;\r\n        // end ables\r\n        if (isDragStop) {\r\n            ++forceEndedCount;\r\n        }\r\n        if (isUpdate) {\r\n            ++updatedCount;\r\n        }\r\n        if (!isDragStop && isStart && eventAbles.length && !isUpdate) {\r\n            forceEndedCount += eventAbles.filter(function (able) {\r\n                var ableName = able.name;\r\n                var nextDatas = datas[ableName];\r\n                if (nextDatas.isEventStart) {\r\n                    if (able.dragRelation === \"strong\") {\r\n                        return false;\r\n                    }\r\n                    // stop drag\r\n                    return true;\r\n                }\r\n                // pre stop drag\r\n                return false;\r\n            }).length ? 1 : 0;\r\n        }\r\n    });\r\n    if (!isAfter || updatedCount) {\r\n        trigger(Renderable, \"drag\".concat(eventAffix).concat(eventType));\r\n    }\r\n    // stop gesto condition\r\n    var isForceEnd = prevGesto !== moveable[gestoType] || forceEndedCount === eventOperations.length;\r\n    if (isEnd || isDragStop || isForceEnd) {\r\n        moveable.state.gestos = {};\r\n        if (moveable.moveables) {\r\n            moveable.moveables.forEach(function (childMoveable) {\r\n                childMoveable.state.gestos = {};\r\n            });\r\n        }\r\n        ables.forEach(function (able) {\r\n            able.unset && able.unset(moveable);\r\n        });\r\n    }\r\n    if (isStart && !isForceEnd && !isRequest && updatedCount && moveable.props.preventDefault) {\r\n        e === null || e === void 0 ? void 0 : e.preventDefault();\r\n    }\r\n    if (moveable.isUnmounted || isForceEnd) {\r\n        return false;\r\n    }\r\n    if ((!isStart && updatedCount && !requestInstant) || isEnd) {\r\n        var flushSync = moveable.props.flushSync || defaultSync;\r\n        flushSync(function () {\r\n            moveable.updateRect(isEnd ? eventType : \"\", true, false);\r\n            moveable.forceUpdate();\r\n        });\r\n    }\r\n    if (!isStart && !isEnd && !isAfter && updatedCount && !requestInstant) {\r\n        triggerAble(moveable, moveableAbles, eventOperations, eventAffix, eventType + \"After\", e);\r\n    }\r\n    return true;\r\n}\r\nfunction checkMoveableTarget(moveable) {\r\n    return function (e) {\r\n        var _a;\r\n        var eventTarget = e.inputEvent.target;\r\n        var areaElement = moveable.areaElement;\r\n        var dragTargetElement = moveable._dragTarget;\r\n        if (!dragTargetElement || ((_a = moveable.controlGesto) === null || _a === void 0 ? void 0 : _a.isFlag())) {\r\n            return false;\r\n        }\r\n        return eventTarget === dragTargetElement\r\n            || dragTargetElement.contains(eventTarget)\r\n            || eventTarget === areaElement\r\n            || (!moveable.isMoveableElement(eventTarget) && !moveable.controlBox.contains(eventTarget))\r\n            || hasClass(eventTarget, \"moveable-area\")\r\n            || hasClass(eventTarget, \"moveable-padding\")\r\n            || hasClass(eventTarget, \"moveable-edgeDraggable\");\r\n    };\r\n}\r\nfunction getTargetAbleGesto(moveable, moveableTarget, eventAffix) {\r\n    var controlBox = moveable.controlBox;\r\n    var targets = [];\r\n    var props = moveable.props;\r\n    var dragArea = props.dragArea;\r\n    var target = moveable.state.target;\r\n    var dragTarget = props.dragTarget;\r\n    targets.push(controlBox);\r\n    if (!dragArea || dragTarget) {\r\n        targets.push(moveableTarget);\r\n    }\r\n    if (!dragArea && dragTarget && target && moveableTarget !== target && props.dragTargetSelf) {\r\n        targets.push(target);\r\n    }\r\n    return getAbleGesto(moveable, targets, \"targetAbles\", eventAffix, {\r\n        dragStart: checkMoveableTarget(moveable),\r\n        pinchStart: checkMoveableTarget(moveable),\r\n    });\r\n}\r\nfunction getAbleGesto(moveable, target, ableType, eventAffix, conditionFunctions) {\r\n    if (conditionFunctions === void 0) { conditionFunctions = {}; }\r\n    var isTargetAbles = ableType === \"targetAbles\";\r\n    var _a = moveable.props, pinchOutside = _a.pinchOutside, pinchThreshold = _a.pinchThreshold, preventClickEventOnDrag = _a.preventClickEventOnDrag, preventClickDefault = _a.preventClickDefault, checkInput = _a.checkInput, dragFocusedInput = _a.dragFocusedInput, _b = _a.preventDefault, preventDefault = _b === void 0 ? true : _b, dragContaienrOption = _a.dragContainer;\r\n    var dragContainer = getRefTarget(dragContaienrOption, true);\r\n    var options = {\r\n        preventDefault: preventDefault,\r\n        preventRightClick: true,\r\n        preventWheelClick: true,\r\n        container: dragContainer || getWindow(moveable.getControlBoxElement()),\r\n        pinchThreshold: pinchThreshold,\r\n        pinchOutside: pinchOutside,\r\n        preventClickEventOnDrag: isTargetAbles ? preventClickEventOnDrag : false,\r\n        preventClickEventOnDragStart: isTargetAbles ? preventClickDefault : false,\r\n        preventClickEventByCondition: isTargetAbles ? null : function (e) {\r\n            return moveable.controlBox.contains(e.target);\r\n        },\r\n        checkInput: isTargetAbles ? checkInput : false,\r\n        dragFocusedInput: dragFocusedInput,\r\n    };\r\n    var gesto = new Gesto(target, options);\r\n    var isControl = eventAffix === \"Control\";\r\n    [\"drag\", \"pinch\"].forEach(function (eventOperation) {\r\n        [\"Start\", \"\", \"End\"].forEach(function (eventType) {\r\n            gesto.on(\"\".concat(eventOperation).concat(eventType), function (e) {\r\n                var _a;\r\n                var eventName = e.eventType;\r\n                var isPinchScheduled = eventOperation === \"drag\" && e.isPinch;\r\n                if (conditionFunctions[eventName] && !conditionFunctions[eventName](e)) {\r\n                    e.stop();\r\n                    return;\r\n                }\r\n                if (isPinchScheduled) {\r\n                    return;\r\n                }\r\n                var eventOperations = eventOperation === \"drag\" ? [eventOperation] : [\"drag\", eventOperation];\r\n                var moveableAbles = __spreadArray([], __read(moveable[ableType]), false);\r\n                var result = triggerAble(moveable, moveableAbles, eventOperations, eventAffix, eventType, e);\r\n                if (!result) {\r\n                    e.stop();\r\n                }\r\n                else if (moveable.props.stopPropagation || (eventType === \"Start\" && isControl)) {\r\n                    (_a = e === null || e === void 0 ? void 0 : e.inputEvent) === null || _a === void 0 ? void 0 : _a.stopPropagation();\r\n                }\r\n            });\r\n        });\r\n    });\r\n    return gesto;\r\n}\n\nvar EventManager = /*#__PURE__*/ (function () {\r\n    function EventManager(target, moveable, eventName) {\r\n        var _this = this;\r\n        this.target = target;\r\n        this.moveable = moveable;\r\n        this.eventName = eventName;\r\n        this.ables = [];\r\n        this._onEvent = function (e) {\r\n            var eventName = _this.eventName;\r\n            var moveable = _this.moveable;\r\n            if (moveable.state.disableNativeEvent) {\r\n                return;\r\n            }\r\n            _this.ables.forEach(function (able) {\r\n                able[eventName](moveable, {\r\n                    inputEvent: e,\r\n                });\r\n            });\r\n        };\r\n        target.addEventListener(eventName.toLowerCase(), this._onEvent);\r\n    }\r\n    EventManager.prototype.setAbles = function (ables) {\r\n        this.ables = ables;\r\n    };\r\n    EventManager.prototype.destroy = function () {\r\n        this.target.removeEventListener(this.eventName.toLowerCase(), this._onEvent);\r\n        this.target = null;\r\n        this.moveable = null;\r\n    };\r\n    return EventManager;\r\n}());\n\nfunction calculateMatrixStack(target, container, rootContainer, isAbsolute3d) {\r\n    var _a;\r\n    if (rootContainer === void 0) { rootContainer = container; }\r\n    var _b = getMatrixStackInfo(target, container), matrixes = _b.matrixes, is3d = _b.is3d, prevTargetMatrix = _b.targetMatrix, transformOrigin = _b.transformOrigin, targetOrigin = _b.targetOrigin, offsetContainer = _b.offsetContainer, hasFixed = _b.hasFixed, containerZoom = _b.zoom; // prevMatrix\r\n    var _c = getCachedMatrixContainerInfo(offsetContainer, rootContainer), rootMatrixes = _c.matrixes, isRoot3d = _c.is3d, offsetRootContainer = _c.offsetContainer, rootZoom = _c.zoom; // prevRootMatrix\r\n    // if (rootContainer === document.body) {\r\n    //     console.log(offsetContainer, rootContainer, rootMatrixes);\r\n    // }\r\n    var isNext3d = isAbsolute3d || isRoot3d || is3d;\r\n    var n = isNext3d ? 4 : 3;\r\n    var isSVGGraphicElement = target.tagName.toLowerCase() !== \"svg\" && \"ownerSVGElement\" in target;\r\n    var targetMatrix = prevTargetMatrix;\r\n    // let allMatrix = prevMatrix ? convertDimension(prevMatrix, prevN!, n) : createIdentityMatrix(n);\r\n    // let rootMatrix = prevRootMatrix ? convertDimension(prevRootMatrix, prevN!, n) : createIdentityMatrix(n);\r\n    // let beforeMatrix = prevMatrix ? convertDimension(prevMatrix, prevN!, n) : createIdentityMatrix(n);\r\n    var allMatrix = createIdentityMatrix(n);\r\n    var rootMatrix = createIdentityMatrix(n);\r\n    var beforeMatrix = createIdentityMatrix(n);\r\n    var offsetMatrix = createIdentityMatrix(n);\r\n    var length = matrixes.length;\r\n    var nextRootMatrixes = rootMatrixes.map(function (info) {\r\n        return __assign(__assign({}, info), { matrix: info.matrix ? __spreadArray([], __read(info.matrix), false) : undefined });\r\n    }).reverse();\r\n    matrixes.reverse();\r\n    if (!is3d && isNext3d) {\r\n        targetMatrix = convertDimension(targetMatrix, 3, 4);\r\n        convert3DMatrixes(matrixes);\r\n    }\r\n    if (!isRoot3d && isNext3d) {\r\n        convert3DMatrixes(nextRootMatrixes);\r\n    }\r\n    // rootMatrix = (...) -> container -> offset -> absolute -> offset -> absolute(targetMatrix)\r\n    // rootMatrixBeforeOffset = lastOffsetMatrix -> (...) -> container\r\n    // beforeMatrix = (... -> container -> offset -> absolute) -> offset -> absolute(targetMatrix)\r\n    // offsetMatrix = (... -> container -> offset -> absolute -> offset) -> absolute(targetMatrix)\r\n    nextRootMatrixes.forEach(function (info) {\r\n        rootMatrix = multiply(rootMatrix, info.matrix, n);\r\n    });\r\n    var originalRootContainer = rootContainer || getDocumentBody(target);\r\n    var endContainer = ((_a = nextRootMatrixes[0]) === null || _a === void 0 ? void 0 : _a.target)\r\n        || getOffsetInfo(originalRootContainer, originalRootContainer, true).offsetParent;\r\n    var rootMatrixBeforeOffset = nextRootMatrixes.slice(1).reduce(function (matrix, info) {\r\n        return multiply(matrix, info.matrix, n);\r\n    }, createIdentityMatrix(n));\r\n    matrixes.forEach(function (info, i) {\r\n        if (length - 2 === i) {\r\n            // length - 3\r\n            beforeMatrix = allMatrix.slice();\r\n        }\r\n        if (length - 1 === i) {\r\n            // length - 2\r\n            offsetMatrix = allMatrix.slice();\r\n        }\r\n        // calculate for SVGElement\r\n        if (!info.matrix) {\r\n            var nextInfo = matrixes[i + 1];\r\n            var offset = getSVGOffset(info, nextInfo, endContainer, n, multiply(rootMatrixBeforeOffset, allMatrix, n));\r\n            info.matrix = createOriginMatrix(offset, n);\r\n        }\r\n        allMatrix = multiply(allMatrix, info.matrix, n);\r\n    });\r\n    var isMatrix3d = !isSVGGraphicElement && is3d;\r\n    if (!targetMatrix) {\r\n        targetMatrix = createIdentityMatrix(isMatrix3d ? 4 : 3);\r\n    }\r\n    var targetTransform = makeMatrixCSS(isSVGGraphicElement && targetMatrix.length === 16\r\n        ? convertDimension(targetMatrix, 4, 3) : targetMatrix, isMatrix3d);\r\n    var originalRootMatrix = rootMatrix;\r\n    rootMatrix = ignoreDimension(rootMatrix, n, n);\r\n    return {\r\n        hasZoom: containerZoom !== 1 || rootZoom !== 1,\r\n        hasFixed: hasFixed,\r\n        matrixes: matrixes,\r\n        rootMatrix: rootMatrix,\r\n        originalRootMatrix: originalRootMatrix,\r\n        beforeMatrix: beforeMatrix,\r\n        offsetMatrix: offsetMatrix,\r\n        allMatrix: allMatrix,\r\n        targetMatrix: targetMatrix,\r\n        targetTransform: targetTransform,\r\n        inlineTransform: target.style.transform,\r\n        transformOrigin: transformOrigin,\r\n        targetOrigin: targetOrigin,\r\n        is3d: isNext3d,\r\n        offsetContainer: offsetContainer,\r\n        offsetRootContainer: offsetRootContainer,\r\n    };\r\n}\n\nfunction calculateElementInfo(target, container, rootContainer, isAbsolute3d) {\r\n    if (rootContainer === void 0) { rootContainer = container; }\r\n    var width = 0;\r\n    var height = 0;\r\n    var rotation = 0;\r\n    var allResult = {};\r\n    var sizes = getSize(target);\r\n    if (target) {\r\n        width = sizes.offsetWidth;\r\n        height = sizes.offsetHeight;\r\n    }\r\n    if (target) {\r\n        var result = calculateMatrixStack(target, container, rootContainer, isAbsolute3d);\r\n        var position = calculateElementPosition(result.allMatrix, result.transformOrigin, width, height);\r\n        allResult = __assign(__assign({}, result), position);\r\n        var rotationPosition = calculateElementPosition(result.allMatrix, [50, 50], 100, 100);\r\n        rotation = getRotationRad([rotationPosition.pos1, rotationPosition.pos2], rotationPosition.direction);\r\n    }\r\n    var n = isAbsolute3d ? 4 : 3;\r\n    return __assign(__assign(__assign({ hasZoom: false, width: width, height: height, rotation: rotation }, sizes), { originalRootMatrix: createIdentityMatrix(n), rootMatrix: createIdentityMatrix(n), beforeMatrix: createIdentityMatrix(n), offsetMatrix: createIdentityMatrix(n), allMatrix: createIdentityMatrix(n), targetMatrix: createIdentityMatrix(n), targetTransform: \"\", inlineTransform: \"\", transformOrigin: [0, 0], targetOrigin: [0, 0], is3d: !!isAbsolute3d, left: 0, top: 0, right: 0, bottom: 0, origin: [0, 0], pos1: [0, 0], pos2: [0, 0], pos3: [0, 0], pos4: [0, 0], direction: 1, hasFixed: false, offsetContainer: null, offsetRootContainer: null, matrixes: [] }), allResult);\r\n}\r\nfunction getElementInfo(target, container, rootContainer) {\r\n    if (rootContainer === void 0) { rootContainer = container; }\r\n    return calculateElementInfo(target, container, rootContainer, true);\r\n}\n\nfunction getMoveableTargetInfo(moveableElement, target, container, parentContainer, rootContainer, requestStyles) {\r\n    if (requestStyles === void 0) { requestStyles = []; }\r\n    var beforeDirection = 1;\r\n    var beforeOrigin = [0, 0];\r\n    var targetClientRect = resetClientRect();\r\n    var moveableClientRect = resetClientRect();\r\n    var containerClientRect = resetClientRect();\r\n    var rootContainerClientRect = resetClientRect();\r\n    var offsetDelta = [0, 0];\r\n    var style = {};\r\n    var result = calculateElementInfo(target, container, rootContainer, true);\r\n    if (target) {\r\n        var getStyle_1 = getCachedStyle(target);\r\n        requestStyles.forEach(function (name) {\r\n            style[name] = getStyle_1(name);\r\n        });\r\n        var n = result.is3d ? 4 : 3;\r\n        var beforePosition = calculateElementPosition(result.offsetMatrix, plus(result.transformOrigin, getOrigin(result.targetMatrix, n)), result.width, result.height);\r\n        beforeDirection = beforePosition.direction;\r\n        beforeOrigin = plus(beforePosition.origin, [beforePosition.left - result.left, beforePosition.top - result.top]);\r\n        rootContainerClientRect = getClientRect(result.offsetRootContainer);\r\n        var offsetContainer = getOffsetInfo(parentContainer, parentContainer, true).offsetParent\r\n            || result.offsetRootContainer;\r\n        if (result.hasZoom) {\r\n            var absoluteTargetPosition = calculateElementPosition(multiply(result.originalRootMatrix, result.allMatrix), result.transformOrigin, result.width, result.height);\r\n            var absoluteContainerPosition = calculateElementPosition(result.originalRootMatrix, getTransformOriginArray(getCachedStyle(offsetContainer)(\"transformOrigin\")).map(function (pos) { return parseFloat(pos); }), offsetContainer.offsetWidth, offsetContainer.offsetHeight);\r\n            targetClientRect = getClientRectByPosition(absoluteTargetPosition, rootContainerClientRect);\r\n            containerClientRect = getClientRectByPosition(absoluteContainerPosition, rootContainerClientRect, offsetContainer, true);\r\n            if (moveableElement) {\r\n                var left = absoluteTargetPosition.left;\r\n                var top_1 = absoluteTargetPosition.top;\r\n                moveableClientRect = getClientRectByPosition({\r\n                    left: left,\r\n                    top: top_1,\r\n                    bottom: top_1,\r\n                    right: top_1,\r\n                }, rootContainerClientRect);\r\n            }\r\n        }\r\n        else {\r\n            targetClientRect = getClientRect(target);\r\n            containerClientRect = getCachedClientRect(offsetContainer);\r\n            if (moveableElement) {\r\n                moveableClientRect = getClientRect(moveableElement);\r\n            }\r\n            var containerClientRectLeft = containerClientRect.left, containerClientRectTop = containerClientRect.top, containterClientLeft = containerClientRect.clientLeft, containerClientTop = containerClientRect.clientTop;\r\n            var clientDelta = [\r\n                targetClientRect.left - containerClientRectLeft,\r\n                targetClientRect.top - containerClientRectTop,\r\n            ];\r\n            offsetDelta = minus(calculateInversePosition(result.rootMatrix, clientDelta, 4), [containterClientLeft + result.left, containerClientTop + result.top]);\r\n        }\r\n    }\r\n    return __assign({ targetClientRect: targetClientRect, containerClientRect: containerClientRect, moveableClientRect: moveableClientRect, rootContainerClientRect: rootContainerClientRect, beforeDirection: beforeDirection, beforeOrigin: beforeOrigin, originalBeforeOrigin: beforeOrigin, target: target, style: style, offsetDelta: offsetDelta }, result);\r\n}\n\nfunction getPersistState(rect) {\r\n    var pos1 = rect.pos1, pos2 = rect.pos2, pos3 = rect.pos3, pos4 = rect.pos4;\r\n    if (!pos1 || !pos2 || !pos3 || !pos4) {\r\n        return null;\r\n    }\r\n    var minPos = getMinMaxs([pos1, pos2, pos3, pos4]);\r\n    var posDelta = [minPos.minX, minPos.minY];\r\n    var origin = minus(rect.origin, posDelta);\r\n    pos1 = minus(pos1, posDelta);\r\n    pos2 = minus(pos2, posDelta);\r\n    pos3 = minus(pos3, posDelta);\r\n    pos4 = minus(pos4, posDelta);\r\n    return __assign(__assign({}, rect), { left: rect.left, top: rect.top, posDelta: posDelta, pos1: pos1, pos2: pos2, pos3: pos3, pos4: pos4, origin: origin, beforeOrigin: origin, \r\n        // originalBeforeOrigin: origin,\r\n        isPersisted: true });\r\n}\n\nvar MoveableManager = /*#__PURE__*/ (function (_super) {\r\n    __extends(MoveableManager, _super);\r\n    function MoveableManager() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = __assign({ container: null, gestos: {}, renderPoses: [[0, 0], [0, 0], [0, 0], [0, 0]], disableNativeEvent: false, posDelta: [0, 0] }, getMoveableTargetInfo(null));\r\n        _this.renderState = {};\r\n        _this.enabledAbles = [];\r\n        _this.targetAbles = [];\r\n        _this.controlAbles = [];\r\n        _this.rotation = 0;\r\n        _this.scale = [1, 1];\r\n        _this.isMoveableMounted = false;\r\n        _this.isUnmounted = false;\r\n        _this.events = {\r\n            \"mouseEnter\": null,\r\n            \"mouseLeave\": null,\r\n        };\r\n        _this._emitter = new EventEmitter();\r\n        _this._prevOriginalDragTarget = null;\r\n        _this._originalDragTarget = null;\r\n        _this._prevDragTarget = null;\r\n        _this._dragTarget = null;\r\n        _this._prevPropTarget = null;\r\n        _this._propTarget = null;\r\n        _this._prevDragArea = false;\r\n        _this._isPropTargetChanged = false;\r\n        _this._hasFirstTarget = false;\r\n        _this._reiszeObserver = null;\r\n        _this._observerId = 0;\r\n        _this._mutationObserver = null;\r\n        _this._rootContainer = null;\r\n        _this._viewContainer = null;\r\n        _this._viewClassNames = [];\r\n        _this._store = {};\r\n        _this.checkUpdateRect = function () {\r\n            if (_this.isDragging()) {\r\n                return;\r\n            }\r\n            var parentMoveable = _this.props.parentMoveable;\r\n            if (parentMoveable) {\r\n                parentMoveable.checkUpdateRect();\r\n                return;\r\n            }\r\n            cancelAnimationFrame(_this._observerId);\r\n            _this._observerId = requestAnimationFrame(function () {\r\n                if (_this.isDragging()) {\r\n                    return;\r\n                }\r\n                _this.updateRect();\r\n            });\r\n        };\r\n        _this._onPreventClick = function (e) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            // removeEvent(window, \"click\", this._onPreventClick, true);\r\n        };\r\n        return _this;\r\n    }\r\n    MoveableManager.prototype.render = function () {\r\n        var props = this.props;\r\n        var state = this.getState();\r\n        var parentPosition = props.parentPosition, className = props.className, propsTarget = props.target, zoom = props.zoom, cspNonce = props.cspNonce, translateZ = props.translateZ, ControlBoxElement = props.cssStyled, groupable = props.groupable, linePadding = props.linePadding, controlPadding = props.controlPadding;\r\n        this._checkUpdateRootContainer();\r\n        this.checkUpdate();\r\n        this.updateRenderPoses();\r\n        var _a = __read(parentPosition || [0, 0], 2), parentLeft = _a[0], parentTop = _a[1];\r\n        var left = state.left, top = state.top, stateTarget = state.target, direction = state.direction, hasFixed = state.hasFixed, offsetDelta = state.offsetDelta;\r\n        var groupTargets = props.targets;\r\n        var isDragging = this.isDragging();\r\n        var ableAttributes = {};\r\n        this.getEnabledAbles().forEach(function (able) {\r\n            ableAttributes[\"data-able-\".concat(able.name.toLowerCase())] = true;\r\n        });\r\n        var ableClassName = this._getAbleClassName();\r\n        var isDisplay = (groupTargets && groupTargets.length && (stateTarget || groupable))\r\n            || propsTarget\r\n            || (!this._hasFirstTarget && this.state.isPersisted);\r\n        var isVisible = this.controlBox || this.props.firstRenderState || this.props.persistData;\r\n        var translate = [left - parentLeft, top - parentTop];\r\n        if (!groupable && props.useAccuratePosition) {\r\n            translate[0] += offsetDelta[0];\r\n            translate[1] += offsetDelta[1];\r\n        }\r\n        var style = {\r\n            \"position\": hasFixed ? \"fixed\" : \"absolute\",\r\n            \"display\": isDisplay ? \"block\" : \"none\",\r\n            \"visibility\": isVisible ? \"visible\" : \"hidden\",\r\n            \"transform\": \"translate3d(\".concat(translate[0], \"px, \").concat(translate[1], \"px, \").concat(translateZ, \")\"),\r\n            \"--zoom\": zoom,\r\n            \"--zoompx\": \"\".concat(zoom, \"px\"),\r\n        };\r\n        if (linePadding) {\r\n            style[\"--moveable-line-padding\"] = linePadding;\r\n        }\r\n        if (controlPadding) {\r\n            style[\"--moveable-control-padding\"] = controlPadding;\r\n        }\r\n        return (React.createElement(ControlBoxElement, __assign({ cspNonce: cspNonce, ref: ref(this, \"controlBox\"), className: \"\".concat(prefix(\"control-box\", direction === -1 ? \"reverse\" : \"\", isDragging ? \"dragging\" : \"\"), \" \").concat(ableClassName, \" \").concat(className) }, ableAttributes, { onClick: this._onPreventClick, style: style }),\r\n            this.renderAbles(),\r\n            this._renderLines()));\r\n    };\r\n    MoveableManager.prototype.componentDidMount = function () {\r\n        this.isMoveableMounted = true;\r\n        this.isUnmounted = false;\r\n        var props = this.props;\r\n        var parentMoveable = props.parentMoveable, container = props.container;\r\n        this._checkUpdateRootContainer();\r\n        this._checkUpdateViewContainer();\r\n        this._updateTargets();\r\n        this._updateNativeEvents();\r\n        this._updateEvents();\r\n        this.updateCheckInput();\r\n        this._updateObserver(this.props);\r\n        if (!container && !parentMoveable && !this.state.isPersisted) {\r\n            this.updateRect(\"\", false, false);\r\n            this.forceUpdate();\r\n        }\r\n    };\r\n    MoveableManager.prototype.componentDidUpdate = function (prevProps) {\r\n        this._checkUpdateRootContainer();\r\n        this._checkUpdateViewContainer();\r\n        this._updateNativeEvents();\r\n        this._updateTargets();\r\n        this._updateEvents();\r\n        this.updateCheckInput();\r\n        this._updateObserver(prevProps);\r\n    };\r\n    MoveableManager.prototype.componentWillUnmount = function () {\r\n        var _a, _b;\r\n        this.isMoveableMounted = false;\r\n        this.isUnmounted = true;\r\n        this._emitter.off();\r\n        (_a = this._reiszeObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\r\n        (_b = this._mutationObserver) === null || _b === void 0 ? void 0 : _b.disconnect();\r\n        var viewContainer = this._viewContainer;\r\n        if (viewContainer) {\r\n            this._changeAbleViewClassNames([]);\r\n        }\r\n        unsetGesto(this, false);\r\n        unsetGesto(this, true);\r\n        var events = this.events;\r\n        for (var name_1 in events) {\r\n            var manager = events[name_1];\r\n            manager && manager.destroy();\r\n        }\r\n    };\r\n    MoveableManager.prototype.getTargets = function () {\r\n        var target = this.props.target;\r\n        return target ? [target] : [];\r\n    };\r\n    /**\r\n     * Get the able used in MoveableManager.\r\n     * @method Moveable#getAble\r\n     * @param - able name\r\n     */\r\n    MoveableManager.prototype.getAble = function (ableName) {\r\n        var ables = this.props.ables || [];\r\n        return find(ables, function (able) { return able.name === ableName; });\r\n    };\r\n    MoveableManager.prototype.getContainer = function () {\r\n        var _a = this.props, parentMoveable = _a.parentMoveable, wrapperMoveable = _a.wrapperMoveable, container = _a.container;\r\n        return container\r\n            || (wrapperMoveable && wrapperMoveable.getContainer())\r\n            || (parentMoveable && parentMoveable.getContainer())\r\n            || this.controlBox.parentElement;\r\n    };\r\n    /**\r\n     * Returns the element of the control box.\r\n     * @method Moveable#getControlBoxElement\r\n     */\r\n    MoveableManager.prototype.getControlBoxElement = function () {\r\n        return this.controlBox;\r\n    };\r\n    /**\r\n     * Target element to be dragged in moveable\r\n     * @method Moveable#getDragElement\r\n     */\r\n    MoveableManager.prototype.getDragElement = function () {\r\n        return this._dragTarget;\r\n    };\r\n    /**\r\n     * Check if the target is an element included in the moveable.\r\n     * @method Moveable#isMoveableElement\r\n     * @param - the target\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * window.addEventListener(\"click\", e => {\r\n     *     if (!moveable.isMoveableElement(e.target)) {\r\n     *         moveable.target = e.target;\r\n     *     }\r\n     * });\r\n     */\r\n    MoveableManager.prototype.isMoveableElement = function (target) {\r\n        var _a;\r\n        return target && (((_a = target.getAttribute) === null || _a === void 0 ? void 0 : _a.call(target, \"class\")) || \"\").indexOf(PREFIX) > -1;\r\n    };\r\n    /**\r\n     * You can drag start the Moveable through the external `MouseEvent`or `TouchEvent`. (Angular: ngDragStart)\r\n     * @method Moveable#dragStart\r\n     * @param - external `MouseEvent`or `TouchEvent`\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * document.body.addEventListener(\"mousedown\", e => {\r\n     *     if (!moveable.isMoveableElement(e.target)) {\r\n     *          moveable.dragStart(e);\r\n     *     }\r\n     * });\r\n     */\r\n    MoveableManager.prototype.dragStart = function (e) {\r\n        var targetGesto = this.targetGesto;\r\n        var controlGesto = this.controlGesto;\r\n        if (targetGesto && checkMoveableTarget(this)({ inputEvent: e })) {\r\n            if (!targetGesto.isFlag()) {\r\n                targetGesto.triggerDragStart(e);\r\n            }\r\n        }\r\n        else if (controlGesto && this.isMoveableElement(e.target)) {\r\n            if (!controlGesto.isFlag()) {\r\n                controlGesto.triggerDragStart(e);\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * Hit test an element or rect on a moveable target.\r\n     * (100% = 100)\r\n     * @method Moveable#hitTest\r\n     * @param - element or rect to test\r\n     * @return - Get hit test rate (rate > 0 is hitted)\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * document.body.addEventListener(\"mousedown\", e => {\r\n     *     if (moveable.hitTest(e.target) > 0) {\r\n     *          console.log(\"hiited\");\r\n     *     }\r\n     * });\r\n     */\r\n    MoveableManager.prototype.hitTest = function (el) {\r\n        var _a = this.state, target = _a.target, pos1 = _a.pos1, pos2 = _a.pos2, pos3 = _a.pos3, pos4 = _a.pos4, targetClientRect = _a.targetClientRect;\r\n        if (!target) {\r\n            return 0;\r\n        }\r\n        var rect;\r\n        if (isNode(el)) {\r\n            var clientRect = el.getBoundingClientRect();\r\n            rect = {\r\n                left: clientRect.left,\r\n                top: clientRect.top,\r\n                width: clientRect.width,\r\n                height: clientRect.height,\r\n            };\r\n        }\r\n        else {\r\n            rect = __assign({ width: 0, height: 0 }, el);\r\n        }\r\n        var rectLeft = rect.left, rectTop = rect.top, rectWidth = rect.width, rectHeight = rect.height;\r\n        var points = fitPoints([pos1, pos2, pos4, pos3], targetClientRect);\r\n        var size = getOverlapSize(points, [\r\n            [rectLeft, rectTop],\r\n            [rectLeft + rectWidth, rectTop],\r\n            [rectLeft + rectWidth, rectTop + rectHeight],\r\n            [rectLeft, rectTop + rectHeight],\r\n        ]);\r\n        var totalSize = getAreaSize(points);\r\n        if (!size || !totalSize) {\r\n            return 0;\r\n        }\r\n        return Math.min(100, size / totalSize * 100);\r\n    };\r\n    /**\r\n     * Whether the coordinates are inside Moveable\r\n     * @method Moveable#isInside\r\n     * @param - x coordinate\r\n     * @param - y coordinate\r\n     * @return - True if the coordinate is in moveable or false\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * document.body.addEventListener(\"mousedown\", e => {\r\n     *     if (moveable.isInside(e.clientX, e.clientY)) {\r\n     *          console.log(\"inside\");\r\n     *     }\r\n     * });\r\n     */\r\n    MoveableManager.prototype.isInside = function (clientX, clientY) {\r\n        var _a = this.state, target = _a.target, pos1 = _a.pos1, pos2 = _a.pos2, pos3 = _a.pos3, pos4 = _a.pos4, targetClientRect = _a.targetClientRect;\r\n        if (!target) {\r\n            return false;\r\n        }\r\n        return isInside([clientX, clientY], fitPoints([pos1, pos2, pos4, pos3], targetClientRect));\r\n    };\r\n    /**\r\n     * If the width, height, left, and top of all elements change, update the shape of the moveable.\r\n     * @method Moveable#updateRect\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * window.addEventListener(\"resize\", e => {\r\n     *     moveable.updateRect();\r\n     * });\r\n     */\r\n    MoveableManager.prototype.updateRect = function (type, isTarget, isSetState) {\r\n        if (isSetState === void 0) { isSetState = true; }\r\n        var props = this.props;\r\n        var isSingle = !props.parentPosition && !props.wrapperMoveable;\r\n        if (isSingle) {\r\n            setStoreCache(true);\r\n        }\r\n        var parentMoveable = props.parentMoveable;\r\n        var state = this.state;\r\n        var target = (state.target || props.target);\r\n        var container = this.getContainer();\r\n        var rootContainer = parentMoveable\r\n            ? parentMoveable._rootContainer\r\n            : this._rootContainer;\r\n        var nextState = getMoveableTargetInfo(this.controlBox, target, container, container, rootContainer || container, this._getRequestStyles());\r\n        if (!target && this._hasFirstTarget && props.persistData) {\r\n            var persistState = getPersistState(props.persistData);\r\n            for (var name_2 in persistState) {\r\n                nextState[name_2] = persistState[name_2];\r\n            }\r\n        }\r\n        if (isSingle) {\r\n            setStoreCache();\r\n        }\r\n        this.updateState(nextState, parentMoveable ? false : isSetState);\r\n    };\r\n    /**\r\n     * Check if the moveable state is being dragged.\r\n     * @method Moveable#isDragging\r\n     * @param - If you want to check if able is dragging, specify ableName.\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * // false\r\n     * console.log(moveable.isDragging());\r\n     *\r\n     * moveable.on(\"drag\", () => {\r\n     *   // true\r\n     *   console.log(moveable.isDragging());\r\n     * });\r\n     */\r\n    MoveableManager.prototype.isDragging = function (ableName) {\r\n        var _a, _b;\r\n        var targetGesto = this.targetGesto;\r\n        var controlGesto = this.controlGesto;\r\n        if (targetGesto === null || targetGesto === void 0 ? void 0 : targetGesto.isFlag()) {\r\n            if (!ableName) {\r\n                return true;\r\n            }\r\n            var data = targetGesto.getEventData();\r\n            return !!((_a = data[ableName]) === null || _a === void 0 ? void 0 : _a.isEventStart);\r\n        }\r\n        if (controlGesto === null || controlGesto === void 0 ? void 0 : controlGesto.isFlag()) {\r\n            if (!ableName) {\r\n                return true;\r\n            }\r\n            var data = controlGesto.getEventData();\r\n            return !!((_b = data[ableName]) === null || _b === void 0 ? void 0 : _b.isEventStart);\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * If the width, height, left, and top of the only target change, update the shape of the moveable.\r\n     * Use `.updateRect()` method\r\n     * @method Moveable#updateTarget\r\n     * @deprecated\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * moveable.updateTarget();\r\n     */\r\n    MoveableManager.prototype.updateTarget = function (type) {\r\n        this.updateRect(type, true);\r\n    };\r\n    /**\r\n     * You can get the vertex information, position and offset size information of the target based on the container.\r\n     * @method Moveable#getRect\r\n     * @return - The Rect Info\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * const rectInfo = moveable.getRect();\r\n     */\r\n    MoveableManager.prototype.getRect = function () {\r\n        var state = this.state;\r\n        var poses = getAbsolutePosesByState(this.state);\r\n        var _a = __read(poses, 4), pos1 = _a[0], pos2 = _a[1], pos3 = _a[2], pos4 = _a[3];\r\n        var rect = getRect(poses);\r\n        var offsetWidth = state.width, offsetHeight = state.height;\r\n        var width = rect.width, height = rect.height, left = rect.left, top = rect.top;\r\n        var statePos = [state.left, state.top];\r\n        var origin = plus(statePos, state.origin);\r\n        var beforeOrigin = plus(statePos, state.beforeOrigin);\r\n        var transformOrigin = state.transformOrigin;\r\n        return {\r\n            width: width,\r\n            height: height,\r\n            left: left,\r\n            top: top,\r\n            pos1: pos1,\r\n            pos2: pos2,\r\n            pos3: pos3,\r\n            pos4: pos4,\r\n            offsetWidth: offsetWidth,\r\n            offsetHeight: offsetHeight,\r\n            beforeOrigin: beforeOrigin,\r\n            origin: origin,\r\n            transformOrigin: transformOrigin,\r\n            rotation: this.getRotation(),\r\n        };\r\n    };\r\n    /**\r\n     * Get a manager that manages the moveable's state and props.\r\n     * @method Moveable#getManager\r\n     * @return - The Rect Info\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * const manager = moveable.getManager(); // real moveable class instance\r\n     */\r\n    MoveableManager.prototype.getManager = function () {\r\n        return this;\r\n    };\r\n    /**\r\n     * You can stop the dragging currently in progress through a method from outside.\r\n     * @method Moveable#stopDrag\r\n     * @return - The Rect Info\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * moveable.stopDrag();\r\n     */\r\n    MoveableManager.prototype.stopDrag = function (type) {\r\n        if (!type || type === \"target\") {\r\n            var gesto = this.targetGesto;\r\n            if ((gesto === null || gesto === void 0 ? void 0 : gesto.isIdle()) === false) {\r\n                unsetAbles(this, false);\r\n            }\r\n            gesto === null || gesto === void 0 ? void 0 : gesto.stop();\r\n        }\r\n        if (!type || type === \"control\") {\r\n            var gesto = this.controlGesto;\r\n            if ((gesto === null || gesto === void 0 ? void 0 : gesto.isIdle()) === false) {\r\n                unsetAbles(this, true);\r\n            }\r\n            gesto === null || gesto === void 0 ? void 0 : gesto.stop();\r\n        }\r\n    };\r\n    MoveableManager.prototype.getRotation = function () {\r\n        var _a = this.state, pos1 = _a.pos1, pos2 = _a.pos2, direction = _a.direction;\r\n        return getAbsoluteRotation(pos1, pos2, direction);\r\n    };\r\n    /**\r\n     * Request able through a method rather than an event.\r\n     * At the moment of execution, requestStart is executed,\r\n     * and then request and requestEnd can be executed through Requester.\r\n     * @method Moveable#request\r\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Draggable.html#request|Draggable Requester}\r\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Resizable.html#request|Resizable Requester}\r\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Scalable.html#request|Scalable Requester}\r\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Rotatable.html#request|Rotatable Requester}\r\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.OriginDraggable.html#request|OriginDraggable Requester}\r\n     * @param - ableName\r\n     * @param - request to be able params.\r\n     * @param - If isInstant is true, request and requestEnd are executed immediately.\r\n     * @return - Able Requester. If there is no request in able, nothing will work.\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * // Instantly Request (requestStart - request - requestEnd)\r\n     * moveable.request(\"draggable\", { deltaX: 10, deltaY: 10 }, true);\r\n     *\r\n     * // Start move\r\n     * const requester = moveable.request(\"draggable\");\r\n     * requester.request({ deltaX: 10, deltaY: 10 });\r\n     * requester.request({ deltaX: 10, deltaY: 10 });\r\n     * requester.request({ deltaX: 10, deltaY: 10 });\r\n     * requester.requestEnd();\r\n     */\r\n    MoveableManager.prototype.request = function (ableName, param, isInstant) {\r\n        if (param === void 0) { param = {}; }\r\n        var self = this;\r\n        var props = self.props;\r\n        var manager = props.parentMoveable || props.wrapperMoveable || self;\r\n        var allAbles = manager.props.ables;\r\n        var groupable = props.groupable;\r\n        var requsetAble = find(allAbles, function (able) { return able.name === ableName; });\r\n        if (this.isDragging() || !requsetAble || !requsetAble.request) {\r\n            return {\r\n                request: function () {\r\n                    return this;\r\n                },\r\n                requestEnd: function () {\r\n                    return this;\r\n                },\r\n            };\r\n        }\r\n        var ableRequester = requsetAble.request(self);\r\n        var requestInstant = isInstant || param.isInstant;\r\n        var ableType = ableRequester.isControl ? \"controlAbles\" : \"targetAbles\";\r\n        var eventAffix = \"\".concat((groupable ? \"Group\" : \"\")).concat(ableRequester.isControl ? \"Control\" : \"\");\r\n        var moveableAbles = __spreadArray([], __read(manager[ableType]), false);\r\n        var requester = {\r\n            request: function (ableParam) {\r\n                triggerAble(self, moveableAbles, [\"drag\"], eventAffix, \"\", __assign(__assign({}, ableRequester.request(ableParam)), { requestAble: ableName, isRequest: true }), requestInstant);\r\n                return requester;\r\n            },\r\n            requestEnd: function () {\r\n                triggerAble(self, moveableAbles, [\"drag\"], eventAffix, \"End\", __assign(__assign({}, ableRequester.requestEnd()), { requestAble: ableName, isRequest: true }), requestInstant);\r\n                return requester;\r\n            },\r\n        };\r\n        triggerAble(self, moveableAbles, [\"drag\"], eventAffix, \"Start\", __assign(__assign({}, ableRequester.requestStart(param)), { requestAble: ableName, isRequest: true }), requestInstant);\r\n        return requestInstant ? requester.request(param).requestEnd() : requester;\r\n    };\r\n    /**\r\n     * moveable is the top level that manages targets\r\n     * `Single`: MoveableManager instance\r\n     * `Group`: MoveableGroup instance\r\n     * `IndividualGroup`: MoveableIndividaulGroup instance\r\n     * Returns leaf target MoveableManagers.\r\n     */\r\n    MoveableManager.prototype.getMoveables = function () {\r\n        return [this];\r\n    };\r\n    /**\r\n     * Remove the Moveable object and the events.\r\n     * @method Moveable#destroy\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * moveable.destroy();\r\n     */\r\n    MoveableManager.prototype.destroy = function () {\r\n        this.componentWillUnmount();\r\n    };\r\n    MoveableManager.prototype.updateRenderPoses = function () {\r\n        var state = this.getState();\r\n        var props = this.props;\r\n        var padding = props.padding;\r\n        var originalBeforeOrigin = state.originalBeforeOrigin, transformOrigin = state.transformOrigin, allMatrix = state.allMatrix, is3d = state.is3d, pos1 = state.pos1, pos2 = state.pos2, pos3 = state.pos3, pos4 = state.pos4, stateLeft = state.left, stateTop = state.top, isPersisted = state.isPersisted;\r\n        if (!padding) {\r\n            state.renderPoses = [\r\n                pos1,\r\n                pos2,\r\n                pos3,\r\n                pos4,\r\n            ];\r\n            return;\r\n        }\r\n        var _a = getPaddingBox(padding), left = _a.left, top = _a.top, bottom = _a.bottom, right = _a.right;\r\n        var n = is3d ? 4 : 3;\r\n        // const clipPathInfo = getClipPath(\r\n        //     props.target,\r\n        //     offsetWidth,\r\n        //     offsetHeight,\r\n        // );\r\n        // if (clipPathInfo) {\r\n        //     left -= Math.max(0, clipPathInfo.left);\r\n        //     top -= Math.max(0, clipPathInfo.top);\r\n        //     bottom -= Math.max(0, offsetHeight - clipPathInfo.bottom);\r\n        //     right -= Math.max(0, offsetWidth - clipPathInfo.right);\r\n        // }\r\n        var absoluteOrigin = [];\r\n        if (isPersisted) {\r\n            absoluteOrigin = transformOrigin;\r\n        }\r\n        else if (this.controlBox && props.groupable) {\r\n            absoluteOrigin = originalBeforeOrigin;\r\n        }\r\n        else {\r\n            absoluteOrigin = plus(originalBeforeOrigin, [stateLeft, stateTop]);\r\n        }\r\n        var nextMatrix = multiplies(n, createOriginMatrix(absoluteOrigin.map(function (v) { return -v; }), n), allMatrix, createOriginMatrix(transformOrigin, n));\r\n        state.renderPoses = [\r\n            calculatePadding(nextMatrix, pos1, [-left, -top], n),\r\n            calculatePadding(nextMatrix, pos2, [right, -top], n),\r\n            calculatePadding(nextMatrix, pos3, [-left, bottom], n),\r\n            calculatePadding(nextMatrix, pos4, [right, bottom], n),\r\n        ];\r\n    };\r\n    MoveableManager.prototype.checkUpdate = function () {\r\n        this._isPropTargetChanged = false;\r\n        var _a = this.props, target = _a.target, container = _a.container, parentMoveable = _a.parentMoveable;\r\n        var _b = this.state, stateTarget = _b.target, stateContainer = _b.container;\r\n        if (!stateTarget && !target) {\r\n            return;\r\n        }\r\n        this.updateAbles();\r\n        var isTargetChanged = !equals(stateTarget, target);\r\n        var isChanged = isTargetChanged || !equals(stateContainer, container);\r\n        if (!isChanged) {\r\n            return;\r\n        }\r\n        var moveableContainer = container || this.controlBox;\r\n        if (moveableContainer) {\r\n            this.unsetAbles();\r\n        }\r\n        this.updateState({ target: target, container: container });\r\n        if (!parentMoveable && moveableContainer) {\r\n            this.updateRect(\"End\", false, false);\r\n        }\r\n        this._isPropTargetChanged = isTargetChanged;\r\n    };\r\n    MoveableManager.prototype.waitToChangeTarget = function () {\r\n        return new Promise(function () { });\r\n    };\r\n    MoveableManager.prototype.triggerEvent = function (name, e) {\r\n        var props = this.props;\r\n        this._emitter.trigger(name, e);\r\n        if (props.parentMoveable && e.isRequest && !e.isRequestChild) {\r\n            return props.parentMoveable.triggerEvent(name, e, true);\r\n        }\r\n        var callback = props[name];\r\n        return callback && callback(e);\r\n    };\r\n    MoveableManager.prototype.useCSS = function (tag, css) {\r\n        var customStyleMap = this.props.customStyledMap;\r\n        var key = tag + css;\r\n        if (!customStyleMap[key]) {\r\n            customStyleMap[key] = styled(tag, css);\r\n        }\r\n        return customStyleMap[key];\r\n    };\r\n    MoveableManager.prototype.getState = function () {\r\n        var _a;\r\n        var props = this.props;\r\n        if (props.target || ((_a = props.targets) === null || _a === void 0 ? void 0 : _a.length)) {\r\n            this._hasFirstTarget = true;\r\n        }\r\n        var hasControlBox = this.controlBox;\r\n        var persistData = props.persistData;\r\n        var firstRenderState = props.firstRenderState;\r\n        if (firstRenderState && !hasControlBox) {\r\n            return firstRenderState;\r\n        }\r\n        if (!this._hasFirstTarget && persistData) {\r\n            var persistState = getPersistState(persistData);\r\n            if (persistState) {\r\n                this.updateState(persistState, false);\r\n                return this.state;\r\n            }\r\n        }\r\n        this.state.isPersisted = false;\r\n        return this.state;\r\n    };\r\n    MoveableManager.prototype.updateSelectors = function () { };\r\n    MoveableManager.prototype.unsetAbles = function () {\r\n        var _this = this;\r\n        this.targetAbles.forEach(function (able) {\r\n            if (able.unset) {\r\n                able.unset(_this);\r\n            }\r\n        });\r\n    };\r\n    MoveableManager.prototype.updateAbles = function (ables, eventAffix) {\r\n        if (ables === void 0) { ables = this.props.ables; }\r\n        if (eventAffix === void 0) { eventAffix = \"\"; }\r\n        var props = this.props;\r\n        var triggerAblesSimultaneously = props.triggerAblesSimultaneously;\r\n        var enabledAbles = this.getEnabledAbles(ables);\r\n        var dragStart = \"drag\".concat(eventAffix, \"Start\");\r\n        var pinchStart = \"pinch\".concat(eventAffix, \"Start\");\r\n        var dragControlStart = \"drag\".concat(eventAffix, \"ControlStart\");\r\n        var targetAbles = filterAbles(enabledAbles, [dragStart, pinchStart], triggerAblesSimultaneously);\r\n        var controlAbles = filterAbles(enabledAbles, [dragControlStart], triggerAblesSimultaneously);\r\n        this.enabledAbles = enabledAbles;\r\n        this.targetAbles = targetAbles;\r\n        this.controlAbles = controlAbles;\r\n    };\r\n    MoveableManager.prototype.updateState = function (nextState, isSetState) {\r\n        if (isSetState) {\r\n            if (this.isUnmounted) {\r\n                return;\r\n            }\r\n            this.setState(nextState);\r\n        }\r\n        else {\r\n            var state = this.state;\r\n            for (var name_3 in nextState) {\r\n                state[name_3] = nextState[name_3];\r\n            }\r\n        }\r\n    };\r\n    MoveableManager.prototype.getEnabledAbles = function (ables) {\r\n        if (ables === void 0) { ables = this.props.ables; }\r\n        var props = this.props;\r\n        return ables.filter(function (able) { return able && ((able.always && props[able.name] !== false)\r\n            || props[able.name]); });\r\n    };\r\n    MoveableManager.prototype.renderAbles = function () {\r\n        var _this = this;\r\n        var props = this.props;\r\n        var triggerAblesSimultaneously = props.triggerAblesSimultaneously;\r\n        var Renderer = {\r\n            createElement: createElement,\r\n        };\r\n        this.renderState = {};\r\n        return groupByMap(flat(filterAbles(this.getEnabledAbles(), [\"render\"], triggerAblesSimultaneously).map(function (_a) {\r\n            var render = _a.render;\r\n            return render(_this, Renderer) || [];\r\n        })).filter(function (el) { return el; }), function (_a) {\r\n            var key = _a.key;\r\n            return key;\r\n        }).map(function (group) { return group[0]; });\r\n    };\r\n    MoveableManager.prototype.updateCheckInput = function () {\r\n        this.targetGesto && (this.targetGesto.options.checkInput = this.props.checkInput);\r\n    };\r\n    MoveableManager.prototype._getRequestStyles = function () {\r\n        var styleNames = this.getEnabledAbles().reduce(function (names, able) {\r\n            var _a, _b;\r\n            var ableStyleNames = ((_b = (_a = able.requestStyle) === null || _a === void 0 ? void 0 : _a.call(able)) !== null && _b !== void 0 ? _b : []);\r\n            return __spreadArray(__spreadArray([], __read(names), false), __read(ableStyleNames), false);\r\n        }, __spreadArray([], __read((this.props.requestStyles || [])), false));\r\n        return styleNames;\r\n    };\r\n    MoveableManager.prototype._updateObserver = function (prevProps) {\r\n        this._updateResizeObserver(prevProps);\r\n        this._updateMutationObserver(prevProps);\r\n    };\r\n    MoveableManager.prototype._updateEvents = function () {\r\n        var controlBoxElement = this.controlBox;\r\n        var hasTargetAble = this.targetAbles.length;\r\n        var hasControlAble = this.controlAbles.length;\r\n        var target = this._dragTarget;\r\n        var isUnset = (!hasTargetAble && this.targetGesto)\r\n            || this._isTargetChanged(true);\r\n        if (isUnset) {\r\n            unsetGesto(this, false);\r\n            this.updateState({ gestos: {} });\r\n        }\r\n        if (!hasControlAble) {\r\n            unsetGesto(this, true);\r\n        }\r\n        if (target && hasTargetAble && !this.targetGesto) {\r\n            this.targetGesto = getTargetAbleGesto(this, target, \"\");\r\n        }\r\n        if (!this.controlGesto && hasControlAble) {\r\n            this.controlGesto = getAbleGesto(this, controlBoxElement, \"controlAbles\", \"Control\");\r\n        }\r\n    };\r\n    MoveableManager.prototype._updateTargets = function () {\r\n        var props = this.props;\r\n        this._prevPropTarget = this._propTarget;\r\n        this._prevDragTarget = this._dragTarget;\r\n        this._prevOriginalDragTarget = this._originalDragTarget;\r\n        this._prevDragArea = props.dragArea;\r\n        this._propTarget = props.target;\r\n        this._originalDragTarget = props.dragTarget || props.target;\r\n        this._dragTarget = getRefTarget(this._originalDragTarget, true);\r\n    };\r\n    MoveableManager.prototype._renderLines = function () {\r\n        var props = this.props;\r\n        var _a = props, zoom = _a.zoom, hideDefaultLines = _a.hideDefaultLines, hideChildMoveableDefaultLines = _a.hideChildMoveableDefaultLines, parentMoveable = _a.parentMoveable;\r\n        if (hideDefaultLines || (parentMoveable && hideChildMoveableDefaultLines)) {\r\n            return [];\r\n        }\r\n        var renderPoses = this.getState().renderPoses;\r\n        var Renderer = {\r\n            createElement: createElement,\r\n        };\r\n        return [\r\n            [0, 1],\r\n            [1, 3],\r\n            [3, 2],\r\n            [2, 0],\r\n        ].map(function (_a, i) {\r\n            var _b = __read(_a, 2), from = _b[0], to = _b[1];\r\n            return renderLine(Renderer, \"\", renderPoses[from], renderPoses[to], zoom, \"render-line-\".concat(i));\r\n        });\r\n    };\r\n    MoveableManager.prototype._isTargetChanged = function (useDragArea) {\r\n        var props = this.props;\r\n        var nextTarget = props.dragTarget || props.target;\r\n        var prevTarget = this._prevOriginalDragTarget;\r\n        var prevDragArea = this._prevDragArea;\r\n        var dragArea = props.dragArea;\r\n        // check target without dragArea\r\n        var isDragTargetChanged = !dragArea && prevTarget !== nextTarget;\r\n        var isDragAreaChanged = (useDragArea || dragArea) && prevDragArea !== dragArea;\r\n        return isDragTargetChanged || isDragAreaChanged || this._prevPropTarget != this._propTarget;\r\n    };\r\n    MoveableManager.prototype._updateNativeEvents = function () {\r\n        var _this = this;\r\n        var props = this.props;\r\n        var target = props.dragArea ? this.areaElement : this.state.target;\r\n        var events = this.events;\r\n        var eventKeys = getKeys(events);\r\n        if (this._isTargetChanged()) {\r\n            for (var eventName in events) {\r\n                var manager = events[eventName];\r\n                manager && manager.destroy();\r\n                events[eventName] = null;\r\n            }\r\n        }\r\n        if (!target) {\r\n            return;\r\n        }\r\n        var enabledAbles = this.enabledAbles;\r\n        eventKeys.forEach(function (eventName) {\r\n            var ables = filterAbles(enabledAbles, [eventName]);\r\n            var hasAbles = ables.length > 0;\r\n            var manager = events[eventName];\r\n            if (!hasAbles) {\r\n                if (manager) {\r\n                    manager.destroy();\r\n                    events[eventName] = null;\r\n                }\r\n                return;\r\n            }\r\n            if (!manager) {\r\n                manager = new EventManager(target, _this, eventName);\r\n                events[eventName] = manager;\r\n            }\r\n            manager.setAbles(ables);\r\n        });\r\n    };\r\n    MoveableManager.prototype._checkUpdateRootContainer = function () {\r\n        var rootContainer = this.props.rootContainer;\r\n        if (!this._rootContainer && rootContainer) {\r\n            this._rootContainer = getRefTarget(rootContainer, true);\r\n        }\r\n    };\r\n    MoveableManager.prototype._checkUpdateViewContainer = function () {\r\n        var viewContainerOption = this.props.viewContainer;\r\n        if (!this._viewContainer && viewContainerOption) {\r\n            this._viewContainer = getRefTarget(viewContainerOption, true);\r\n        }\r\n        var viewContainer = this._viewContainer;\r\n        if (viewContainer) {\r\n            this._changeAbleViewClassNames(__spreadArray(__spreadArray([], __read(this._getAbleViewClassNames()), false), [\r\n                this.isDragging() ? VIEW_DRAGGING : \"\",\r\n            ], false));\r\n        }\r\n    };\r\n    MoveableManager.prototype._changeAbleViewClassNames = function (classNames) {\r\n        var viewContainer = this._viewContainer;\r\n        var nextClassNames = groupBy(classNames.filter(Boolean), function (el) { return el; }).map(function (_a) {\r\n            var _b = __read(_a, 1), className = _b[0];\r\n            return className;\r\n        });\r\n        var prevClassNames = this._viewClassNames;\r\n        var _a = diff$1(prevClassNames, nextClassNames), removed = _a.removed, added = _a.added;\r\n        removed.forEach(function (index) {\r\n            removeClass(viewContainer, prevClassNames[index]);\r\n        });\r\n        added.forEach(function (index) {\r\n            addClass(viewContainer, nextClassNames[index]);\r\n        });\r\n        this._viewClassNames = nextClassNames;\r\n    };\r\n    MoveableManager.prototype._getAbleViewClassNames = function () {\r\n        var _this = this;\r\n        return (this.getEnabledAbles().map(function (able) {\r\n            var _a;\r\n            return (((_a = able.viewClassName) === null || _a === void 0 ? void 0 : _a.call(able, _this)) || \"\");\r\n        }).join(\" \") + \" \".concat(this._getAbleClassName(\"-view\"))).split(/\\s+/g);\r\n    };\r\n    MoveableManager.prototype._getAbleClassName = function (classPrefix) {\r\n        var _this = this;\r\n        if (classPrefix === void 0) { classPrefix = \"\"; }\r\n        var ables = this.getEnabledAbles();\r\n        var targetGesto = this.targetGesto;\r\n        var controlGesto = this.controlGesto;\r\n        var targetGestoData = (targetGesto === null || targetGesto === void 0 ? void 0 : targetGesto.isFlag())\r\n            ? targetGesto.getEventData() : {};\r\n        var controlGestoData = (controlGesto === null || controlGesto === void 0 ? void 0 : controlGesto.isFlag())\r\n            ? controlGesto.getEventData() : {};\r\n        return ables.map(function (able) {\r\n            var _a, _b, _c;\r\n            var name = able.name;\r\n            var className = ((_a = able.className) === null || _a === void 0 ? void 0 : _a.call(able, _this)) || \"\";\r\n            if (((_b = targetGestoData[name]) === null || _b === void 0 ? void 0 : _b.isEventStart)\r\n                || ((_c = controlGestoData[name]) === null || _c === void 0 ? void 0 : _c.isEventStart)) {\r\n                className += \" \".concat(prefix(\"\".concat(name).concat(classPrefix, \"-dragging\")));\r\n            }\r\n            return className.trim();\r\n        }).filter(Boolean).join(\" \");\r\n    };\r\n    MoveableManager.prototype._updateResizeObserver = function (prevProps) {\r\n        var _a;\r\n        var props = this.props;\r\n        var target = props.target;\r\n        var win = getWindow(this.getControlBoxElement());\r\n        if (!win.ResizeObserver || !target || !props.useResizeObserver) {\r\n            (_a = this._reiszeObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\r\n            return;\r\n        }\r\n        if (prevProps.target === target && this._reiszeObserver) {\r\n            return;\r\n        }\r\n        var observer = new win.ResizeObserver(this.checkUpdateRect);\r\n        observer.observe(target, {\r\n            box: \"border-box\",\r\n        });\r\n        this._reiszeObserver = observer;\r\n    };\r\n    MoveableManager.prototype._updateMutationObserver = function (prevProps) {\r\n        var _this = this;\r\n        var _a;\r\n        var props = this.props;\r\n        var target = props.target;\r\n        var win = getWindow(this.getControlBoxElement());\r\n        if (!win.MutationObserver || !target || !props.useMutationObserver) {\r\n            (_a = this._mutationObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\r\n            return;\r\n        }\r\n        if (prevProps.target === target && this._mutationObserver) {\r\n            return;\r\n        }\r\n        var observer = new win.MutationObserver(function (records) {\r\n            var e_1, _a;\r\n            try {\r\n                for (var records_1 = __values(records), records_1_1 = records_1.next(); !records_1_1.done; records_1_1 = records_1.next()) {\r\n                    var mutation = records_1_1.value;\r\n                    if (mutation.type === \"attributes\" && mutation.attributeName === \"style\") {\r\n                        _this.checkUpdateRect();\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n            finally {\r\n                try {\r\n                    if (records_1_1 && !records_1_1.done && (_a = records_1.return)) _a.call(records_1);\r\n                }\r\n                finally { if (e_1) throw e_1.error; }\r\n            }\r\n        });\r\n        observer.observe(target, {\r\n            attributes: true,\r\n        });\r\n        this._mutationObserver = observer;\r\n    };\r\n    MoveableManager.defaultProps = {\r\n        dragTargetSelf: false,\r\n        target: null,\r\n        dragTarget: null,\r\n        container: null,\r\n        rootContainer: null,\r\n        origin: true,\r\n        parentMoveable: null,\r\n        wrapperMoveable: null,\r\n        isWrapperMounted: false,\r\n        parentPosition: null,\r\n        warpSelf: false,\r\n        svgOrigin: \"\",\r\n        dragContainer: null,\r\n        useResizeObserver: false,\r\n        useMutationObserver: false,\r\n        preventDefault: true,\r\n        linePadding: 0,\r\n        controlPadding: 0,\r\n        ables: [],\r\n        pinchThreshold: 20,\r\n        dragArea: false,\r\n        passDragArea: false,\r\n        transformOrigin: \"\",\r\n        className: \"\",\r\n        zoom: 1,\r\n        triggerAblesSimultaneously: false,\r\n        padding: {},\r\n        pinchOutside: true,\r\n        checkInput: false,\r\n        dragFocusedInput: false,\r\n        groupable: false,\r\n        hideDefaultLines: false,\r\n        cspNonce: \"\",\r\n        translateZ: 0,\r\n        cssStyled: null,\r\n        customStyledMap: {},\r\n        props: {},\r\n        stopPropagation: false,\r\n        preventClickDefault: false,\r\n        preventClickEventOnDrag: true,\r\n        flushSync: defaultSync,\r\n        firstRenderState: null,\r\n        persistData: null,\r\n        viewContainer: null,\r\n        requestStyles: [],\r\n        useAccuratePosition: false,\r\n    };\r\n    return MoveableManager;\r\n}(React.PureComponent));\r\n/**\r\n * The target to indicate Moveable Control Box.\r\n * @name Moveable#target\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n * moveable.target = document.querySelector(\".target\");\r\n */\r\n/**\r\n * Zooms in the elements of a moveable.\r\n * @name Moveable#zoom\r\n * @default 1\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n * moveable.zoom = 2;\r\n */\r\n/**\r\n * Whether the target size is detected and updated whenever it changes.\r\n * @name Moveable#useResizeObserver\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n * moveable.useResizeObserver = true;\r\n */\r\n/**\r\n * Resize, Scale Events at edges\r\n * @name Moveable#edge\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n * moveable.edge = true;\r\n */\r\n/**\r\n * You can specify the className of the moveable controlbox.\r\n * @name Moveable#className\r\n * @default \"\"\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   className: \"\",\r\n * });\r\n *\r\n * moveable.className = \"moveable1\";\r\n */\r\n/**\r\n * The target(s) to drag Moveable target(s)\r\n * @name Moveable#dragTarget\r\n * @default target\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n * moveable.target = document.querySelector(\".target\");\r\n * moveable.dragTarget = document.querySelector(\".dragTarget\");\r\n */\r\n/**\r\n * `renderStart` event occurs at the first start of all events.\r\n * @memberof Moveable\r\n * @event renderStart\r\n * @param {Moveable.OnRenderStart} - Parameters for the `renderStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: document.querySelector(\".target\"),\r\n * });\r\n * moveable.on(\"renderStart\", ({ target }) => {\r\n *     console.log(\"onRenderStart\", target);\r\n * });\r\n */\r\n/**\r\n * `render` event occurs before the target is drawn on the screen.\r\n * @memberof Moveable\r\n * @event render\r\n * @param {Moveable.OnRender} - Parameters for the `render` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: document.querySelector(\".target\"),\r\n * });\r\n * moveable.on(\"render\", ({ target }) => {\r\n *     console.log(\"onRender\", target);\r\n * });\r\n */\r\n/**\r\n * `renderEnd` event occurs at the end of all events.\r\n * @memberof Moveable\r\n * @event renderEnd\r\n * @param {Moveable.OnRenderEnd} - Parameters for the `renderEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: document.querySelector(\".target\"),\r\n * });\r\n * moveable.on(\"renderEnd\", ({ target }) => {\r\n *     console.log(\"onRenderEnd\", target);\r\n * });\r\n */\r\n/**\r\n * `renderGroupStart` event occurs at the first start of all events in group.\r\n * @memberof Moveable\r\n * @event renderGroupStart\r\n * @param {Moveable.OnRenderGroupStart} - Parameters for the `renderGroupStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n * });\r\n * moveable.on(\"renderGroupStart\", ({ targets }) => {\r\n *     console.log(\"onRenderGroupStart\", targets);\r\n * });\r\n */\r\n/**\r\n * `renderGroup` event occurs before the target is drawn on the screen in group.\r\n * @memberof Moveable\r\n * @event renderGroup\r\n * @param {Moveable.OnRenderGroup} - Parameters for the `renderGroup` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n * });\r\n * moveable.on(\"renderGroup\", ({ targets }) => {\r\n *     console.log(\"onRenderGroup\", targets);\r\n * });\r\n */\r\n/**\r\n * `renderGroupEnd` event occurs at the end of all events in group.\r\n * @memberof Moveable\r\n * @event renderGroupEnd\r\n * @param {Moveable.OnRenderGroupEnd} - Parameters for the `renderGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n * });\r\n * moveable.on(\"renderGroupEnd\", ({ targets }) => {\r\n *     console.log(\"onRenderGroupEnd\", targets);\r\n * });\r\n */\n\nvar Groupable = {\r\n    name: \"groupable\",\r\n    props: [\r\n        \"defaultGroupRotate\",\r\n        \"useDefaultGroupRotate\",\r\n        \"defaultGroupOrigin\",\r\n        \"groupable\",\r\n        \"groupableProps\",\r\n        \"targetGroups\",\r\n        \"hideChildMoveableDefaultLines\",\r\n    ],\r\n    events: [],\r\n    render: function (moveable, React) {\r\n        var _a;\r\n        var props = moveable.props;\r\n        var targets = props.targets || [];\r\n        var _b = moveable.getState(), left = _b.left, top = _b.top, isPersisted = _b.isPersisted;\r\n        var zoom = props.zoom || 1;\r\n        var renderGroupRects = moveable.renderGroupRects;\r\n        var persistDatChildren = ((_a = props.persistData) === null || _a === void 0 ? void 0 : _a.children) || [];\r\n        if (isPersisted) {\r\n            targets = persistDatChildren.map(function () { return null; });\r\n        }\r\n        else {\r\n            persistDatChildren = [];\r\n        }\r\n        var parentPosition = watchValue(moveable, \"parentPosition\", [left, top], function (styles) { return styles.join(\",\"); });\r\n        var requestStyles = watchValue(moveable, \"requestStyles\", moveable.getRequestChildStyles(), function (styles) { return styles.join(\",\"); });\r\n        moveable.moveables = moveable.moveables.slice(0, targets.length);\r\n        return __spreadArray(__spreadArray([], __read(targets.map(function (target, i) {\r\n            return React.createElement(MoveableManager, { key: \"moveable\" + i, ref: refs(moveable, \"moveables\", i), target: target, origin: false, requestStyles: requestStyles, cssStyled: props.cssStyled, customStyledMap: props.customStyledMap, useResizeObserver: props.useResizeObserver, useMutationObserver: props.useMutationObserver, hideChildMoveableDefaultLines: props.hideChildMoveableDefaultLines, parentMoveable: moveable, parentPosition: [left, top], persistData: persistDatChildren[i], zoom: zoom });\r\n        })), false), __read(flat(renderGroupRects.map(function (_a, i) {\r\n            var pos1 = _a.pos1, pos2 = _a.pos2, pos3 = _a.pos3, pos4 = _a.pos4;\r\n            var poses = [pos1, pos2, pos3, pos4];\r\n            return [\r\n                [0, 1],\r\n                [1, 3],\r\n                [3, 2],\r\n                [2, 0],\r\n            ].map(function (_a, j) {\r\n                var _b = __read(_a, 2), from = _b[0], to = _b[1];\r\n                return renderLine(React, \"\", minus(poses[from], parentPosition), minus(poses[to], parentPosition), zoom, \"group-rect-\".concat(i, \"-\").concat(j));\r\n            });\r\n        }))), false);\r\n    },\r\n};\n\nvar Clickable = makeAble(\"clickable\", {\r\n    props: [\r\n        \"clickable\",\r\n    ],\r\n    events: [\r\n        \"click\",\r\n        \"clickGroup\",\r\n    ],\r\n    always: true,\r\n    dragRelation: \"weak\",\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    dragStart: function () {\r\n        return;\r\n    },\r\n    dragControlStart: function () {\r\n        return;\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        e.datas.inputTarget = e.inputEvent && e.inputEvent.target;\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        var target = moveable.props.target;\r\n        var inputEvent = e.inputEvent;\r\n        var inputTarget = e.inputTarget;\r\n        var isMoveableElement = moveable.isMoveableElement(inputTarget);\r\n        var containsElement = !isMoveableElement && moveable.controlBox.contains(inputTarget);\r\n        if (!inputEvent || !inputTarget || e.isDrag\r\n            || moveable.isMoveableElement(inputTarget)\r\n            || containsElement\r\n        // External event duplicate target or dragAreaElement\r\n        ) {\r\n            return;\r\n        }\r\n        var containsTarget = target.contains(inputTarget);\r\n        triggerEvent(moveable, \"onClick\", fillParams(moveable, e, {\r\n            isDouble: e.isDouble,\r\n            inputTarget: inputTarget,\r\n            isTarget: target === inputTarget,\r\n            moveableTarget: moveable.props.target,\r\n            containsTarget: containsTarget,\r\n        }));\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        var inputEvent = e.inputEvent;\r\n        var inputTarget = e.inputTarget;\r\n        if (!inputEvent || !inputTarget || e.isDrag\r\n            || moveable.isMoveableElement(inputTarget)\r\n            // External event duplicate target or dragAreaElement\r\n            || e.datas.inputTarget === inputTarget) {\r\n            return;\r\n        }\r\n        var targets = moveable.props.targets;\r\n        var targetIndex = targets.indexOf(inputTarget);\r\n        var isTarget = targetIndex > -1;\r\n        var containsTarget = false;\r\n        if (targetIndex === -1) {\r\n            targetIndex = findIndex(targets, function (parentTarget) { return parentTarget.contains(inputTarget); });\r\n            containsTarget = targetIndex > -1;\r\n        }\r\n        triggerEvent(moveable, \"onClickGroup\", fillParams(moveable, e, {\r\n            isDouble: e.isDouble,\r\n            targets: targets,\r\n            inputTarget: inputTarget,\r\n            targetIndex: targetIndex,\r\n            isTarget: isTarget,\r\n            containsTarget: containsTarget,\r\n            moveableTarget: targets[targetIndex],\r\n        }));\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        this.dragEnd(moveable, e);\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        this.dragEnd(moveable, e);\r\n    },\r\n});\r\n/**\r\n * When you click on the element, the `click` event is called.\r\n * @memberof Moveable\r\n * @event click\r\n * @param {Moveable.OnClick} - Parameters for the `click` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: document.querySelector(\".target\"),\r\n * });\r\n * moveable.on(\"click\", ({ hasTarget, containsTarget, targetIndex }) => {\r\n *     // If you click on an element other than the target and not included in the target, index is -1.\r\n *     console.log(\"onClickGroup\", target, hasTarget, containsTarget, targetIndex);\r\n * });\r\n */\r\n/**\r\n * When you click on the element inside the group, the `clickGroup` event is called.\r\n * @memberof Moveable\r\n * @event clickGroup\r\n * @param {Moveable.OnClickGroup} - Parameters for the `clickGroup` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n * });\r\n * moveable.on(\"clickGroup\", ({ inputTarget, isTarget, containsTarget, targetIndex }) => {\r\n *     // If you click on an element other than the target and not included in the target, index is -1.\r\n *     console.log(\"onClickGroup\", inputTarget, isTarget, containsTarget, targetIndex);\r\n * });\r\n */\n\nfunction getDraggableEvent(e) {\r\n    var datas = e.originalDatas.draggable;\r\n    if (!datas) {\r\n        e.originalDatas.draggable = {};\r\n        datas = e.originalDatas.draggable;\r\n    }\r\n    return __assign(__assign({}, e), { datas: datas });\r\n}\r\nvar edgeDraggable = makeAble(\"edgeDraggable\", {\r\n    css: [\r\n        \".edge.edgeDraggable.line {\\ncursor: move;\\n}\",\r\n    ],\r\n    render: function (moveable, React) {\r\n        var props = moveable.props;\r\n        var edge = props.edgeDraggable;\r\n        if (!edge) {\r\n            return [];\r\n        }\r\n        return renderEdgeLines(React, \"edgeDraggable\", edge, moveable.getState().renderPoses, props.zoom);\r\n    },\r\n    dragCondition: function (moveable, e) {\r\n        var _a;\r\n        var props = moveable.props;\r\n        var target = (_a = e.inputEvent) === null || _a === void 0 ? void 0 : _a.target;\r\n        if (!props.edgeDraggable || !target) {\r\n            return false;\r\n        }\r\n        return !props.draggable\r\n            && hasClass(target, prefix(\"direction\"))\r\n            && hasClass(target, prefix(\"edge\"))\r\n            && hasClass(target, prefix(\"edgeDraggable\"));\r\n    },\r\n    dragStart: function (moveable, e) {\r\n        return Draggable.dragStart(moveable, getDraggableEvent(e));\r\n    },\r\n    drag: function (moveable, e) {\r\n        return Draggable.drag(moveable, getDraggableEvent(e));\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        return Draggable.dragEnd(moveable, getDraggableEvent(e));\r\n    },\r\n    dragGroupCondition: function (moveable, e) {\r\n        var _a;\r\n        var props = moveable.props;\r\n        var target = (_a = e.inputEvent) === null || _a === void 0 ? void 0 : _a.target;\r\n        if (!props.edgeDraggable || !target) {\r\n            return false;\r\n        }\r\n        return !props.draggable && hasClass(target, prefix(\"direction\")) && hasClass(target, prefix(\"line\"));\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        return Draggable.dragGroupStart(moveable, getDraggableEvent(e));\r\n    },\r\n    dragGroup: function (moveable, e) {\r\n        return Draggable.dragGroup(moveable, getDraggableEvent(e));\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        return Draggable.dragGroupEnd(moveable, getDraggableEvent(e));\r\n    },\r\n    unset: function (moveable) {\r\n        return Draggable.unset(moveable);\r\n    },\r\n});\r\n/**\r\n * Whether to move by dragging the edge line (default: false)\r\n * @name Moveable.Draggable#edgeDraggable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *  draggable: true,\r\n *  edgeDraggable: false,\r\n * });\r\n *\r\n * moveable.edgeDraggable = true;\r\n */\n\nvar IndividualGroupable = {\r\n    name: \"individualGroupable\",\r\n    props: [\r\n        \"individualGroupable\",\r\n        \"individualGroupableProps\",\r\n    ],\r\n    events: [],\r\n};\n\nvar MOVEABLE_ABLES =  [\r\n    BeforeRenderable,\r\n    Default, Snappable, Pinchable,\r\n    Draggable, edgeDraggable,\r\n    Resizable, Scalable, Warpable, Rotatable,\r\n    Scrollable, Padding, Origin,\r\n    OriginDraggable,\r\n    Clippable, Roundable, Groupable, IndividualGroupable,\r\n    Clickable,\r\n    DragArea,\r\n    Renderable,\r\n];\r\nvar MOVEABLE_EVENTS = /*#__PURE__*/ MOVEABLE_ABLES.reduce(function (current, able) {\r\n    (able.events || []).forEach(function (name) {\r\n        pushSet(current, name);\r\n    });\r\n    return current;\r\n}, []);\r\nvar MOVEABLE_PROPS = /*#__PURE__*/ MOVEABLE_ABLES.reduce(function (current, able) {\r\n    (able.props || []).forEach(function (name) {\r\n        pushSet(current, name);\r\n    });\r\n    return current;\r\n}, []);\n\nfunction solveConstantsDistance(_a, pos) {\r\n    var _b = __read(_a, 3), a = _b[0], b = _b[1], c = _b[2];\r\n    return (a * pos[0] + b * pos[1] + c) / Math.sqrt(a * a + b * b);\r\n}\r\nfunction solveC(_a, pos) {\r\n    var _b = __read(_a, 2), a = _b[0], b = _b[1];\r\n    // ax + by + c = 0\r\n    // -ax -by;\r\n    return -a * pos[0] - b * pos[1];\r\n}\n\nfunction getMaxPos(poses, index) {\r\n    return Math.max.apply(Math, __spreadArray([], __read(poses.map(function (_a) {\r\n        var _b = __read(_a, 4), pos1 = _b[0], pos2 = _b[1], pos3 = _b[2], pos4 = _b[3];\r\n        return Math.max(pos1[index], pos2[index], pos3[index], pos4[index]);\r\n    })), false));\r\n}\r\nfunction getMinPos(poses, index) {\r\n    return Math.min.apply(Math, __spreadArray([], __read(poses.map(function (_a) {\r\n        var _b = __read(_a, 4), pos1 = _b[0], pos2 = _b[1], pos3 = _b[2], pos4 = _b[3];\r\n        return Math.min(pos1[index], pos2[index], pos3[index], pos4[index]);\r\n    })), false));\r\n}\r\nfunction getGroupRect(parentPoses, rotation) {\r\n    var _a, _b, _c;\r\n    var pos1 = [0, 0];\r\n    var pos2 = [0, 0];\r\n    var pos3 = [0, 0];\r\n    var pos4 = [0, 0];\r\n    var width = 0;\r\n    var height = 0;\r\n    if (!parentPoses.length) {\r\n        return {\r\n            pos1: pos1,\r\n            pos2: pos2,\r\n            pos3: pos3,\r\n            pos4: pos4,\r\n            minX: 0,\r\n            minY: 0,\r\n            maxX: 0,\r\n            maxY: 0,\r\n            width: width,\r\n            height: height,\r\n            rotation: rotation,\r\n        };\r\n    }\r\n    var fixedRotation = throttle(rotation, TINY_NUM);\r\n    if (fixedRotation % 90) {\r\n        var rad = fixedRotation / 180 * Math.PI;\r\n        var a1_1 = Math.tan(rad);\r\n        var a2_1 = -1 / a1_1;\r\n        // ax = y  // -ax + y = 0 // 0 => 1\r\n        // -ax = y // ax + y = 0  // 0 => 3\r\n        var a1MinMax_1 = [MAX_NUM, MIN_NUM];\r\n        var a1MinMaxPos_1 = [[0, 0], [0, 0]];\r\n        var a2MinMax_1 = [MAX_NUM, MIN_NUM];\r\n        var a2MinMaxPos_1 = [[0, 0], [0, 0]];\r\n        parentPoses.forEach(function (poses) {\r\n            poses.forEach(function (pos) {\r\n                // const b1 = pos[1] - a1 * pos[0];\r\n                // const b2 = pos[1] - a2 * pos[0];\r\n                var a1Dist = solveConstantsDistance([-a1_1, 1, 0], pos);\r\n                var a2Dist = solveConstantsDistance([-a2_1, 1, 0], pos);\r\n                if (a1MinMax_1[0] > a1Dist) {\r\n                    a1MinMaxPos_1[0] = pos;\r\n                    a1MinMax_1[0] = a1Dist;\r\n                }\r\n                if (a1MinMax_1[1] < a1Dist) {\r\n                    a1MinMaxPos_1[1] = pos;\r\n                    a1MinMax_1[1] = a1Dist;\r\n                }\r\n                if (a2MinMax_1[0] > a2Dist) {\r\n                    a2MinMaxPos_1[0] = pos;\r\n                    a2MinMax_1[0] = a2Dist;\r\n                }\r\n                if (a2MinMax_1[1] < a2Dist) {\r\n                    a2MinMaxPos_1[1] = pos;\r\n                    a2MinMax_1[1] = a2Dist;\r\n                }\r\n            });\r\n        });\r\n        var _d = __read(a1MinMaxPos_1, 2), a1MinPos = _d[0], a1MaxPos = _d[1];\r\n        var _e = __read(a2MinMaxPos_1, 2), a2MinPos = _e[0], a2MaxPos = _e[1];\r\n        var minHorizontalLine = [-a1_1, 1, solveC([-a1_1, 1], a1MinPos)];\r\n        var maxHorizontalLine = [-a1_1, 1, solveC([-a1_1, 1], a1MaxPos)];\r\n        var minVerticalLine = [-a2_1, 1, solveC([-a2_1, 1], a2MinPos)];\r\n        var maxVerticalLine = [-a2_1, 1, solveC([-a2_1, 1], a2MaxPos)];\r\n        _a = __read([\r\n            [minHorizontalLine, minVerticalLine],\r\n            [minHorizontalLine, maxVerticalLine],\r\n            [maxHorizontalLine, minVerticalLine],\r\n            [maxHorizontalLine, maxVerticalLine],\r\n        ].map(function (_a) {\r\n            var _b = __read(_a, 2), line1 = _b[0], line2 = _b[1];\r\n            return getIntersectionPointsByConstants(line1, line2)[0];\r\n        }), 4), pos1 = _a[0], pos2 = _a[1], pos3 = _a[2], pos4 = _a[3];\r\n        width = a2MinMax_1[1] - a2MinMax_1[0];\r\n        height = a1MinMax_1[1] - a1MinMax_1[0];\r\n    }\r\n    else {\r\n        var minX_1 = getMinPos(parentPoses, 0);\r\n        var minY_1 = getMinPos(parentPoses, 1);\r\n        var maxX_1 = getMaxPos(parentPoses, 0);\r\n        var maxY_1 = getMaxPos(parentPoses, 1);\r\n        pos1 = [minX_1, minY_1];\r\n        pos2 = [maxX_1, minY_1];\r\n        pos3 = [minX_1, maxY_1];\r\n        pos4 = [maxX_1, maxY_1];\r\n        width = maxX_1 - minX_1;\r\n        height = maxY_1 - minY_1;\r\n        if (fixedRotation % 180) {\r\n            // 0\r\n            // 1 2\r\n            // 3 4\r\n            // 90\r\n            // 3 1\r\n            // 4 2\r\n            // 180\r\n            // 4 3\r\n            // 2 1\r\n            // 270\r\n            // 2 4\r\n            // 1 3\r\n            // 1, 2, 3,4 = 3 1 4 2\r\n            var changedX = [pos3, pos1, pos4, pos2];\r\n            _b = __read(changedX, 4), pos1 = _b[0], pos2 = _b[1], pos3 = _b[2], pos4 = _b[3];\r\n            width = maxY_1 - minY_1;\r\n            height = maxX_1 - minX_1;\r\n        }\r\n    }\r\n    if (fixedRotation % 360 > 180) {\r\n        // 1 2   4 3\r\n        // 3 4   2 1\r\n        var changedX = [pos4, pos3, pos2, pos1];\r\n        _c = __read(changedX, 4), pos1 = _c[0], pos2 = _c[1], pos3 = _c[2], pos4 = _c[3];\r\n    }\r\n    var _f = getMinMaxs([pos1, pos2, pos3, pos4]), minX = _f.minX, minY = _f.minY, maxX = _f.maxX, maxY = _f.maxY;\r\n    return {\r\n        pos1: pos1,\r\n        pos2: pos2,\r\n        pos3: pos3,\r\n        pos4: pos4,\r\n        width: width,\r\n        height: height,\r\n        minX: minX,\r\n        minY: minY,\r\n        maxX: maxX,\r\n        maxY: maxY,\r\n        rotation: rotation,\r\n    };\r\n}\r\nfunction findMoveableGroups(moveables, childTargetGroups) {\r\n    var groups = childTargetGroups.map(function (targetGroup) {\r\n        if (isArray(targetGroup)) {\r\n            var childMoveableGroups = findMoveableGroups(moveables, targetGroup);\r\n            var length_1 = childMoveableGroups.length;\r\n            if (length_1 > 1) {\r\n                return childMoveableGroups;\r\n            }\r\n            else if (length_1 === 1) {\r\n                return childMoveableGroups[0];\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        }\r\n        else {\r\n            var checked = find(moveables, function (_a) {\r\n                var manager = _a.manager;\r\n                return manager.props.target === targetGroup;\r\n            });\r\n            if (checked) {\r\n                checked.finded = true;\r\n                return checked.manager;\r\n            }\r\n            return null;\r\n        }\r\n    }).filter(Boolean);\r\n    if (groups.length === 1 && isArray(groups[0])) {\r\n        return groups[0];\r\n    }\r\n    return groups;\r\n}\r\n/**\r\n * @namespace Moveable.Group\r\n * @description You can make targets moveable.\r\n */\r\nvar MoveableGroup = /*#__PURE__*/ (function (_super) {\r\n    __extends(MoveableGroup, _super);\r\n    function MoveableGroup() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.differ = new ChildrenDiffer();\r\n        _this.moveables = [];\r\n        _this.transformOrigin = \"50% 50%\";\r\n        _this.renderGroupRects = [];\r\n        _this._targetGroups = [];\r\n        _this._hasFirstTargets = false;\r\n        return _this;\r\n    }\r\n    MoveableGroup.prototype.componentDidMount = function () {\r\n        _super.prototype.componentDidMount.call(this);\r\n    };\r\n    MoveableGroup.prototype.checkUpdate = function () {\r\n        this._isPropTargetChanged = false;\r\n        this.updateAbles();\r\n    };\r\n    MoveableGroup.prototype.getTargets = function () {\r\n        return this.props.targets;\r\n    };\r\n    MoveableGroup.prototype.updateRect = function (type, isTarget, isSetState) {\r\n        var _a;\r\n        if (isSetState === void 0) { isSetState = true; }\r\n        var state = this.state;\r\n        if (!this.controlBox || state.isPersisted) {\r\n            return;\r\n        }\r\n        setStoreCache(true);\r\n        this.moveables.forEach(function (moveable) {\r\n            moveable.updateRect(type, false, false);\r\n        });\r\n        var props = this.props;\r\n        var moveables = this.moveables;\r\n        var target = state.target || props.target;\r\n        var checkeds = moveables.map(function (moveable) { return ({ finded: false, manager: moveable }); });\r\n        var targetGroups = this.props.targetGroups || [];\r\n        var moveableGroups = findMoveableGroups(checkeds, targetGroups);\r\n        var useDefaultGroupRotate = props.useDefaultGroupRotate;\r\n        moveableGroups.push.apply(moveableGroups, __spreadArray([], __read(checkeds.filter(function (_a) {\r\n            var finded = _a.finded;\r\n            return !finded;\r\n        }).map(function (_a) {\r\n            var manager = _a.manager;\r\n            return manager;\r\n        })), false));\r\n        var renderGroupRects = [];\r\n        var isReset = !isTarget || (type !== \"\" && props.updateGroup);\r\n        var defaultGroupRotate = props.defaultGroupRotate || 0;\r\n        if (!this._hasFirstTargets) {\r\n            var persistedRoatation = (_a = props.persistData) === null || _a === void 0 ? void 0 : _a.rotation;\r\n            if (persistedRoatation != null) {\r\n                defaultGroupRotate = persistedRoatation;\r\n            }\r\n        }\r\n        function getMoveableGroupRect(group, parentRotation, isRoot) {\r\n            var posesRotations = group.map(function (moveable) {\r\n                if (isArray(moveable)) {\r\n                    var rect = getMoveableGroupRect(moveable, parentRotation);\r\n                    var poses = [rect.pos1, rect.pos2, rect.pos3, rect.pos4];\r\n                    renderGroupRects.push(rect);\r\n                    return { poses: poses, rotation: rect.rotation };\r\n                }\r\n                else {\r\n                    return {\r\n                        poses: getAbsolutePosesByState(moveable.state),\r\n                        rotation: moveable.getRotation(),\r\n                    };\r\n                }\r\n            });\r\n            var rotations = posesRotations.map(function (_a) {\r\n                var rotation = _a.rotation;\r\n                return rotation;\r\n            });\r\n            var groupRotation = 0;\r\n            var firstRotation = rotations[0];\r\n            var isSameRotation = rotations.every(function (nextRotation) {\r\n                return Math.abs(firstRotation - nextRotation) < 0.1;\r\n            });\r\n            if (isReset) {\r\n                groupRotation = !useDefaultGroupRotate && isSameRotation ? firstRotation : defaultGroupRotate;\r\n            }\r\n            else {\r\n                groupRotation = !useDefaultGroupRotate && !isRoot && isSameRotation ? firstRotation : parentRotation;\r\n            }\r\n            var groupPoses = posesRotations.map(function (_a) {\r\n                var poses = _a.poses;\r\n                return poses;\r\n            });\r\n            var groupRect = getGroupRect(groupPoses, groupRotation);\r\n            return groupRect;\r\n        }\r\n        var rootGroupRect = getMoveableGroupRect(moveableGroups, this.rotation, true);\r\n        if (isReset) {\r\n            // reset rotataion\r\n            this.rotation = rootGroupRect.rotation;\r\n            this.transformOrigin = props.defaultGroupOrigin || \"50% 50%\";\r\n            this.scale = [1, 1];\r\n        }\r\n        this._targetGroups = targetGroups;\r\n        this.renderGroupRects = renderGroupRects;\r\n        var transformOrigin = this.transformOrigin;\r\n        var rotation = this.rotation;\r\n        var scale = this.scale;\r\n        var width = rootGroupRect.width, height = rootGroupRect.height, minX = rootGroupRect.minX, minY = rootGroupRect.minY;\r\n        var posesInfo = rotatePosesInfo([\r\n            [0, 0],\r\n            [width, 0],\r\n            [0, height],\r\n            [width, height],\r\n        ], convertTransformOriginArray(transformOrigin, width, height), this.rotation / 180 * Math.PI);\r\n        var _b = getMinMaxs(posesInfo.result), deltaX = _b.minX, deltaY = _b.minY;\r\n        var rotateScale = \" rotate(\".concat(rotation, \"deg)\")\r\n            + \" scale(\".concat(sign(scale[0]), \", \").concat(sign(scale[1]), \")\");\r\n        var transform = \"translate(\".concat(-deltaX, \"px, \").concat(-deltaY, \"px)\").concat(rotateScale);\r\n        this.controlBox.style.transform\r\n            = \"translate3d(\".concat(minX, \"px, \").concat(minY, \"px, \").concat(this.props.translateZ || 0, \")\");\r\n        target.style.cssText += \"left:0px;top:0px;\"\r\n            + \"transform-origin:\".concat(transformOrigin, \";\")\r\n            + \"width:\".concat(width, \"px;height:\").concat(height, \"px;\")\r\n            + \"transform: \".concat(transform);\r\n        state.width = width;\r\n        state.height = height;\r\n        var container = this.getContainer();\r\n        var info = getMoveableTargetInfo(this.controlBox, target, this.controlBox, this.getContainer(), this._rootContainer || container, []);\r\n        var pos = [info.left, info.top];\r\n        var _c = __read(getAbsolutePosesByState(info), 4), pos1 = _c[0], pos2 = _c[1], pos3 = _c[2], pos4 = _c[3]; // info.left + info.pos(1 ~ 4)\r\n        var minPos = getMinMaxs([pos1, pos2, pos3, pos4]);\r\n        var delta = [minPos.minX, minPos.minY];\r\n        var direction = sign(scale[0] * scale[1]);\r\n        info.pos1 = minus(pos1, delta);\r\n        info.pos2 = minus(pos2, delta);\r\n        info.pos3 = minus(pos3, delta);\r\n        info.pos4 = minus(pos4, delta);\r\n        // info.left = info.left + delta[0];\r\n        // info.top = info.top + delta[1];\r\n        info.left = minX - info.left + delta[0];\r\n        info.top = minY - info.top + delta[1];\r\n        info.origin = minus(plus(pos, info.origin), delta);\r\n        info.beforeOrigin = minus(plus(pos, info.beforeOrigin), delta);\r\n        info.originalBeforeOrigin = plus(pos, info.originalBeforeOrigin);\r\n        info.transformOrigin = minus(plus(pos, info.transformOrigin), delta);\r\n        target.style.transform\r\n            = \"translate(\".concat(-deltaX - delta[0], \"px, \").concat(-deltaY - delta[1], \"px)\")\r\n                + rotateScale;\r\n        setStoreCache();\r\n        this.updateState(__assign(__assign({}, info), { posDelta: delta, direction: direction, beforeDirection: direction }), isSetState);\r\n    };\r\n    MoveableGroup.prototype.getRect = function () {\r\n        return __assign(__assign({}, _super.prototype.getRect.call(this)), { children: this.moveables.map(function (child) { return child.getRect(); }) });\r\n    };\r\n    MoveableGroup.prototype.triggerEvent = function (name, e, isManager) {\r\n        if (isManager || name.indexOf(\"Group\") > -1) {\r\n            return _super.prototype.triggerEvent.call(this, name, e);\r\n        }\r\n        else {\r\n            this._emitter.trigger(name, e);\r\n        }\r\n    };\r\n    MoveableGroup.prototype.getRequestChildStyles = function () {\r\n        var styleNames = this.getEnabledAbles().reduce(function (names, able) {\r\n            var _a, _b;\r\n            var ableStyleNames = ((_b = (_a = able.requestChildStyle) === null || _a === void 0 ? void 0 : _a.call(able)) !== null && _b !== void 0 ? _b : []);\r\n            return __spreadArray(__spreadArray([], __read(names), false), __read(ableStyleNames), false);\r\n        }, []);\r\n        return styleNames;\r\n    };\r\n    MoveableGroup.prototype.getMoveables = function () {\r\n        return __spreadArray([], __read(this.moveables), false);\r\n    };\r\n    MoveableGroup.prototype.updateAbles = function () {\r\n        _super.prototype.updateAbles.call(this, __spreadArray(__spreadArray([], __read(this.props.ables), false), [Groupable], false), \"Group\");\r\n    };\r\n    MoveableGroup.prototype._updateTargets = function () {\r\n        _super.prototype._updateTargets.call(this);\r\n        this._originalDragTarget = this.props.dragTarget || this.areaElement;\r\n        this._dragTarget = getRefTarget(this._originalDragTarget, true);\r\n    };\r\n    MoveableGroup.prototype._updateEvents = function () {\r\n        var state = this.state;\r\n        var props = this.props;\r\n        var prevTarget = this._prevDragTarget;\r\n        var nextTarget = props.dragTarget || this.areaElement;\r\n        var targets = props.targets;\r\n        var _a = this.differ.update(targets), added = _a.added, changed = _a.changed, removed = _a.removed;\r\n        var isTargetChanged = added.length || removed.length;\r\n        if (isTargetChanged || this._prevOriginalDragTarget !== this._originalDragTarget) {\r\n            unsetGesto(this, false);\r\n            unsetGesto(this, true);\r\n            this.updateState({ gestos: {} });\r\n        }\r\n        if (prevTarget !== nextTarget) {\r\n            state.target = null;\r\n        }\r\n        if (!state.target) {\r\n            state.target = this.areaElement;\r\n            this.controlBox.style.display = \"block\";\r\n        }\r\n        if (state.target) {\r\n            if (!this.targetGesto) {\r\n                this.targetGesto = getTargetAbleGesto(this, this._dragTarget, \"Group\");\r\n            }\r\n            if (!this.controlGesto) {\r\n                this.controlGesto = getAbleGesto(this, this.controlBox, \"controlAbles\", \"GroupControl\");\r\n            }\r\n        }\r\n        var isContainerChanged = !equals(state.container, props.container);\r\n        if (isContainerChanged) {\r\n            state.container = props.container;\r\n        }\r\n        if (isContainerChanged\r\n            || isTargetChanged\r\n            || this.transformOrigin !== (props.defaultGroupOrigin || \"50% 50%\")\r\n            || changed.length\r\n            || targets.length && !isDeepArrayEquals(this._targetGroups, props.targetGroups || [])) {\r\n            this.updateRect();\r\n            this._hasFirstTargets = true;\r\n        }\r\n        this._isPropTargetChanged = !!isTargetChanged;\r\n    };\r\n    MoveableGroup.prototype._updateObserver = function () { };\r\n    MoveableGroup.defaultProps = __assign(__assign({}, MoveableManager.defaultProps), { transformOrigin: [\"50%\", \"50%\"], groupable: true, dragArea: true, keepRatio: true, targets: [], defaultGroupRotate: 0, defaultGroupOrigin: \"50% 50%\" });\r\n    return MoveableGroup;\r\n}(MoveableManager));\n\n/**\r\n * @namespace Moveable.IndividualGroup\r\n * @description Create targets individually, not as a group.Create targets individually, not as a group.\r\n */\r\nvar MoveableIndividualGroup = /*#__PURE__*/ (function (_super) {\r\n    __extends(MoveableIndividualGroup, _super);\r\n    function MoveableIndividualGroup() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.moveables = [];\r\n        return _this;\r\n    }\r\n    MoveableIndividualGroup.prototype.render = function () {\r\n        var _this = this;\r\n        var _a;\r\n        var props = this.props;\r\n        var cspNonce = props.cspNonce, ControlBoxElement = props.cssStyled, persistData = props.persistData;\r\n        var targets = props.targets || [];\r\n        var length = targets.length;\r\n        var canPersist = this.isUnmounted || !length;\r\n        var persistDatChildren = (_a = persistData === null || persistData === void 0 ? void 0 : persistData.children) !== null && _a !== void 0 ? _a : [];\r\n        if (canPersist && !length && persistDatChildren.length) {\r\n            targets = persistDatChildren.map(function () { return null; });\r\n        }\r\n        else if (!canPersist) {\r\n            persistDatChildren = [];\r\n        }\r\n        return React.createElement(ControlBoxElement, { cspNonce: cspNonce, ref: ref(this, \"controlBox\"), className: prefix(\"control-box\") }, targets.map(function (target, i) {\r\n            var _a, _b;\r\n            var individualProps = (_b = (_a = props.individualGroupableProps) === null || _a === void 0 ? void 0 : _a.call(props, target, i)) !== null && _b !== void 0 ? _b : {};\r\n            return React.createElement(MoveableManager, __assign({ key: \"moveable\" + i, ref: refs(_this, \"moveables\", i) }, props, individualProps, { target: target, wrapperMoveable: _this, isWrapperMounted: _this.isMoveableMounted, persistData: persistDatChildren[i] }));\r\n        }));\r\n    };\r\n    MoveableIndividualGroup.prototype.componentDidMount = function () { };\r\n    MoveableIndividualGroup.prototype.componentDidUpdate = function () { };\r\n    MoveableIndividualGroup.prototype.getTargets = function () {\r\n        return this.props.targets;\r\n    };\r\n    MoveableIndividualGroup.prototype.updateRect = function (type, isTarget, isSetState) {\r\n        if (isSetState === void 0) { isSetState = true; }\r\n        setStoreCache(true);\r\n        this.moveables.forEach(function (moveable) {\r\n            moveable.updateRect(type, isTarget, isSetState);\r\n        });\r\n        setStoreCache();\r\n    };\r\n    MoveableIndividualGroup.prototype.getRect = function () {\r\n        return __assign(__assign({}, _super.prototype.getRect.call(this)), { children: this.moveables.map(function (child) { return child.getRect(); }) });\r\n    };\r\n    MoveableIndividualGroup.prototype.request = function (ableName, param, isInstant) {\r\n        if (param === void 0) { param = {}; }\r\n        var results = this.moveables.map(function (m) { return m.request(ableName, __assign(__assign({}, param), { isInstant: false }), false); });\r\n        var requestInstant = isInstant || param.isInstant;\r\n        var requester = {\r\n            request: function (ableParam) {\r\n                results.forEach(function (r) { return r.request(ableParam); });\r\n                return this;\r\n            },\r\n            requestEnd: function () {\r\n                results.forEach(function (r) { return r.requestEnd(); });\r\n                return this;\r\n            },\r\n        };\r\n        return requestInstant ? requester.request(param).requestEnd() : requester;\r\n    };\r\n    MoveableIndividualGroup.prototype.dragStart = function (e) {\r\n        var inputTarget = e.target;\r\n        var childMoveable = find(this.moveables, function (child) {\r\n            var target = child.getTargets()[0];\r\n            var controlBoxElement = child.getControlBoxElement();\r\n            var dragElement = child.getDragElement();\r\n            if (!target || !dragElement) {\r\n                return false;\r\n            }\r\n            return dragElement === inputTarget || dragElement.contains(inputTarget)\r\n                || (dragElement !== target && target === inputTarget || target.contains(inputTarget))\r\n                || controlBoxElement === inputTarget || controlBoxElement.contains(inputTarget);\r\n        });\r\n        if (childMoveable) {\r\n            childMoveable.dragStart(e);\r\n        }\r\n        return this;\r\n    };\r\n    MoveableIndividualGroup.prototype.hitTest = function () {\r\n        return 0;\r\n    };\r\n    MoveableIndividualGroup.prototype.isInside = function () {\r\n        return false;\r\n    };\r\n    MoveableIndividualGroup.prototype.isDragging = function () {\r\n        return false;\r\n    };\r\n    MoveableIndividualGroup.prototype.getDragElement = function () {\r\n        return null;\r\n    };\r\n    MoveableIndividualGroup.prototype.getMoveables = function () {\r\n        return __spreadArray([], __read(this.moveables), false);\r\n    };\r\n    MoveableIndividualGroup.prototype.updateRenderPoses = function () { };\r\n    MoveableIndividualGroup.prototype.checkUpdate = function () { };\r\n    MoveableIndividualGroup.prototype.triggerEvent = function () { };\r\n    MoveableIndividualGroup.prototype.updateAbles = function () { };\r\n    MoveableIndividualGroup.prototype._updateEvents = function () { };\r\n    MoveableIndividualGroup.prototype._updateObserver = function () { };\r\n    return MoveableIndividualGroup;\r\n}(MoveableManager));\n\nfunction getElementTargets(refTargets, selectorMap) {\r\n    var elementTargets = [];\r\n    refTargets.forEach(function (target) {\r\n        if (!target) {\r\n            return;\r\n        }\r\n        if (isString(target)) {\r\n            if (selectorMap[target]) {\r\n                elementTargets.push.apply(elementTargets, __spreadArray([], __read(selectorMap[target]), false));\r\n            }\r\n            return;\r\n        }\r\n        if (isArray(target)) {\r\n            elementTargets.push.apply(elementTargets, __spreadArray([], __read(getElementTargets(target, selectorMap)), false));\r\n        }\r\n        else {\r\n            elementTargets.push(target);\r\n        }\r\n    });\r\n    return elementTargets;\r\n}\r\nfunction getTargetGroups(refTargets, selectorMap) {\r\n    var targetGroups = [];\r\n    refTargets.forEach(function (target) {\r\n        if (!target) {\r\n            return;\r\n        }\r\n        if (isString(target)) {\r\n            if (selectorMap[target]) {\r\n                targetGroups.push.apply(targetGroups, __spreadArray([], __read(selectorMap[target]), false));\r\n            }\r\n            return;\r\n        }\r\n        if (isArray(target)) {\r\n            targetGroups.push(getTargetGroups(target, selectorMap));\r\n        }\r\n        else {\r\n            targetGroups.push(target);\r\n        }\r\n    });\r\n    return targetGroups;\r\n}\r\nfunction compareRefTargets(prevRefTargets, nextRefTargets) {\r\n    return (prevRefTargets.length !== nextRefTargets.length) || prevRefTargets.some(function (target, i) {\r\n        var nextTarget = nextRefTargets[i];\r\n        if (!target && !nextTarget) {\r\n            return false;\r\n        }\r\n        else if (target != nextTarget) {\r\n            if (isArray(target) && isArray(nextTarget)) {\r\n                return compareRefTargets(target, nextTarget);\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    });\r\n}\r\nvar InitialMoveable = /*#__PURE__*/ (function (_super) {\r\n    __extends(InitialMoveable, _super);\r\n    function InitialMoveable() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.refTargets = [];\r\n        _this.selectorMap = {};\r\n        _this._differ = new ChildrenDiffer();\r\n        _this._elementTargets = [];\r\n        _this._tmpRefTargets = [];\r\n        _this._tmpSelectorMap = {};\r\n        _this._onChangeTargets = null;\r\n        return _this;\r\n    }\r\n    InitialMoveable.makeStyled = function () {\r\n        var cssMap = {};\r\n        var ables = this.getTotalAbles();\r\n        ables.forEach(function (_a) {\r\n            var css = _a.css;\r\n            if (!css) {\r\n                return;\r\n            }\r\n            css.forEach(function (text) {\r\n                cssMap[text] = true;\r\n            });\r\n        });\r\n        var style = getKeys(cssMap).join(\"\\n\");\r\n        this.defaultStyled = styled(\"div\", prefixCSS(PREFIX, MOVEABLE_CSS + style));\r\n    };\r\n    InitialMoveable.getTotalAbles = function () {\r\n        return __spreadArray([Default, Groupable, IndividualGroupable, DragArea], __read(this.defaultAbles), false);\r\n    };\r\n    InitialMoveable.prototype.render = function () {\r\n        var _a;\r\n        var moveableContructor = this.constructor;\r\n        if (!moveableContructor.defaultStyled) {\r\n            moveableContructor.makeStyled();\r\n        }\r\n        var _b = this.props, userAbles = _b.ables, userProps = _b.props, props = __rest(_b, [\"ables\", \"props\"]);\r\n        var _c = __read(this._updateRefs(true), 2), refTargets = _c[0], nextSelectorMap = _c[1];\r\n        var elementTargets = getElementTargets(refTargets, nextSelectorMap);\r\n        var isGroup = elementTargets.length > 1;\r\n        var totalAbles = moveableContructor.getTotalAbles();\r\n        var ables = __spreadArray(__spreadArray([], __read(totalAbles), false), __read((userAbles || [])), false);\r\n        var nextProps = __assign(__assign(__assign({}, props), (userProps || {})), { ables: ables, cssStyled: moveableContructor.defaultStyled, customStyledMap: moveableContructor.customStyledMap });\r\n        this._elementTargets = elementTargets;\r\n        var firstRenderState = null;\r\n        var prevMoveable = this.moveable;\r\n        var persistData = props.persistData;\r\n        if (persistData === null || persistData === void 0 ? void 0 : persistData.children) {\r\n            isGroup = true;\r\n        }\r\n        // Even one child is treated as a group if individualGroupable is enabled. #867\r\n        if (props.individualGroupable) {\r\n            return React.createElement(MoveableIndividualGroup, __assign({ key: \"individual-group\", ref: ref(this, \"moveable\") }, nextProps, { target: null, targets: elementTargets }));\r\n        }\r\n        if (isGroup) {\r\n            var targetGroups = getTargetGroups(refTargets, nextSelectorMap);\r\n            // manager\r\n            if (prevMoveable && !prevMoveable.props.groupable && !prevMoveable.props.individualGroupable) {\r\n                var target = prevMoveable.props.target;\r\n                if (target && elementTargets.indexOf(target) > -1) {\r\n                    firstRenderState = __assign({}, prevMoveable.state);\r\n                }\r\n            }\r\n            return React.createElement(MoveableGroup, __assign({ key: \"group\", ref: ref(this, \"moveable\") }, nextProps, (_a = props.groupableProps) !== null && _a !== void 0 ? _a : {}, { target: null, targets: elementTargets, targetGroups: targetGroups, firstRenderState: firstRenderState }));\r\n        }\r\n        else {\r\n            var target_1 = elementTargets[0];\r\n            // manager\r\n            if (prevMoveable && (prevMoveable.props.groupable || prevMoveable.props.individualGroupable)) {\r\n                var moveables = prevMoveable.moveables || [];\r\n                var prevTargetMoveable = find(moveables, function (mv) { return mv.props.target === target_1; });\r\n                if (prevTargetMoveable) {\r\n                    firstRenderState = __assign({}, prevTargetMoveable.state);\r\n                }\r\n            }\r\n            return React.createElement(MoveableManager, __assign({ key: \"single\", ref: ref(this, \"moveable\") }, nextProps, { target: target_1, firstRenderState: firstRenderState }));\r\n        }\r\n    };\r\n    InitialMoveable.prototype.componentDidMount = function () {\r\n        this._checkChangeTargets();\r\n    };\r\n    InitialMoveable.prototype.componentDidUpdate = function () {\r\n        this._checkChangeTargets();\r\n    };\r\n    InitialMoveable.prototype.componentWillUnmount = function () {\r\n        this.selectorMap = {};\r\n        this.refTargets = [];\r\n    };\r\n    /**\r\n     * Get targets set in moveable through target or targets of props.\r\n     * @method Moveable#getTargets\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body, {\r\n     *    target: [targetRef, \".target\", document.querySelectorAll(\".target\")],\r\n     * });\r\n     *\r\n     * console.log(moveable.getTargets());\r\n     */\r\n    InitialMoveable.prototype.getTargets = function () {\r\n        var _a, _b;\r\n        return (_b = (_a = this.moveable) === null || _a === void 0 ? void 0 : _a.getTargets()) !== null && _b !== void 0 ? _b : [];\r\n    };\r\n    /**\r\n     * If the element list corresponding to the selector among the targets is changed, it is updated.\r\n     * @method Moveable#updateSelectors\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body, {\r\n     *    target: \".target\",\r\n     * });\r\n     *\r\n     * moveable.updateSelectors();\r\n     */\r\n    InitialMoveable.prototype.updateSelectors = function () {\r\n        this.selectorMap = {};\r\n        this._updateRefs();\r\n    };\r\n    /**\r\n     * User changes target and waits for target to change.\r\n     * @method Moveable#waitToChangeTarget\r\n     * @story combination-with-other-components--components-selecto\r\n     * @example\r\n     * document.querySelector(\".target\").addEventListener(\"mousedown\", e => {\r\n     *   moveable.waitToChangeTarget().then(() => {\r\n     *      moveable.dragStart(e.currentTarget);\r\n     *   });\r\n     *   moveable.target = e.currentTarget;\r\n     * });\r\n     */\r\n    InitialMoveable.prototype.waitToChangeTarget = function () {\r\n        // let resolvePromise: (e: OnChangeTarget) => void;\r\n        var _this = this;\r\n        // this._onChangeTargets = () => {\r\n        //     this._onChangeTargets = null;\r\n        //     resolvePromise({\r\n        //         moveable: this.getManager(),\r\n        //         targets: this._elementTargets,\r\n        //     });\r\n        // };\r\n        // return new Promise<OnChangeTarget>(resolve => {\r\n        //     resolvePromise = resolve;\r\n        // });\r\n        var resolvePromise;\r\n        this._onChangeTargets = function () {\r\n            _this._onChangeTargets = null;\r\n            resolvePromise();\r\n        };\r\n        return new Promise(function (resolve) {\r\n            resolvePromise = resolve;\r\n        });\r\n    };\r\n    InitialMoveable.prototype.waitToChangeTargets = function () {\r\n        return this.waitToChangeTarget();\r\n    };\r\n    InitialMoveable.prototype.getManager = function () {\r\n        return this.moveable;\r\n    };\r\n    InitialMoveable.prototype.getMoveables = function () {\r\n        return this.moveable.getMoveables();\r\n    };\r\n    InitialMoveable.prototype.getDragElement = function () {\r\n        return this.moveable.getDragElement();\r\n    };\r\n    InitialMoveable.prototype._updateRefs = function (isRender) {\r\n        var prevRefTargets = this.refTargets;\r\n        var nextRefTargets = getRefTargets((this.props.target || this.props.targets));\r\n        var isBrowser = typeof document !== \"undefined\";\r\n        var isUpdate = compareRefTargets(prevRefTargets, nextRefTargets);\r\n        var selectorMap = this.selectorMap;\r\n        var nextSelectorMap = {};\r\n        this.refTargets.forEach(function updateSelectorMap(target) {\r\n            if (isString(target)) {\r\n                var selectorTarget = selectorMap[target];\r\n                if (selectorTarget) {\r\n                    nextSelectorMap[target] = selectorMap[target];\r\n                }\r\n                else if (isBrowser) {\r\n                    isUpdate = true;\r\n                    nextSelectorMap[target] = [].slice.call(document.querySelectorAll(target));\r\n                }\r\n            }\r\n            else if (isArray(target)) {\r\n                target.forEach(updateSelectorMap);\r\n            }\r\n        });\r\n        this._tmpRefTargets = nextRefTargets;\r\n        this._tmpSelectorMap = nextSelectorMap;\r\n        return [\r\n            nextRefTargets,\r\n            nextSelectorMap,\r\n            !isRender && isUpdate,\r\n        ];\r\n    };\r\n    InitialMoveable.prototype._checkChangeTargets = function () {\r\n        var _a, _b, _c;\r\n        this.refTargets = this._tmpRefTargets;\r\n        this.selectorMap = this._tmpSelectorMap;\r\n        var _d = this._differ.update(this._elementTargets), added = _d.added, removed = _d.removed;\r\n        var isTargetChanged = added.length || removed.length;\r\n        if (isTargetChanged) {\r\n            (_b = (_a = this.props).onChangeTargets) === null || _b === void 0 ? void 0 : _b.call(_a, {\r\n                moveable: this.moveable,\r\n                targets: this._elementTargets,\r\n            });\r\n            (_c = this._onChangeTargets) === null || _c === void 0 ? void 0 : _c.call(this);\r\n        }\r\n        var _e = __read(this._updateRefs(), 3), refTargets = _e[0], selectorMap = _e[1], isUpdate = _e[2];\r\n        this.refTargets = refTargets;\r\n        this.selectorMap = selectorMap;\r\n        if (isUpdate) {\r\n            this.forceUpdate();\r\n        }\r\n    };\r\n    InitialMoveable.defaultAbles = [];\r\n    InitialMoveable.customStyledMap = {};\r\n    InitialMoveable.defaultStyled = null;\r\n    __decorate([\r\n        withMethods(MOVEABLE_METHODS)\r\n    ], InitialMoveable.prototype, \"moveable\", void 0);\r\n    return InitialMoveable;\r\n}(React.PureComponent));\n\nvar Moveable = /*#__PURE__*/ (function (_super) {\r\n    __extends(Moveable, _super);\r\n    function Moveable() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Moveable.defaultAbles = MOVEABLE_ABLES;\r\n    return Moveable;\r\n}(InitialMoveable));\n\nfunction makeMoveable(ables) {\r\n    var _a;\r\n    return _a = /*#__PURE__*/ (function (_super) {\r\n            __extends(Moveable, _super);\r\n            function Moveable() {\r\n                return _super !== null && _super.apply(this, arguments) || this;\r\n            }\r\n            return Moveable;\r\n        }(InitialMoveable)),\r\n        _a.defaultAbles = ables,\r\n        _a;\r\n}\n\nexport { Clippable, DIRECTIONS, Draggable, edgeDraggable as EdgeDraggable, InitialMoveable, MOVEABLE_ABLES, MOVEABLE_EVENTS, MOVEABLE_METHODS, MOVEABLE_PROPS, Pinchable, Resizable, Rotatable, Roundable, Scalable, Snappable, Warpable, calculateElementPosition, Moveable as default, getElementInfo, makeAble, makeMoveable };\n//# sourceMappingURL=moveable.esm.js.map\n"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","this","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__read","o","m","Symbol","iterator","r","e","ar","next","done","push","value","error","__spreadArray","to","from","pack","l","slice","concat","makeAble","name","able","events","props","DIRECTIONS4","DIRECTIONS","navi","res","agent","IS_WEBKIT","browser","webkit","IS_WEBKIT605","window","userAgent","navigator","exec","toLowerCase","parseFloat","browserName","browserVersion","parseInt","version","IS_CHROME","IS_CHROMIUM","chromium","chromiumVersion","IS_CHROMIUM109","IS_FIREFOX","IS_SAFARI_ABOVE15","webkitVersion","PREFIX","directionCSS","map","dir","top","left","originX","originY","offset","indexOf","join","MOVEABLE_CSS","degree","x1","scale","getSVGCursor","degree45","Math","round","defaultCursor","getCursorCSS","NEARBY_POS","FLOAT_POINT_NUM","TINY_NUM","MIN_SCALE","MAX_NUM","pow","MIN_NUM","DIRECTION_REGION_TO_DIRECTION","w","nw","ne","sw","se","DIRECTION_INDEXES","DIRECTION_ROTATIONS","MOVEABLE_METHODS","setCustomDrag","state","delta","isPinch","isConvert","ableName","_a","_b","result","gestos","move","inputEvent","datas","originalDatas","ableDatas","convertDragDist","parentEvent","CustomGesto","prevX","prevY","startX","startY","isDrag","isFlag","draggable","dragStart","client","type","drag","clientX","clientY","isFirstDrag","isPrevDrag","distX","distY","deltaX","deltaY","parentGesto","calculateElementPosition","matrix","origin","width","height","calculatePoses","y1","_c","x2","y2","_d","x3","y3","_e","x4","y4","_f","calculatePosition","min","right","max","bottom","pos1","pos2","pos3","pos4","direction","sign","calculatePointerDist","moveable","moveableClientRect","rootMatrix","is3d","calculateInversePosition","getDragDist","setDragStart","allMatrix","beforeMatrix","offsetMatrix","targetMatrix","transformOrigin","inverseMatrix","inverseBeforeMatrix","absoluteOrigin","startDragBeforeDist","startDragDist","resolveTransformEvent","event","functionName","beforeRenderable","index","transformIndex","nextTransforms","nextTransformAppendedIndexes","nextIndex","text","match","info","filter","transforms","matrixInfos","v","offsetWidth","offsetHeight","beforeFunctionTexts","undefined","beforeFunctionTexts2","targetFunctionText","afterFunctionTexts","afterFunctionTexts2","beforeFunctions","beforeFunctions2","targetFunction","afterFunctions","afterFunctions2","targetFunctions","beforeFunctionMatrix","beforeFunctionMatrix2","afterFunctionMatrix","afterFunctionMatrix2","allFunctionMatrix","targetFunctionMatrix","convertTransformInfo","matFunctionName","beforeTransform","beforeTransform2","targetTansform","afterTransform","afterTransform2","targetAllTransform","splice","isAppendTransform","isAppend","convertTransformFormat","dist","getTransfromMatrix","isAfter","nextTargetMatrix","res1","getBeforeDragDist","isBefore","getPosIndexesByDirection","indexes","getPosByDirection","poses","xRatio","yRatio","getNextMatrix","getAbsoluteMatrix","fillTransformStartEvent","getBeforeRenderableDatas","setTransform","transform","startTransforms","setTransformIndex","setDefaultTransformIndex","property","func","startValue","functionValue","fillOriginalTransform","getNextTransforms","getNextTransformText","getNextStyle","nextStyle","fillTransformEvent","nextTransform","Draggable","fillCSSObject","getTranslateFixedPosition","fixedDirection","fixedOffset","isAllTransform","nextMatrix","targetTransform","getNextTransformMatrix","nextFixedPosition","fixedOffsetPosition","getDirectionOffset","getTranslateDist","fixedPosition","groupable","groupLeft","groupTop","getResizeDist","prevOrigin","prevWidth","prevHeight","nextOrigin","pos","unit","prevSize","size","isNaN","calculateTransformOrigin","startPos","fixedPos","getDist","getShadowRoot","parentElement","getRootNode","rootNode","nodeType","getIndividualTransforms","getStyle","rotate","translate","individualTransforms","split","getMatrixStackInfo","target","container","checkContainer","targetTransformOrigin","el","matrixes","documentElement","requestEnd","isEnd","hasFixed","offsetContainer","getOffsetInfo","offsetParent","zoom","getCachedStyle","position","getElementTransform","isFixed","getTransformMatrix","isOffsetEnd","isStatic","parentClientLeft","parentClientTop","fixedClientLeft","fixedClientTop","fixedInfo","hasTransform","fixedContainer","getPositionFixedInfo","length_1","convert3DMatrixes","getOffsetPosInfo","tagName","hasOffset","isSVG","origin_1","targetOrigin","offsetLeft","offsetTop","getSVGMatrix","targetZoom","offsetInfo","offsetZoom","isCustomElement","parentSlotElement","customOffsetParent","customOffsetLeft","customOffsetTop","clientLeft","clientTop","margin","getBodyOffset","isElementTarget","scrollLeft","scrollTop","cacheStyleMap","clientRectStyleMap","matrixContainerInfos","setStoreCache","useCache","Map","element","cache","get","nextStyle_1","getComputedStyle","style","cached","set","fillChildEvents","groupableDatas","childDatas","moveables","_","isRequestChild","triggerChildGesto","isStart","childs","ev","childMoveable","childEvent","childGestos","parentFlag","child","triggerChildAbles","eachEvent","callback","startChildDist","parentDatas","startPositions","getAbsolutePosesByState","rotation","PI","originalX","originalY","renderDirectionControlsByInfos","renderDirections","React","getState","renderPoses","rotationRad","getProps","degRotation","absDegree","directionMap","renderState","renderDirectionMap","forEach","directionSign","data","classNames","directionRotation","dataAttrs","createElement","className","prefix","key","getControlTransform","renderDirectionControls","defaultDirections","directions","displayAroundControls","renderAroundControls","renderLine","_i","rad","getLineStyle","renderEdgeLines","edge","index1","index2","Boolean","getRenderDirections","renderDiagonalDirections","renderAllDirections","checkBoundPoses","bounds","verticalPoses","horizontalPoses","Infinity","nextBounds","vertical","checkBounds","horizontal","getBounds","externalBounds","containerClientRect","containerHeight","clientHeight","containerWidth","clientWidth","snapOffset","snapOffsetLeft","snapOffsetTop","snapOffsetRight","snapOffsetBottom","isCSS","_g","isVertical","startBoundPos","endBoundPos","minPos","maxPos","boundInfos","isBound","sort","a","abs","isBoundRotate$1","relativePoses","boundRect","some","checkRotateBounds","prevPoses","nextPoses","relativeLeft","relativeRight","relativeTop","relativeBottom","boundPos","nextPos","relativeRad1","vec","getDistSize","sqrt","boundRotate","relativeRad2","nextRad","VERTICAL_NAMES","HORIZONTAL_NAMES","SNAP_SKIP_NAMES_MAP","VERTICAL_NAMES_MAP","start","end","center","HORIZONTAL_NAMES_MAP","hasGuidelines","snappable","innerBounds","verticalGuidelines","horizontalGuidelines","snapGridWidth","snapGridHeight","guidelines","enableSnap","getSnapDirections","snapDirections","splitSnapDirectionPoses","snapPoses","nextSnapPoses","nextSnapDirections","name_1","mapSnapDirectionPoses","horizontalNames","verticalNames","checkMoveableSnapPoses","posesX","posesY","dirXs","dirYs","customSnapThreshold","snapThreshold","values","selectValue","checkSnapPoses","checkSnap","getStringDirection","stringDirection","checkSnaps","rect","horizontalDirection","verticalDirection","getNearestSnapGuidelineInfo","snapInfo","isSnap","guideline","posInfo","posInfos","guidelineInfo","guidelineInfos","targetType","targetPoses","dirs","posType","snapPosInfos","targetPos","snapPosInfo","getSnapInfosByDirection","snapDirection","keepRatio","getPosesByDirection","arr","nextDir","checkSnapBoundPriority","aDist","bDist","getNearOffsetInfo","offsets","aSign","bSign","aOffset","bOffset","isStartLine","dot","line","cx","cy","hitTestLine","test1","test2","dx","dy","isSameStartLine","dots","centerSign","every","checkInnerBoundDot","threshold","checkLineBoundCollision","boundLine","isRender","dot1","boundDot1","boundDot2","dy2","getTinyDist","hasDx","hasDy","slope","getInnerBoundInfo","lineInfos","verticalSign","horizontalSign","lineConstants","isAllBound","isVerticalBound","isHorizontalBound","leftLine","topLine","rightLine","bottomLine","topBoundInfo","bottomBoundInfo","leftBoundInfo","rightBoundInfo","isAllVerticalBound","isAllHorizontalBound","verticalOffset","maxOffset","horizontalOffset","checkInnerBound","multiple","sizeOffset","getInnerBoundDragInfo","innerBoundInfo","getCheckInnerBoundLineInfos","widthOffsetInfo","heightOffsetInfo","getInverseDragDist","virtualPoses","lineDirections","x","y","getCheckSnapLineDirections","dir1","dir2","virtualLine","point1","point2","c","solveLineConstants","isBoundRotate","boundDots","checkRotateInnerBounds","dotInfos","lineRad","solveReverseLine","lineDist","getDistPointLine","dotDist","dotRad","distRad","acos","reduce","prev","cur","solveNextOffset","solveEquation","isOutside","dist1","dist2","getSnapBound","boundInfo","checkSnapBoundsDrag","throttleDragRotate","ignoreSnap","getAbsolutePoses","absolutePoses","getRect","boundPoses","checkMoveableSnapBounds","middle","verticalSnapBoundInfo","horizontalSnapBoundInfo","verticalInnerBoundInfo","horizontalInnerBoundInfo","isVerticalSnap","isHorizontalSnap","_h","offsetX","offsetY","adjustPoses","adjustPos","prevDistY","checkThrottleDragRotate","horizontalBoundInfos","verticalBoundInfos","horizontalSnapInfo","verticalSnapInfo","horizontalDist","verticalDist","snapIndex","snap","checkSnapBounds","guideines","getSnapBoundInfo","isRequest","startDirection","endDirection","otherStartPos","otherEndPos","snapBoundInfo","endPos","endX","endY","isBottom","isRight","verticalInfo","horizontalInfo","checkBoundKeepRatio","horizontalBoundInfo","verticalBoundInfo","verticalGuideline","horizontalGuideline","horizontalPos","verticalPos","checkSnapKeepRatio","getSnapBoundOffset","checkSnapBoundsKeepRatio","otherHorizontalOffset","isOtherHorizontalBound","isOtherHorizontalSnap","otherVerticalOffset","isOtherVerticalBound","isOtherVerticalSnap","snapLine","rad180","isHorizontalLine","isVerticalLine","checkSnapRightLine","requestStyle","requestChildStyle","render","hideThrottleDragRotateLine","dragInfo","beforeOrigin","targetGesto","startCheckSnapDrag","prevDist","prevBeforeDist","deltaOffset","params","fillParams","triggerEvent","startRect","useSnap","parentMoveable","throttleDrag","dragRotateRad","startDragRotate","deg","ry","cos","sin","beforeTranslate","bx","by","getTransformDist","beforeDist","beforeDelta","passDelta","passDist","num","dragAfter","dragEnd","param","fillEndParams","dragGroupStart","targets","dragGroup","nextParams","dragGroupEnd","request","isControl","requestStart","unset","getFixedDirectionInfo","getOffsetFixedPositionInfo","offsetFixedPosition","getDirectionByPos","directionCondition$2","getDirectionCondition","Resizable","ableGroup","canPinch","dragControlCondition","viewClassName","getDirectionViewClassName","dragControlStart","isGroup","parentDirection","parentFixedDirection","getTotalDirection","resizable","controlGesto","startOffsetWidth","startOffsetHeight","minSize","startWidth","inlineCSSWidth","cssWidth","startHeight","inlineCSSHeight","cssHeight","maxSize","minOffsetWidth","minOffsetHeight","maxOffsetWidth","maxOffsetHeight","setRatio","ratio","isFinite","setFixedDirection","setFixedPosition","setMin","setMax","nextMaxSize","startOffsetMatrix","startTransformOrigin","isWidth","parentIsWidth","startRatio","setOrigin","startFixedDirection","startFixedPosition","isResize","snapRenderInfo","dragControl","parentKeepRatio","dragClient","parentDist","resolveMatrix","targetN","nextAllMatrix","resizeFormat","throttleResize","keepRatioFinally","sizeDirection","distWidth","distHeight","getNextBoundingSize","boundingWidth","boundingHeight","nextFixedDirection","setSize","getAbsolutePosition","snapDist","checkSizeDist","widthOffset","heightOffset","getNextFixedPoses","checkSnapResize","isNoSnap","computeSize","inverseDelta","nextWidth","nextHeight","fillAfterTransform","nextSize","getOffsetSizeDist","dragControlAfter","checkResizableError","errorWidth","errorHeight","isErrorWidth","isErrorHeight","dragControlEnd","dragGroupControlCondition","dragGroupControlStart","originalEvents","parentStartOffsetWidth","parentStartOffsetHeight","updateGroupMin","originalMinSize","childMinSize","childStartOffsetWidth","childStartOffsetHeight","parentMinWidth","parentMinHeight","updateGroupMax","originalMaxSize","childMaxSize","parentMaxWidth","parentMaxHeight","dragGroupControl","catchEvent","parentScale","dragGroupControlEnd","deltaWidth","deltaHeight","setRotateStartInfo","startAbsoluteOrigin","prevDeg","defaultDeg","prevSnapDeg","loop","startDist","getAbsoluteDist","normalizedPrevDeg","floor","getAbsoluteDistByClient","getRotateInfo","moveableRect","throttleRotate","snapRotation","snapRotationThreshold","NAME_snapRotationThreshold","snapRotationDegrees","NAME_snapRotationDegrees","origin2_1","rad_1","firstDegree","getMinDegreeDistance","bumpDegree","checkSnapRotate","snapDeg","getRotationPositions","rotationPosition","radPoses","getRotationRad","isReverse","requestAble","rotateAroundControls","rotationTarget","getRefTargets","contains","Rotatable","css","isDragging","rotatable","resolveAblesWithRotatable","positions","jsxs","ables","resolveMap_1","directionControlInfos","resolve","parentRotate","beforeDirection","resizeStart","getOffsetFixedDirectionInfo","startClientX","startClientY","externalRotate","beforeInfo","afterInfo","absoluteInfo","inputTarget","regionDirection","getAttribute","controlDirection","isAroundControl","resolveAble","clientPoses","rootClientRect","rootPoses","calculateMoveableClientPositions","originalFixedPosition_1","fixedBeforeOrigin","fixedAfterOrigin","posDelta","parentPosition","controlPosition","parentFixedPosition","svgOrigin","svg","convertTransformOriginArray","getTotalOrigin","rotatation","isRotate","clientDistX","clientDistY","groupDelta","beforeRotation","absoluteDelta","absoluteDist","absoluteRotation","targetDirection","getTransformDirection","startRotation","absoluteStartRotation","nextClientX","nextClientY","setRotation","nextRotation","inverseDist","rotateDist","getRotateDist","prevInverseDist","requestValue","dragEvent","transformEvent","parentDistance","resize","resizeEvent","beforeRotate","absoluteRotate","parentLeft","parentTop","parentBeforeOrigin","childClient","startGroupClient","groupClient","prevClientX","prevClientY","setGroupRotation","distRotate","getRotation","deltaRotate","renderInnerGuideline","isHorizontal","scaleType","renderGuideline","sizeValue","posValue","renderSnapPoses","renderPos","renderGuidelines","targetRect","isDisplayInnerSnapDigit","mainNames","targetStart","targetEnd","hide","elementRect","renderDigitLine","lineType","gap","snapDigit","isDisplaySnapDigit","snapDistFormat","sizeName","absGap","snapSize","toFixed","renderDashedGuidelines","rendered","nextGuidelines","otherIndex","groups","names","groupBy","elementRect1","elementRect2","nextPos1","nextPos2","elementDirection","total","inner","groupByElementGuidelines","sideNames","sidePos","prevRect","nextRect","size1","size2","renderPos1","renderPos2","getTotalGuidelines","overflow","scrollHeight","scrollWidth","containerClientHeight","containerClientWidth","snapGap","maxSnapElementGuidelineDistance","isDisplayGridGuidelines","elementGuidelines","elementRects","prevValues","snapRect","refresh","nextElementGuidelines","getRefTarget","maintained","added","nextValues","prevIndex","offsetDelta","containerRect","clientPos","calculateContainerPos","containerLeft","containerTop","getBoundingClientRect","elementLeft","elementTop","elementRight","elementBottom","getSnapElementRects","elementSnapDirections","topValue","leftValue","rightValue","bottomValue","centerValue","middleValue","rectTop","rectLeft","sizes","getElementGuidelines","totalGuidelines","maxSnapElementGapDistance","gapGuidelines","targetCenter","targetStart2","targetEnd2","nextElementRects","snapRect1","snapRect2","rect1","rect2","rect1Start","rect1End","rect2Start","rect2End","isCenter","checkBetweenRects","gapRects","getGapGuidelines","getGridGuidelines","left_1","top_1","getDefaultGuidelines","distance","getObjectGuidelines","containerSize","posGuideline","snapWidth","snapHeight","checkSnapInfo","snapContainer","snapContainerTarget","snapContainerRect","getClientRect","offset1","getDragDistByState","offset2","nextFixedPos","normalized","getSizeOffsetInfo","endDirection_1","signX","signY","nextDirection","getCheckSnapDirections","innerBoundLineInfos","getNextPoses","isWidthBound","isHeightBound","nextWidthOffset","nextHeightOffset","widthDist","heightDist","maxWidth","maxHeight","right_1","bottom_1","otherDirection","isCheckVertical","isCheckHorizontal","otherPos","nextOtherPos","isHeightOutside","isWidthOutside","checkMaxBounds","snapPos","recheckSizeByTwoDirection","baseDeg","count","deg1","deg2","deg3","checkSnapScale","sizeDist","scaleMatrix","getSnapGuidelines","addBoundGuidelines","verticalSnapPoses","horizontalSnapPoses","boundMap","lineInfo","isHorizontalStart","isVerticalStart","checkInnerBoundPoses","innerBoundMap","verticalInnerBoundPoses","horizontalInnerBoundPoses","innerPos","directionCondition$1","Snappable","dragRelation","targetTop","targetLeft","snapRenderThreshold","watchValue","JSON","stringify","minLeft","minTop","externalPoses","snapInfos","hasExternalPoses","externalRect","verticalPosInfos","horizontalPosInfos","allGuidelines","elements","gaps","nextBoundMap","nextInnerBoundMap","targetSideStart","targetSideEnd","sideStartPos","sideEndPos","sideCenterPos","renderGapGuidelines","pinchStart","defaultSync","fn","getBeforeTransformOrigin","getTransformOriginArray","getSVGViewBox","ownerSVGElement","measureSVGSize","computedTransform","baseVal","_loop_1","chr","lastParent","isParent","checkZoom","getTargetStyle","hasSlot","assignedSlotParentElement","assignedSlot","targetPosition","willChange","slotParentNode","parentNode","targetParentNode","host","isGTarget","getBBox","bbox","viewBox","getSVGGraphicsOffset","getBodyStyle","bodyPosition","marginLeft","marginTop","body","makeMatrixCSS","viewBoxWidth","viewBoxHeight","scaleX","scaleY","preserveAspectRatio","align","meetOrSlice","xAlign","yAlign","scaleDimension","calculateRect","getDiagonalSize","self","getSize","contentWidth","contentHeight","minWidth","minHeight","targetStyle","boxSizing","borderLeft","borderRight","borderTop","borderBottom","horizontalPadding","verticalPadding","getParentStyle","getExtendsRect","isRoot","extendsRect","getClientRectByPosition","base","isExtends","baseTop","baseLeft","clientRect","getDirection","direciton","unsetAbles","unsetGesto","gestoName","gesto","isIdle","resolvedEvent","cssText","prevEvent","nextEvent","isBeforeEvent","currentTarget","isTrusted","stopAble","isEventStart","stopDrag","stop","isStartEvent","lastEvent","isDouble","_emitter","on","isManager","pseudoElt","filterAbles","methods","triggerAblesSimultaneously","enabledAbles","ableGroups","method","equals","a1","a2","groupKeys","groupKey","keyIndex","group","flat","args","calculatePadding","xAdded","yAdded","nextAdded","convertCSSSize","isRelative","getEventData","getGestoData","checkAbles","isSelector","document","querySelector","current","querySelectorAll","getSizeDistByDist","startSize","standardRad","signSize","startWidthSize","startHeightSize","secondRad","atan2","firstRad","distSize","pinchScale","directionsDists","directionRatios","ratioDistance","dist_1","convertTransformUnit","xy","leftOrigin","rightOrigin","originObject","nextOriginObject","isDeepArrayEquals","arr1","arr2","value1","value2","isArray1","isArray2","nextValue","valueKey","defaultValue","store","_store","prevValue","countEach","getPaddingBox","padding","Pinchable","angle","pinchable","eventName","controlEventName","pinchAbles","controlAbles","ableEvent","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd","directionCondition","Scalable","setMinScaleSize","minScaleSize","setMaxScaleSize","maxScaleSize","isScale","throttleScale","tempScaleValue","getNextScale","stateDirection","setScale","nextScale","isSelfPinch","startOffsetSize","scaleSize","distText","scaleText","isZeroScale","getScaleDist","scaleEndParam","moveableScale","getMiddleLinePos","getTriangleRad","rad1","Warpable","scalable","warpable","linePosFrom1","linePosFrom2","linePosFrom3","linePosFrom4","linePosTo1","linePosTo2","linePosTo3","linePosTo4","warpTargetMatrix","targetInverseMatrix","prevMatrix","posIndexes","isWarp","selectedPoses","nearByPoses","poses1","poses2","rad2","pi","h","totalMatrix","multiply","AREA_PIECES","AREA_PIECE","AVOID","VIEW_DRAGGING","restoreStyle","areaElement","renderPieces","DragArea","dragArea","passDragArea","ref","isDragArea","posX","posY","rects","children","nextElementSibling","disableNativeEvent","enableNativeEvent","Origin","originStyle","getDefaultScrollPosition","scrollContainer","Scrollable","getContainer","scrollOptions","dragScroll","scrollContainerElement","scrollBy","getCurrentEvent","checkScroll","scrollThreshold","scrollThrottleTime","getScrollPosition","throttleTime","dragGroupControEnd","Default","Padding","paddingDirections","paddingPos1","paddingPos2","paddingPos3","paddingPos4","RADIUS_DIRECTIONS","calculateRatio","sumSize","sumRatio","HORIZONTAL_RADIUS_ORDER","VERTICAL_RADIUS_ORDER","HORIZONTAL_RADIUS_DIRECTIONS","VERTICAL_RADIUS_DIRECTIONS","getRadiusStyles","clipStyles","radiusPoses","virtual","raws","rawPos","styles","getRadiusRange","controlPoses","horizontalRange","verticalRange","clipPose","sub","getRadiusValues","minCounts","full","splitIndex","splitLength","horizontalValues","verticalValues","horizontalValuesLength","verticalValuesLength","hasVerticalValues","nwValue","neValue","seValue","_j","swValue","_k","_l","wnValue","_m","enValue","_o","esValue","_p","wsValue","horizontalRawPoses","verticalRawPoses","nextHorizontalPoses","nextVerticalPoses","raw","CLIP_DIRECTIONS","CLIP_RECT_DIRECTIONS","getClipStyles","clipPath","clipRelative","clipType","clipPoses","isRect","isCircle","subWidth","subHeight","getRectPoses","xs","ys","dirx","diry","getControlSize","xRange","yRange","getClipPath","defaultClip","customClip","clipText","clipPrefix","splitter","xPos","yPos","minMaxs","minX","maxX","minY","maxY","radiusX_1","radiusY_1","radius","xRadius","yRadius","centerPos_1","radiusX","radiusY","roundIndex","rectLength","radiusValues","_q","_r","_s","top_2","_t","nextRight","nextBottom","_u","top_3","addClipPath","clipIndex","horizontalIndex","verticalIndex","startIndex","startVerticalIndex","addRadiusPos","clipStyle","clipEventType","removeClipPath","radiuslIndex","deleteCount","removeRadiusPos","Clippable","customClipPath","defaultClipPath","clipArea","clipPathState","snapBoundInfos","calculatedPos","controls","lines","isInset","isPolygon","linePoses_1","clipLeft","clipTop","distLeft","distTop","ellipseClipPath","piece","areaPoses","allWidth","allHeight","allLeft_1","allTop_1","directionType","snapPos1","snapPos2","dragWithClip","isDragTarget","isClipStart","isLine","isArea","originalDraggable","originalDist","firstDist","isDragWithTarget","isAll","dists","verticalDirections","horizontalDirections","verticalDirection_1","horizontalDirection_1","nextDist","nextControlPoses_1","controlPose","controlDir","dirDir","dirHorizontal","dirVertical","moveControlPos","guidePoses","isEllipse","guideRect","rx","clipHorizontalGuidelines","clipVerticalGuidelines","guideXPoses","guideYPoses","rectPoses","rectDists_1","boundDelta","clipTargetBounds","snapOffsetY","snapOffsetX","width_1","height_1","nextControlPoses_2","j","nextClipStyles","dragDist","OriginDraggable","startOrigin","startTargetOrigin","isDragOrigin","originRelative","distOrigin","dragDelta","deltaOrigin","getBorderRadius","borderRadius","triggerRoundEvent","roundRelative","horizontals","verticals","splitRadiusPoses","borderRadiusState","getStyleBorderRadius","firstMoveable","firstTarget","getTargets","Roundable","roundClickable","minRoundControls","maxRoundControls","roundPadding","isDisplayShadowRoundControls","verticalCount","horizontalCount","basePos","originalPos","isDisplay","display","controlIndex","lineIndex","indexAttr","replace","isRound","selectedControlPose","selectedVertical","selectedHorizontal","pose","poseDist","horizontalsLength","verticalsLength","controlPoseInfo","addBorderRadius","addBorderRadiusByLine","removeBorderRadius","BeforeRenderable","inlineTransform","cssMatrix","startTransform","identityMatrix","isIdentityMatrix","resetStyle","fillDragStartParams","fillDragParams","_this","Renderable","fillDragEndParams","transformObject","matrixInfo","triggerAble","moveableAbles","eventOperations","eventAffix","eventType","requestInstant","requestAble_1","elementFromPoint","isDragStop","isFirstStart","updateRect","gestoType","prevGesto","trigger","conditionName","nextDatas","off","forceEndedCount","updatedCount","eventOperation","eventAbles","isUpdate","isForceEnd","preventDefault","isUnmounted","flushSync","forceUpdate","checkMoveableTarget","eventTarget","dragTargetElement","_dragTarget","isMoveableElement","controlBox","getTargetAbleGesto","moveableTarget","dragTarget","dragTargetSelf","getAbleGesto","ableType","conditionFunctions","isTargetAbles","pinchOutside","pinchThreshold","preventClickEventOnDrag","preventClickDefault","checkInput","dragFocusedInput","options","preventRightClick","preventWheelClick","dragContainer","getControlBoxElement","preventClickEventOnDragStart","preventClickEventByCondition","isPinchScheduled","stopPropagation","EventManager","_onEvent","addEventListener","setAbles","destroy","removeEventListener","calculateMatrixStack","rootContainer","isAbsolute3d","prevTargetMatrix","containerZoom","result_1","getCachedMatrixContainerInfo","rootMatrixes","isRoot3d","offsetRootContainer","rootZoom","isNext3d","isSVGGraphicElement","nextRootMatrixes","reverse","originalRootContainer","endContainer","rootMatrixBeforeOffset","targetInfo","rectWidth","rectHeight","mat","prevLeft","prevTop","posOrigin","rectOrigin","getSVGOffset","isMatrix3d","originalRootMatrix","hasZoom","calculateElementInfo","allResult","getMoveableTargetInfo","moveableElement","parentContainer","requestStyles","targetClientRect","rootContainerClientRect","getStyle_1","beforePosition","absoluteTargetPosition","absoluteContainerPosition","nextClientRect","getCachedClientRect","containerClientRectLeft","containerClientRectTop","containterClientLeft","containerClientTop","clientDelta","originalBeforeOrigin","getPersistState","isPersisted","MoveableManager","_super","targetAbles","isMoveableMounted","_prevOriginalDragTarget","_originalDragTarget","_prevDragTarget","_prevPropTarget","_propTarget","_prevDragArea","_isPropTargetChanged","_hasFirstTarget","_reiszeObserver","_observerId","_mutationObserver","_rootContainer","_viewContainer","_viewClassNames","checkUpdateRect","_onPreventClick","propsTarget","cspNonce","translateZ","ControlBoxElement","cssStyled","linePadding","controlPadding","_checkUpdateRootContainer","checkUpdate","updateRenderPoses","stateTarget","groupTargets","ableAttributes","getEnabledAbles","ableClassName","_getAbleClassName","isVisible","firstRenderState","persistData","useAccuratePosition","onClick","renderAbles","_renderLines","componentDidMount","_checkUpdateViewContainer","_updateTargets","_updateNativeEvents","_updateEvents","updateCheckInput","_updateObserver","componentDidUpdate","prevProps","componentWillUnmount","disconnect","_changeAbleViewClassNames","manager","getAble","wrapperMoveable","getDragElement","triggerDragStart","hitTest","points","totalSize","isInside","isTarget","isSetState","isSingle","nextState","_getRequestStyles","persistState","name_2","updateState","updateTarget","statePos","getManager","getAbsoluteRotation","isInstant","allAbles","requsetAble","ableRequester","requester","ableParam","getMoveables","stateLeft","stateTop","stateContainer","updateAbles","isTargetChanged","moveableContainer","waitToChangeTarget","Promise","useCSS","tag","customStyleMap","customStyledMap","hasControlBox","updateSelectors","setState","name_3","always","Renderer","ableStyleNames","_updateResizeObserver","_updateMutationObserver","controlBoxElement","hasTargetAble","hasControlAble","_isTargetChanged","hideDefaultLines","hideChildMoveableDefaultLines","useDragArea","nextTarget","prevTarget","prevDragArea","eventKeys","hasAbles","viewContainerOption","viewContainer","_getAbleViewClassNames","nextClassNames","prevClassNames","removed","classPrefix","targetGestoData","controlGestoData","trim","win","ResizeObserver","useResizeObserver","observer","observe","box","MutationObserver","useMutationObserver","records","e_1","records_1","__values","records_1_1","mutation","attributeName","e_1_1","return","attributes","defaultProps","isWrapperMounted","warpSelf","Groupable","renderGroupRects","persistDatChildren","getRequestChildStyles","Clickable","containsElement","containsTarget","targetIndex","parentTarget","getDraggableEvent","edgeDraggable","dragCondition","dragGroupCondition","IndividualGroupable","MOVEABLE_ABLES","solveConstantsDistance","solveC","getMaxPos","getMinPos","findMoveableGroups","childTargetGroups","targetGroup","childMoveableGroups","checked","finded","MoveableGroup","differ","_targetGroups","_hasFirstTargets","checkeds","targetGroups","moveableGroups","useDefaultGroupRotate","isReset","updateGroup","defaultGroupRotate","persistedRoatation","rootGroupRect","getMoveableGroupRect","parentRotation","posesRotations","rotations","groupRotation","firstRotation","isSameRotation","groupPoses","groupRect","parentPoses","fixedRotation","a1_1","tan","a2_1","a1MinMax_1","a1MinMaxPos_1","a2MinMax_1","a2MinMaxPos_1","a1Dist","a2Dist","a1MinPos","a1MaxPos","a2MinPos","a2MaxPos","minHorizontalLine","maxHorizontalLine","minVerticalLine","maxVerticalLine","line1","line2","minX_1","minY_1","maxX_1","maxY_1","getGroupRect","defaultGroupOrigin","posesInfo","rotateScale","update","changed","isContainerChanged","MoveableIndividualGroup","canPersist","individualProps","individualGroupableProps","results","dragElement","getElementTargets","refTargets","selectorMap","elementTargets","getTargetGroups","compareRefTargets","prevRefTargets","nextRefTargets","InitialMoveable","_differ","_elementTargets","_tmpRefTargets","_tmpSelectorMap","_onChangeTargets","makeStyled","cssMap","getTotalAbles","defaultStyled","defaultAbles","moveableContructor","userAbles","userProps","getOwnPropertySymbols","propertyIsEnumerable","__rest","_updateRefs","nextSelectorMap","nextProps","prevMoveable","individualGroupable","groupableProps","target_1","prevTargetMoveable","mv","_checkChangeTargets","resolvePromise","waitToChangeTargets","isBrowser","updateSelectorMap","onChangeTargets","decorators","desc","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__decorate","Moveable"],"sourceRoot":""}