{"version":3,"sources":["webpack:///./node_modules/grommet/es6/components/InfiniteScroll/InfiniteScroll.js","webpack:///./node_modules/grommet/es6/contexts/AnnounceContext/AnnounceContext.js","webpack:///./node_modules/grommet/es6/components/TextInput/StyledTextInput.js","webpack:///./node_modules/grommet/es6/components/TextInput/TextInput.js","webpack:///./node_modules/grommet/es6/components/Select/StyledSelect.js","webpack:///./node_modules/grommet/es6/components/Select/utils.js","webpack:///./node_modules/grommet/es6/components/Select/SelectContainer.js","webpack:///./node_modules/grommet/es6/components/Select/Select.js","webpack:///./node_modules/grommet/es6/components/Form/FormContext.js"],"names":["calculateLastPageBound","show","step","Math","floor","InfiniteScrollWrapper","_ref","children","_ref$items","items","onMore","renderMarker","replace","_ref$step","_useState","scrollShow","setScrollShow","lastPage","length","_useState2","renderPageBounds","setRenderPageBounds","_useState3","pageHeights","setPageHeights","_useState4","pendingLength","setPendingLength","aboveMarkerRef","belowMarkerRef","scrollParents","timer","evaluate","top","height","scrollParent","document","documentElement","scrollTop","body","window","innerHeight","getBoundingClientRect","offset","nextBeginPage","index","pagesHeight","nextEndPage","undefined","max","showPage","min","debounce","clearTimeout","setTimeout","current","forEach","sp","addEventListener","removeEventListener","showIndex","showNode","parentNode","item","scrollIntoView","rendered","nextPageHeights","lastBottom","i","topIndex","bottomIndex","bottom","concat","_nextPageHeights","aboveHeight","belowHeight","firstIndex","lastIndex","result","marker","createElement","Box","key","ref","flex","cloneElement","push","slice","child","_marker","renderedMarker","node","AnnounceContext","createContext","message","mode","timeout","announcer","querySelector","id","style","left","right","position","insertBefore","firstChild","createAnnouncer","setAttribute","innerHTML","StyledTextInput","input","withConfig","displayName","componentId","props","plain","icon","reverse","theme","global","edgeSize","large","disabled","textInput","opacity","textAlign","extend","defaultProps","Object","setPrototypeOf","StyledTextInputContainer","div","container","StyledPlaceholder","control","border","width","placeholder","StyledIcon","StyledSuggestions","ol","suggestions","_extends","assign","target","arguments","source","prototype","hasOwnProperty","call","apply","this","renderLabel","suggestion","label","value","stringLabel","ContainerBox","dropHeight","defaultDropAlign","defaultMessages","enterSelect","suggestionsCount","suggestionsExist","suggestionIsOpen","TextInput","a11yTitle","defaultSuggestion","defaultValue","_ref$dropAlign","dropAlign","dropTarget","dropProps","_ref$focusIndicator","focusIndicator","_ref$messages","messages","name","_onBlur","onBlur","onChange","_onFocus","onFocus","onKeyDown","onSelect","onSuggestionSelect","onSuggestionsClose","onSuggestionsOpen","readOnly","valueProp","rest","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","announce","formContext","FormContext","inputRef","dropRef","suggestionsRef","_formContext$useFormI","useFormInput","setValue","focus","setFocus","showDrop","setShowDrop","handleSuggestionSelect","handleTextSelect","suggestionsAtClose","setSuggestionsAtClose","openDrop","closeDrop","valueSuggestionIndex","map","resetSuggestionIndex","activeSuggestionIndex","setActiveSuggestionIndex","_useState5","mouseMovedSinceLastKey","setMouseMovedSinceLastKey","list","scrollTo","offsetTop","drop","setValueFromSuggestion","event","persist","adjustedEvent","onNextSuggestion","preventDefault","nextActiveIndex","onPreviousSuggestion","_useState6","showStyledPlaceholder","setShowStyledPlaceholder","extraProps","Drop","align","responsive","onClickOutside","onEsc","overflow","onMouseMove","select","itemRef","renderedLabel","button","option","pad","Button","active","fill","kind","onClick","keyboardProps","onEnter","onUp","onDown","onTab","Keyboard","autoComplete","relatedTarget","TextInputWrapper","StyledContainer","applyKey","OptionsBox","OptionBox","selected","SelectOption","clear","onClear","buttonLabel","Text","text","SelectContainer","_ref2","_ref2$children","disabledKey","_ref2$emptySearchMess","emptySearchMessage","labelKey","multiple","onSearch","optionIndexesInValue","options","allOptions","searchPlaceholder","search","setSearch","_ref2$value","valueKey","_ref2$replace","activeIndex","setActiveIndex","keyboardNavigation","setKeyboardNavigation","searchRef","optionsRef","optionsNode","searchInput","optionLabel","optionValue","isDisabled","Array","isArray","optionVal","isSelected","some","valueItem","selectOption","nextValue","nextSelected","nextOptionIndexesInValue","allOptionsIndex","valueIndex","splice","reduce","onNextOption","onPreviousOption","onKeyDownOption","findIndex","e","charAt","toLowerCase","onActiveOption","onSelectOption","customSearchInput","SelectTextInput","selectOptionsStyle","box","as","size","type","nextSearch","role","tabIndex","optionRef","optionDisabled","optionSelected","optionActive","hoverIndicator","onMouseOver","defaultCursor","HiddenInput","StyledSelectDropButton","DropButton","callerPlain","open","Select","alignSelf","_ref$clear","_ref$closeOnChange","closeOnChange","gridArea","margin","onClose","onOpen","propOpen","optionsProp","valueLabel","valuedValue","v","setAllOptions","setOpen","SelectIcon","onRequestOpen","onRequestClose","triggerChangeEvent","getOwnPropertyDescriptor","HTMLInputElement","set","Event","bubbles","dispatchEvent","onSelectChange","constructor","defineProperties","icons","up","down","selectValue","isValidElement","inputValue","iconColor","color","dropContent","direction","justify","background","basis","Fragment","minWidth","SelectWrapper","useFormField","error","info","_","initialValue"],"mappings":"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","file":"3cbbeac919aeb7e42945dc8a87d11ad45c7e2106-f1825ae6e7f168afe06c.js","sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { findScrollParent, findScrollParents, isNodeAfterScroll, isNodeBeforeScroll } from '../../utils';\nimport { Box } from '../Box';\n\nvar calculateLastPageBound = function calculateLastPageBound(show, step) {\n  return show ? Math.floor((show + step) / step) - 1 : 0;\n};\n\nvar InfiniteScroll = function InfiniteScroll(_ref) {\n  var children = _ref.children,\n      _ref$items = _ref.items,\n      items = _ref$items === void 0 ? [] : _ref$items,\n      onMore = _ref.onMore,\n      renderMarker = _ref.renderMarker,\n      replace = _ref.replace,\n      show = _ref.show,\n      _ref$step = _ref.step,\n      step = _ref$step === void 0 ? 50 : _ref$step; // item index to be made visible initially\n\n  var _useState = useState(),\n      scrollShow = _useState[0],\n      setScrollShow = _useState[1]; // the last page we have items for\n\n\n  var lastPage = useMemo(function () {\n    return Math.floor(items.length / step);\n  }, [items.length, step]); // the pages we are rendering\n\n  var _useState2 = useState([0, calculateLastPageBound(show, step)]),\n      renderPageBounds = _useState2[0],\n      setRenderPageBounds = _useState2[1]; // the heights of the pages, approximated after we render the first page\n  // and then updated for pages that have rendered\n\n\n  var _useState3 = useState([]),\n      pageHeights = _useState3[0],\n      setPageHeights = _useState3[1]; // what we're waiting for onMore to give us\n\n\n  var _useState4 = useState(0),\n      pendingLength = _useState4[0],\n      setPendingLength = _useState4[1];\n\n  var aboveMarkerRef = useRef(); // only when replacing\n\n  var belowMarkerRef = useRef(); // scroll and resize handling\n\n  useEffect(function () {\n    var scrollParents;\n\n    var evaluate = function evaluate() {\n      if (!scrollParents) return;\n      var scrollParent = scrollParents[0]; // Determine the scroll position of the scroll container\n\n      var top;\n      var height;\n\n      if (scrollParent === document) {\n        top = document.documentElement.scrollTop || document.body.scrollTop;\n        height = window.innerHeight;\n      } else {\n        top = scrollParent.scrollTop;\n        var rect = scrollParent.getBoundingClientRect();\n        height = rect.height;\n      }\n\n      var offset = height / 4; // so we pre-load when the user scrolls slowly\n      // Use the pageHeights to determine what pages we should render based\n      // on the current scroll window.\n\n      var nextBeginPage = 0;\n      var index = 0;\n      var pagesHeight = pageHeights[index] || 0;\n\n      while (pageHeights[index + 1] && pagesHeight < top - offset) {\n        index += 1;\n        nextBeginPage += 1;\n        pagesHeight += pageHeights[index];\n      }\n\n      var nextEndPage = nextBeginPage;\n\n      while (pageHeights[index] !== undefined && pagesHeight < top + height + offset) {\n        index += 1;\n        nextEndPage += 1; // when we haven't rendered the nextEndPage and we aren't replacing,\n        // we might not have a height for it yet\n\n        pagesHeight += pageHeights[index] || 0;\n      }\n\n      if (!replace) {\n        // when not replacing, never shrink bounds\n        nextBeginPage = 0;\n        nextEndPage = Math.max(renderPageBounds[1], nextEndPage);\n      }\n\n      if (show) {\n        // ensure we try to render any show page\n        var showPage = calculateLastPageBound(show, step);\n        nextBeginPage = Math.min(showPage, nextBeginPage);\n        nextEndPage = Math.max(showPage, nextEndPage);\n      }\n\n      if (nextBeginPage !== renderPageBounds[0] || nextEndPage !== renderPageBounds[1]) {\n        setRenderPageBounds([nextBeginPage, nextEndPage]);\n      }\n    };\n\n    var timer;\n\n    var debounce = function debounce() {\n      clearTimeout(timer);\n      timer = setTimeout(evaluate, 10);\n    }; // might not be there yet or might have already rendered everything\n\n\n    if (belowMarkerRef.current) {\n      scrollParents = findScrollParents(belowMarkerRef.current);\n      scrollParents.forEach(function (sp) {\n        return sp.addEventListener('scroll', debounce);\n      });\n    }\n\n    window.addEventListener('resize', debounce);\n    evaluate();\n    return function () {\n      if (scrollParents) {\n        scrollParents.forEach(function (sp) {\n          return sp.removeEventListener('scroll', debounce);\n        });\n      }\n\n      window.removeEventListener('resize', debounce);\n      clearTimeout(timer);\n    };\n  }, [pageHeights, renderPageBounds, replace, show, step]); // check if we need to ask for more\n\n  useEffect(function () {\n    if (onMore && renderPageBounds[1] === lastPage && items.length >= pendingLength) {\n      // remember we've asked for more, so we don't keep asking if it takes\n      // a while\n      setPendingLength(items.length + 1);\n      onMore();\n    }\n  }, [items.length, lastPage, onMore, pendingLength, renderPageBounds, step]);\n  useEffect(function () {\n    if (items.length === 0 && lastPage === 0 && pendingLength !== 0) {\n      setPageHeights([]);\n      setPendingLength(0);\n      setRenderPageBounds([0, calculateLastPageBound(show, step)]);\n    }\n  }, [lastPage, pendingLength, show, step, items.length]); // scroll to any 'show'\n\n  useLayoutEffect(function () {\n    // ride out any animation delays, 100ms empirically measured\n    var timer = setTimeout(function () {\n      if (show && belowMarkerRef.current && show !== scrollShow) {\n        // calculate show index based on beginPage\n        var showIndex = show - renderPageBounds[0] * step + (renderPageBounds[0] ? 1 : 0);\n        var showNode = belowMarkerRef.current.parentNode.children.item(showIndex);\n\n        if (showNode) {\n          var scrollParent = findScrollParent(showNode);\n\n          if (isNodeBeforeScroll(showNode, scrollParent)) {\n            showNode.scrollIntoView(true);\n          } else if (isNodeAfterScroll(showNode, scrollParent)) {\n            showNode.scrollIntoView(false);\n          } // clean up after having shown\n\n\n          setScrollShow(show);\n        }\n      }\n    }, 100);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [renderPageBounds, show, step]); // calculate and keep track of page heights\n\n  useLayoutEffect(function () {\n    // if don't have a belowMarker, we must have rendered everything already\n    if (!belowMarkerRef.current) return; // calculate page heights for rendered pages\n\n    var rendered = belowMarkerRef.current.parentNode.children; // ensure we've rendered the state we have\n    // above? + items in rendered pages + below === rendered DOM elements length\n\n    if ((aboveMarkerRef.current ? 1 : 0) + (renderPageBounds[1] - renderPageBounds[0] + 1) * step + 1 === rendered.length) {\n      var nextPageHeights; // step through each page\n\n      var i = renderPageBounds[0];\n      var lastBottom;\n\n      while (i <= renderPageBounds[1]) {\n        var topIndex = (aboveMarkerRef.current ? 1 : 0) + (i - renderPageBounds[0]) * step;\n        var bottomIndex = Math.min(topIndex + step - 1, rendered.length - 1); // we use lastBottom for top to ensure grid layouts work\n\n        var top = lastBottom !== undefined ? lastBottom : rendered.item(topIndex).getBoundingClientRect().top;\n\n        var _rendered$item$getBou = rendered.item(bottomIndex).getBoundingClientRect(),\n            bottom = _rendered$item$getBou.bottom;\n\n        var height = bottom - top;\n\n        if (bottom && (!pageHeights || pageHeights[i] !== height)) {\n          if (!nextPageHeights) nextPageHeights = [].concat(pageHeights || []);\n          nextPageHeights[i] = height;\n        }\n\n        lastBottom = bottom;\n        i += 1;\n      } // estimate page heights for pages we haven't rendered yet\n\n\n      while (replace && i <= lastPage) {\n        if (!pageHeights[i] && pageHeights[i] !== pageHeights[0]) {\n          if (!nextPageHeights) nextPageHeights = [].concat(pageHeights || []);\n          var _nextPageHeights = nextPageHeights;\n          nextPageHeights[i] = _nextPageHeights[0];\n        }\n\n        i += 1;\n      }\n\n      if (nextPageHeights) setPageHeights(nextPageHeights);\n    }\n  }, [lastPage, pageHeights, renderPageBounds, replace, step]); // calculate the height above the first rendered page using the pageHeights\n\n  var aboveHeight = useMemo(function () {\n    if (!replace) return 0;\n    var height = 0;\n    var i = 0;\n\n    while (i < renderPageBounds[0]) {\n      height += pageHeights[i] || 0;\n      i += 1;\n    }\n\n    return height;\n  }, [pageHeights, renderPageBounds, replace]); // calculate the height below the last rendered page using the pageHeights\n\n  var belowHeight = useMemo(function () {\n    if (!replace) return 0;\n    var height = 0;\n    var i = renderPageBounds[1] + 1;\n\n    while (i <= lastPage) {\n      height += pageHeights[i] || 0;\n      i += 1;\n    }\n\n    return height;\n  }, [lastPage, pageHeights, renderPageBounds, replace]);\n  var firstIndex = renderPageBounds[0] * step;\n  var lastIndex = Math.min((renderPageBounds[1] + 1) * step, items.length) - 1;\n  var result = [];\n\n  if (aboveHeight) {\n    var marker = /*#__PURE__*/React.createElement(Box, {\n      key: \"above\",\n      ref: aboveMarkerRef,\n      flex: false,\n      height: aboveHeight + \"px\"\n    });\n\n    if (renderMarker) {\n      // need to give it a key\n      marker = /*#__PURE__*/React.cloneElement(renderMarker(marker), {\n        key: 'above'\n      });\n    }\n\n    result.push(marker);\n  }\n\n  items.slice(firstIndex, lastIndex + 1).forEach(function (item, index) {\n    var itemsIndex = firstIndex + index;\n    var child = children(item, itemsIndex);\n    result.push(child);\n  });\n\n  if (replace || renderPageBounds[1] < lastPage || onMore) {\n    var _marker = /*#__PURE__*/React.createElement(Box, {\n      key: \"below\",\n      ref: !renderMarker && belowMarkerRef || undefined,\n      flex: false,\n      height: (belowHeight || 0) + \"px\"\n    });\n\n    if (renderMarker) {\n      // need to give it a key\n      var renderedMarker = renderMarker(_marker);\n      _marker = /*#__PURE__*/React.cloneElement(renderedMarker, {\n        key: 'below',\n        // We need to make sure our belowMarkerRef is tied to a component\n        // that has the same parent as the items being rendered. This is so\n        // we can use belowMarkerRef.current.parentNode.children to\n        // get a reference to the items in the DOM for calculating pageHeights.\n        //\n        // Since the caller might have included a ref in what their\n        // renderMarker returns, we have to take care of both refs.\n        // https://github.com/facebook/react/issues/8873#issuecomment-489579878\n        ref: function ref(node) {\n          // Keep your own reference\n          belowMarkerRef.current = node; // Call the original ref, if any\n\n          var ref = renderedMarker.ref;\n\n          if (typeof ref === 'function') {\n            ref(node);\n          } else if (ref !== null) {\n            ref.current = node;\n          }\n        }\n      });\n    }\n\n    result.push(_marker);\n  }\n\n  return result;\n};\n\nvar InfiniteScrollDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line global-require\n  InfiniteScrollDoc = require('./doc').doc(InfiniteScroll);\n}\n\nvar InfiniteScrollWrapper = InfiniteScrollDoc || InfiniteScroll;\nexport { InfiniteScrollWrapper as InfiniteScroll };","import React from 'react';\n\nvar createAnnouncer = function createAnnouncer() {\n  var announcer = document.createElement('div');\n  announcer.id = 'grommet-announcer';\n  announcer.style.left = '-100%';\n  announcer.style.right = '100%';\n  announcer.style.position = 'fixed';\n  announcer.style['z-index'] = '-1';\n  document.body.insertBefore(announcer, document.body.firstChild);\n  return announcer;\n};\n\nexport var AnnounceContext = /*#__PURE__*/React.createContext(function (message, mode, timeout) {\n  if (mode === void 0) {\n    mode = 'polite';\n  }\n\n  if (timeout === void 0) {\n    timeout = 500;\n  } // we only create a new container if we don't have one already\n  // we create a separate node so that grommet does not set aria-hidden to it\n\n\n  var announcer = document.body.querySelector(\"#grommet-announcer[aria-live]\") || createAnnouncer();\n  announcer.setAttribute('aria-live', 'off');\n  announcer.innerHTML = message;\n  announcer.setAttribute('aria-live', mode);\n  setTimeout(function () {\n    announcer.innerHTML = '';\n  }, timeout);\n});","import styled, { css } from 'styled-components';\nimport { disabledStyle, getInputPadBySide, inputStyle, parseMetricToNum, plainInputStyle, textAlignStyle } from '../../utils';\nimport { defaultProps } from '../../default-props';\n\nvar getPlainStyle = function getPlainStyle(plain) {\n  if (plain === 'full') {\n    return css([\"\", \" padding:0;\"], plainInputStyle);\n  }\n\n  return plain && plainInputStyle;\n};\n\nvar StyledTextInput = styled.input.withConfig({\n  displayName: \"StyledTextInput\",\n  componentId: \"sc-1x30a0s-0\"\n})([\"\", \" \", \" \", \" \", \" \", \" \", \";\"], inputStyle, function (props) {\n  return getPlainStyle(props.plain);\n}, function (props) {\n  return props.icon && (props.reverse ? \"padding-right: \" + props.theme.global.edgeSize.large + \";\" : \"padding-left: \" + props.theme.global.edgeSize.large + \";\");\n}, function (props) {\n  return props.disabled && disabledStyle(props.theme.textInput.disabled && props.theme.textInput.disabled.opacity);\n}, function (props) {\n  return props.textAlign && textAlignStyle;\n}, function (props) {\n  return props.theme.textInput && props.theme.textInput.extend;\n});\nStyledTextInput.defaultProps = {};\nObject.setPrototypeOf(StyledTextInput.defaultProps, defaultProps);\nvar StyledTextInputContainer = styled.div.withConfig({\n  displayName: \"StyledTextInput__StyledTextInputContainer\",\n  componentId: \"sc-1x30a0s-1\"\n})([\"position:relative;width:100%;\", \";\"], function (props) {\n  return props.theme.textInput && props.theme.textInput.container && props.theme.textInput.container.extend;\n});\nStyledTextInputContainer.defaultProps = {};\nObject.setPrototypeOf(StyledTextInputContainer.defaultProps, defaultProps);\nvar StyledPlaceholder = styled.div.withConfig({\n  displayName: \"StyledTextInput__StyledPlaceholder\",\n  componentId: \"sc-1x30a0s-2\"\n})([\"position:absolute;left:\", \"px;top:50%;transform:translateY(-50%);display:flex;justify-content:center;pointer-events:none;\", \";\"], function (props) {\n  return parseMetricToNum(getInputPadBySide(props, 'left')) - parseMetricToNum(props.theme.global.control.border.width);\n}, function (props) {\n  return props.theme.textInput && props.theme.textInput.placeholder && props.theme.textInput.placeholder.extend;\n});\nStyledPlaceholder.defaultProps = {};\nObject.setPrototypeOf(StyledPlaceholder.defaultProps, defaultProps);\nvar StyledIcon = styled.div.withConfig({\n  displayName: \"StyledTextInput__StyledIcon\",\n  componentId: \"sc-1x30a0s-3\"\n})([\"position:absolute;display:flex;justify:center;top:50%;transform:translateY(-50%);pointer-events:none;\", \"\"], function (props) {\n  return props.reverse ? \"right: \" + getInputPadBySide(props, 'right') + \";\" : \"left: \" + getInputPadBySide(props, 'left') + \";\";\n});\nvar StyledSuggestions = styled.ol.withConfig({\n  displayName: \"StyledTextInput__StyledSuggestions\",\n  componentId: \"sc-1x30a0s-4\"\n})([\"border-top-left-radius:0;border-top-right-radius:0;margin:0;padding:0;list-style-type:none;\", \";\"], function (props) {\n  return props.theme.textInput && props.theme.textInput.suggestions && props.theme.textInput.suggestions.extend;\n});\nStyledSuggestions.defaultProps = {};\nObject.setPrototypeOf(StyledSuggestions.defaultProps, defaultProps);\nexport { StyledTextInput, StyledTextInputContainer, StyledPlaceholder, StyledIcon, StyledSuggestions };","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { forwardRef, useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Drop } from '../Drop';\nimport { InfiniteScroll } from '../InfiniteScroll';\nimport { Keyboard } from '../Keyboard';\nimport { FormContext } from '../Form/FormContext';\nimport { AnnounceContext } from '../../contexts';\nimport { isNodeAfterScroll, isNodeBeforeScroll, sizeStyle, useForwardedRef } from '../../utils';\nimport { StyledTextInput, StyledTextInputContainer, StyledPlaceholder, StyledIcon, StyledSuggestions } from './StyledTextInput';\n\nvar renderLabel = function renderLabel(suggestion) {\n  if (suggestion && typeof suggestion === 'object') {\n    return suggestion.label || suggestion.value;\n  }\n\n  return suggestion;\n};\n\nvar stringLabel = function stringLabel(suggestion) {\n  if (suggestion && typeof suggestion === 'object') {\n    if (suggestion.label && typeof suggestion.label === 'string') {\n      return suggestion.label;\n    }\n\n    return suggestion.value;\n  }\n\n  return suggestion;\n};\n\nvar ContainerBox = styled(Box).withConfig({\n  displayName: \"TextInput__ContainerBox\",\n  componentId: \"sc-1ai0c08-0\"\n})([\"\", \";@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){width:100%;}\"], function (props) {\n  return props.dropHeight ? sizeStyle('max-height', props.dropHeight, props.theme) : 'max-height: inherit;';\n});\nvar defaultDropAlign = {\n  top: 'bottom',\n  left: 'left'\n};\nvar defaultMessages = {\n  enterSelect: '(Press Enter to Select)',\n  suggestionsCount: 'suggestions available',\n  suggestionsExist: 'This input has suggestions use arrow keys to navigate',\n  suggestionIsOpen: 'Suggestions drop is open, continue to use arrow keys to navigate'\n};\nvar TextInput = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var a11yTitle = _ref.a11yTitle,\n      defaultSuggestion = _ref.defaultSuggestion,\n      defaultValue = _ref.defaultValue,\n      _ref$dropAlign = _ref.dropAlign,\n      dropAlign = _ref$dropAlign === void 0 ? defaultDropAlign : _ref$dropAlign,\n      dropHeight = _ref.dropHeight,\n      dropTarget = _ref.dropTarget,\n      dropProps = _ref.dropProps,\n      _ref$focusIndicator = _ref.focusIndicator,\n      focusIndicator = _ref$focusIndicator === void 0 ? true : _ref$focusIndicator,\n      icon = _ref.icon,\n      id = _ref.id,\n      _ref$messages = _ref.messages,\n      messages = _ref$messages === void 0 ? defaultMessages : _ref$messages,\n      name = _ref.name,\n      _onBlur = _ref.onBlur,\n      onChange = _ref.onChange,\n      _onFocus = _ref.onFocus,\n      onKeyDown = _ref.onKeyDown,\n      onSelect = _ref.onSelect,\n      onSuggestionSelect = _ref.onSuggestionSelect,\n      onSuggestionsClose = _ref.onSuggestionsClose,\n      onSuggestionsOpen = _ref.onSuggestionsOpen,\n      placeholder = _ref.placeholder,\n      plain = _ref.plain,\n      readOnly = _ref.readOnly,\n      reverse = _ref.reverse,\n      suggestions = _ref.suggestions,\n      textAlign = _ref.textAlign,\n      valueProp = _ref.value,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"a11yTitle\", \"defaultSuggestion\", \"defaultValue\", \"dropAlign\", \"dropHeight\", \"dropTarget\", \"dropProps\", \"focusIndicator\", \"icon\", \"id\", \"messages\", \"name\", \"onBlur\", \"onChange\", \"onFocus\", \"onKeyDown\", \"onSelect\", \"onSuggestionSelect\", \"onSuggestionsClose\", \"onSuggestionsOpen\", \"placeholder\", \"plain\", \"readOnly\", \"reverse\", \"suggestions\", \"textAlign\", \"value\"]);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n  var announce = useContext(AnnounceContext);\n  var formContext = useContext(FormContext);\n  var inputRef = useForwardedRef(ref);\n  var dropRef = useRef();\n  var suggestionsRef = useRef(); // if this is a readOnly property, don't set a name with the form context\n  // this allows Select to control the form context for the name.\n\n  var _formContext$useFormI = formContext.useFormInput(readOnly ? undefined : name, valueProp),\n      value = _formContext$useFormI[0],\n      setValue = _formContext$useFormI[1];\n\n  var _useState = useState(),\n      focus = _useState[0],\n      setFocus = _useState[1];\n\n  var _useState2 = useState(false),\n      showDrop = _useState2[0],\n      setShowDrop = _useState2[1];\n\n  var handleSuggestionSelect = useMemo(function () {\n    return onSelect && !onSuggestionSelect ? onSelect : onSuggestionSelect;\n  }, [onSelect, onSuggestionSelect]);\n  var handleTextSelect = useMemo(function () {\n    return onSelect && onSuggestionSelect ? onSelect : undefined;\n  }, [onSelect, onSuggestionSelect]);\n\n  var _useState3 = useState(),\n      suggestionsAtClose = _useState3[0],\n      setSuggestionsAtClose = _useState3[1];\n\n  var openDrop = useCallback(function () {\n    setShowDrop(true);\n    announce(messages.suggestionIsOpen);\n    announce(suggestions.length + \" \" + messages.suggestionsCount);\n    if (onSuggestionsOpen) onSuggestionsOpen();\n  }, [announce, messages.suggestionsCount, messages.suggestionIsOpen, onSuggestionsOpen, suggestions]);\n  var closeDrop = useCallback(function () {\n    setSuggestionsAtClose(suggestions); // must be before closing drop\n\n    setShowDrop(false);\n    if (messages.onSuggestionsClose) onSuggestionsClose();\n    if (onSuggestionsClose) onSuggestionsClose();\n  }, [messages.onSuggestionsClose, onSuggestionsClose, suggestions]); // Handle scenarios where we have focus, the drop isn't showing,\n  // and the suggestions change. We don't want to open the drop if\n  // the drop has been closed by onEsc and the suggestions haven't\n  // changed. So, we remember the suggestions we are showing when\n  // the drop was closed and only re-open it when the suggestions\n  // subsequently change.\n\n  useEffect(function () {\n    if (focus && !showDrop && suggestions && suggestions.length && (!suggestionsAtClose || suggestionsAtClose.length !== suggestions.length)) {\n      openDrop();\n    }\n  }, [focus, openDrop, showDrop, suggestions, suggestionsAtClose]); // if we have no suggestions, close drop if it's open\n\n  useEffect(function () {\n    if (showDrop && (!suggestions || !suggestions.length)) closeDrop();\n  }, [closeDrop, showDrop, suggestions]);\n  var valueSuggestionIndex = useMemo(function () {\n    return suggestions ? suggestions.map(function (suggestion) {\n      return typeof suggestion === 'object' ? suggestion.value : suggestion;\n    }).indexOf(value) : -1;\n  }, [suggestions, value]); // choose the best suggestion, either the explicit default or the one\n  // that matches the current value\n\n  var resetSuggestionIndex = useMemo(function () {\n    if (valueSuggestionIndex === -1 && typeof defaultSuggestion === 'number') {\n      return defaultSuggestion;\n    }\n\n    return valueSuggestionIndex;\n  }, [defaultSuggestion, valueSuggestionIndex]); // activeSuggestionIndex unifies mouse and keyboard interaction of\n  // the suggestions\n\n  var _useState4 = useState(resetSuggestionIndex),\n      activeSuggestionIndex = _useState4[0],\n      setActiveSuggestionIndex = _useState4[1]; // Only update active suggestion index when the mouse actually moves,\n  // not when suggestions are moving under the mouse.\n\n\n  var _useState5 = useState(),\n      mouseMovedSinceLastKey = _useState5[0],\n      setMouseMovedSinceLastKey = _useState5[1]; // set activeSuggestionIndex when value changes\n\n\n  useEffect(function () {\n    return setActiveSuggestionIndex(valueSuggestionIndex);\n  }, [valueSuggestionIndex]); // reset activeSuggestionIndex when the drop is closed\n\n  useEffect(function () {\n    if (!showDrop) setActiveSuggestionIndex(resetSuggestionIndex);\n  }, [resetSuggestionIndex, showDrop]); // announce active suggestion\n\n  useEffect(function () {\n    if (activeSuggestionIndex >= 0) {\n      var label = stringLabel(suggestions[activeSuggestionIndex]);\n      announce(label + \" \" + messages.enterSelect);\n    }\n  }, [activeSuggestionIndex, announce, messages, suggestions]); // make sure activeSuggestion is visible in scroll\n\n  useEffect(function () {\n    var timer = setTimeout(function () {\n      var list = suggestionsRef.current;\n\n      if (showDrop && activeSuggestionIndex !== -1 && list) {\n        var container = list.parentNode;\n        var item = list.children[activeSuggestionIndex];\n\n        if (container.scrollTo) {\n          if (isNodeAfterScroll(item, container)) container.scrollTo(0, item.offsetTop - (container.getBoundingClientRect().height - item.getBoundingClientRect().height));else if (isNodeBeforeScroll(item, container)) container.scrollTo(0, item.offsetTop);\n        }\n      }\n    }, 50); // delay to allow Drop to animate in\n\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [activeSuggestionIndex, showDrop]);\n\n  var setValueFromSuggestion = function setValueFromSuggestion(event, suggestion) {\n    // if we stole the focus in the drop, perhaps by interacting with\n    // a suggestion button or the scrollbar, give it back\n    inputRef.current.focus();\n    inputRef.current.value = suggestion; // needed for uncontrolled cases\n\n    closeDrop();\n\n    if (handleSuggestionSelect) {\n      if (event.persist) event.persist();\n      var adjustedEvent = event;\n      adjustedEvent.suggestion = suggestion;\n      handleSuggestionSelect(adjustedEvent);\n    }\n\n    setValue(suggestion);\n  };\n\n  var onNextSuggestion = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = Math.min(activeSuggestionIndex + 1, suggestions.length - 1);\n    setActiveSuggestionIndex(nextActiveIndex);\n    setMouseMovedSinceLastKey(false);\n  }, [activeSuggestionIndex, suggestions]);\n  var onPreviousSuggestion = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = Math.max(activeSuggestionIndex - 1, 0);\n    setActiveSuggestionIndex(nextActiveIndex);\n    setMouseMovedSinceLastKey(false);\n  }, [activeSuggestionIndex]);\n\n  var _useState6 = useState(placeholder && typeof placeholder !== 'string' && !(inputRef.current && inputRef.current.value) && !value),\n      showStyledPlaceholder = _useState6[0],\n      setShowStyledPlaceholder = _useState6[1];\n\n  var drop;\n  var extraProps = {\n    onSelect: handleTextSelect\n  };\n\n  if (showDrop) {\n    drop = /*#__PURE__*/React.createElement(Drop, _extends({\n      ref: dropRef,\n      id: id ? \"text-input-drop__\" + id : undefined,\n      align: dropAlign,\n      responsive: false,\n      target: dropTarget || inputRef.current,\n      onClickOutside: closeDrop,\n      onEsc: closeDrop\n    }, dropProps), /*#__PURE__*/React.createElement(ContainerBox, {\n      overflow: \"auto\",\n      dropHeight: dropHeight,\n      onMouseMove: function onMouseMove() {\n        return setMouseMovedSinceLastKey(true);\n      }\n    }, /*#__PURE__*/React.createElement(StyledSuggestions, {\n      ref: suggestionsRef\n    }, /*#__PURE__*/React.createElement(InfiniteScroll, {\n      items: suggestions,\n      step: theme.select.step,\n      show: activeSuggestionIndex !== -1 ? activeSuggestionIndex : undefined\n    }, function (suggestion, index, itemRef) {\n      // Determine whether the label is done as a child or\n      // as an option Button kind property.\n      var renderedLabel = renderLabel(suggestion);\n      var child;\n      if (typeof renderedLabel !== 'string') // must be an element rendered by suggestions.label\n        child = renderedLabel;else if (!theme.button.option) // don't have theme support, need to layout here\n        child = /*#__PURE__*/React.createElement(Box, {\n          align: \"start\",\n          pad: \"small\"\n        }, renderedLabel); // if we have a child, turn on plain\n\n      return /*#__PURE__*/React.createElement(\"li\", {\n        key: stringLabel(suggestion) + \"-\" + index,\n        ref: itemRef\n      }, /*#__PURE__*/React.createElement(Button, {\n        active: activeSuggestionIndex === index,\n        fill: true,\n        plain: !child ? undefined : true,\n        align: \"start\",\n        kind: !child ? 'option' : undefined,\n        label: !child ? renderedLabel : undefined,\n        onClick: function onClick(event) {\n          return setValueFromSuggestion(event, suggestion);\n        },\n        onMouseMove: mouseMovedSinceLastKey && activeSuggestionIndex !== index ? function () {\n          return setActiveSuggestionIndex(index);\n        } : undefined\n      }, child));\n    }))));\n  }\n\n  var keyboardProps = {\n    onKeyDown: onKeyDown\n  };\n\n  if (showDrop) {\n    keyboardProps.onEnter = function (event) {\n      // prevent submitting forms via Enter when the drop is open\n      event.preventDefault();\n      if (activeSuggestionIndex >= 0) setValueFromSuggestion(event, suggestions[activeSuggestionIndex]);else closeDrop();\n    };\n\n    if (activeSuggestionIndex > 0) keyboardProps.onUp = onPreviousSuggestion;\n    if (activeSuggestionIndex < suggestions.length - 1) keyboardProps.onDown = onNextSuggestion;\n    keyboardProps.onTab = closeDrop;\n  } else if (suggestions && suggestions.length > 0) {\n    keyboardProps.onDown = openDrop;\n  } // For the Keyboard target below, if we have focus,\n  // either on the input element or within the drop,\n  // then we set the target to the document,\n  // otherwise we only listen to onDown on the input element itself,\n  // primarily for tests.\n\n\n  return /*#__PURE__*/React.createElement(StyledTextInputContainer, {\n    plain: plain\n  }, showStyledPlaceholder && /*#__PURE__*/React.createElement(StyledPlaceholder, null, placeholder), icon && /*#__PURE__*/React.createElement(StyledIcon, {\n    reverse: reverse,\n    theme: theme\n  }, icon), /*#__PURE__*/React.createElement(Keyboard, _extends({\n    target: focus ? 'document' : undefined\n  }, keyboardProps), /*#__PURE__*/React.createElement(StyledTextInput, _extends({\n    \"aria-label\": a11yTitle,\n    ref: inputRef,\n    id: id,\n    name: name,\n    autoComplete: \"off\",\n    plain: plain,\n    placeholder: typeof placeholder === 'string' ? placeholder : undefined,\n    icon: icon,\n    reverse: reverse,\n    focus: focus,\n    focusIndicator: focusIndicator,\n    textAlign: textAlign\n  }, rest, extraProps, {\n    defaultValue: renderLabel(defaultValue),\n    value: renderLabel(value),\n    readOnly: readOnly,\n    onFocus: function onFocus(event) {\n      // Don't do anything if we are acting like we already have\n      // focus. This can happen when this input loses focus temporarily\n      // to our drop, see onBlur() handler below.\n      if (!focus) {\n        setFocus(true);\n\n        if (suggestions && suggestions.length > 0) {\n          announce(messages.suggestionsExist);\n          openDrop();\n        }\n\n        if (_onFocus) _onFocus(event);\n      }\n    },\n    onBlur: function onBlur(event) {\n      // Only treat it as a blur if the element receiving focus\n      // isn't in our drop. The relatedTarget will be our drop\n      // when the user clicks on a suggestion or interacts with the\n      // scrollbar in the drop.\n      if (!event.relatedTarget || event.relatedTarget !== dropRef.current) {\n        setFocus(false);\n        if (_onBlur) _onBlur(event);\n      }\n    },\n    onChange: readOnly ? undefined : function (event) {\n      // when TextInput is not contained in a Form, no re-render\n      // will come from this onChange and remove the placeholder\n      // so we need to update state to ensure the styled\n      // placeholder only appears when there is no value\n      setShowStyledPlaceholder(placeholder && typeof placeholder !== 'string' && !event.target.value);\n      setValue(event.target.value);\n      setActiveSuggestionIndex(resetSuggestionIndex);\n      if (onChange) onChange(event);\n    }\n  }))), drop);\n});\nTextInput.displayName = 'TextInput';\nvar TextInputDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line global-require\n  TextInputDoc = require('./doc').doc(TextInput);\n}\n\nvar TextInputWrapper = TextInputDoc || TextInput;\nexport { TextInputWrapper as TextInput };","import styled from 'styled-components';\nimport { sizeStyle } from '../../utils';\nexport var StyledContainer = styled.div.withConfig({\n  displayName: \"StyledSelect__StyledContainer\",\n  componentId: \"znp66n-0\"\n})([\"@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){width:100%;}\", \";\", \";\"], function (props) {\n  return props.dropHeight ? sizeStyle('max-height', props.dropHeight, props.theme) : 'max-height: inherit;';\n}, function (props) {\n  return props.theme.select.container && props.theme.select.container.extend;\n});","export var applyKey = function applyKey(option, key) {\n  if (option === undefined) return undefined;\n  if (typeof key === 'object') return applyKey(option, key.key);\n  if (typeof key === 'function') return key(option);\n  if (key !== undefined) return option[key];\n  return option;\n};","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { forwardRef, useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { selectedStyle, setFocusWithoutScroll } from '../../utils';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { InfiniteScroll } from '../InfiniteScroll';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { TextInput } from '../TextInput';\nimport { StyledContainer } from './StyledSelect';\nimport { applyKey } from './utils'; // position relative is so scroll can be managed correctly\n\nvar OptionsBox = styled.div.withConfig({\n  displayName: \"SelectContainer__OptionsBox\",\n  componentId: \"sc-1wi0ul8-0\"\n})([\"position:relative;scroll-behavior:smooth;overflow:auto;outline:none;\"]);\nvar OptionBox = styled(Box).withConfig({\n  displayName: \"SelectContainer__OptionBox\",\n  componentId: \"sc-1wi0ul8-1\"\n})([\"\", \"\"], function (props) {\n  return props.selected && selectedStyle;\n});\nvar SelectOption = styled(Button).withConfig({\n  displayName: \"SelectContainer__SelectOption\",\n  componentId: \"sc-1wi0ul8-2\"\n})([\"display:block;width:100%;\"]);\n\nvar ClearButton = function ClearButton(_ref) {\n  var clear = _ref.clear,\n      onClear = _ref.onClear,\n      name = _ref.name,\n      theme = _ref.theme,\n      setFocus = _ref.setFocus;\n  var label = clear.label,\n      position = clear.position;\n  var align = position !== 'bottom' ? 'start' : 'center';\n  var buttonLabel = label || \"Clear \" + (name || 'selection');\n  return /*#__PURE__*/React.createElement(Button, {\n    onClick: onClear,\n    onFocus: function onFocus() {\n      return setFocus(true);\n    },\n    onBlur: function onBlur() {\n      return setFocus(false);\n    }\n  }, /*#__PURE__*/React.createElement(Box, _extends({}, theme.select.clear.container, {\n    align: align\n  }), /*#__PURE__*/React.createElement(Text, theme.select.clear.text, buttonLabel)));\n};\n\nvar SelectContainer = /*#__PURE__*/forwardRef(function (_ref2, ref) {\n  var clear = _ref2.clear,\n      _ref2$children = _ref2.children,\n      children = _ref2$children === void 0 ? null : _ref2$children,\n      disabled = _ref2.disabled,\n      disabledKey = _ref2.disabledKey,\n      dropHeight = _ref2.dropHeight,\n      _ref2$emptySearchMess = _ref2.emptySearchMessage,\n      emptySearchMessage = _ref2$emptySearchMess === void 0 ? 'No matches found' : _ref2$emptySearchMess,\n      id = _ref2.id,\n      labelKey = _ref2.labelKey,\n      multiple = _ref2.multiple,\n      name = _ref2.name,\n      onChange = _ref2.onChange,\n      onKeyDown = _ref2.onKeyDown,\n      onMore = _ref2.onMore,\n      onSearch = _ref2.onSearch,\n      optionIndexesInValue = _ref2.optionIndexesInValue,\n      options = _ref2.options,\n      allOptions = _ref2.allOptions,\n      searchPlaceholder = _ref2.searchPlaceholder,\n      search = _ref2.search,\n      setSearch = _ref2.setSearch,\n      selected = _ref2.selected,\n      _ref2$value = _ref2.value,\n      value = _ref2$value === void 0 ? '' : _ref2$value,\n      valueKey = _ref2.valueKey,\n      _ref2$replace = _ref2.replace,\n      replace = _ref2$replace === void 0 ? true : _ref2$replace;\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n\n  var _useState = useState(-1),\n      activeIndex = _useState[0],\n      setActiveIndex = _useState[1];\n\n  var _useState2 = useState(),\n      keyboardNavigation = _useState2[0],\n      setKeyboardNavigation = _useState2[1];\n\n  var _useState3 = useState(false),\n      focus = _useState3[0],\n      setFocus = _useState3[1];\n\n  var searchRef = useRef();\n  var optionsRef = useRef(); // adjust activeIndex when options change\n\n  useEffect(function () {\n    if (activeIndex === -1 && search && optionIndexesInValue.length) {\n      setActiveIndex(optionIndexesInValue[0]);\n    }\n  }, [activeIndex, optionIndexesInValue, search]); // set initial focus\n\n  useEffect(function () {\n    // need to wait for Drop to be ready\n    var timer = setTimeout(function () {\n      var optionsNode = optionsRef.current;\n\n      if (onSearch) {\n        var searchInput = searchRef.current;\n\n        if (searchInput && searchInput.focus) {\n          setFocusWithoutScroll(searchInput);\n        }\n      } else if (optionsNode) {\n        setFocusWithoutScroll(optionsNode);\n      }\n    }, 100);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [onSearch]); // clear keyboardNavigation after a while\n\n  useEffect(function () {\n    if (keyboardNavigation) {\n      // 100ms was empirically determined\n      var timer = setTimeout(function () {\n        return setKeyboardNavigation(false);\n      }, 100);\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n\n    return undefined;\n  }, [keyboardNavigation]);\n  var optionLabel = useCallback(function (index) {\n    return applyKey(options[index], labelKey);\n  }, [labelKey, options]);\n  var optionValue = useCallback(function (index) {\n    return applyKey(options[index], valueKey);\n  }, [options, valueKey]);\n  var isDisabled = useCallback(function (index) {\n    var option = options[index];\n    var result;\n\n    if (disabledKey) {\n      result = applyKey(option, disabledKey);\n    } else if (Array.isArray(disabled)) {\n      if (typeof disabled[0] === 'number') {\n        result = disabled.indexOf(index) !== -1;\n      } else {\n        var optionVal = optionValue(index);\n        result = disabled.indexOf(optionVal) !== -1;\n      }\n    }\n\n    return result;\n  }, [disabled, disabledKey, options, optionValue]);\n  var isSelected = useCallback(function (index) {\n    var result;\n\n    if (selected) {\n      // deprecated in favor of value\n      result = selected.indexOf(index) !== -1;\n    } else {\n      var optionVal = optionValue(index);\n\n      if (Array.isArray(value)) {\n        if (value.length === 0) {\n          result = false;\n        } else if (typeof value[0] !== 'object') {\n          result = value.indexOf(optionVal) !== -1;\n        } else if (valueKey) {\n          result = value.some(function (valueItem) {\n            var valueValue = typeof valueKey === 'function' ? valueKey(valueItem) : valueItem[valueKey];\n            return valueValue === optionVal;\n          });\n        }\n      } else if (valueKey && typeof value === 'object') {\n        var valueValue = typeof valueKey === 'function' ? valueKey(value) : value[valueKey];\n        result = valueValue === optionVal;\n      } else {\n        result = value === optionVal;\n      }\n    }\n\n    return result;\n  }, [optionValue, selected, value, valueKey]);\n  var selectOption = useCallback(function (index) {\n    return function (event) {\n      if (onChange) {\n        var nextValue;\n        var nextSelected;\n\n        if (multiple) {\n          var nextOptionIndexesInValue = optionIndexesInValue.slice(0);\n          var allOptionsIndex = allOptions.indexOf(options[index]);\n          var valueIndex = optionIndexesInValue.indexOf(allOptionsIndex);\n\n          if (valueIndex === -1) {\n            nextOptionIndexesInValue.push(allOptionsIndex);\n          } else {\n            nextOptionIndexesInValue.splice(valueIndex, 1);\n          }\n\n          nextValue = nextOptionIndexesInValue.map(function (i) {\n            return valueKey && valueKey.reduce ? applyKey(allOptions[i], valueKey) : allOptions[i];\n          });\n          nextSelected = nextOptionIndexesInValue;\n        } else {\n          nextValue = valueKey && valueKey.reduce ? applyKey(options[index], valueKey) : options[index];\n          nextSelected = index;\n        }\n\n        onChange(event, {\n          option: options[index],\n          value: nextValue,\n          selected: nextSelected\n        });\n      }\n    };\n  }, [multiple, onChange, optionIndexesInValue, options, allOptions, valueKey]);\n  var onClear = useCallback(function (event) {\n    onChange(event, {\n      option: undefined,\n      value: '',\n      selected: ''\n    });\n  }, [onChange]);\n  var onNextOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex + 1;\n\n    while (nextActiveIndex < options.length && isDisabled(nextActiveIndex)) {\n      nextActiveIndex += 1;\n    }\n\n    if (nextActiveIndex !== options.length) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex, isDisabled, options]);\n  var onPreviousOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex - 1;\n\n    while (nextActiveIndex >= 0 && isDisabled(nextActiveIndex)) {\n      nextActiveIndex -= 1;\n    }\n\n    if (nextActiveIndex >= 0) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex, isDisabled]);\n  var onKeyDownOption = useCallback(function (event) {\n    if (!onSearch) {\n      var nextActiveIndex = options.findIndex(function (e, index) {\n        var label;\n\n        if (typeof e === 'object') {\n          label = e.label || applyKey(e, labelKey);\n        } else {\n          label = e;\n        }\n\n        return typeof label === 'string' && label.charAt(0).toLowerCase() === event.key.toLowerCase() && !isDisabled(index);\n      });\n\n      if (nextActiveIndex >= 0) {\n        event.preventDefault();\n        setActiveIndex(nextActiveIndex);\n        setKeyboardNavigation(true);\n      }\n    }\n\n    if (onKeyDown) {\n      onKeyDown(event);\n    }\n  }, [onKeyDown, options, isDisabled, onSearch, labelKey]);\n  var onActiveOption = useCallback(function (index) {\n    return function () {\n      if (!keyboardNavigation) setActiveIndex(index);\n    };\n  }, [keyboardNavigation]);\n  var onSelectOption = useCallback(function (event) {\n    if (activeIndex >= 0 && !focus) {\n      event.preventDefault(); // prevent submitting forms\n\n      selectOption(activeIndex)(event);\n    }\n  }, [activeIndex, selectOption, focus]);\n  var customSearchInput = theme.select.searchInput;\n  var SelectTextInput = customSearchInput || TextInput;\n  var selectOptionsStyle = theme.select.options ? _extends({}, theme.select.options.box, theme.select.options.container) : {};\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: onSelectOption,\n    onUp: onPreviousOption,\n    onDown: onNextOption,\n    onKeyDown: onKeyDownOption\n  }, /*#__PURE__*/React.createElement(StyledContainer, {\n    ref: ref,\n    as: Box,\n    id: id ? id + \"__select-drop\" : undefined,\n    dropHeight: dropHeight\n  }, onSearch && /*#__PURE__*/React.createElement(Box, {\n    pad: !customSearchInput ? 'xsmall' : undefined,\n    flex: false\n  }, /*#__PURE__*/React.createElement(SelectTextInput, {\n    focusIndicator: !customSearchInput,\n    size: \"small\",\n    ref: searchRef,\n    type: \"search\",\n    value: search || '',\n    placeholder: searchPlaceholder,\n    onChange: function onChange(event) {\n      var nextSearch = event.target.value;\n      setSearch(nextSearch);\n      setActiveIndex(-1);\n      onSearch(nextSearch);\n    }\n  })), clear && clear.position !== 'bottom' && value && /*#__PURE__*/React.createElement(ClearButton, {\n    clear: clear,\n    name: name,\n    onClear: onClear,\n    theme: theme,\n    setFocus: setFocus\n  }), /*#__PURE__*/React.createElement(OptionsBox, {\n    role: \"menubar\",\n    tabIndex: \"-1\",\n    ref: optionsRef\n  }, options.length > 0 ? /*#__PURE__*/React.createElement(InfiniteScroll, {\n    items: options,\n    step: theme.select.step,\n    onMore: onMore,\n    replace: replace,\n    show: activeIndex !== -1 ? activeIndex : undefined\n  }, function (option, index, optionRef) {\n    var optionDisabled = isDisabled(index);\n    var optionSelected = isSelected(index);\n    var optionActive = activeIndex === index; // Determine whether the label is done as a child or\n    // as an option Button kind property.\n\n    var child;\n    if (children) child = children(option, index, options, {\n      active: optionActive,\n      disabled: optionDisabled,\n      selected: optionSelected\n    });else if (theme.select.options) child = /*#__PURE__*/React.createElement(OptionBox, _extends({}, selectOptionsStyle, {\n      selected: optionSelected\n    }), /*#__PURE__*/React.createElement(Text, theme.select.options.text, optionLabel(index))); // if we have a child, turn on plain, and hoverIndicator\n\n    return /*#__PURE__*/React.createElement(SelectOption // eslint-disable-next-line react/no-array-index-key\n    , {\n      key: index,\n      ref: optionRef,\n      tabIndex: \"-1\",\n      role: \"menuitem\",\n      plain: !child ? undefined : true,\n      align: \"start\",\n      kind: !child ? 'option' : undefined,\n      hoverIndicator: !child ? undefined : 'background',\n      label: !child ? optionLabel(index) : undefined,\n      disabled: optionDisabled || undefined,\n      active: optionActive,\n      selected: optionSelected,\n      option: option,\n      onMouseOver: !optionDisabled ? onActiveOption(index) : undefined,\n      onClick: !optionDisabled ? selectOption(index) : undefined\n    }, child);\n  }) : /*#__PURE__*/React.createElement(SelectOption, {\n    key: \"search_empty\",\n    tabIndex: \"-1\",\n    role: \"menuitem\",\n    hoverIndicator: \"background\",\n    disabled: true,\n    option: emptySearchMessage\n  }, /*#__PURE__*/React.createElement(OptionBox, selectOptionsStyle, /*#__PURE__*/React.createElement(Text, theme.select.container.text, emptySearchMessage)))), clear && clear.position === 'bottom' && value && /*#__PURE__*/React.createElement(ClearButton, {\n    clear: clear,\n    name: name,\n    onClear: onClear,\n    theme: theme,\n    setFocus: setFocus\n  })));\n});\nexport { SelectContainer };","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { forwardRef, isValidElement, useCallback, useContext, useMemo, useState, useRef, useEffect } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { controlBorderStyle, normalizeColor } from '../../utils';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { DropButton } from '../DropButton';\nimport { Keyboard } from '../Keyboard';\nimport { FormContext } from '../Form/FormContext';\nimport { TextInput } from '../TextInput';\nimport { SelectContainer } from './SelectContainer';\nimport { applyKey } from './utils';\nvar SelectTextInput = styled(TextInput).withConfig({\n  displayName: \"Select__SelectTextInput\",\n  componentId: \"sc-17idtfo-0\"\n})([\"cursor:\", \";\"], function (props) {\n  return props.defaultCursor ? 'default' : 'pointer';\n});\nvar HiddenInput = styled.input.withConfig({\n  displayName: \"Select__HiddenInput\",\n  componentId: \"sc-17idtfo-1\"\n})([\"display:none;\"]);\nvar StyledSelectDropButton = styled(DropButton).withConfig({\n  displayName: \"Select__StyledSelectDropButton\",\n  componentId: \"sc-17idtfo-2\"\n})([\"\", \";\", \";\", \";\"], function (props) {\n  return !props.callerPlain && controlBorderStyle;\n}, function (props) {\n  return props.theme.select && props.theme.select.control && props.theme.select.control.extend;\n}, function (props) {\n  return props.open && props.theme.select.control.open;\n});\nStyledSelectDropButton.defaultProps = {};\nObject.setPrototypeOf(StyledSelectDropButton.defaultProps, defaultProps);\nvar defaultDropAlign = {\n  top: 'bottom',\n  left: 'left'\n};\nvar defaultMessages = {\n  multiple: 'multiple'\n};\nvar Select = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var a11yTitle = _ref.a11yTitle,\n      alignSelf = _ref.alignSelf,\n      children = _ref.children,\n      _ref$clear = _ref.clear,\n      clear = _ref$clear === void 0 ? false : _ref$clear,\n      _ref$closeOnChange = _ref.closeOnChange,\n      closeOnChange = _ref$closeOnChange === void 0 ? true : _ref$closeOnChange,\n      defaultValue = _ref.defaultValue,\n      disabled = _ref.disabled,\n      disabledKey = _ref.disabledKey,\n      _ref$dropAlign = _ref.dropAlign,\n      dropAlign = _ref$dropAlign === void 0 ? defaultDropAlign : _ref$dropAlign,\n      dropHeight = _ref.dropHeight,\n      dropProps = _ref.dropProps,\n      dropTarget = _ref.dropTarget,\n      emptySearchMessage = _ref.emptySearchMessage,\n      focusIndicator = _ref.focusIndicator,\n      gridArea = _ref.gridArea,\n      id = _ref.id,\n      icon = _ref.icon,\n      labelKey = _ref.labelKey,\n      margin = _ref.margin,\n      _ref$messages = _ref.messages,\n      messages = _ref$messages === void 0 ? defaultMessages : _ref$messages,\n      multiple = _ref.multiple,\n      name = _ref.name,\n      onChange = _ref.onChange,\n      onClick = _ref.onClick,\n      onClose = _ref.onClose,\n      onKeyDown = _ref.onKeyDown,\n      onMore = _ref.onMore,\n      onOpen = _ref.onOpen,\n      onSearch = _ref.onSearch,\n      propOpen = _ref.open,\n      optionsProp = _ref.options,\n      placeholder = _ref.placeholder,\n      plain = _ref.plain,\n      replace = _ref.replace,\n      searchPlaceholder = _ref.searchPlaceholder,\n      selected = _ref.selected,\n      size = _ref.size,\n      valueProp = _ref.value,\n      valueKey = _ref.valueKey,\n      valueLabel = _ref.valueLabel,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"a11yTitle\", \"alignSelf\", \"children\", \"clear\", \"closeOnChange\", \"defaultValue\", \"disabled\", \"disabledKey\", \"dropAlign\", \"dropHeight\", \"dropProps\", \"dropTarget\", \"emptySearchMessage\", \"focusIndicator\", \"gridArea\", \"id\", \"icon\", \"labelKey\", \"margin\", \"messages\", \"multiple\", \"name\", \"onChange\", \"onClick\", \"onClose\", \"onKeyDown\", \"onMore\", \"onOpen\", \"onSearch\", \"open\", \"options\", \"placeholder\", \"plain\", \"replace\", \"searchPlaceholder\", \"selected\", \"size\", \"value\", \"valueKey\", \"valueLabel\"]);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n  var inputRef = useRef();\n  var formContext = useContext(FormContext); // value is used for what we receive in valueProp and the basis for\n  // what we send with onChange\n  // When 'valueKey' sets 'reduce', the value(s) here should match\n  // what the 'valueKey' would return for the corresponding\n  // selected option object.\n  // Otherwise, the value(s) should match the selected options.\n\n  var _formContext$useFormI = formContext.useFormInput(name, valueProp, defaultValue || ''),\n      value = _formContext$useFormI[0],\n      setValue = _formContext$useFormI[1]; // valuedValue is the value mapped with any valueKey applied\n  // When the options array contains objects, this property indicates how\n  // to retrieve the value of each option.\n  // If a string is provided, it is used as the key to retrieve a\n  // property of an option object.\n  // If a function is provided, it is called with the option and should\n  // return the value.\n  // If reduce is true, this value will be used for the 'value'\n  // delivered via 'onChange'.\n\n\n  var valuedValue = useMemo(function () {\n    if (Array.isArray(value)) return value.map(function (v) {\n      return valueKey && valueKey.reduce ? v : applyKey(v, valueKey);\n    });\n    return valueKey && valueKey.reduce ? value : applyKey(value, valueKey);\n  }, [value, valueKey]); // search input value\n\n  var _useState = useState(),\n      search = _useState[0],\n      setSearch = _useState[1]; // All select option indices and values\n\n\n  var _useState2 = useState(optionsProp),\n      allOptions = _useState2[0],\n      setAllOptions = _useState2[1]; // Track changes to options property, except when options are being\n  // updated due to search activity. Allows option's initial index value\n  // to be referenced when filtered by search.\n\n\n  useEffect(function () {\n    if (!search) setAllOptions(optionsProp);\n  }, [optionsProp, search]); // the option indexes present in the value\n\n  var optionIndexesInValue = useMemo(function () {\n    var result = [];\n    allOptions.forEach(function (option, index) {\n      if (selected !== undefined) {\n        if (Array.isArray(selected)) {\n          if (selected.indexOf(index) !== -1) result.push(index);\n        } else if (index === selected) {\n          result.push(index);\n        }\n      } else if (Array.isArray(valuedValue)) {\n        if (valuedValue.some(function (v) {\n          return v === applyKey(option, valueKey);\n        })) {\n          result.push(index);\n        }\n      } else if (valuedValue === applyKey(option, valueKey)) {\n        result.push(index);\n      }\n    });\n    return result;\n  }, [allOptions, selected, valueKey, valuedValue]);\n\n  var _useState3 = useState(propOpen),\n      open = _useState3[0],\n      setOpen = _useState3[1];\n\n  useEffect(function () {\n    return setOpen(propOpen);\n  }, [propOpen]);\n  var onRequestOpen = useCallback(function () {\n    if (open) return;\n    setOpen(true);\n    if (onOpen) onOpen();\n  }, [onOpen, open]);\n  var onRequestClose = useCallback(function () {\n    setOpen(false);\n    if (onClose) onClose();\n  }, [onClose]);\n  var triggerChangeEvent = useCallback(function (nextValue) {\n    // Calling set value function directly on input because React library\n    // overrides setter `event.target.value =` and loses original event\n    // target fidelity.\n    // https://stackoverflow.com/a/46012210\n    var nativeInputValueSetter = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, 'value').set;\n    nativeInputValueSetter.call(inputRef.current, nextValue);\n    var event = new Event('input', {\n      bubbles: true\n    });\n    inputRef.current.dispatchEvent(event);\n  }, []);\n  var onSelectChange = useCallback(function (event, _ref2) {\n    var option = _ref2.option,\n        nextValue = _ref2.value,\n        nextSelected = _ref2.selected;\n    if (closeOnChange) onRequestClose(); // nextValue must not be of type object to set value directly on the\n    // input. if it is an object, then the user has not provided necessary\n    // props to reduce object option\n\n    if (typeof nextValue !== 'object' && nextValue !== event.target.value && inputRef.current) {\n      // select registers changing option as a click event or keydown.\n      // when in a form, we need to programatically trigger a change\n      // event in order for the change event to be registered upstream\n      // necessary for change validation in form\n      triggerChangeEvent(nextValue);\n    }\n\n    setValue(nextValue);\n\n    if (onChange) {\n      event.persist();\n      var adjustedEvent; // support for native event used by Preact\n\n      if (event instanceof Event) {\n        adjustedEvent = new event.constructor(event.type, event);\n        Object.defineProperties(adjustedEvent, {\n          target: {\n            value: inputRef.current\n          },\n          value: {\n            value: nextValue\n          },\n          option: {\n            value: option\n          },\n          selected: {\n            value: nextSelected\n          }\n        });\n      } else {\n        adjustedEvent = event;\n        adjustedEvent.target = inputRef.current;\n        adjustedEvent.value = nextValue;\n        adjustedEvent.option = option;\n        adjustedEvent.selected = nextSelected;\n      }\n\n      onChange(adjustedEvent);\n    }\n\n    setSearch();\n  }, [closeOnChange, onChange, onRequestClose, setValue, triggerChangeEvent]);\n  var SelectIcon;\n\n  switch (icon) {\n    case false:\n      break;\n\n    case true:\n    case undefined:\n      SelectIcon = open && theme.select.icons.up ? theme.select.icons.up : theme.select.icons.down;\n      break;\n\n    default:\n      SelectIcon = icon;\n  } // element to show, trumps inputValue\n\n\n  var selectValue = useMemo(function () {\n    if (valueLabel) return valueLabel;\n    if ( /*#__PURE__*/React.isValidElement(value)) return value; // deprecated\n\n    return undefined;\n  }, [value, valueLabel]); // text to show\n  // When the options array contains objects, this property indicates how\n  // to retrieve the value of each option.\n  // If a string is provided, it is used as the key to retrieve a\n  // property of an option object.\n  // If a function is provided, it is called with the option and should\n  // return the value.\n  // If reduce is true, this value will be used for the 'value'\n  // delivered via 'onChange'.\n\n  var inputValue = useMemo(function () {\n    if (!selectValue) {\n      if (optionIndexesInValue.length === 0) return '';\n      if (optionIndexesInValue.length === 1) return applyKey(allOptions[optionIndexesInValue[0]], labelKey);\n      return messages.multiple;\n    }\n\n    return undefined;\n  }, [labelKey, messages, optionIndexesInValue, allOptions, selectValue]);\n  var iconColor = normalizeColor(theme.select.icons.color || 'control', theme);\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onDown: onRequestOpen,\n    onUp: onRequestOpen\n  }, /*#__PURE__*/React.createElement(StyledSelectDropButton, {\n    ref: ref,\n    a11yTitle: a11yTitle,\n    id: id,\n    disabled: disabled === true || undefined,\n    dropAlign: dropAlign,\n    dropTarget: dropTarget,\n    open: open,\n    alignSelf: alignSelf,\n    focusIndicator: focusIndicator,\n    gridArea: gridArea,\n    margin: margin,\n    onOpen: onRequestOpen,\n    onClose: onRequestClose,\n    onClick: onClick,\n    dropContent: /*#__PURE__*/React.createElement(SelectContainer, {\n      clear: clear,\n      disabled: disabled,\n      disabledKey: disabledKey,\n      dropHeight: dropHeight,\n      emptySearchMessage: emptySearchMessage,\n      id: id,\n      labelKey: labelKey,\n      multiple: multiple,\n      name: name,\n      onChange: onSelectChange,\n      onKeyDown: onKeyDown,\n      onMore: onMore,\n      onSearch: onSearch,\n      options: optionsProp,\n      allOptions: allOptions,\n      optionIndexesInValue: optionIndexesInValue,\n      replace: replace,\n      searchPlaceholder: searchPlaceholder,\n      search: search,\n      setSearch: setSearch,\n      selected: selected,\n      value: value,\n      valueKey: valueKey\n    }, children) // StyledDropButton needs to know if the border should be shown\n    ,\n    callerPlain: plain,\n    plain: true // Button should be plain\n    ,\n    dropProps: dropProps,\n    theme: theme\n  }, /*#__PURE__*/React.createElement(Box, {\n    align: \"center\",\n    direction: \"row\",\n    justify: \"between\",\n    background: theme.select.background\n  }, /*#__PURE__*/React.createElement(Box, {\n    direction: \"row\",\n    flex: true,\n    basis: \"auto\"\n  }, selectValue ? /*#__PURE__*/React.createElement(React.Fragment, null, selectValue, /*#__PURE__*/React.createElement(HiddenInput, {\n    type: \"text\",\n    id: id ? id + \"__input\" : undefined,\n    value: inputValue,\n    ref: inputRef,\n    readOnly: true\n  })) : /*#__PURE__*/React.createElement(SelectTextInput, _extends({\n    a11yTitle: a11yTitle && \"\" + a11yTitle + (value && typeof value === 'string' ? \", \" + value : '') // When Select is disabled, we want to show a default cursor\n    // but not have disabled styling come from TextInput\n    // Disabled can be a bool or an array of options to disable.\n    // We only want to disable the TextInput if the control\n    // button should be disabled which occurs when disabled\n    // equals true.\n    ,\n    defaultCursor: disabled === true || undefined,\n    focusIndicator: false,\n    id: id ? id + \"__input\" : undefined,\n    name: name,\n    ref: inputRef\n  }, rest, {\n    tabIndex: \"-1\",\n    type: \"text\",\n    placeholder: placeholder,\n    plain: true,\n    readOnly: true,\n    value: inputValue,\n    size: size,\n    theme: theme\n  }))), SelectIcon && /*#__PURE__*/React.createElement(Box, {\n    margin: theme.select.icons.margin,\n    flex: false,\n    style: {\n      minWidth: 'auto'\n    }\n  }, /*#__PURE__*/isValidElement(SelectIcon) ? SelectIcon : /*#__PURE__*/React.createElement(SelectIcon, {\n    color: iconColor,\n    size: size\n  })))));\n});\nSelect.defaultProps = _extends({}, defaultProps);\nSelect.displayName = 'Select';\nvar SelectDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line global-require\n  SelectDoc = require('./doc').doc(Select);\n}\n\nvar SelectWrapper = SelectDoc || Select;\nexport { SelectWrapper as Select };","import React, { useState } from 'react'; // When not a descendant of a Form, FormContext still provides a basic\n// useFormInput. It doesn't do anything for components like TextInput.\n// But, it does store the value for components like CheckBox or Select\n// where the grommet component needs to know the value in order to\n// render custom visuals.\n\nvar useFormInput = function useFormInput(_, valueProp, initialValue) {\n  var _useState = useState(valueProp !== undefined ? valueProp : initialValue),\n      value = _useState[0],\n      setValue = _useState[1];\n\n  return [valueProp !== undefined ? valueProp : value, function (nextValue) {\n    if (initialValue !== undefined) setValue(nextValue);\n  }];\n};\n\nvar useFormField = function useFormField(_ref) {\n  var error = _ref.error,\n      info = _ref.info;\n  return {\n    error: error,\n    info: info\n  };\n};\n\nexport var FormContext = /*#__PURE__*/React.createContext({\n  useFormField: useFormField,\n  useFormInput: useFormInput\n});"],"sourceRoot":""}